<!DOCTYPE html>
<html data-init="no-js">
<head>
<meta charset="UTF-8" />
<title>The Claim</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!--

SugarCube (v2.30.0): A free (gratis and libre) story format.

Copyright © 2013–2019 Thomas Michael Edwards <thomasmedwards@gmail.com>.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

-->
<script id="script-libraries" type="text/javascript">
if(document.head&&document.addEventListener&&document.querySelector&&Object.create&&Object.freeze&&JSON){document.documentElement.setAttribute("data-init", "loading");
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
if("document" in self){if(!("classList" in document.createElement("_"))){(function(j){"use strict";if(!("Element" in j)){return}var a="classList",f="prototype",m=j.Element[f],b=Object,k=String[f].trim||function(){return this.replace(/^\s+|\s+$/g,"")},c=Array[f].indexOf||function(q){var p=0,o=this.length;for(;p<o;p++){if(p in this&&this[p]===q){return p}}return -1},n=function(o,p){this.name=o;this.code=DOMException[o];this.message=p},g=function(p,o){if(o===""){throw new n("SYNTAX_ERR","An invalid or illegal string was specified")}if(/\s/.test(o)){throw new n("INVALID_CHARACTER_ERR","String contains an invalid character")}return c.call(p,o)},d=function(s){var r=k.call(s.getAttribute("class")||""),q=r?r.split(/\s+/):[],p=0,o=q.length;for(;p<o;p++){this.push(q[p])}this._updateClassName=function(){s.setAttribute("class",this.toString())}},e=d[f]=[],i=function(){return new d(this)};n[f]=Error[f];e.item=function(o){return this[o]||null};e.contains=function(o){o+="";return g(this,o)!==-1};e.add=function(){var s=arguments,r=0,p=s.length,q,o=false;do{q=s[r]+"";if(g(this,q)===-1){this.push(q);o=true}}while(++r<p);if(o){this._updateClassName()}};e.remove=function(){var t=arguments,s=0,p=t.length,r,o=false,q;do{r=t[s]+"";q=g(this,r);while(q!==-1){this.splice(q,1);o=true;q=g(this,r)}}while(++s<p);if(o){this._updateClassName()}};e.toggle=function(p,q){p+="";var o=this.contains(p),r=o?q!==true&&"remove":q!==false&&"add";if(r){this[r](p)}if(q===true||q===false){return q}else{return !o}};e.toString=function(){return this.join(" ")};if(b.defineProperty){var l={get:i,enumerable:true,configurable:true};try{b.defineProperty(m,a,l)}catch(h){if(h.number===-2146823252){l.enumerable=false;b.defineProperty(m,a,l)}}}else{if(b[f].__defineGetter__){m.__defineGetter__(a,i)}}}(self))}else{(function(){var b=document.createElement("_");b.classList.add("c1","c2");if(!b.classList.contains("c2")){var c=function(e){var d=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(h){var g,f=arguments.length;for(g=0;g<f;g++){h=arguments[g];d.call(this,h)}}};c("add");c("remove")}b.classList.toggle("c3",false);if(b.classList.contains("c3")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(d,e){if(1 in arguments&&!this.contains(d)===!e){return e}else{return a.call(this,d)}}}b=null}())}};
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/v4.5.13/LICENSE
 */
(function(t,r){"use strict";if(typeof define==="function"&&define.amd){define(r)}else if(typeof exports==="object"){module.exports=r()}else{t.returnExports=r()}})(this,function(){var t=Array;var r=t.prototype;var e=Object;var n=e.prototype;var i=Function;var a=i.prototype;var o=String;var f=o.prototype;var u=Number;var l=u.prototype;var s=r.slice;var c=r.splice;var v=r.push;var h=r.unshift;var p=r.concat;var y=r.join;var d=a.call;var g=a.apply;var w=Math.max;var b=Math.min;var T=n.toString;var m=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var D;var S=Function.prototype.toString,x=/^\s*class /,O=function isES6ClassFn(t){try{var r=S.call(t);var e=r.replace(/\/\/.*\n/g,"");var n=e.replace(/\/\*[.\s\S]*\*\//g,"");var i=n.replace(/\n/gm," ").replace(/ {2}/g," ");return x.test(i)}catch(a){return false}},E=function tryFunctionObject(t){try{if(O(t)){return false}S.call(t);return true}catch(r){return false}},j="[object Function]",I="[object GeneratorFunction]",D=function isCallable(t){if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(m){return E(t)}if(O(t)){return false}var r=T.call(t);return r===j||r===I};var M;var U=RegExp.prototype.exec,$=function tryRegexExec(t){try{U.call(t);return true}catch(r){return false}},F="[object RegExp]";M=function isRegex(t){if(typeof t!=="object"){return false}return m?$(t):T.call(t)===F};var N;var C=String.prototype.valueOf,k=function tryStringObject(t){try{C.call(t);return true}catch(r){return false}},A="[object String]";N=function isString(t){if(typeof t==="string"){return true}if(typeof t!=="object"){return false}return m?k(t):T.call(t)===A};var R=e.defineProperty&&function(){try{var t={};e.defineProperty(t,"x",{enumerable:false,value:t});for(var r in t){return false}return t.x===t}catch(n){return false}}();var P=function(t){var r;if(R){r=function(t,r,n,i){if(!i&&r in t){return}e.defineProperty(t,r,{configurable:true,enumerable:false,writable:true,value:n})}}else{r=function(t,r,e,n){if(!n&&r in t){return}t[r]=e}}return function defineProperties(e,n,i){for(var a in n){if(t.call(n,a)){r(e,a,n[a],i)}}}}(n.hasOwnProperty);var J=function isPrimitive(t){var r=typeof t;return t===null||r!=="object"&&r!=="function"};var Y=u.isNaN||function isActualNaN(t){return t!==t};var z={ToInteger:function ToInteger(t){var r=+t;if(Y(r)){r=0}else if(r!==0&&r!==1/0&&r!==-(1/0)){r=(r>0||-1)*Math.floor(Math.abs(r))}return r},ToPrimitive:function ToPrimitive(t){var r,e,n;if(J(t)){return t}e=t.valueOf;if(D(e)){r=e.call(t);if(J(r)){return r}}n=t.toString;if(D(n)){r=n.call(t);if(J(r)){return r}}throw new TypeError},ToObject:function(t){if(t==null){throw new TypeError("can't convert "+t+" to object")}return e(t)},ToUint32:function ToUint32(t){return t>>>0}};var Z=function Empty(){};P(a,{bind:function bind(t){var r=this;if(!D(r)){throw new TypeError("Function.prototype.bind called on incompatible "+r)}var n=s.call(arguments,1);var a;var o=function(){if(this instanceof a){var i=g.call(r,this,p.call(n,s.call(arguments)));if(e(i)===i){return i}return this}else{return g.call(r,t,p.call(n,s.call(arguments)))}};var f=w(0,r.length-n.length);var u=[];for(var l=0;l<f;l++){v.call(u,"$"+l)}a=i("binder","return function ("+y.call(u,",")+"){ return binder.apply(this, arguments); }")(o);if(r.prototype){Z.prototype=r.prototype;a.prototype=new Z;Z.prototype=null}return a}});var G=d.bind(n.hasOwnProperty);var H=d.bind(n.toString);var W=d.bind(s);var B=g.bind(s);if(typeof document==="object"&&document&&document.documentElement){try{W(document.documentElement.childNodes)}catch(X){var L=W;var q=B;W=function arraySliceIE(t){var r=[];var e=t.length;while(e-- >0){r[e]=t[e]}return q(r,L(arguments,1))};B=function arraySliceApplyIE(t,r){return q(W(t),r)}}}var K=d.bind(f.slice);var Q=d.bind(f.split);var V=d.bind(f.indexOf);var _=d.bind(v);var tt=d.bind(n.propertyIsEnumerable);var rt=d.bind(r.sort);var et=t.isArray||function isArray(t){return H(t)==="[object Array]"};var nt=[].unshift(0)!==1;P(r,{unshift:function(){h.apply(this,arguments);return this.length}},nt);P(t,{isArray:et});var it=e("a");var at=it[0]!=="a"||!(0 in it);var ot=function properlyBoxed(t){var r=true;var e=true;var n=false;if(t){try{t.call("foo",function(t,e,n){if(typeof n!=="object"){r=false}});t.call([1],function(){"use strict";e=typeof this==="string"},"x")}catch(i){n=true}}return!!t&&!n&&r&&e};P(r,{forEach:function forEach(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=-1;var i=z.ToUint32(e.length);var a;if(arguments.length>1){a=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.forEach callback must be a function")}while(++n<i){if(n in e){if(typeof a==="undefined"){t(e[n],n,r)}else{t.call(a,e[n],n,r)}}}}},!ot(r.forEach));P(r,{map:function map(r){var e=z.ToObject(this);var n=at&&N(this)?Q(this,""):e;var i=z.ToUint32(n.length);var a=t(i);var o;if(arguments.length>1){o=arguments[1]}if(!D(r)){throw new TypeError("Array.prototype.map callback must be a function")}for(var f=0;f<i;f++){if(f in n){if(typeof o==="undefined"){a[f]=r(n[f],f,e)}else{a[f]=r.call(o,n[f],f,e)}}}return a}},!ot(r.map));P(r,{filter:function filter(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i=[];var a;var o;if(arguments.length>1){o=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.filter callback must be a function")}for(var f=0;f<n;f++){if(f in e){a=e[f];if(typeof o==="undefined"?t(a,f,r):t.call(o,a,f,r)){_(i,a)}}}return i}},!ot(r.filter));P(r,{every:function every(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.every callback must be a function")}for(var a=0;a<n;a++){if(a in e&&!(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return false}}return true}},!ot(r.every));P(r,{some:function some(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.some callback must be a function")}for(var a=0;a<n;a++){if(a in e&&(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return true}}return false}},!ot(r.some));var ft=false;if(r.reduce){ft=typeof r.reduce.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduce:function reduce(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduce callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduce of empty array with no initial value")}var i=0;var a;if(arguments.length>=2){a=arguments[1]}else{do{if(i in e){a=e[i++];break}if(++i>=n){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;i<n;i++){if(i in e){a=t(a,e[i],i,r)}}return a}},!ft);var ut=false;if(r.reduceRight){ut=typeof r.reduceRight.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduceRight:function reduceRight(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduceRight callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduceRight of empty array with no initial value")}var i;var a=n-1;if(arguments.length>=2){i=arguments[1]}else{do{if(a in e){i=e[a--];break}if(--a<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(a<0){return i}do{if(a in e){i=t(i,e[a],a,r)}}while(a--);return i}},!ut);var lt=r.indexOf&&[0,1].indexOf(1,2)!==-1;P(r,{indexOf:function indexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=0;if(arguments.length>1){n=z.ToInteger(arguments[1])}n=n>=0?n:w(0,e+n);for(;n<e;n++){if(n in r&&r[n]===t){return n}}return-1}},lt);var st=r.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;P(r,{lastIndexOf:function lastIndexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=e-1;if(arguments.length>1){n=b(n,z.ToInteger(arguments[1]))}n=n>=0?n:e-Math.abs(n);for(;n>=0;n--){if(n in r&&t===r[n]){return n}}return-1}},st);var ct=function(){var t=[1,2];var r=t.splice();return t.length===2&&et(r)&&r.length===0}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}else{return c.apply(this,arguments)}}},!ct);var vt=function(){var t={};r.splice.call(t,0,0,1);return t.length===1}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}var e=arguments;this.length=w(z.ToInteger(this.length),0);if(arguments.length>0&&typeof r!=="number"){e=W(arguments);if(e.length<2){_(e,this.length-t)}else{e[1]=z.ToInteger(r)}}return c.apply(this,e)}},!vt);var ht=function(){var r=new t(1e5);r[8]="x";r.splice(1,1);return r.indexOf("x")===7}();var pt=function(){var t=256;var r=[];r[t]="a";r.splice(t+1,0,"b");return r[t]==="a"}();P(r,{splice:function splice(t,r){var e=z.ToObject(this);var n=[];var i=z.ToUint32(e.length);var a=z.ToInteger(t);var f=a<0?w(i+a,0):b(a,i);var u=b(w(z.ToInteger(r),0),i-f);var l=0;var s;while(l<u){s=o(f+l);if(G(e,s)){n[l]=e[s]}l+=1}var c=W(arguments,2);var v=c.length;var h;if(v<u){l=f;var p=i-u;while(l<p){s=o(l+u);h=o(l+v);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l+=1}l=i;var y=i-u+v;while(l>y){delete e[l-1];l-=1}}else if(v>u){l=i-u;while(l>f){s=o(l+u-1);h=o(l+v-1);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l-=1}}l=f;for(var d=0;d<c.length;++d){e[l]=c[d];l+=1}e.length=i-u+v;return n}},!ht||!pt);var yt=r.join;var dt;try{dt=Array.prototype.join.call("123",",")!=="1,2,3"}catch(X){dt=true}if(dt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(N(this)?Q(this,""):this,r)}},dt)}var gt=[1,2].join(undefined)!=="1,2";if(gt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(this,r)}},gt)}var wt=function push(t){var r=z.ToObject(this);var e=z.ToUint32(r.length);var n=0;while(n<arguments.length){r[e+n]=arguments[n];n+=1}r.length=e+n;return e+n};var bt=function(){var t={};var r=Array.prototype.push.call(t,undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:function push(t){if(et(this)){return v.apply(this,arguments)}return wt.apply(this,arguments)}},bt);var Tt=function(){var t=[];var r=t.push(undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:wt},Tt);P(r,{slice:function(t,r){var e=N(this)?Q(this,""):this;return B(e,arguments)}},at);var mt=function(){try{[1,2].sort(null)}catch(t){try{[1,2].sort({})}catch(r){return false}}return true}();var Dt=function(){try{[1,2].sort(/a/);return false}catch(t){}return true}();var St=function(){try{[1,2].sort(undefined);return true}catch(t){}return false}();P(r,{sort:function sort(t){if(typeof t==="undefined"){return rt(this)}if(!D(t)){throw new TypeError("Array.prototype.sort callback must be a function")}return rt(this,t)}},mt||!St||!Dt);var xt=!tt({toString:null},"toString");var Ot=tt(function(){},"prototype");var Et=!G("x","0");var jt=function(t){var r=t.constructor;return r&&r.prototype===t};var It={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true,$width:true,$height:true,$top:true,$localStorage:true};var Mt=function(){if(typeof window==="undefined"){return false}for(var t in window){try{if(!It["$"+t]&&G(window,t)&&window[t]!==null&&typeof window[t]==="object"){jt(window[t])}}catch(r){return true}}return false}();var Ut=function(t){if(typeof window==="undefined"||!Mt){return jt(t)}try{return jt(t)}catch(r){return false}};var $t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var Ft=$t.length;var Nt=function isArguments(t){return H(t)==="[object Arguments]"};var Ct=function isArguments(t){return t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&!et(t)&&D(t.callee)};var kt=Nt(arguments)?Nt:Ct;P(e,{keys:function keys(t){var r=D(t);var e=kt(t);var n=t!==null&&typeof t==="object";var i=n&&N(t);if(!n&&!r&&!e){throw new TypeError("Object.keys called on a non-object")}var a=[];var f=Ot&&r;if(i&&Et||e){for(var u=0;u<t.length;++u){_(a,o(u))}}if(!e){for(var l in t){if(!(f&&l==="prototype")&&G(t,l)){_(a,o(l))}}}if(xt){var s=Ut(t);for(var c=0;c<Ft;c++){var v=$t[c];if(!(s&&v==="constructor")&&G(t,v)){_(a,v)}}}return a}});var At=e.keys&&function(){return e.keys(arguments).length===2}(1,2);var Rt=e.keys&&function(){var t=e.keys(arguments);return arguments.length!==1||t.length!==1||t[0]!==1}(1);var Pt=e.keys;P(e,{keys:function keys(t){if(kt(t)){return Pt(W(t))}else{return Pt(t)}}},!At||Rt);var Jt=new Date(-0xc782b5b342b24).getUTCMonth()!==0;var Yt=new Date(-0x55d318d56a724);var zt=new Date(14496624e5);var Zt=Yt.toUTCString()!=="Mon, 01 Jan -45875 11:59:59 GMT";var Gt;var Ht;var Wt=Yt.getTimezoneOffset();if(Wt<-720){Gt=Yt.toDateString()!=="Tue Jan 02 -45875";Ht=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}else{Gt=Yt.toDateString()!=="Mon Jan 01 -45875";Ht=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}var Bt=d.bind(Date.prototype.getFullYear);var Xt=d.bind(Date.prototype.getMonth);var Lt=d.bind(Date.prototype.getDate);var qt=d.bind(Date.prototype.getUTCFullYear);var Kt=d.bind(Date.prototype.getUTCMonth);var Qt=d.bind(Date.prototype.getUTCDate);var Vt=d.bind(Date.prototype.getUTCDay);var _t=d.bind(Date.prototype.getUTCHours);var tr=d.bind(Date.prototype.getUTCMinutes);var rr=d.bind(Date.prototype.getUTCSeconds);var er=d.bind(Date.prototype.getUTCMilliseconds);var nr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var ir=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var ar=function daysInMonth(t,r){return Lt(new Date(r,t,0))};P(Date.prototype,{getFullYear:function getFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);if(t<0&&Xt(this)>11){return t+1}return t},getMonth:function getMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);if(t<0&&r>11){return 0}return r},getDate:function getDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);var e=Lt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e},getUTCFullYear:function getUTCFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);if(t<0&&Kt(this)>11){return t+1}return t},getUTCMonth:function getUTCMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);if(t<0&&r>11){return 0}return r},getUTCDate:function getUTCDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);var e=Qt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e}},Jt);P(Date.prototype,{toUTCString:function toUTCString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Vt(this);var r=Qt(this);var e=Kt(this);var n=qt(this);var i=_t(this);var a=tr(this);var o=rr(this);return nr[t]+", "+(r<10?"0"+r:r)+" "+ir[e]+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"}},Jt||Zt);P(Date.prototype,{toDateString:function toDateString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n}},Jt||Gt);if(Jt||Ht){Date.prototype.toString=function toString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();var i=this.getHours();var a=this.getMinutes();var o=this.getSeconds();var f=this.getTimezoneOffset();var u=Math.floor(Math.abs(f)/60);var l=Math.floor(Math.abs(f)%60);return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"+(f>0?"-":"+")+(u<10?"0"+u:u)+(l<10?"0"+l:l)};if(R){e.defineProperty(Date.prototype,"toString",{configurable:true,enumerable:false,writable:true})}}var or=-621987552e5;var fr="-000001";var ur=Date.prototype.toISOString&&new Date(or).toISOString().indexOf(fr)===-1;var lr=Date.prototype.toISOString&&new Date(-1).toISOString()!=="1969-12-31T23:59:59.999Z";var sr=d.bind(Date.prototype.getTime);P(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(sr(this))){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}var t=qt(this);var r=Kt(this);t+=Math.floor(r/12);r=(r%12+12)%12;var e=[r+1,Qt(this),_t(this),tr(this),rr(this)];t=(t<0?"-":t>9999?"+":"")+K("00000"+Math.abs(t),0<=t&&t<=9999?-4:-6);for(var n=0;n<e.length;++n){e[n]=K("00"+e[n],-2)}return t+"-"+W(e,0,2).join("-")+"T"+W(e,2).join(":")+"."+K("000"+er(this),-3)+"Z"}},ur||lr);var cr=function(){try{return Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(or).toJSON().indexOf(fr)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(t){return false}}();if(!cr){Date.prototype.toJSON=function toJSON(t){var r=e(this);var n=z.ToPrimitive(r);if(typeof n==="number"&&!isFinite(n)){return null}var i=r.toISOString;if(!D(i)){throw new TypeError("toISOString property is not callable")}return i.call(r)}}var vr=Date.parse("+033658-09-27T01:46:40.000Z")===1e15;var hr=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));var pr=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(pr||hr||!vr){var yr=Math.pow(2,31)-1;var dr=Y(new Date(1970,0,1,0,0,0,yr+1).getTime());Date=function(t){var r=function Date(e,n,i,a,f,u,l){var s=arguments.length;var c;if(this instanceof t){var v=u;var h=l;if(dr&&s>=7&&l>yr){var p=Math.floor(l/yr)*yr;var y=Math.floor(p/1e3);v+=y;h-=y*1e3}c=s===1&&o(e)===e?new t(r.parse(e)):s>=7?new t(e,n,i,a,f,v,h):s>=6?new t(e,n,i,a,f,v):s>=5?new t(e,n,i,a,f):s>=4?new t(e,n,i,a):s>=3?new t(e,n,i):s>=2?new t(e,n):s>=1?new t(e instanceof t?+e:e):new t}else{c=t.apply(this,arguments)}if(!J(c)){P(c,{constructor:r},true)}return c};var e=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:(\\.\\d{1,}))?"+")?"+"("+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");var n=[0,31,59,90,120,151,181,212,243,273,304,334,365];var i=function dayFromMonth(t,r){var e=r>1?1:0;return n[r]+Math.floor((t-1969+e)/4)-Math.floor((t-1901+e)/100)+Math.floor((t-1601+e)/400)+365*(t-1970)};var a=function toUTC(r){var e=0;var n=r;if(dr&&n>yr){var i=Math.floor(n/yr)*yr;var a=Math.floor(i/1e3);e+=a;n-=a*1e3}return u(new t(1970,0,1,0,0,e,n))};for(var f in t){if(G(t,f)){r[f]=t[f]}}P(r,{now:t.now,UTC:t.UTC},true);r.prototype=t.prototype;P(r.prototype,{constructor:r},true);var l=function parse(r){var n=e.exec(r);if(n){var o=u(n[1]),f=u(n[2]||1)-1,l=u(n[3]||1)-1,s=u(n[4]||0),c=u(n[5]||0),v=u(n[6]||0),h=Math.floor(u(n[7]||0)*1e3),p=Boolean(n[4]&&!n[8]),y=n[9]==="-"?1:-1,d=u(n[10]||0),g=u(n[11]||0),w;var b=c>0||v>0||h>0;if(s<(b?24:25)&&c<60&&v<60&&h<1e3&&f>-1&&f<12&&d<24&&g<60&&l>-1&&l<i(o,f+1)-i(o,f)){w=((i(o,f)+l)*24+s+d*y)*60;w=((w+c+g*y)*60+v)*1e3+h;if(p){w=a(w)}if(-864e13<=w&&w<=864e13){return w}}return NaN}return t.parse.apply(this,arguments)};P(r,{parse:l});return r}(Date)}if(!Date.now){Date.now=function now(){return(new Date).getTime()}}var gr=l.toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||(1000000000000000128).toFixed(0)!=="1000000000000000128");var wr={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(t,r){var e=-1;var n=r;while(++e<wr.size){n+=t*wr.data[e];wr.data[e]=n%wr.base;n=Math.floor(n/wr.base)}},divide:function divide(t){var r=wr.size;var e=0;while(--r>=0){e+=wr.data[r];wr.data[r]=Math.floor(e/t);e=e%t*wr.base}},numToString:function numToString(){var t=wr.size;var r="";while(--t>=0){if(r!==""||t===0||wr.data[t]!==0){var e=o(wr.data[t]);if(r===""){r=e}else{r+=K("0000000",0,7-e.length)+e}}}return r},pow:function pow(t,r,e){return r===0?e:r%2===1?pow(t,r-1,e*t):pow(t*t,r/2,e)},log:function log(t){var r=0;var e=t;while(e>=4096){r+=12;e/=4096}while(e>=2){r+=1;e/=2}return r}};var br=function toFixed(t){var r,e,n,i,a,f,l,s;r=u(t);r=Y(r)?0:Math.floor(r);if(r<0||r>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}e=u(this);if(Y(e)){return"NaN"}if(e<=-1e21||e>=1e21){return o(e)}n="";if(e<0){n="-";e=-e}i="0";if(e>1e-21){a=wr.log(e*wr.pow(2,69,1))-69;f=a<0?e*wr.pow(2,-a,1):e/wr.pow(2,a,1);f*=4503599627370496;a=52-a;if(a>0){wr.multiply(0,f);l=r;while(l>=7){wr.multiply(1e7,0);l-=7}wr.multiply(wr.pow(10,l,1),0);l=a-1;while(l>=23){wr.divide(1<<23);l-=23}wr.divide(1<<l);wr.multiply(1,1);wr.divide(2);i=wr.numToString()}else{wr.multiply(0,f);wr.multiply(1<<-a,0);i=wr.numToString()+K("0.00000000000000000000",2,2+r)}}if(r>0){s=i.length;if(s<=r){i=n+K("0.0000000000000000000",0,r-s+2)+i}else{i=n+K(i,0,s-r)+"."+K(i,s-r)}}else{i=n+i}return i};P(l,{toFixed:br},gr);var Tr=function(){try{return 1..toPrecision(undefined)==="1"}catch(t){return true}}();var mr=l.toPrecision;P(l,{toPrecision:function toPrecision(t){return typeof t==="undefined"?mr.call(this):mr.call(this,t)}},Tr);if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var t=typeof/()??/.exec("")[1]==="undefined";var r=Math.pow(2,32)-1;f.split=function(e,n){var i=String(this);if(typeof e==="undefined"&&n===0){return[]}if(!M(e)){return Q(this,e,n)}var a=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,u,l,s,c;var h=new RegExp(e.source,o+"g");if(!t){u=new RegExp("^"+h.source+"$(?!\\s)",o)}var p=typeof n==="undefined"?r:z.ToUint32(n);l=h.exec(i);while(l){s=l.index+l[0].length;if(s>f){_(a,K(i,f,l.index));if(!t&&l.length>1){l[0].replace(u,function(){for(var t=1;t<arguments.length-2;t++){if(typeof arguments[t]==="undefined"){l[t]=void 0}}})}if(l.length>1&&l.index<i.length){v.apply(a,W(l,1))}c=l[0].length;f=s;if(a.length>=p){break}}if(h.lastIndex===l.index){h.lastIndex++}l=h.exec(i)}if(f===i.length){if(c||!h.test("")){_(a,"")}}else{_(a,K(i,f))}return a.length>p?W(a,0,p):a}})()}else if("0".split(void 0,0).length){f.split=function split(t,r){if(typeof t==="undefined"&&r===0){return[]}return Q(this,t,r)}}var Dr=f.replace;var Sr=function(){var t=[];"x".replace(/x(.)?/g,function(r,e){_(t,e)});return t.length===1&&typeof t[0]==="undefined"}();if(!Sr){f.replace=function replace(t,r){var e=D(r);var n=M(t)&&/\)[*?]/.test(t.source);if(!e||!n){return Dr.call(this,t,r)}else{var i=function(e){var n=arguments.length;var i=t.lastIndex;t.lastIndex=0;var a=t.exec(e)||[];t.lastIndex=i;_(a,arguments[n-2],arguments[n-1]);return r.apply(this,a)};return Dr.call(this,t,i)}}}var xr=f.substr;var Or="".substr&&"0b".substr(-1)!=="b";P(f,{substr:function substr(t,r){var e=t;if(t<0){e=w(this.length+t,0)}return xr.call(this,e,r)}},Or);var Er="\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003"+"\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028"+"\u2029\ufeff";var jr="\u200b";var Ir="["+Er+"]";var Mr=new RegExp("^"+Ir+Ir+"*");var Ur=new RegExp(Ir+Ir+"*$");var $r=f.trim&&(Er.trim()||!jr.trim());P(f,{trim:function trim(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}return o(this).replace(Mr,"").replace(Ur,"")}},$r);var Fr=d.bind(String.prototype.trim);var Nr=f.lastIndexOf&&"abc\u3042\u3044".lastIndexOf("\u3042\u3044",2)!==-1;P(f,{lastIndexOf:function lastIndexOf(t){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var r=o(this);var e=o(t);var n=arguments.length>1?u(arguments[1]):NaN;var i=Y(n)?Infinity:z.ToInteger(n);var a=b(w(i,0),r.length);var f=e.length;var l=a+f;while(l>0){l=w(0,l-f);var s=V(K(r,l,a+f),e);if(s!==-1){return l+s}}return-1}},Nr);var Cr=f.lastIndexOf;P(f,{lastIndexOf:function lastIndexOf(t){return Cr.apply(this,arguments)}},f.lastIndexOf.length!==1);if(parseInt(Er+"08")!==8||parseInt(Er+"0x16")!==22){parseInt=function(t){var r=/^[-+]?0[xX]/;return function parseInt(e,n){if(typeof e==="symbol"){""+e}var i=Fr(String(e));var a=u(n)||(r.test(i)?16:10);return t(i,a)}}(parseInt)}if(1/parseFloat("-0")!==-Infinity){parseFloat=function(t){return function parseFloat(r){var e=Fr(String(r));var n=t(e);return n===0&&K(e,0,1)==="-"?-0:n}}(parseFloat)}if(String(new RangeError("test"))!=="RangeError: test"){var kr=function toString(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var t=this.name;if(typeof t==="undefined"){t="Error"}else if(typeof t!=="string"){t=o(t)}var r=this.message;if(typeof r==="undefined"){r=""}else if(typeof r!=="string"){r=o(r)}if(!t){return r}if(!r){return t}return t+": "+r};Error.prototype.toString=kr}if(R){var Ar=function(t,r){if(tt(t,r)){var e=Object.getOwnPropertyDescriptor(t,r);if(e.configurable){e.enumerable=false;Object.defineProperty(t,r,e)}}};Ar(Error.prototype,"message");if(Error.prototype.message!==""){Error.prototype.message=""}Ar(Error.prototype,"name")}if(String(/a/gim)!=="/a/gim"){var Rr=function toString(){var t="/"+this.source+"/";if(this.global){t+="g"}if(this.ignoreCase){t+="i"}if(this.multiline){t+="m"}return t};RegExp.prototype.toString=Rr}});
//# sourceMappingURL=es5-shim.map
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.4/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=Function.call.bind(Function.apply);var t=Function.call.bind(Function.call);var r=Array.isArray;var n=Object.keys;var o=function notThunker(t){return function notThunk(){return!e(t,this,arguments)}};var i=function(e){try{e();return false}catch(t){return true}};var a=function valueOrFalseIfThrows(e){try{return e()}catch(t){return false}};var u=o(i);var f=function(){return!i(function(){return Object.defineProperty({},"x",{get:function(){}})})};var s=!!Object.defineProperty&&f();var c=function foo(){}.name==="foo";var l=Function.call.bind(Array.prototype.forEach);var p=Function.call.bind(Array.prototype.reduce);var v=Function.call.bind(Array.prototype.filter);var y=Function.call.bind(Array.prototype.some);var h=function(e,t,r,n){if(!n&&t in e){return}if(s){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var b=function(e,t,r){l(n(t),function(n){var o=t[n];h(e,n,o,!!r)})};var g=Function.call.bind(Object.prototype.toString);var d=typeof/abc/==="function"?function IsCallableSlow(e){return typeof e==="function"&&g(e)==="[object Function]"}:function IsCallableFast(e){return typeof e==="function"};var m={getter:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function getKey(){return e[t]},set:function setKey(r){e[t]=r}})},redefine:function(e,t,r){if(s){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},defineByDescriptor:function(e,t,r){if(s){Object.defineProperty(e,t,r)}else if("value"in r){e[t]=r.value}},preserveToString:function(e,t){if(t&&d(t.toString)){h(e,"toString",t.toString.bind(t),true)}}};var O=Object.create||function(e,t){var r=function Prototype(){};r.prototype=e;var o=new r;if(typeof t!=="undefined"){n(t).forEach(function(e){m.defineByDescriptor(o,e,t[e])})}return o};var w=function(e,t){if(!Object.setPrototypeOf){return false}return a(function(){var r=function Subclass(t){var r=new e(t);Object.setPrototypeOf(r,Subclass.prototype);return r};Object.setPrototypeOf(r,e);r.prototype=O(e.prototype,{constructor:{value:r}});return t(r)})};var j=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var S=j();var T=S.isFinite;var I=Function.call.bind(String.prototype.indexOf);var E=Function.apply.bind(Array.prototype.indexOf);var P=Function.call.bind(Array.prototype.concat);var C=Function.call.bind(String.prototype.slice);var M=Function.call.bind(Array.prototype.push);var x=Function.apply.bind(Array.prototype.push);var N=Function.call.bind(Array.prototype.shift);var A=Math.max;var R=Math.min;var _=Math.floor;var k=Math.abs;var L=Math.exp;var F=Math.log;var D=Math.sqrt;var z=Function.call.bind(Object.prototype.hasOwnProperty);var q;var W=function(){};var G=S.Map;var H=G&&G.prototype["delete"];var V=G&&G.prototype.get;var B=G&&G.prototype.has;var U=G&&G.prototype.set;var $=S.Symbol||{};var J=$.species||"@@species";var X=Number.isNaN||function isNaN(e){return e!==e};var K=Number.isFinite||function isFinite(e){return typeof e==="number"&&T(e)};var Z=d(Math.sign)?Math.sign:function sign(e){var t=Number(e);if(t===0){return t}if(X(t)){return t}return t<0?-1:1};var Y=function log1p(e){var t=Number(e);if(t<-1||X(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(F(1+t)/(1+t-1))};var Q=function isArguments(e){return g(e)==="[object Arguments]"};var ee=function isArguments(e){return e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&g(e)!=="[object Array]"&&g(e.callee)==="[object Function]"};var te=Q(arguments)?Q:ee;var re={primitive:function(e){return e===null||typeof e!=="function"&&typeof e!=="object"},string:function(e){return g(e)==="[object String]"},regex:function(e){return g(e)==="[object RegExp]"},symbol:function(e){return typeof S.Symbol==="function"&&typeof e==="symbol"}};var ne=function overrideNative(e,t,r){var n=e[t];h(e,t,r,true);m.preserveToString(e[t],n)};var oe=typeof $==="function"&&typeof $["for"]==="function"&&re.symbol($());var ie=re.symbol($.iterator)?$.iterator:"_es6-shim iterator_";if(S.Set&&typeof(new S.Set)["@@iterator"]==="function"){ie="@@iterator"}if(!S.Reflect){h(S,"Reflect",{},true)}var ae=S.Reflect;var ue=String;var fe=typeof document==="undefined"||!document?null:document.all;var se=fe==null?function isNullOrUndefined(e){return e==null}:function isNullOrUndefinedAndNotDocumentAll(e){return e==null&&e!==fe};var ce={Call:function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!ce.IsCallable(t)){throw new TypeError(t+" is not a function")}return e(t,r,n)},RequireObjectCoercible:function(e,t){if(se(e)){throw new TypeError(t||"Cannot call method on "+e)}return e},TypeIsObject:function(e){if(e===void 0||e===null||e===true||e===false){return false}return typeof e==="function"||typeof e==="object"||e===fe},ToObject:function(e,t){return Object(ce.RequireObjectCoercible(e,t))},IsCallable:d,IsConstructor:function(e){return ce.IsCallable(e)},ToInt32:function(e){return ce.ToNumber(e)>>0},ToUint32:function(e){return ce.ToNumber(e)>>>0},ToNumber:function(e){if(g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=ce.ToNumber(e);if(X(t)){return 0}if(t===0||!K(t)){return t}return(t>0?1:-1)*_(k(t))},ToLength:function(e){var t=ce.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return X(e)&&X(t)},SameValueZero:function(e,t){return e===t||X(e)&&X(t)},IsIterable:function(e){return ce.TypeIsObject(e)&&(typeof e[ie]!=="undefined"||te(e))},GetIterator:function(e){if(te(e)){return new q(e,"value")}var t=ce.GetMethod(e,ie);if(!ce.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=ce.Call(t,e);if(!ce.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},GetMethod:function(e,t){var r=ce.ToObject(e)[t];if(se(r)){return void 0}if(!ce.IsCallable(r)){throw new TypeError("Method not callable: "+t)}return r},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=ce.GetMethod(e,"return");if(r===void 0){return}var n,o;try{n=ce.Call(r,e)}catch(i){o=i}if(t){return}if(o){throw o}if(!ce.TypeIsObject(n)){throw new TypeError("Iterator's return method returned a non-object.")}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ce.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},IteratorStep:function(e){var t=ce.IteratorNext(e);var r=ce.IteratorComplete(t);return r?false:t},Construct:function(e,t,r,n){var o=typeof r==="undefined"?e:r;if(!n&&ae.construct){return ae.construct(e,t,o)}var i=o.prototype;if(!ce.TypeIsObject(i)){i=Object.prototype}var a=O(i);var u=ce.Call(e,a,t);return ce.TypeIsObject(u)?u:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(r===void 0){return t}if(!ce.TypeIsObject(r)){throw new TypeError("Bad constructor")}var n=r[J];if(se(n)){return t}if(!ce.IsConstructor(n)){throw new TypeError("Bad @@species")}return n},CreateHTML:function(e,t,r,n){var o=ce.ToString(e);var i="<"+t;if(r!==""){var a=ce.ToString(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var f=i+">";var s=f+o;return s+"</"+t+">"},IsRegExp:function IsRegExp(e){if(!ce.TypeIsObject(e)){return false}var t=e[$.match];if(typeof t!=="undefined"){return!!t}return re.regex(e)},ToString:function ToString(e){return ue(e)}};if(s&&oe){var le=function defineWellKnownSymbol(e){if(re.symbol($[e])){return $[e]}var t=$["for"]("Symbol."+e);Object.defineProperty($,e,{configurable:false,enumerable:false,writable:false,value:t});return t};if(!re.symbol($.search)){var pe=le("search");var ve=String.prototype.search;h(RegExp.prototype,pe,function search(e){return ce.Call(ve,e,[this])});var ye=function search(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,pe);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(ve,t,[ce.ToString(e)])};ne(String.prototype,"search",ye)}if(!re.symbol($.replace)){var he=le("replace");var be=String.prototype.replace;h(RegExp.prototype,he,function replace(e,t){return ce.Call(be,e,[this,t])});var ge=function replace(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,he);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(be,r,[ce.ToString(e),t])};ne(String.prototype,"replace",ge)}if(!re.symbol($.split)){var de=le("split");var me=String.prototype.split;h(RegExp.prototype,de,function split(e,t){return ce.Call(me,e,[this,t])});var Oe=function split(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,de);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(me,r,[ce.ToString(e),t])};ne(String.prototype,"split",Oe)}var we=re.symbol($.match);var je=we&&function(){var e={};e[$.match]=function(){return 42};return"a".match(e)!==42}();if(!we||je){var Se=le("match");var Te=String.prototype.match;h(RegExp.prototype,Se,function match(e){return ce.Call(Te,e,[this])});var Ie=function match(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,Se);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(Te,t,[ce.ToString(e)])};ne(String.prototype,"match",Ie)}}var Ee=function wrapConstructor(e,t,r){m.preserveToString(t,e);if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}if(s){l(Object.getOwnPropertyNames(e),function(n){if(n in W||r[n]){return}m.proxy(e,n,t)})}else{l(Object.keys(e),function(n){if(n in W||r[n]){return}t[n]=e[n]})}t.prototype=e.prototype;m.redefine(e.prototype,"constructor",t)};var Pe=function(){return this};var Ce=function(e){if(s&&!z(e,J)){m.getter(e,J,Pe)}};var Me=function(e,t){var r=t||function iterator(){return this};h(e,ie,r);if(!e[ie]&&re.symbol(ie)){e[ie]=r}};var xe=function createDataProperty(e,t,r){if(s){Object.defineProperty(e,t,{configurable:true,enumerable:true,writable:true,value:r})}else{e[t]=r}};var Ne=function createDataPropertyOrThrow(e,t,r){xe(e,t,r);if(!ce.SameValue(e[t],r)){throw new TypeError("property is nonconfigurable")}};var Ae=function(e,t,r,n){if(!ce.TypeIsObject(e)){throw new TypeError("Constructor requires `new`: "+t.name)}var o=t.prototype;if(!ce.TypeIsObject(o)){o=r}var i=O(o);for(var a in n){if(z(n,a)){var u=n[a];h(i,a,u,true)}}return i};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var Re=String.fromCodePoint;ne(String,"fromCodePoint",function fromCodePoint(e){return ce.Call(Re,this,arguments)})}var _e={fromCodePoint:function fromCodePoint(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!ce.SameValue(r,ce.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){M(t,String.fromCharCode(r))}else{r-=65536;M(t,String.fromCharCode((r>>10)+55296));M(t,String.fromCharCode(r%1024+56320))}}return t.join("")},raw:function raw(e){var t=ce.ToObject(e,"bad callSite");var r=ce.ToObject(t.raw,"bad raw value");var n=r.length;var o=ce.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,f,s,c;while(a<o){u=ce.ToString(a);s=ce.ToString(r[u]);M(i,s);if(a+1>=o){break}f=a+1<arguments.length?arguments[a+1]:"";c=ce.ToString(f);M(i,c);a+=1}return i.join("")}};if(String.raw&&String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){ne(String,"raw",_e.raw)}b(String,_e);var ke=function repeat(e,t){if(t<1){return""}if(t%2){return repeat(e,t-1)+e}var r=repeat(e,t/2);return r+r};var Le=Infinity;var Fe={repeat:function repeat(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);if(r<0||r>=Le){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return ke(t,r)},startsWith:function startsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=ce.ToString(e);var n;if(arguments.length>1){n=arguments[1]}var o=A(ce.ToInteger(n),0);return C(t,o,o+r.length)===r},endsWith:function endsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=ce.ToString(e);var n=t.length;var o;if(arguments.length>1){o=arguments[1]}var i=typeof o==="undefined"?n:ce.ToInteger(o);var a=R(A(i,0),n);return C(t,a-r.length,a)===r},includes:function includes(e){if(ce.IsRegExp(e)){throw new TypeError('"includes" does not accept a RegExp')}var t=ce.ToString(e);var r;if(arguments.length>1){r=arguments[1]}return I(this,t,r)!==-1},codePointAt:function codePointAt(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",Infinity)!==false){ne(String.prototype,"includes",Fe.includes)}if(String.prototype.startsWith&&String.prototype.endsWith){var De=i(function(){return"/a/".startsWith(/a/)});var ze=a(function(){return"abc".startsWith("a",Infinity)===false});if(!De||!ze){ne(String.prototype,"startsWith",Fe.startsWith);ne(String.prototype,"endsWith",Fe.endsWith)}}if(oe){var qe=a(function(){var e=/a/;e[$.match]=false;return"/a/".startsWith(e)});if(!qe){ne(String.prototype,"startsWith",Fe.startsWith)}var We=a(function(){var e=/a/;e[$.match]=false;return"/a/".endsWith(e)});if(!We){ne(String.prototype,"endsWith",Fe.endsWith)}var Ge=a(function(){var e=/a/;e[$.match]=false;return"/a/".includes(e)});if(!Ge){ne(String.prototype,"includes",Fe.includes)}}b(String.prototype,Fe);var He=["\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var Ve=new RegExp("(^["+He+"]+)|(["+He+"]+$)","g");var Be=function trim(){return ce.ToString(ce.RequireObjectCoercible(this)).replace(Ve,"")};var Ue=["\x85","\u200b","\ufffe"].join("");var $e=new RegExp("["+Ue+"]","g");var Je=/^[-+]0x[0-9a-f]+$/i;var Xe=Ue.trim().length!==Ue.length;h(String.prototype,"trim",Be,Xe);var Ke=function(e){return{value:e,done:arguments.length===0}};var Ze=function(e){ce.RequireObjectCoercible(e);this._s=ce.ToString(e);this._i=0};Ze.prototype.next=function(){var e=this._s;var t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return Ke()}var r=e.charCodeAt(t);var n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return Ke(e.substr(t,o))};Me(Ze.prototype);Me(String.prototype,function(){return new Ze(this)});var Ye={from:function from(e){var r=this;var n;if(arguments.length>1){n=arguments[1]}var o,i;if(typeof n==="undefined"){o=false}else{if(!ce.IsCallable(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){i=arguments[2]}o=true}var a=typeof(te(e)||ce.GetMethod(e,ie))!=="undefined";var u,f,s;if(a){f=ce.IsConstructor(r)?Object(new r):[];var c=ce.GetIterator(e);var l,p;s=0;while(true){l=ce.IteratorStep(c);if(l===false){break}p=l.value;try{if(o){p=typeof i==="undefined"?n(p,s):t(n,i,p,s)}f[s]=p}catch(v){ce.IteratorClose(c,true);throw v}s+=1}u=s}else{var y=ce.ToObject(e);u=ce.ToLength(y.length);f=ce.IsConstructor(r)?Object(new r(u)):new Array(u);var h;for(s=0;s<u;++s){h=y[s];if(o){h=typeof i==="undefined"?n(h,s):t(n,i,h,s)}Ne(f,s,h)}}f.length=u;return f},of:function of(){var e=arguments.length;var t=this;var n=r(t)||!ce.IsCallable(t)?new Array(e):ce.Construct(t,[e]);for(var o=0;o<e;++o){Ne(n,o,arguments[o])}n.length=e;return n}};b(Array,Ye);Ce(Array);q=function(e,t){this.i=0;this.array=e;this.kind=t};b(q.prototype,{next:function(){var e=this.i;var t=this.array;if(!(this instanceof q)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=ce.ToLength(t.length);for(;e<r;e++){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return Ke(o)}}this.array=void 0;return Ke()}});Me(q.prototype);var Qe=Array.of===Ye.of||function(){var e=function Foo(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!Qe){ne(Array,"of",Ye.of)}var et={copyWithin:function copyWithin(e,t){var r=ce.ToObject(this);var n=ce.ToLength(r.length);var o=ce.ToInteger(e);var i=ce.ToInteger(t);var a=o<0?A(n+o,0):R(o,n);var u=i<0?A(n+i,0):R(i,n);var f;if(arguments.length>2){f=arguments[2]}var s=typeof f==="undefined"?n:ce.ToInteger(f);var c=s<0?A(n+s,0):R(s,n);var l=R(c-u,n-a);var p=1;if(u<a&&a<u+l){p=-1;u+=l-1;a+=l-1}while(l>0){if(u in r){r[a]=r[u]}else{delete r[a]}u+=p;a+=p;l-=1}return r},fill:function fill(e){var t;if(arguments.length>1){t=arguments[1]}var r;if(arguments.length>2){r=arguments[2]}var n=ce.ToObject(this);var o=ce.ToLength(n.length);t=ce.ToInteger(typeof t==="undefined"?0:t);r=ce.ToInteger(typeof r==="undefined"?o:r);var i=t<0?A(o+t,0):R(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function find(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0,a;i<n;i++){a=r[i];if(o){if(t(e,o,a,i,r)){return a}}else if(e(a,i,r)){return a}}},findIndex:function findIndex(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0;i<n;i++){if(o){if(t(e,o,r[i],i,r)){return i}}else if(e(r[i],i,r)){return i}}return-1},keys:function keys(){return new q(this,"key")},values:function values(){return new q(this,"value")},entries:function entries(){return new q(this,"entry")}};if(Array.prototype.keys&&!ce.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!ce.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ie]){b(Array.prototype,{values:Array.prototype[ie]});if(re.symbol($.unscopables)){Array.prototype[$.unscopables].values=true}}if(c&&Array.prototype.values&&Array.prototype.values.name!=="values"){var tt=Array.prototype.values;ne(Array.prototype,"values",function values(){return ce.Call(tt,this,arguments)});h(Array.prototype,ie,Array.prototype.values,true)}b(Array.prototype,et);if(1/[true].indexOf(true,-0)<0){h(Array.prototype,"indexOf",function indexOf(e){var t=E(this,arguments);if(t===0&&1/t<0){return 0}return t},true)}Me(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){Me(Object.getPrototypeOf([].values()))}var rt=function(){return a(function(){return Array.from({length:-1}).length===0})}();var nt=function(){var e=Array.from([0].entries());return e.length===1&&r(e[0])&&e[0][0]===0&&e[0][1]===0}();if(!rt||!nt){ne(Array,"from",Ye.from)}var ot=function(){return a(function(){return Array.from([0],void 0)})}();if(!ot){var it=Array.from;ne(Array,"from",function from(e){if(arguments.length>1&&typeof arguments[1]!=="undefined"){return ce.Call(it,this,arguments)}else{return t(it,this,e)}})}var at=-(Math.pow(2,32)-1);var ut=function(e,r){var n={length:at};n[r?(n.length>>>0)-1:0]=true;return a(function(){t(e,n,function(){throw new RangeError("should not reach here")},[]);return true})};if(!ut(Array.prototype.forEach)){var ft=Array.prototype.forEach;ne(Array.prototype,"forEach",function forEach(e){return ce.Call(ft,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.map)){var st=Array.prototype.map;ne(Array.prototype,"map",function map(e){return ce.Call(st,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.filter)){var ct=Array.prototype.filter;ne(Array.prototype,"filter",function filter(e){return ce.Call(ct,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.some)){var lt=Array.prototype.some;ne(Array.prototype,"some",function some(e){return ce.Call(lt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.every)){var pt=Array.prototype.every;ne(Array.prototype,"every",function every(e){return ce.Call(pt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduce)){var vt=Array.prototype.reduce;ne(Array.prototype,"reduce",function reduce(e){return ce.Call(vt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduceRight,true)){var yt=Array.prototype.reduceRight;ne(Array.prototype,"reduceRight",function reduceRight(e){return ce.Call(yt,this.length>=0?this:[],arguments)},true)}var ht=Number("0o10")!==8;var bt=Number("0b10")!==2;var gt=y(Ue,function(e){return Number(e+0+e)===0});if(ht||bt||gt){var dt=Number;var mt=/^0b[01]+$/i;var Ot=/^0o[0-7]+$/i;var wt=mt.test.bind(mt);var jt=Ot.test.bind(Ot);var St=function(e){var t;if(typeof e.valueOf==="function"){t=e.valueOf();if(re.primitive(t)){return t}}if(typeof e.toString==="function"){t=e.toString();if(re.primitive(t)){return t}}throw new TypeError("No default value")};var Tt=$e.test.bind($e);var It=Je.test.bind(Je);var Et=function(){var e=function Number(t){var r;if(arguments.length>0){r=re.primitive(t)?t:St(t,"number")}else{r=0}if(typeof r==="string"){r=ce.Call(Be,r);if(wt(r)){r=parseInt(C(r,2),2)}else if(jt(r)){r=parseInt(C(r,2),8)}else if(Tt(r)||It(r)){r=NaN}}var n=this;var o=a(function(){dt.prototype.valueOf.call(n);return true});if(n instanceof e&&!o){return new dt(r)}return dt(r)};return e}();Ee(dt,Et,{});b(Et,{NaN:dt.NaN,MAX_VALUE:dt.MAX_VALUE,MIN_VALUE:dt.MIN_VALUE,NEGATIVE_INFINITY:dt.NEGATIVE_INFINITY,POSITIVE_INFINITY:dt.POSITIVE_INFINITY});Number=Et;m.redefine(S,"Number",Et)}var Pt=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:Pt,MIN_SAFE_INTEGER:-Pt,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:K,isInteger:function isInteger(e){return K(e)&&ce.ToInteger(e)===e},isSafeInteger:function isSafeInteger(e){return Number.isInteger(e)&&k(e)<=Number.MAX_SAFE_INTEGER},isNaN:X});h(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt);if([,1].find(function(){return true})===1){ne(Array.prototype,"find",et.find)}if([,1].findIndex(function(){return true})!==0){ne(Array.prototype,"findIndex",et.findIndex)}var Ct=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var Mt=function ensureEnumerable(e,t){if(s&&Ct(e,t)){Object.defineProperty(e,t,{enumerable:false})}};var xt=function sliceArgs(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var Nt=function assignTo(e){return function assignToSource(t,r){t[r]=e[r];return t}};var At=function(e,t){var r=n(Object(t));var o;if(ce.IsCallable(Object.getOwnPropertySymbols)){o=v(Object.getOwnPropertySymbols(Object(t)),Ct(t))}return p(P(r,o||[]),Nt(t),e)};var Rt={assign:function(e,t){var r=ce.ToObject(e,"Cannot convert undefined or null to object");return p(ce.Call(xt,1,arguments),At,r)},is:function is(e,t){return ce.SameValue(e,t)}};var _t=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(_t){ne(Object,"assign",Rt.assign)}b(Object,Rt);if(s){var kt={setPrototypeOf:function(e,r){var n;var o=function(e,t){if(!ce.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||ce.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var i=function(e,r){o(e,r);t(n,e,r);return e};try{n=e.getOwnPropertyDescriptor(e.prototype,r).set;t(n,{},null)}catch(a){if(e.prototype!=={}[r]){return}n=function(e){this[r]=e};i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")};b(Object,kt)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf;var r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var Lt=!i(function(){return Object.keys("foo")});if(!Lt){var Ft=Object.keys;ne(Object,"keys",function keys(e){return Ft(ce.ToObject(e))});n=Object.keys}var Dt=i(function(){return Object.keys(/a/g)});if(Dt){var zt=Object.keys;ne(Object,"keys",function keys(e){if(re.regex(e)){var t=[];for(var r in e){if(z(e,r)){M(t,r)}}return t}return zt(e)});n=Object.keys}if(Object.getOwnPropertyNames){var qt=!i(function(){return Object.getOwnPropertyNames("foo")});if(!qt){var Wt=typeof window==="object"?Object.getOwnPropertyNames(window):[];var Gt=Object.getOwnPropertyNames;ne(Object,"getOwnPropertyNames",function getOwnPropertyNames(e){var t=ce.ToObject(e);if(g(t)==="[object Window]"){try{return Gt(t)}catch(r){return P([],Wt)}}return Gt(t)})}}if(Object.getOwnPropertyDescriptor){var Ht=!i(function(){return Object.getOwnPropertyDescriptor("foo","bar")});if(!Ht){var Vt=Object.getOwnPropertyDescriptor;ne(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(e,t){return Vt(ce.ToObject(e),t)})}}if(Object.seal){var Bt=!i(function(){return Object.seal("foo")});if(!Bt){var Ut=Object.seal;ne(Object,"seal",function seal(e){if(!ce.TypeIsObject(e)){return e}return Ut(e)})}}if(Object.isSealed){var $t=!i(function(){return Object.isSealed("foo")});if(!$t){var Jt=Object.isSealed;ne(Object,"isSealed",function isSealed(e){if(!ce.TypeIsObject(e)){return true}return Jt(e)})}}if(Object.freeze){var Xt=!i(function(){return Object.freeze("foo")});if(!Xt){var Kt=Object.freeze;ne(Object,"freeze",function freeze(e){if(!ce.TypeIsObject(e)){return e}return Kt(e)})}}if(Object.isFrozen){var Zt=!i(function(){return Object.isFrozen("foo")});if(!Zt){var Yt=Object.isFrozen;ne(Object,"isFrozen",function isFrozen(e){if(!ce.TypeIsObject(e)){return true}return Yt(e)})}}if(Object.preventExtensions){var Qt=!i(function(){return Object.preventExtensions("foo")});if(!Qt){var er=Object.preventExtensions;ne(Object,"preventExtensions",function preventExtensions(e){if(!ce.TypeIsObject(e)){return e}return er(e)})}}if(Object.isExtensible){var tr=!i(function(){return Object.isExtensible("foo")});if(!tr){var rr=Object.isExtensible;ne(Object,"isExtensible",function isExtensible(e){if(!ce.TypeIsObject(e)){return false}return rr(e)})}}if(Object.getPrototypeOf){var nr=!i(function(){return Object.getPrototypeOf("foo")});if(!nr){var or=Object.getPrototypeOf;ne(Object,"getPrototypeOf",function getPrototypeOf(e){return or(ce.ToObject(e))})}}var ir=s&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&ce.IsCallable(e.get)}();if(s&&!ir){var ar=function flags(){if(!ce.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};m.getter(RegExp.prototype,"flags",ar)}var ur=s&&a(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});var fr=oe&&s&&function(){var e=/./;e[$.match]=false;return RegExp(e)===e}();var sr=a(function(){return RegExp.prototype.toString.call({source:"abc"})==="/abc/"});var cr=sr&&a(function(){return RegExp.prototype.toString.call({source:"a",flags:"b"})==="/a/b"});if(!sr||!cr){var lr=RegExp.prototype.toString;h(RegExp.prototype,"toString",function toString(){var e=ce.RequireObjectCoercible(this);if(re.regex(e)){return t(lr,e)}var r=ue(e.source);var n=ue(e.flags);return"/"+r+"/"+n},true);m.preserveToString(RegExp.prototype.toString,lr)}if(s&&(!ur||fr)){var pr=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get;var vr=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{};var yr=function(){return this.source};var hr=ce.IsCallable(vr.get)?vr.get:yr;var br=RegExp;var gr=function(){return function RegExp(e,t){var r=ce.IsRegExp(e);var n=this instanceof RegExp;if(!n&&r&&typeof t==="undefined"&&e.constructor===RegExp){return e}var o=e;var i=t;if(re.regex(e)){o=ce.Call(hr,e);i=typeof t==="undefined"?ce.Call(pr,e):t;return new RegExp(o,i)}else if(r){o=e.source;i=typeof t==="undefined"?e.flags:t}return new br(e,t)}}();Ee(br,gr,{$input:true});RegExp=gr;m.redefine(S,"RegExp",gr)}if(s){var dr={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(n(dr),function(e){if(e in RegExp&&!(dr[e]in RegExp)){m.getter(RegExp,dr[e],function get(){return RegExp[e]})}})}Ce(RegExp);var mr=1/Number.EPSILON;var Or=function roundTiesToEven(e){return e+mr-mr};var wr=Math.pow(2,-23);var jr=Math.pow(2,127)*(2-wr);var Sr=Math.pow(2,-126);var Tr=Math.E;var Ir=Math.LOG2E;var Er=Math.LOG10E;var Pr=Number.prototype.clz;delete Number.prototype.clz;var Cr={acosh:function acosh(e){var t=Number(e);if(X(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}var r=1/(t*t);if(t<2){return Y(t-1+D(1-r)*t)}var n=t/2;return Y(n+D(1-r)*n-1)+1/Ir},asinh:function asinh(e){var t=Number(e);if(t===0||!T(t)){return t}var r=k(t);var n=r*r;var o=Z(t);if(r<1){return o*Y(r+n/(D(n+1)+1))}return o*(Y(r/2+D(1+1/n)*r/2-1)+1/Ir)},atanh:function atanh(e){var t=Number(e);if(t===0){return t}if(t===-1){return-Infinity}if(t===1){return Infinity}if(X(t)||t<-1||t>1){return NaN}var r=k(t);return Z(t)*Y(2*r/(1-r))/2},cbrt:function cbrt(e){var t=Number(e);if(t===0){return t}var r=t<0;var n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=L(F(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function clz32(e){var t=Number(e);var r=ce.ToUint32(t);if(r===0){return 32}return Pr?ce.Call(Pr,r):31-_(F(r+.5)*Ir)},cosh:function cosh(e){var t=Number(e);if(t===0){return 1}if(X(t)){return NaN}if(!T(t)){return Infinity}var r=L(k(t)-1);return(r+1/(r*Tr*Tr))*(Tr/2)},expm1:function expm1(e){var t=Number(e);if(t===-Infinity){return-1}if(!T(t)||t===0){return t}if(k(t)>.5){return L(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function hypot(e,t){var r=0;var n=0;for(var o=0;o<arguments.length;++o){var i=k(Number(arguments[o]));if(n<i){r*=n/i*(n/i);r+=1;n=i}else{r+=i>0?i/n*(i/n):i}}return n===Infinity?Infinity:n*D(r)},log2:function log2(e){return F(e)*Ir},log10:function log10(e){return F(e)*Er},log1p:Y,sign:Z,sinh:function sinh(e){var t=Number(e);if(!T(t)||t===0){return t}var r=k(t);if(r<1){var n=Math.expm1(r);return Z(t)*n*(1+1/(n+1))/2}var o=L(r-1);return Z(t)*(o-1/(o*Tr*Tr))*(Tr/2)},tanh:function tanh(e){var t=Number(e);if(X(t)||t===0){return t}if(t>=20){return 1}if(t<=-20){return-1}return(Math.expm1(t)-Math.expm1(-t))/(L(t)+L(-t))},trunc:function trunc(e){var t=Number(e);return t<0?-_(-t):_(t)},imul:function imul(e,t){var r=ce.ToUint32(e);var n=ce.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function fround(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||X(t)){return t}var r=Z(t);var n=k(t);if(n<Sr){return r*Or(n/Sr/wr)*Sr*wr}var o=(1+wr/Number.EPSILON)*n;var i=o-(o-n);if(i>jr||X(i)){return r*Infinity}return r*i}};var Mr=function withinULPDistance(e,t,r){return k(1-e/t)/Number.EPSILON<(r||8)};b(Math,Cr);h(Math,"sinh",Cr.sinh,Math.sinh(710)===Infinity);h(Math,"cosh",Cr.cosh,Math.cosh(710)===Infinity);h(Math,"log1p",Cr.log1p,Math.log1p(-1e-17)!==-1e-17);h(Math,"asinh",Cr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));h(Math,"asinh",Cr.asinh,Math.asinh(1e300)===Infinity);h(Math,"atanh",Cr.atanh,Math.atanh(1e-300)===0);h(Math,"tanh",Cr.tanh,Math.tanh(-2e-17)!==-2e-17);
h(Math,"acosh",Cr.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);h(Math,"acosh",Cr.acosh,!Mr(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON)));h(Math,"cbrt",Cr.cbrt,!Mr(Math.cbrt(1e-300),1e-100));h(Math,"sinh",Cr.sinh,Math.sinh(-2e-17)!==-2e-17);var xr=Math.expm1(10);h(Math,"expm1",Cr.expm1,xr>22025.465794806718||xr<22025.465794806718);var Nr=Math.round;var Ar=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var Rr=mr+1;var _r=2*mr-1;var kr=[Rr,_r].every(function(e){return Math.round(e)===e});h(Math,"round",function round(e){var t=_(e);var r=t===-1?-0:t+1;return e-t<.5?t:r},!Ar||!kr);m.preserveToString(Math.round,Nr);var Lr=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=Cr.imul;m.preserveToString(Math.imul,Lr)}if(Math.imul.length!==2){ne(Math,"imul",function imul(e,t){return ce.Call(Lr,Math,arguments)})}var Fr=function(){var e=S.setTimeout;if(typeof e!=="function"&&typeof e!=="object"){return}ce.IsPromise=function(e){if(!ce.TypeIsObject(e)){return false}if(typeof e._promise==="undefined"){return false}return true};var r=function(e){if(!ce.IsConstructor(e)){throw new TypeError("Bad promise constructor")}var t=this;var r=function(e,r){if(t.resolve!==void 0||t.reject!==void 0){throw new TypeError("Bad Promise implementation!")}t.resolve=e;t.reject=r};t.resolve=void 0;t.reject=void 0;t.promise=new e(r);if(!(ce.IsCallable(t.resolve)&&ce.IsCallable(t.reject))){throw new TypeError("Bad promise constructor")}};var n;if(typeof window!=="undefined"&&ce.IsCallable(window.postMessage)){n=function(){var e=[];var t="zero-timeout-message";var r=function(r){M(e,r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=N(e);n()}};window.addEventListener("message",n,true);return r}}var o=function(){var e=S.Promise;var t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}};var i=ce.IsCallable(S.setImmediate)?S.setImmediate:typeof process==="object"&&process.nextTick?process.nextTick:o()||(ce.IsCallable(n)?n():function(t){e(t,0)});var a=function(e){return e};var u=function(e){throw e};var f=0;var s=1;var c=2;var l=0;var p=1;var v=2;var y={};var h=function(e,t,r){i(function(){g(e,t,r)})};var g=function(e,t,r){var n,o;if(t===y){return e(r)}try{n=e(r);o=t.resolve}catch(i){n=i;o=t.reject}o(n)};var d=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.fulfillReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+l],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=s;r.reactionLength=0};var m=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.rejectReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+p],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=c;r.reactionLength=0};var O=function(e){var t=false;var r=function(r){var n;if(t){return}t=true;if(r===e){return m(e,new TypeError("Self resolution"))}if(!ce.TypeIsObject(r)){return d(e,r)}try{n=r.then}catch(o){return m(e,o)}if(!ce.IsCallable(n)){return d(e,r)}i(function(){j(e,r,n)})};var n=function(r){if(t){return}t=true;return m(e,r)};return{resolve:r,reject:n}};var w=function(e,r,n,o){if(e===I){t(e,r,n,o,y)}else{t(e,r,n,o)}};var j=function(e,t,r){var n=O(e);var o=n.resolve;var i=n.reject;try{w(r,t,o,i)}catch(a){i(a)}};var T,I;var E=function(){var e=function Promise(t){if(!(this instanceof e)){throw new TypeError('Constructor Promise requires "new"')}if(this&&this._promise){throw new TypeError("Bad construction")}if(!ce.IsCallable(t)){throw new TypeError("not a valid resolver")}var r=Ae(this,e,T,{_promise:{result:void 0,state:f,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}});var n=O(r);var o=n.reject;try{t(n.resolve,o)}catch(i){o(i)}return r};return e}();T=E.prototype;var P=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};var C=function(e,t,r){var n=e.iterator;var o=[];var i={count:1};var a,u;var f=0;while(true){try{a=ce.IteratorStep(n);if(a===false){e.done=true;break}u=a.value}catch(s){e.done=true;throw s}o[f]=void 0;var c=t.resolve(u);var l=P(f,o,r,i);i.count+=1;w(c.then,c,l,r.reject);f+=1}if(--i.count===0){var p=r.resolve;p(o)}return r.promise};var x=function(e,t,r){var n=e.iterator;var o,i,a;while(true){try{o=ce.IteratorStep(n);if(o===false){e.done=true;break}i=o.value}catch(u){e.done=true;throw u}a=t.resolve(i);w(a.then,a,r.resolve,r.reject)}return r.promise};b(E,{all:function all(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return C(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},race:function race(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return x(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},reject:function reject(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function resolve(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}if(ce.IsPromise(e)){var n=e.constructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});b(T,{"catch":function(e){return this.then(null,e)},then:function then(e,t){var n=this;if(!ce.IsPromise(n)){throw new TypeError("not a promise")}var o=ce.SpeciesConstructor(n,E);var i;var b=arguments.length>2&&arguments[2]===y;if(b&&o===E){i=y}else{i=new r(o)}var g=ce.IsCallable(e)?e:a;var d=ce.IsCallable(t)?t:u;var m=n._promise;var O;if(m.state===f){if(m.reactionLength===0){m.fulfillReactionHandler0=g;m.rejectReactionHandler0=d;m.reactionCapability0=i}else{var w=3*(m.reactionLength-1);m[w+l]=g;m[w+p]=d;m[w+v]=i}m.reactionLength+=1}else if(m.state===s){O=m.result;h(g,i,O)}else if(m.state===c){O=m.result;h(d,i,O)}else{throw new TypeError("unexpected Promise state")}return i.promise}});y=new r(E);I=T.then;return E}();if(S.Promise){delete S.Promise.accept;delete S.Promise.defer;delete S.Promise.prototype.chain}if(typeof Fr==="function"){b(S,{Promise:Fr});var Dr=w(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e});var zr=!i(function(){return S.Promise.reject(42).then(null,5).then(null,W)});var qr=i(function(){return S.Promise.call(3,W)});var Wr=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,W).then(null,W)}catch(n){return true}return t===r}(S.Promise);var Gr=s&&function(){var e=0;var t=Object.defineProperty({},"then",{get:function(){e+=1}});Promise.resolve(t);return e===1}();var Hr=function BadResolverPromise(e){var t=new Promise(e);e(3,function(){});this.then=t.then;this.constructor=BadResolverPromise};Hr.prototype=Promise.prototype;Hr.all=Promise.all;var Vr=a(function(){return!!Hr.all([1,2])});if(!Dr||!zr||!qr||Wr||!Gr||Vr){Promise=Fr;ne(S,"Promise",Fr)}if(Promise.all.length!==1){var Br=Promise.all;ne(Promise,"all",function all(e){return ce.Call(Br,this,arguments)})}if(Promise.race.length!==1){var Ur=Promise.race;ne(Promise,"race",function race(e){return ce.Call(Ur,this,arguments)})}if(Promise.resolve.length!==1){var $r=Promise.resolve;ne(Promise,"resolve",function resolve(e){return ce.Call($r,this,arguments)})}if(Promise.reject.length!==1){var Jr=Promise.reject;ne(Promise,"reject",function reject(e){return ce.Call(Jr,this,arguments)})}Mt(Promise,"all");Mt(Promise,"race");Mt(Promise,"resolve");Mt(Promise,"reject");Ce(Promise)}var Xr=function(e){var t=n(p(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var Kr=Xr(["z","a","bb"]);var Zr=Xr(["z",1,"a","3",2]);if(s){var Yr=function fastkey(e,t){if(!t&&!Kr){return null}if(se(e)){return"^"+ce.ToString(e)}else if(typeof e==="string"){return"$"+e}else if(typeof e==="number"){if(!Zr){return"n"+e}return e}else if(typeof e==="boolean"){return"b"+e}return null};var Qr=function emptyObject(){return Object.create?Object.create(null):{}};var en=function addIterableToMap(e,n,o){if(r(o)||re.string(o)){l(o,function(e){if(!ce.TypeIsObject(e)){throw new TypeError("Iterator value "+e+" is not an entry object")}n.set(e[0],e[1])})}else if(o instanceof e){t(e.prototype.forEach,o,function(e,t){n.set(t,e)})}else{var i,a;if(!se(o)){a=n.set;if(!ce.IsCallable(a)){throw new TypeError("bad map")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{if(!ce.TypeIsObject(f)){throw new TypeError("Iterator value "+f+" is not an entry object")}t(a,n,f[0],f[1])}catch(s){ce.IteratorClose(i,true);throw s}}}}};var tn=function addIterableToSet(e,n,o){if(r(o)||re.string(o)){l(o,function(e){n.add(e)})}else if(o instanceof e){t(e.prototype.forEach,o,function(e){n.add(e)})}else{var i,a;if(!se(o)){a=n.add;if(!ce.IsCallable(a)){throw new TypeError("bad set")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{t(a,n,f)}catch(s){ce.IteratorClose(i,true);throw s}}}}};var rn={Map:function(){var e={};var r=function MapEntry(e,t){this.key=e;this.value=t;this.next=null;this.prev=null};r.prototype.isRemoved=function isRemoved(){return this.key===e};var n=function isMap(e){return!!e._es6map};var o=function requireMapSlot(e,t){if(!ce.TypeIsObject(e)||!n(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ce.ToString(e))}};var i=function MapIterator(e,t){o(e,"[[MapIterator]]");this.head=e._head;this.i=this.head;this.kind=t};i.prototype={isMapIterator:true,next:function next(){if(!this.isMapIterator){throw new TypeError("Not a MapIterator")}var e=this.i;var t=this.kind;var r=this.head;if(typeof this.i==="undefined"){return Ke()}while(e.isRemoved()&&e!==r){e=e.prev}var n;while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return Ke(n)}}this.i=void 0;return Ke()}};Me(i.prototype);var a;var u=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}if(this&&this._es6map){throw new TypeError("Bad construction")}var e=Ae(this,Map,a,{_es6map:true,_head:null,_map:G?new G:null,_size:0,_storage:Qr()});var t=new r(null,null);t.next=t.prev=t;e._head=t;if(arguments.length>0){en(Map,e,arguments[0])}return e};a=u.prototype;m.getter(a,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});b(a,{get:function get(e){o(this,"get");var t;var r=Yr(e,true);if(r!==null){t=this._storage[r];if(t){return t.value}else{return}}if(this._map){t=V.call(this._map,e);if(t){return t.value}else{return}}var n=this._head;var i=n;while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){return i.value}}},has:function has(e){o(this,"has");var t=Yr(e,true);if(t!==null){return typeof this._storage[t]!=="undefined"}if(this._map){return B.call(this._map,e)}var r=this._head;var n=r;while((n=n.next)!==r){if(ce.SameValueZero(n.key,e)){return true}}return false},set:function set(e,t){o(this,"set");var n=this._head;var i=n;var a;var u=Yr(e,true);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=t;return this}else{a=this._storage[u]=new r(e,t);i=n.prev}}else if(this._map){if(B.call(this._map,e)){V.call(this._map,e).value=t}else{a=new r(e,t);U.call(this._map,e,a);i=n.prev}}while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){i.value=t;return this}}a=a||new r(e,t);if(ce.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},"delete":function(t){o(this,"delete");var r=this._head;var n=r;var i=Yr(t,true);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}n=this._storage[i].prev;delete this._storage[i]}else if(this._map){if(!B.call(this._map,t)){return false}n=V.call(this._map,t).prev;H.call(this._map,t)}while((n=n.next)!==r){if(ce.SameValueZero(n.key,t)){n.key=e;n.value=e;n.prev.next=n.next;n.next.prev=n.prev;this._size-=1;return true}}return false},clear:function clear(){o(this,"clear");this._map=G?new G:null;this._size=0;this._storage=Qr();var t=this._head;var r=t;var n=r.next;while((r=n)!==t){r.key=e;r.value=e;n=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function keys(){o(this,"keys");return new i(this,"key")},values:function values(){o(this,"values");return new i(this,"value")},entries:function entries(){o(this,"entries");return new i(this,"key+value")},forEach:function forEach(e){o(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this.entries();for(var i=n.next();!i.done;i=n.next()){if(r){t(e,r,i.value[1],i.value[0],this)}else{e(i.value[1],i.value[0],this)}}}});Me(a,a.entries);return u}(),Set:function(){var e=function isSet(e){return e._es6set&&typeof e._storage!=="undefined"};var r=function requireSetSlot(t,r){if(!ce.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+ce.ToString(t))}};var o;var i=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}if(this&&this._es6set){throw new TypeError("Bad construction")}var e=Ae(this,Set,o,{_es6set:true,"[[SetData]]":null,_storage:Qr()});if(!e._es6set){throw new TypeError("bad set")}if(arguments.length>0){tn(Set,e,arguments[0])}return e};o=i.prototype;var a=function(e){var t=e;if(t==="^null"){return null}else if(t==="^undefined"){return void 0}else{var r=t.charAt(0);if(r==="$"){return C(t,1)}else if(r==="n"){return+C(t,1)}else if(r==="b"){return t==="btrue"}}return+t};var u=function ensureMap(e){if(!e["[[SetData]]"]){var t=new rn.Map;e["[[SetData]]"]=t;l(n(e._storage),function(e){var r=a(e);t.set(r,r)});e["[[SetData]]"]=t}e._storage=null};m.getter(i.prototype,"size",function(){r(this,"size");if(this._storage){return n(this._storage).length}u(this);return this["[[SetData]]"].size});b(i.prototype,{has:function has(e){r(this,"has");var t;if(this._storage&&(t=Yr(e))!==null){return!!this._storage[t]}u(this);return this["[[SetData]]"].has(e)},add:function add(e){r(this,"add");var t;if(this._storage&&(t=Yr(e))!==null){this._storage[t]=true;return this}u(this);this["[[SetData]]"].set(e,e);return this},"delete":function(e){r(this,"delete");var t;if(this._storage&&(t=Yr(e))!==null){var n=z(this._storage,t);return delete this._storage[t]&&n}u(this);return this["[[SetData]]"]["delete"](e)},clear:function clear(){r(this,"clear");if(this._storage){this._storage=Qr()}if(this["[[SetData]]"]){this["[[SetData]]"].clear()}},values:function values(){r(this,"values");u(this);return new f(this["[[SetData]]"].values())},entries:function entries(){r(this,"entries");u(this);return new f(this["[[SetData]]"].entries())},forEach:function forEach(e){r(this,"forEach");var n=arguments.length>1?arguments[1]:null;var o=this;u(o);this["[[SetData]]"].forEach(function(r,i){if(n){t(e,n,i,i,o)}else{e(i,i,o)}})}});h(i.prototype,"keys",i.prototype.values,true);Me(i.prototype,i.prototype.values);var f=function SetIterator(e){this.it=e};f.prototype={isSetIterator:true,next:function next(){if(!this.isSetIterator){throw new TypeError("Not a SetIterator")}return this.it.next()}};Me(f.prototype);return i}()};var nn=S.Set&&!Set.prototype["delete"]&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(nn){S.Set=rn.Set}if(S.Map||S.Set){var on=a(function(){return new Map([[1,2]]).get(1)===2});if(!on){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,S.Map.prototype);return e};S.Map.prototype=O(G.prototype);h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var an=new Map;var un=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);e.set(-0,e);return e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}();var fn=an.set(1,2)===an;if(!un||!fn){ne(Map.prototype,"set",function set(e,r){t(U,this,e===0?0:e,r);return this})}if(!un){b(Map.prototype,{get:function get(e){return t(V,this,e===0?0:e)},has:function has(e){return t(B,this,e===0?0:e)}},true);m.preserveToString(Map.prototype.get,V);m.preserveToString(Map.prototype.has,B)}var sn=new Set;var cn=Set.prototype["delete"]&&Set.prototype.add&&Set.prototype.has&&function(e){e["delete"](0);e.add(-0);return!e.has(0)}(sn);var ln=sn.add(1)===sn;if(!cn||!ln){var pn=Set.prototype.add;Set.prototype.add=function add(e){t(pn,this,e===0?0:e);return this};m.preserveToString(Set.prototype.add,pn)}if(!cn){var vn=Set.prototype.has;Set.prototype.has=function has(e){return t(vn,this,e===0?0:e)};m.preserveToString(Set.prototype.has,vn);var yn=Set.prototype["delete"];Set.prototype["delete"]=function SetDelete(e){return t(yn,this,e===0?0:e)};m.preserveToString(Set.prototype["delete"],yn)}var hn=w(S.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var bn=Object.setPrototypeOf&&!hn;var gn=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();if(S.Map.length!==0||bn||!gn){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Map.prototype);return e};S.Map.prototype=G.prototype;h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var dn=w(S.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var mn=Object.setPrototypeOf&&!dn;var On=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(S.Set.length!==0||mn||!On){var wn=S.Set;S.Set=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}var e=new wn;if(arguments.length>0){tn(Set,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Set.prototype);return e};S.Set.prototype=wn.prototype;h(S.Set.prototype,"constructor",S.Set,true);m.preserveToString(S.Set,wn)}var jn=new S.Map;var Sn=!a(function(){return jn.keys().next().done});if(typeof S.Map.prototype.clear!=="function"||(new S.Set).size!==0||jn.size!==0||typeof S.Map.prototype.keys!=="function"||typeof S.Set.prototype.keys!=="function"||typeof S.Map.prototype.forEach!=="function"||typeof S.Set.prototype.forEach!=="function"||u(S.Map)||u(S.Set)||typeof jn.keys().next!=="function"||Sn||!hn){b(S,{Map:rn.Map,Set:rn.Set},true)}if(S.Set.prototype.keys!==S.Set.prototype.values){h(S.Set.prototype,"keys",S.Set.prototype.values,true)}Me(Object.getPrototypeOf((new S.Map).keys()));Me(Object.getPrototypeOf((new S.Set).keys()));if(c&&S.Set.prototype.has.name!=="has"){var Tn=S.Set.prototype.has;ne(S.Set.prototype,"has",function has(e){return t(Tn,this,e)})}}b(S,rn);Ce(S.Map);Ce(S.Set)}var In=function throwUnlessTargetIsObject(e){if(!ce.TypeIsObject(e)){throw new TypeError("target must be an object")}};var En={apply:function apply(){return ce.Call(ce.Call,null,arguments)},construct:function construct(e,t){if(!ce.IsConstructor(e)){throw new TypeError("First argument must be a constructor.")}var r=arguments.length>2?arguments[2]:e;if(!ce.IsConstructor(r)){throw new TypeError("new.target must be a constructor.")}return ce.Construct(e,t,r,"internal")},deleteProperty:function deleteProperty(e,t){In(e);if(s){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},has:function has(e,t){In(e);return t in e}};if(Object.getOwnPropertyNames){Object.assign(En,{ownKeys:function ownKeys(e){In(e);var t=Object.getOwnPropertyNames(e);if(ce.IsCallable(Object.getOwnPropertySymbols)){x(t,Object.getOwnPropertySymbols(e))}return t}})}var Pn=function ConvertExceptionToBoolean(e){return!i(e)};if(Object.preventExtensions){Object.assign(En,{isExtensible:function isExtensible(e){In(e);return Object.isExtensible(e)},preventExtensions:function preventExtensions(e){In(e);return Pn(function(){return Object.preventExtensions(e)})}})}if(s){var Cn=function get(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return void 0}return Cn(o,t,r)}if("value"in n){return n.value}if(n.get){return ce.Call(n.get,r)}return void 0};var Mn=function set(e,r,n,o){var i=Object.getOwnPropertyDescriptor(e,r);if(!i){var a=Object.getPrototypeOf(e);if(a!==null){return Mn(a,r,n,o)}i={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in i){if(!i.writable){return false}if(!ce.TypeIsObject(o)){return false}var u=Object.getOwnPropertyDescriptor(o,r);if(u){return ae.defineProperty(o,r,{value:n})}else{return ae.defineProperty(o,r,{value:n,writable:true,enumerable:true,configurable:true})}}if(i.set){t(i.set,o,n);return true}return false};Object.assign(En,{defineProperty:function defineProperty(e,t,r){In(e);return Pn(function(){return Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){In(e);return Object.getOwnPropertyDescriptor(e,t)},get:function get(e,t){In(e);var r=arguments.length>2?arguments[2]:e;return Cn(e,t,r)},set:function set(e,t,r){In(e);var n=arguments.length>3?arguments[3]:e;return Mn(e,t,r,n)}})}if(Object.getPrototypeOf){var xn=Object.getPrototypeOf;En.getPrototypeOf=function getPrototypeOf(e){In(e);return xn(e)}}if(Object.setPrototypeOf&&En.getPrototypeOf){var Nn=function(e,t){var r=t;while(r){if(e===r){return true}r=En.getPrototypeOf(r)}return false};Object.assign(En,{setPrototypeOf:function setPrototypeOf(e,t){In(e);if(t!==null&&!ce.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===ae.getPrototypeOf(e)){return true}if(ae.isExtensible&&!ae.isExtensible(e)){return false}if(Nn(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}var An=function(e,t){if(!ce.IsCallable(S.Reflect[e])){h(S.Reflect,e,t)}else{var r=a(function(){S.Reflect[e](1);S.Reflect[e](NaN);S.Reflect[e](true);return true});if(r){ne(S.Reflect,e,t)}}};Object.keys(En).forEach(function(e){An(e,En[e])});var Rn=S.Reflect.getPrototypeOf;if(c&&Rn&&Rn.name!=="getPrototypeOf"){ne(S.Reflect,"getPrototypeOf",function getPrototypeOf(e){return t(Rn,S.Reflect,e)})}if(S.Reflect.setPrototypeOf){if(a(function(){S.Reflect.setPrototypeOf(1,{});return true})){ne(S.Reflect,"setPrototypeOf",En.setPrototypeOf)}}if(S.Reflect.defineProperty){if(!a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1});var t=typeof Object.preventExtensions!=="function"||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})){ne(S.Reflect,"defineProperty",En.defineProperty)}}if(S.Reflect.construct){if(!a(function(){var e=function F(){};return S.Reflect.construct(function(){},[],e)instanceof e})){ne(S.Reflect,"construct",En.construct)}}if(String(new Date(NaN))!=="Invalid Date"){var _n=Date.prototype.toString;var kn=function toString(){var e=+this;if(e!==e){return"Invalid Date"}return ce.Call(_n,this)};ne(Date.prototype,"toString",kn)}var Ln={anchor:function anchor(e){return ce.CreateHTML(this,"a","name",e)},big:function big(){return ce.CreateHTML(this,"big","","")},blink:function blink(){return ce.CreateHTML(this,"blink","","")},bold:function bold(){return ce.CreateHTML(this,"b","","")},fixed:function fixed(){return ce.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(e){return ce.CreateHTML(this,"font","color",e)},fontsize:function fontsize(e){return ce.CreateHTML(this,"font","size",e)},italics:function italics(){return ce.CreateHTML(this,"i","","")},link:function link(e){return ce.CreateHTML(this,"a","href",e)},small:function small(){return ce.CreateHTML(this,"small","","")},strike:function strike(){return ce.CreateHTML(this,"strike","","")},sub:function sub(){return ce.CreateHTML(this,"sub","","")},sup:function sub(){return ce.CreateHTML(this,"sup","","")}};l(Object.keys(Ln),function(e){var r=String.prototype[e];var n=false;if(ce.IsCallable(r)){var o=t(r,"",' " ');var i=P([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else{n=true}if(n){ne(String.prototype,e,Ln[e])}});var Fn=function(){if(!oe){return false}var e=typeof JSON==="object"&&typeof JSON.stringify==="function"?JSON.stringify:null;if(!e){return false}if(typeof e($())!=="undefined"){return true}if(e([$()])!=="[null]"){return true}var t={a:$()};t[$()]=true;if(e(t)!=="{}"){return true}return false}();var Dn=a(function(){if(!oe){return true}return JSON.stringify(Object($()))==="{}"&&JSON.stringify([Object($())])==="[{}]"});if(Fn||!Dn){var zn=JSON.stringify;ne(JSON,"stringify",function stringify(e){if(typeof e==="symbol"){return}var n;if(arguments.length>1){n=arguments[1]}var o=[e];if(!r(n)){var i=ce.IsCallable(n)?n:null;var a=function(e,r){var n=i?t(i,this,e,r):r;if(typeof n!=="symbol"){if(re.symbol(n)){return Nt({})(n)}else{return n}}};o.push(a)}else{o.push(n)}if(arguments.length>2){o.push(arguments[2])}return zn.apply(this,o)})}return S});
//# sourceMappingURL=es6-shim.map
/*! jQuery v3.4.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],E=C.document,r=Object.getPrototypeOf,s=t.slice,g=t.concat,u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.4.1",k=function(e,t){return new k.fn.init(e,t)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function d(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}k.fn=k.prototype={jquery:f,constructor:k,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=k.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return k.each(this,e)},map:function(n){return this.pushStack(k.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},k.extend=k.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(k.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||k.isPlainObject(n)?n:{},i=!1,a[t]=k.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},k.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){b(e,{nonce:t&&t.nonce})},each:function(e,t){var n,r=0;if(d(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(p,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(d(Object(e))?k.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(d(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g.apply([],a)},guid:1,support:y}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=t[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var h=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,k="sizzle"+1*new Date,m=n.document,S=0,r=0,p=ue(),x=ue(),N=ue(),A=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",$=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",F=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp($),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ne=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(m.childNodes),m.childNodes),t[m.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&((e?e.ownerDocument||e:m)!==C&&T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!A[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&U.test(t)){(s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=k),o=(l=h(t)).length;while(o--)l[o]="#"+s+" "+xe(l[o]);c=l.join(","),f=ee.test(t)&&ye(e.parentNode)||e}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){A(t,!0)}finally{s===k&&e.removeAttribute("id")}}}return g(t.replace(B,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[k]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:m;return r!==C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),m!==C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=k,!C.getElementsByName||!C.getElementsByName(k).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){a.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+k+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||v.push(".#.+[+~]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",$)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e===C||e.ownerDocument===m&&y(m,e)?-1:t===C||t.ownerDocument===m&&y(m,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===C?-1:t===C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]===m?-1:s[r]===m?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==C&&T(e),d.matchesSelector&&E&&!A[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){A(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!==C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=p[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&p(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(F," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===S&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[S,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===S&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[S,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[k]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace(B,"$1"));return s[k]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[S,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[k]||(e[k]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===S&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[k]&&(v=Ce(v)),y&&!y[k]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[k]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(B,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(B," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=N[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[k]?i.push(a):o.push(a);(a=N(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=S+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t===C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument===C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(S=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(S=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=k.split("").sort(D).join("")===k,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);k.find=h,k.expr=h.selectors,k.expr[":"]=k.expr.pseudos,k.uniqueSort=k.unique=h.uniqueSort,k.text=h.getText,k.isXMLDoc=h.isXML,k.contains=h.contains,k.escapeSelector=h.escape;var T=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&k(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},N=k.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?k.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?k.grep(e,function(e){return e===n!==r}):"string"!=typeof n?k.grep(e,function(e){return-1<i.call(n,e)!==r}):k.filter(n,e,r)}k.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?k.find.matchesSelector(r,e)?[r]:[]:k.find.matches(e,k.grep(t,function(e){return 1===e.nodeType}))},k.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(k(e).filter(function(){for(t=0;t<r;t++)if(k.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)k.find(e,i[t],n);return 1<r?k.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&N.test(e)?k(e):e||[],!1).length}});var q,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:L.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof k?t[0]:t,k.merge(this,k.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),D.test(r[1])&&k.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(k):k.makeArray(e,this)}).prototype=k.fn,q=k(E);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function P(e,t){while((e=e[t])&&1!==e.nodeType);return e}k.fn.extend({has:function(e){var t=k(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(k.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&k(e);if(!N.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&k.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?k.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(k(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),k.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return T(e,"parentNode")},parentsUntil:function(e,t,n){return T(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return T(e,"nextSibling")},prevAll:function(e){return T(e,"previousSibling")},nextUntil:function(e,t,n){return T(e,"nextSibling",n)},prevUntil:function(e,t,n){return T(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return"undefined"!=typeof e.contentDocument?e.contentDocument:(A(e,"template")&&(e=e.content||e),k.merge([],e.childNodes))}},function(r,i){k.fn[r]=function(e,t){var n=k.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=k.filter(t,n)),1<this.length&&(O[r]||k.uniqueSort(n),H.test(r)&&n.reverse()),this.pushStack(n)}});var R=/[^\x20\t\r\n\f]+/g;function M(e){return e}function I(e){throw e}function W(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}k.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},k.each(e.match(R)||[],function(e,t){n[t]=!0}),n):k.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){k.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return k.each(arguments,function(e,t){var n;while(-1<(n=k.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<k.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},k.extend({Deferred:function(e){var o=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return k.Deferred(function(r){k.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,M,s),l(u,o,I,s)):(u++,t.call(e,l(u,o,M,s),l(u,o,I,s),l(u,o,M,o.notifyWith))):(a!==M&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==I&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(k.Deferred.getStackHook&&(t.stackTrace=k.Deferred.getStackHook()),C.setTimeout(t))}}return k.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:M,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:M)),o[2][3].add(l(0,e,m(n)?n:I))}).promise()},promise:function(e){return null!=e?k.extend(e,a):a}},s={};return k.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=k.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(W(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)W(i[t],a(t),o.reject);return o.promise()}});var $=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&$.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},k.readyException=function(e){C.setTimeout(function(){throw e})};var F=k.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),k.ready()}k.fn.ready=function(e){return F.then(e)["catch"](function(e){k.readyException(e)}),this},k.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--k.readyWait:k.isReady)||(k.isReady=!0)!==e&&0<--k.readyWait||F.resolveWith(E,[k])}}),k.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(k.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var _=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)_(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(k(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},z=/^-ms-/,U=/-([a-z])/g;function X(e,t){return t.toUpperCase()}function V(e){return e.replace(z,"ms-").replace(U,X)}var G=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Y(){this.expando=k.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},G(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[V(t)]=n;else for(r in t)i[V(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][V(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(V):(t=V(t))in r?[t]:t.match(R)||[]).length;while(n--)delete r[t[n]]}(void 0===t||k.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!k.isEmptyObject(t)}};var Q=new Y,J=new Y,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function ee(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Z,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:K.test(i)?JSON.parse(i):i)}catch(e){}J.set(e,t,n)}else n=void 0;return n}k.extend({hasData:function(e){return J.hasData(e)||Q.hasData(e)},data:function(e,t,n){return J.access(e,t,n)},removeData:function(e,t){J.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),k.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=J.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=V(r.slice(5)),ee(o,r,i[r]));Q.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){J.set(this,n)}):_(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=J.get(o,n))?t:void 0!==(t=ee(o,n))?t:void 0;this.each(function(){J.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){J.remove(this,e)})}}),k.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Q.get(e,t),n&&(!r||Array.isArray(n)?r=Q.access(e,t,k.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=k.queue(e,t),r=n.length,i=n.shift(),o=k._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){k.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:k.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",n])})})}}),k.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?k.queue(this[0],t):void 0===n?this:this.each(function(){var e=k.queue(this,t,n);k._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&k.dequeue(this,t)})},dequeue:function(e){return this.each(function(){k.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=k.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Q.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),re=["Top","Right","Bottom","Left"],ie=E.documentElement,oe=function(e){return k.contains(e.ownerDocument,e)},ae={composed:!0};ie.getRootNode&&(oe=function(e){return k.contains(e.ownerDocument,e)||e.getRootNode(ae)===e.ownerDocument});var se=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===k.css(e,"display")},ue=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};function le(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return k.css(e,t,"")},u=s(),l=n&&n[3]||(k.cssNumber[t]?"":"px"),c=e.nodeType&&(k.cssNumber[t]||"px"!==l&&+u)&&ne.exec(k.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)k.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,k.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ce={};function fe(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Q.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&se(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ce[s])||(o=a.body.appendChild(a.createElement(s)),u=k.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ce[s]=u)))):"none"!==n&&(l[c]="none",Q.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}k.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){se(this)?k(this).show():k(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?k.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;var me,xe,be=/<|&#?\w+;/;function we(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))k.merge(p,o.nodeType?[o]:o);else if(be.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+k.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;k.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<k.inArray(o,r))i&&i.push(o);else if(l=oe(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}me=E.createDocumentFragment().appendChild(E.createElement("div")),(xe=E.createElement("input")).setAttribute("type","radio"),xe.setAttribute("checked","checked"),xe.setAttribute("name","t"),me.appendChild(xe),y.checkClone=me.cloneNode(!0).cloneNode(!0).lastChild.checked,me.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!me.cloneNode(!0).lastChild.defaultValue;var Te=/^key/,Ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ee=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Se(){return!1}function Ne(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ae(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ae(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Se;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return k().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=k.guid++)),e.each(function(){k.event.add(this,t,i,r,n)})}function De(e,i,o){o?(Q.set(e,i,!1),k.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Q.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(k.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Q.set(this,i,r),t=o(this,i),this[i](),r!==(n=Q.get(this,i))||t?Q.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Q.set(this,i,{value:k.event.trigger(k.extend(r[0],k.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,i)&&k.event.add(e,i,ke)}k.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.get(t);if(v){n.handler&&(n=(o=n).handler,i=o.selector),i&&k.find.matchesSelector(ie,i),n.guid||(n.guid=k.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof k&&k.event.triggered!==e.type?k.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(R)||[""]).length;while(l--)d=g=(s=Ee.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=k.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=k.event.special[d]||{},c=k.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),k.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.hasData(e)&&Q.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(R)||[""]).length;while(l--)if(d=g=(s=Ee.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=k.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||k.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)k.event.remove(e,d+t[l],n,r,!0);k.isEmptyObject(u)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=k.event.fix(e),u=new Array(arguments.length),l=(Q.get(this,"events")||{})[s.type]||[],c=k.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){a=k.event.handlers.call(this,s,l),t=0;while((i=a[t++])&&!s.isPropagationStopped()){s.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!s.isImmediatePropagationStopped())s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((k.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<k(i,this).index(l):k.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(k.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[k.expando]?e:new k.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&De(t,"click",ke),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&De(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Q.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},k.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},k.Event=function(e,t){if(!(this instanceof k.Event))return new k.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&k.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Te.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ce.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},function(e,t){k.event.special[e]={setup:function(){return De(this,e,Ne),!1},trigger:function(){return De(this,e),!0},delegateType:t}}),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){k.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||k.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),k.fn.extend({on:function(e,t,n,r){return Ae(this,e,t,n,r)},one:function(e,t,n,r){return Ae(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,k(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Se),this.each(function(){k.event.remove(this,e,n,t)})}});var je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,qe=/<script|<style|<link/i,Le=/checked\s*(?:[^=]|=\s*.checked.)/i,He=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Oe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&k(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Me(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(Q.hasData(e)&&(o=Q.access(e),a=Q.set(t,o),l=o.events))for(i in delete a.handle,a.events={},l)for(n=0,r=l[i].length;n<r;n++)k.event.add(t,i,l[i][n]);J.hasData(e)&&(s=J.access(e),u=k.extend({},s),J.set(t,u))}}function Ie(n,r,i,o){r=g.apply([],r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Le.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Ie(t,r,i,o)});if(f&&(t=(e=we(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=k.map(ve(e,"script"),Pe)).length;c<f;c++)u=e,c!==p&&(u=k.clone(u,!0,!0),s&&k.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,k.map(a,Re),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Q.access(u,"globalEval")&&k.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?k._evalUrl&&!u.noModule&&k._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")}):b(u.textContent.replace(He,""),u,l))}return n}function We(e,t,n){for(var r,i=t?k.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||k.cleanData(ve(r)),r.parentNode&&(n&&oe(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}k.extend({htmlPrefilter:function(e){return e.replace(je,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=oe(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||k.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Me(o[r],a[r]);else Me(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=k.event.special,o=0;void 0!==(n=e[o]);o++)if(G(n)){if(t=n[Q.expando]){if(t.events)for(r in t.events)i[r]?k.event.remove(n,r):k.removeEvent(n,r,t.handle);n[Q.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),k.fn.extend({detach:function(e){return We(this,e,!0)},remove:function(e){return We(this,e)},text:function(e){return _(this,function(e){return void 0===e?k.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ie(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Oe(this,e).appendChild(e)})},prepend:function(){return Ie(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Oe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(k.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return k.clone(this,e,t)})},html:function(e){return _(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!qe.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=k.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(k.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Ie(this,arguments,function(e){var t=this.parentNode;k.inArray(this,n)<0&&(k.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){k.fn[e]=function(e){for(var t,n=[],r=k(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),k(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var $e=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),Fe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Be=new RegExp(re.join("|"),"i");function _e(e,t,n){var r,i,o,a,s=e.style;return(n=n||Fe(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||oe(e)||(a=k.style(e,t)),!y.pixelBoxStyles()&&$e.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(s).appendChild(u);var e=C.getComputedStyle(u);n="1%"!==e.top,a=12===t(e.marginLeft),u.style.right="60%",o=36===t(e.right),r=36===t(e.width),u.style.position="absolute",i=12===t(u.offsetWidth/3),ie.removeChild(s),u=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s=E.createElement("div"),u=E.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===u.style.backgroundClip,k.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),a},scrollboxSize:function(){return e(),i}}))}();var Ue=["Webkit","Moz","ms"],Xe=E.createElement("div").style,Ve={};function Ge(e){var t=k.cssProps[e]||Ve[e];return t||(e in Xe?e:Ve[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Ue.length;while(n--)if((e=Ue[n]+t)in Xe)return e}(e)||e)}var Ye=/^(none|table(?!-c[ea]).+)/,Qe=/^--/,Je={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"};function Ze(e,t,n){var r=ne.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function et(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=k.css(e,n+re[a],!0,i)),r?("content"===n&&(u-=k.css(e,"padding"+re[a],!0,i)),"margin"!==n&&(u-=k.css(e,"border"+re[a]+"Width",!0,i))):(u+=k.css(e,"padding"+re[a],!0,i),"padding"!==n?u+=k.css(e,"border"+re[a]+"Width",!0,i):s+=k.css(e,"border"+re[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function tt(e,t,n){var r=Fe(e),i=(!y.boxSizingReliable()||n)&&"border-box"===k.css(e,"boxSizing",!1,r),o=i,a=_e(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if($e.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||"auto"===a||!parseFloat(a)&&"inline"===k.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===k.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+et(e,t,n||(i?"border":"content"),o,r,a)+"px"}function nt(e,t,n,r,i){return new nt.prototype.init(e,t,n,r,i)}k.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=_e(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=V(t),u=Qe.test(t),l=e.style;if(u||(t=Ge(s)),a=k.cssHooks[t]||k.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=ne.exec(n))&&i[1]&&(n=le(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(k.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=V(t);return Qe.test(t)||(t=Ge(s)),(a=k.cssHooks[t]||k.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=_e(e,t,r)),"normal"===i&&t in Ke&&(i=Ke[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),k.each(["height","width"],function(e,u){k.cssHooks[u]={get:function(e,t,n){if(t)return!Ye.test(k.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,u,n):ue(e,Je,function(){return tt(e,u,n)})},set:function(e,t,n){var r,i=Fe(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===k.css(e,"boxSizing",!1,i),s=n?et(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-et(e,u,"border",!1,i)-.5)),s&&(r=ne.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=k.css(e,u)),Ze(0,t,s)}}}),k.cssHooks.marginLeft=ze(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(_e(e,"marginLeft"))||e.getBoundingClientRect().left-ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),k.each({margin:"",padding:"",border:"Width"},function(i,o){k.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+re[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(k.cssHooks[i+o].set=Ze)}),k.fn.extend({css:function(e,t){return _(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Fe(e),i=t.length;a<i;a++)o[t[a]]=k.css(e,t[a],!1,r);return o}return void 0!==n?k.style(e,t,n):k.css(e,t)},e,t,1<arguments.length)}}),((k.Tween=nt).prototype={constructor:nt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||k.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(k.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];return this.options.duration?this.pos=t=k.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}}).init.prototype=nt.prototype,(nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=k.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){k.fx.step[e.prop]?k.fx.step[e.prop](e):1!==e.elem.nodeType||!k.cssHooks[e.prop]&&null==e.elem.style[Ge(e.prop)]?e.elem[e.prop]=e.now:k.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},k.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},k.fx=nt.prototype.init,k.fx.step={};var rt,it,ot,at,st=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;function lt(){it&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(lt):C.setTimeout(lt,k.fx.interval),k.fx.tick())}function ct(){return C.setTimeout(function(){rt=void 0}),rt=Date.now()}function ft(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=re[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function pt(e,t,n){for(var r,i=(dt.tweeners[t]||[]).concat(dt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function dt(o,e,t){var n,a,r=0,i=dt.prefilters.length,s=k.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=rt||ct(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:k.extend({},e),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},t),originalProperties:e,originalOptions:t,startTime:rt||ct(),duration:t.duration,tweens:[],createTween:function(e,t){var n=k.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=V(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=k.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=dt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(k._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return k.map(c,pt,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),k.fx.timer(k.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}k.Animation=k.extend(dt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return le(n.elem,e,ne.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(R);for(var n,r=0,i=e.length;r<i;r++)n=e[r],dt.tweeners[n]=dt.tweeners[n]||[],dt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&se(e),v=Q.get(e,"fxshow");for(r in n.queue||(null==(a=k._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,k.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],st.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||k.style(e,r)}if((u=!k.isEmptyObject(t))||!k.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Q.get(e,"display")),"none"===(c=k.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=k.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===k.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Q.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&fe([e],!0),p.done(function(){for(r in g||fe([e]),Q.remove(e,"fxshow"),d)k.style(e,r,d[r])})),u=pt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?dt.prefilters.unshift(e):dt.prefilters.push(e)}}),k.speed=function(e,t,n){var r=e&&"object"==typeof e?k.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return k.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in k.fx.speeds?r.duration=k.fx.speeds[r.duration]:r.duration=k.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&k.dequeue(this,r.queue)},r},k.fn.extend({fadeTo:function(e,t,n,r){return this.filter(se).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=k.isEmptyObject(t),o=k.speed(e,n,r),a=function(){var e=dt(this,k.extend({},t),o);(i||Q.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=k.timers,r=Q.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&ut.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||k.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Q.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=k.timers,o=n?n.length:0;for(t.finish=!0,k.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),k.each(["toggle","show","hide"],function(e,r){var i=k.fn[r];k.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ft(r,!0),e,t,n)}}),k.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){k.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),k.timers=[],k.fx.tick=function(){var e,t=0,n=k.timers;for(rt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||k.fx.stop(),rt=void 0},k.fx.timer=function(e){k.timers.push(e),k.fx.start()},k.fx.interval=13,k.fx.start=function(){it||(it=!0,lt())},k.fx.stop=function(){it=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(r,e){return r=k.fx&&k.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},ot=E.createElement("input"),at=E.createElement("select").appendChild(E.createElement("option")),ot.type="checkbox",y.checkOn=""!==ot.value,y.optSelected=at.selected,(ot=E.createElement("input")).value="t",ot.type="radio",y.radioValue="t"===ot.value;var ht,gt=k.expr.attrHandle;k.fn.extend({attr:function(e,t){return _(this,k.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){k.removeAttr(this,e)})}}),k.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?k.prop(e,t,n):(1===o&&k.isXMLDoc(e)||(i=k.attrHooks[t.toLowerCase()]||(k.expr.match.bool.test(t)?ht:void 0)),void 0!==n?null===n?void k.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=k.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(R);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ht={set:function(e,t,n){return!1===t?k.removeAttr(e,n):e.setAttribute(n,n),n}},k.each(k.expr.match.bool.source.match(/\w+/g),function(e,t){var a=gt[t]||k.find.attr;gt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=gt[o],gt[o]=r,r=null!=a(e,t,n)?o:null,gt[o]=i),r}});var vt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;function mt(e){return(e.match(R)||[]).join(" ")}function xt(e){return e.getAttribute&&e.getAttribute("class")||""}function bt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(R)||[]}k.fn.extend({prop:function(e,t){return _(this,k.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[k.propFix[e]||e]})}}),k.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&k.isXMLDoc(e)||(t=k.propFix[t]||t,i=k.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=k.find.attr(e,"tabindex");return t?parseInt(t,10):vt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(k.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this}),k.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){k(this).addClass(t.call(this,e,xt(this)))});if((e=bt(t)).length)while(n=this[u++])if(i=xt(n),r=1===n.nodeType&&" "+mt(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){k(this).removeClass(t.call(this,e,xt(this)))});if(!arguments.length)return this.attr("class","");if((e=bt(t)).length)while(n=this[u++])if(i=xt(n),r=1===n.nodeType&&" "+mt(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){k(this).toggleClass(i.call(this,e,xt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=k(this),r=bt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=xt(this))&&Q.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+mt(xt(n))+" ").indexOf(t))return!0;return!1}});var wt=/\r/g;k.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,k(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=k.map(t,function(e){return null==e?"":e+""})),(r=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=k.valHooks[t.type]||k.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(wt,""):null==e?"":e:void 0}}),k.extend({valHooks:{option:{get:function(e){var t=k.find.attr(e,"value");return null!=t?t:mt(k.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=k(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=k.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<k.inArray(k.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<k.inArray(k(e).val(),t)}},y.checkOn||(k.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var Tt=/^(?:focusinfocus|focusoutblur)$/,Ct=function(e){e.stopPropagation()};k.extend(k.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!Tt.test(d+k.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[k.expando]?e:new k.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:k.makeArray(t,[e]),c=k.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,Tt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Q.get(o,"events")||{})[e.type]&&Q.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&G(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!G(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),k.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,Ct),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,Ct),k.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=k.extend(new k.Event,n,{type:e,isSimulated:!0});k.event.trigger(r,null,t)}}),k.fn.extend({trigger:function(e,t){return this.each(function(){k.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return k.event.trigger(e,t,n,!0)}}),y.focusin||k.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){k.event.simulate(r,e.target,k.event.fix(e))};k.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=Q.access(e,r);t||e.addEventListener(n,i,!0),Q.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=Q.access(e,r)-1;t?Q.access(e,r,t):(e.removeEventListener(n,i,!0),Q.remove(e,r))}}});var Et=C.location,kt=Date.now(),St=/\?/;k.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+e),t};var Nt=/\[\]$/,At=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;function qt(n,e,r,i){var t;if(Array.isArray(e))k.each(e,function(e,t){r||Nt.test(n)?i(n,t):qt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)qt(n+"["+t+"]",e[t],r,i)}k.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!k.isPlainObject(e))k.each(e,function(){i(this.name,this.value)});else for(n in e)qt(n,e[n],t,i);return r.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=k.prop(this,"elements");return e?k.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!k(this).is(":disabled")&&jt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=k(this).val();return null==n?null:Array.isArray(n)?k.map(n,function(e){return{name:t.name,value:e.replace(At,"\r\n")}}):{name:t.name,value:n.replace(At,"\r\n")}}).get()}});var Lt=/%20/g,Ht=/#.*$/,Ot=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Rt=/^(?:GET|HEAD)$/,Mt=/^\/\//,It={},Wt={},$t="*/".concat("*"),Ft=E.createElement("a");function Bt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(R)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function _t(t,i,o,a){var s={},u=t===Wt;function l(e){var r;return s[e]=!0,k.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function zt(e,t){var n,r,i=k.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&k.extend(!0,e,r),e}Ft.href=Et.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,k.ajaxSettings),t):zt(k.ajaxSettings,e)},ajaxPrefilter:Bt(It),ajaxTransport:Bt(Wt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=k.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?k(y):k.event,x=k.Deferred(),b=k.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Pt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Et.href)+"").replace(Mt,Et.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(R)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Ft.protocol+"//"+Ft.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=k.param(v.data,v.traditional)),_t(It,v,t,T),h)return T;for(i in(g=k.event&&v.global)&&0==k.active++&&k.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Rt.test(v.type),f=v.url.replace(Ht,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Lt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(St.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Ot,"$1"),o=(St.test(f)?"&":"?")+"_="+kt+++o),v.url=f+o),v.ifModified&&(k.lastModified[f]&&T.setRequestHeader("If-Modified-Since",k.lastModified[f]),k.etag[f]&&T.setRequestHeader("If-None-Match",k.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+$t+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=_t(Wt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(k.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(k.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--k.active||k.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return k.get(e,t,n,"json")},getScript:function(e,t){return k.get(e,void 0,t,"script")}}),k.each(["get","post"],function(e,i){k[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),k.ajax(k.extend({url:e,type:i,dataType:r,data:t,success:n},k.isPlainObject(e)&&e))}}),k._evalUrl=function(e,t){return k.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){k.globalEval(e,t)}})},k.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=k(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){k(this).wrapInner(n.call(this,e))}):this.each(function(){var e=k(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){k(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){k(this).replaceWith(this.childNodes)}),this}}),k.expr.pseudos.hidden=function(e){return!k.expr.pseudos.visible(e)},k.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},Xt=k.ajaxSettings.xhr();y.cors=!!Xt&&"withCredentials"in Xt,y.ajax=Xt=!!Xt,k.ajaxTransport(function(i){var o,a;if(y.cors||Xt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Ut[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),k.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return k.globalEval(e),e}}}),k.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),k.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=k("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Vt,Gt=[],Yt=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||k.expando+"_"+kt++;return this[e]=!0,e}}),k.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Yt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Yt,"$1"+r):!1!==e.jsonp&&(e.url+=(St.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||k.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?k(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((Vt=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Vt.childNodes.length),k.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=D.exec(e))?[t.createElement(i[1])]:(i=we([e],t,o),o&&o.length&&k(o).remove(),k.merge([],i.childNodes)));var r,i,o},k.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=mt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&k.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?k("<div>").append(k.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){k.fn[t]=function(e){return this.on(t,e)}}),k.expr.pseudos.animated=function(t){return k.grep(k.timers,function(e){return t===e.elem}).length},k.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=k.css(e,"position"),c=k(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=k.css(e,"top"),u=k.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,k.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},k.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){k.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===k.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===k.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=k(e).offset()).top+=k.css(e,"borderTopWidth",!0),i.left+=k.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-k.css(r,"marginTop",!0),left:t.left-i.left-k.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===k.css(e,"position"))e=e.offsetParent;return e||ie})}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;k.fn[t]=function(e){return _(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),k.each(["top","left"],function(e,n){k.cssHooks[n]=ze(y.pixelPosition,function(e,t){if(t)return t=_e(e,n),$e.test(t)?k(e).position()[n]+"px":t})}),k.each({Height:"height",Width:"width"},function(a,s){k.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){k.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return _(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?k.css(e,t,i):k.style(e,t,n,i)},s,n?e:void 0,n)}})}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){k.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),k.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),k.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),k.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||k.guid++,i},k.holdReady=function(e){e?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=A,k.isFunction=m,k.isWindow=x,k.camelCase=V,k.type=w,k.now=Date.now,k.isNumeric=function(e){var t=k.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return k});var Qt=C.jQuery,Jt=C.$;return k.noConflict=function(e){return C.$===k&&(C.$=Jt),e&&C.jQuery===k&&(C.jQuery=Qt),k},e||(C.jQuery=C.$=k),k});
/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
/*!
 * imagesLoaded PACKAGED v4.1.0
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}(this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n=i[t]=i[t]||[];return n[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,o=i[n];e=e||[];for(var r=this._onceEvents&&this._onceEvents[t];o;){var s=r&&r[o];s&&(this.off(t,o),delete r[o]),o.apply(this,e),n+=s?0:1,o=i[n]}return this}},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}(window,function(t,e){function i(t,e){for(var i in e)t[i]=e[i];return t}function n(t){var e=[];if(Array.isArray(t))e=t;else if("number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e}function o(t,e,r){return this instanceof o?("string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=n(t),this.options=i({},this.options),"function"==typeof e?r=e:i(this.options,e),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(function(){this.check()}.bind(this))):new o(t,e,r)}function r(t){this.img=t}function s(t,e){this.url=t,this.element=e,this.img=new Image}var h=t.jQuery,a=t.console;o.prototype=Object.create(e.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),this.options.background===!0&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&d[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=t.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var d={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,t),n=i.exec(e.backgroundImage)}},o.prototype.addImage=function(t){var e=new r(t);this.images.push(e)},o.prototype.addBackground=function(t,e){var i=new s(t,e);this.images.push(i)},o.prototype.check=function(){function t(t,i,n){setTimeout(function(){e.progress(t,i,n)})}var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},o.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,t,e)},o.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},r.prototype=Object.create(e.prototype),r.prototype.check=function(){var t=this.getIsImageComplete();return t?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},r.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},r.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var t=this.getIsImageComplete();t&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},o.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&(h=e,h.fn.imagesLoaded=function(t,e){var i=new o(this,t,e);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});
/*! lz-string-1.3.3-min.js | (c) 2013 Pieroxy | Licensed under a WTFPL license */
var LZString={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(e==null)return"";var t="";var n,r,i,s,o,u,a;var f=0;e=LZString.compress(e);while(f<e.length*2){if(f%2==0){n=e.charCodeAt(f/2)>>8;r=e.charCodeAt(f/2)&255;if(f/2+1<e.length)i=e.charCodeAt(f/2+1)>>8;else i=NaN}else{n=e.charCodeAt((f-1)/2)&255;if((f+1)/2<e.length){r=e.charCodeAt((f+1)/2)>>8;i=e.charCodeAt((f+1)/2)&255}else r=i=NaN}f+=3;s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+LZString._keyStr.charAt(s)+LZString._keyStr.charAt(o)+LZString._keyStr.charAt(u)+LZString._keyStr.charAt(a)}return t},decompressFromBase64:function(e){if(e==null)return"";var t="",n=0,r,i,s,o,u,a,f,l,c=0,h=LZString._f;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length){u=LZString._keyStr.indexOf(e.charAt(c++));a=LZString._keyStr.indexOf(e.charAt(c++));f=LZString._keyStr.indexOf(e.charAt(c++));l=LZString._keyStr.indexOf(e.charAt(c++));i=u<<2|a>>4;s=(a&15)<<4|f>>2;o=(f&3)<<6|l;if(n%2==0){r=i<<8;if(f!=64){t+=h(r|s)}if(l!=64){r=o<<8}}else{t=t+h(r|i);if(f!=64){r=s<<8}if(l!=64){t+=h(r|o)}}n+=3}return LZString.decompress(t)},compressToUTF16:function(e){if(e==null)return"";var t="",n,r,i,s=0,o=LZString._f;e=LZString.compress(e);for(n=0;n<e.length;n++){r=e.charCodeAt(n);switch(s++){case 0:t+=o((r>>1)+32);i=(r&1)<<14;break;case 1:t+=o(i+(r>>2)+32);i=(r&3)<<13;break;case 2:t+=o(i+(r>>3)+32);i=(r&7)<<12;break;case 3:t+=o(i+(r>>4)+32);i=(r&15)<<11;break;case 4:t+=o(i+(r>>5)+32);i=(r&31)<<10;break;case 5:t+=o(i+(r>>6)+32);i=(r&63)<<9;break;case 6:t+=o(i+(r>>7)+32);i=(r&127)<<8;break;case 7:t+=o(i+(r>>8)+32);i=(r&255)<<7;break;case 8:t+=o(i+(r>>9)+32);i=(r&511)<<6;break;case 9:t+=o(i+(r>>10)+32);i=(r&1023)<<5;break;case 10:t+=o(i+(r>>11)+32);i=(r&2047)<<4;break;case 11:t+=o(i+(r>>12)+32);i=(r&4095)<<3;break;case 12:t+=o(i+(r>>13)+32);i=(r&8191)<<2;break;case 13:t+=o(i+(r>>14)+32);i=(r&16383)<<1;break;case 14:t+=o(i+(r>>15)+32,(r&32767)+32);s=0;break}}return t+o(i+32)},decompressFromUTF16:function(e){if(e==null)return"";var t="",n,r,i=0,s=0,o=LZString._f;while(s<e.length){r=e.charCodeAt(s)-32;switch(i++){case 0:n=r<<1;break;case 1:t+=o(n|r>>14);n=(r&16383)<<2;break;case 2:t+=o(n|r>>13);n=(r&8191)<<3;break;case 3:t+=o(n|r>>12);n=(r&4095)<<4;break;case 4:t+=o(n|r>>11);n=(r&2047)<<5;break;case 5:t+=o(n|r>>10);n=(r&1023)<<6;break;case 6:t+=o(n|r>>9);n=(r&511)<<7;break;case 7:t+=o(n|r>>8);n=(r&255)<<8;break;case 8:t+=o(n|r>>7);n=(r&127)<<9;break;case 9:t+=o(n|r>>6);n=(r&63)<<10;break;case 10:t+=o(n|r>>5);n=(r&31)<<11;break;case 11:t+=o(n|r>>4);n=(r&15)<<12;break;case 12:t+=o(n|r>>3);n=(r&7)<<13;break;case 13:t+=o(n|r>>2);n=(r&3)<<14;break;case 14:t+=o(n|r>>1);n=(r&1)<<15;break;case 15:t+=o(n|r);i=0;break}s++}return LZString.decompress(t)},compress:function(e){if(e==null)return"";var t,n,r={},i={},s="",o="",u="",a=2,f=3,l=2,c="",h=0,p=0,d,v=LZString._f;for(d=0;d<e.length;d+=1){s=e.charAt(d);if(!Object.prototype.hasOwnProperty.call(r,s)){r[s]=f++;i[s]=true}o=u+s;if(Object.prototype.hasOwnProperty.call(r,o)){u=o}else{if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}r[o]=f++;u=String(s)}}if(u!==""){if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}}n=2;for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}while(true){h=h<<1;if(p==15){c+=v(h);break}else p++}return c},decompress:function(e){if(e==null)return"";if(e=="")return null;var t=[],n,r=4,i=4,s=3,o="",u="",a,f,l,c,h,p,d,v=LZString._f,m={string:e,val:e.charCodeAt(0),position:32768,index:1};for(a=0;a<3;a+=1){t[a]=a}l=0;h=Math.pow(2,2);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(n=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 2:return""}t[3]=d;f=u=d;while(true){if(m.index>m.string.length){return""}l=0;h=Math.pow(2,s);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(d=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 2:return u}if(r==0){r=Math.pow(2,s);s++}if(t[d]){o=t[d]}else{if(d===i){o=f+f.charAt(0)}else{return null}}u+=o;t[i++]=f+o.charAt(0);r--;f=o;if(r==0){r=Math.pow(2,s);s++}}}};if(typeof module!=="undefined"&&module!=null){module.exports=LZString}
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var saveAs=saveAs||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(e){"use strict";var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=e.URL||e.webkitURL||e,i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),s="download"in i,o=function(n){var r=t.createEvent("MouseEvents");r.initMouseEvent("click",true,false,e,0,0,0,0,0,false,false,false,false,0,null);n.dispatchEvent(r)},u=e.webkitRequestFileSystem,a=e.requestFileSystem||u||e.mozRequestFileSystem,f=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l="application/octet-stream",c=0,h=[],p=function(){var e=h.length;while(e--){var t=h[e];if(typeof t==="string"){r.revokeObjectURL(t)}else{t.remove()}}h.length=0},d=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var i=e["on"+t[r]];if(typeof i==="function"){try{i.call(e,n||e)}catch(s){f(s)}}}},v=function(t,r){var f=this,p=t.type,v=false,m,g,y=function(){var e=n().createObjectURL(t);h.push(e);return e},b=function(){d(f,"writestart progress write writeend".split(" "))},w=function(){if(v||!m){m=y(t)}if(g){g.location.href=m}else{window.open(m,"_blank")}f.readyState=f.DONE;b()},E=function(e){return function(){if(f.readyState!==f.DONE){return e.apply(this,arguments)}}},S={create:true,exclusive:false},x;f.readyState=f.INIT;if(!r){r="download"}if(s){m=y(t);i.href=m;i.download=r;o(i);f.readyState=f.DONE;b();return}if(e.chrome&&p&&p!==l){x=t.slice||t.webkitSlice;t=x.call(t,0,t.size,l);v=true}if(u&&r!=="download"){r+=".download"}if(p===l||u){g=e}if(!a){w();return}c+=t.size;a(e.TEMPORARY,c,E(function(e){e.root.getDirectory("saved",S,E(function(e){var n=function(){e.getFile(r,S,E(function(e){e.createWriter(E(function(n){n.onwriteend=function(t){g.location.href=e.toURL();h.push(e);f.readyState=f.DONE;d(f,"writeend",t)};n.onerror=function(){var e=n.error;if(e.code!==e.ABORT_ERR){w()}};"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=f["on"+e]});n.write(t);f.abort=function(){n.abort();f.readyState=f.DONE};f.readyState=f.WRITING}),w)}),w)};e.getFile(r,{create:false},E(function(e){e.remove();n()}),E(function(e){if(e.code===e.NOT_FOUND_ERR){n()}else{w()}}))}),w)}),w)},m=v.prototype,g=function(e,t){return new v(e,t)};m.abort=function(){var e=this;e.readyState=e.DONE;d(e,"abort")};m.readyState=m.INIT=0;m.WRITING=1;m.DONE=2;m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null;e.addEventListener("unload",p,false);return g}(self)
/*! seedrandom.js v2.3.3 | (c) 2013 David Bau, all rights reserved. | Licensed under a BSD-style license */
!function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=r&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=r&f+1],c=c*d+h[r&(h[f]=h[g=r&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\0"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[r&e]=r&(c^=19*b[r&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),n(c)}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o=c.pow(d,e),p=c.pow(2,f),q=2*p,r=d-1,s=c["seed"+i]=function(a,f,g){var h=[],r=l(k(f?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=o,c=0;p>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=q;)a/=2,b/=2,c>>>=1;return(a+c)/b},r,this==c)};l(c[i](),b),g&&g.exports?g.exports=s:h&&h.amd&&h(function(){return s})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random");
/*! console_hack.js | (c) 2015 Thomas Michael Edwards | Licensed under SugarCube's Simple BSD license */
!function(){for(var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],length=methods.length,noop=function(){},console=window.console=window.console||{};length--;){var method=methods[length];console[method]||(console[method]=noop)}}();
}else{document.documentElement.setAttribute("data-init", "lacking");}
</script>
<style id="style-normalize" type="text/css">/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}</style>
<style id="style-init-screen" type="text/css">@-webkit-keyframes init-loading-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes init-loading-spin{0%{-o-transform:rotate(0);transform:rotate(0)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes init-loading-spin{0%{-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}#init-screen{display:none;z-index:100000;position:fixed;top:0;left:0;height:100%;width:100%;font:28px/1 Helmet,Freesans,sans-serif;font-weight:700;color:#eee;background-color:#111;text-align:center}#init-screen>div{display:none;position:relative;margin:0 auto;max-width:1136px;top:25%}html[data-init=lacking] #init-screen,html[data-init=loading] #init-screen,html[data-init=no-js] #init-screen{display:block}html[data-init=lacking] #init-lacking,html[data-init=no-js] #init-no-js{display:block;padding:0 1em}html[data-init=no-js] #init-no-js{color:red}html[data-init=loading] #init-loading{display:block;border:24px solid transparent;border-radius:50%;border-top-color:#7f7f7f;border-bottom-color:#7f7f7f;width:100px;height:100px;-webkit-animation:init-loading-spin 2s linear infinite;-o-animation:init-loading-spin 2s linear infinite;animation:init-loading-spin 2s linear infinite}html[data-init=loading] #init-loading>div{text-indent:9999em;overflow:hidden;white-space:nowrap}html[data-init=loading] #passages,html[data-init=loading] #ui-bar{display:none}</style>
<style id="style-font" type="text/css">@font-face{font-family:tme-fa-icons;src:url(data:application/octet-stream;base64,d09GRgABAAAAACWoAA4AAAAAQhQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABRAAAAEQAAABWPihI/2NtYXAAAAGIAAAAOgAAAUrQXRm3Y3Z0IAAAAcQAAAAKAAAACgAAAABmcGdtAAAB0AAABZQAAAtwiJCQWWdhc3AAAAdkAAAACAAAAAgAAAAQZ2x5ZgAAB2wAABjCAAAq+uJ4WNtoZWFkAAAgMAAAADQAAAA2BZlJs2hoZWEAACBkAAAAIAAAACQIJwQZaG10eAAAIIQAAABuAAABOPTeAABsb2NhAAAg9AAAAJ4AAACeojKW6m1heHAAACGUAAAAIAAAACAA6gvwbmFtZQAAIbQAAAGPAAAC/eLsyKlwb3N0AAAjRAAAAfwAAAM0412SIHByZXAAACVAAAAAZQAAAHvdawOFeJxjYGRWYZzAwMrAwVTFtIeBgaEHQjM+YDBkZGJgYGJgZWbACgLSXFMYHF4wvPBhDvqfxRDFHMQwDSjMCJIDANLeC6V4nGNgYGBmgGAZBkYGEHAB8hjBfBYGDSDNBqQZGZgYGF74/P8PUvCCAURLMELVAwEjG8OIBwC4Ywb6AAAAAAAAAAAAAAAAAAB4nK1WaXMTRxCd1WHLNj6CDxI2gVnGcox2VpjLCBDG7EoW4BzylexCjl1Ldu6LT/wG/ZpekVSRb/y0vB4d2GAnVVQoSv2m9+1M9+ueXpPQksReWI+k3HwpprY2aWTnSUg3bFqO4kPZ2QspU0z+LoiCaLXUvu04JCISgap1hSWC2PfI0iTjQ48yWrYlvWpSbulJd9kaD+qt+vbT0FGO3QklNZuhQ+uRLanCqBJFMu2RkjYtw9VfSVrh5yvMfNUMJYLoJJLGm2EMj+Rn44xWGa3GdhxFkU2WG0WKRDM8iCKPslpin1wxQUD5oBlSXvk0onyEH5EVe5TTCnHJdprf9yU/6R3OvyTieouyJQf+QHZkB3unK/ki0toK46adbEehivB0fSfEI5uT6p/sUV7TaOB2RaYnzQiWyleQWPkJZfYPyWrhfMqXPBrVkoOcCFovc2Jf8g60HkdMiWsmyILujk6IoO6XnKHYY/q4+OO9XSwXIQTIOJb1jkq4EEYpYbOaJG0EOYiSskWV1HpHTJzyOi3iLWG/Tu3oS2e0Sag7MZ6th46tnKjkeDSp00ymTu2k5tGUBlFKOhM85tcBlB/RJK+2sZrEyqNpbDNjJJFQoIVzaSqIZSeWNAXRPJrRm7thmmvXokWaPFDPPXpPb26Fmzs9p+3AP2v8Z3UqpoO9MJ2eDshKfJp2uUnRun56hn8m8UPWAiqRLTbDlMVDtn4H5eVjS47CawNs957zK+h99kTIpIH4G/AeL9UpBUyFmFVQC9201rUsy9RqVotUZOq7IU0rX9ZpAk05Dn1jX8Y4/q+ZGUtMCd/vxOnZEZeeufYlyDSH3GZdj+Z1arFdgM5sz+k0y/Z9nebYfqDTPNvzOh1ha+t0lO2HOi2w/UinY2wvaEGT7jsEchGBXMAGEoGwdRAI20sIhK1CIGwXEQjbIgJhu4RA2H6MQNguIxC2l7Wsmn4qaRw7E8sARYgDoznuyGVuKldTyaUSrotGpzbkKXKrpKJ4Vv0rA/3ikTesgbVAukTW/IpJrnxUleOPrmh508S5Ao5Vf3tzXJ8TD2W/WPhT8L/amqqkV6x5ZHIVeSPQk+NE1yYVj67p8rmqR9f/i4oOa4F+A6UQC0VZlg2+mZDwUafTUA1c5RAzGzMP1/W6Zc3P4fybGCEL6H78NxQaC9yDTllJWe1gr9XXj2W5twflsCdYkmK+zOtb4YuMzEr7RWYpez7yecAVMCqVYasNXK3gzXsS85DpTfJMELcVZYOkjceZILGBYx4wb76TICRMXbWB2imcsIG8YMwp2O+EQ1RvlOVwe6F9Ho2Uf2tX7MgZFU0Q+G32Rtjrs1DyW6yBhCe/1NdAVSFNxbipgEsj5YZq8GFcrdtGMk6gr6jYDcuyig8fR9x3So5lIPlIEatHRz+tvUKd1Ln9yihu3zv9CIJBaWL+9r6Z4qCUd7WSZVZtA1O3GpVT15rDxasO3c2j7nvH2Sdy1jTddE/c9L6mVbeDg7lZEO3bHJSlTC6o68MOG6jLzaXQ6mVckt52DzAsMKDfoRUb/1f3cfg8V6oKo+NIvZ2oH6PPYgzyDzh/R/UF6OcxTLmGlOd7lxOfbtzD2TJdxV2sn+LfwKy15mbpGnBD0w2Yh6xaHbrKDXynBjo90tyO9BDwse4K8QBgE8Bi8InuWsbzKYDxfMYcH+Bz5jBoMofBFnMYbDNnDWCHOQx2mcNgjzkMvmDOOsCXzGEQModBxBwGT5gTADxlDoOvmMPga+Yw+IY59wG+ZQ6DmDkMEuYw2Nd0ayhzixd0F6htUBXowPQTFvewONRUGbK/44Vhf28Qs38wiKk/aro9pP7EC0P92SCm/mIQU3/VdGdI/Y0Xhvq7QUz9wyCmPtMvxnKZwV9GvkuFA8ouNp/z98T7B8IaQLYAAQAB//8AD3icrToNcBzVefe9/b3dvd29u909/dyd7ke6k86yLEunOyHJsrCxJWyJGmEcLMDYxBhHNsZQBzOAkjQmFDrGIq5gHEIcCILOAGZq3IQO04RkIGkgaUMKMbQznSlJW0wgJtOQHxRr1e+93TvJwq7JTD3y2/f//bzvfX/vAhAIzL3KPcYNBFIB8UR9EJYuAcuAqGNbOiwDSczkuorlaJ6WTeVSRwMIDveY8aN20GztjzMhW4P2H+kNUPM5NaVNQE0K3tWM77vv8rJqgnT33VJE4WWIfd/QbKHZjcXcZiFAqjCDgUJA/mZTWOIIwi0vAwNiUjkW9THIZs6DAbnj6ffGP/P+0y2vv+5SXGLKuXHJPJH92c+yT7x3883wnI9W/DxI4T9+bm7uOL+MUwNywAg0BJYFQgNKa2NDzFBEjqeM0SFXLHU4YKe7yjFoSmdEKWw5nemOUj5czMXCliilM7lyuFgqp3HaDf1j/fhH+s6cfm4MEpA8c0BSQBO5CUkD5fJi05kDjSUoNnETTUUSXtpPVm0aGHDdmV0nNkPiMUWeHZMVRSZPSlp0dqypCKVG8iT9IK5AEeamyZGAjecW5tm5SSBm8ojiSqBsYoXDTRtuymw13V8axjB+p2EPlsMGcRzTTRkGOLRpmk/AzSZ+A97ecx+QN8g9gUbc26F7N+GJiN5pLGMA8hUo7EQcHI455A0PwrS3I37N+bZhTE8bex1aeeIJ4+MTjTY6gcH+iIvgGWQRdh2TR9sS81kspCzytguLfBcyuBOLXuhwYnZnh8NFUs6plLPLScGpWBKwkYztwsop7Hie9r7rYK/9brWXTg9U+RiBX+GJiyc0rgIv7UNJe3vPjrFdyZOV/byNUkyW/0AuIi/h+h6U5a64SmW5ieGcya2AYimG+EUtnZN08ImgveV+KOYykiiJVMrbkI+dHUkC9+nyPUFdD94j639r1uTq7FiSNrR1hXS8uLbGapYUSbpaJvzmp5aODbU9iJNBU1gJa5LFTCqihNpDigmWWtc2GjUy7Y2m3hHk14qmPJXp2cTInZudO85dhzw2AuXAJQHl+Yt7l0RVjkO8u4q5JZARE2A5yNxStNgGWcQSj7izA1HucCgJOsRsb7xYWgn9XAwvRqaN4HAS4ENF3kXFFovJ/muW3zsYDK3jxaCQbOouOPXZPmBDNZG4krS0N2/9wakf7hHv+IcPX/jcaGWZAp9fvrFtv66UeSlXn4zYdZo5kLNwIJJRTbEu3jz62Zf37Xv5l7RAeugZfAQ7kJ5koA3PoJB1eP8MpHRVWqpygyITpiKz4DCoHMENlun+wrDA0bNZ9jmJZdZwhhx9UnewMKztg2yAlie9j6O7Lzrks7tYdRdOO4u/FJ9e5G93RyFTJ1f5G17IZDs7z25uEfuFBYwlvYpUUuTnKJO6umg5IymD88yGGxbycjN2JOkIVk6wUoEzm/0O5T/Owb92Jg8NyL/6qFrl30IZ5nSgMp3nch7DkvOMCaMeoQ1U4JZxQncenmAMmcAei/S7V9CvAccW8mczwtMCceSQ8nwhXWuKAeQPJbRCc9RnhoSyhvBL+WgxTzsk0Y567IFj+35wa4Xq7ykS5YIm7UIdq4iCfKcsiIoSvFFWONUnFovZoXHKhXE69R9hTOIEgZPcJ0VZRrx+i3j9hhtFPqQDnYjX8uaEpS2+F4twiVkOylSJAwfvBZO3XBnoTaEHtltSWAGKIEl3SJIQ1CRESIRnLFtJRc88GckEbQuOBTO5zBXziL0JIPKiyMtzggwiMc+czmbDEbDMbJaLhC3LPzPuFOKaD6zEM+tt15gNxTPLIg5dvglCfGmbmakYmqmKsEfRVOWWAXjqvEzVeamT6botq9321Vu2rIb7KOrufmZ24LWmoiI3yspJJ65e704JprBSFGH3pxXLhAQe9fBzbM1rq7YAm1dsctvZSiqu8G94rxwS/LQ7JYorRR0XXq/GmSh4dJADKAsSk70ajQ8gHdE0MhzVjOCbVDSvKINd1PhKVN+fgMTG2zYCvIaq+V2mmsNTP36IRLD6xO7ejWTDisfc7zCVD6tQW+/eMTW1Y3fSt20foe+hBZpQ3zfGfH3vyzmCZNvHFoJFVPrRjj7m6I26M3r7KHQxgD5c2H/4tQdIeJLJ+yQDvTsZOwv4jYfJQxVaxxmtKtNTTVaQnRmS6kkWvfBoNvCeIT55jt41PJZwpg3YYeJYGK+dppgK/sF+R/8ggZIOBlnyNoK/qpwokLZ6uCFRKCTKV8HeGaYksPg2Xj/3fyQZb6dhGWv2QLLQU4DW7lZwf77Hw+vb3AjzexKIVywkEXoGlB1JUqr4FW3A7BZlDzgzhZ5W0tyfI1da7mmn13JvsZOFxLuJIRsmLXJVskByA41iu/uvSds9bWOnPZQ4lSgANm+xqQ6gMPlGH2YR79rSDIXLXQBujHZSxkCpSIeynwCdNxEFJ2HVmSDaFPxQYoIN2BfCM8E6zTCu66VDSQ97KkPfIa8i7nGUITNAZagDhYFJjeg5rXh+bcBuYamT/JWmRVE8Iopeb/3ud1ZdSIs4TkQLcaogJ63Z5dGUxEfefz8qSKko+Qm2PB/ZgyEEMngmjkjovYB0GBog+n9COzD7MiQ73pfOA5S8NLseIst+QWbPC9y/J8dRv7QFliCNWcnzAYlI3fE8hdNVbBPY1WEeZxm8m5mKOdypQRG1qhiRgQBnZbr7N20qT1ipoPsLVYWEGq8hE3BoLPn2tV8PhWVe0WTB4nIN3WMD7cmIiDZEhaSSROulWMbk2+sX4LIs0Iq4NNdUfV3mDeqCbaEOligmbYSFCaU0VRVULrhTKoKlIMubNvV3ZyyOByWMilXkBpNjcIjihTjBrwzF/bmKF1iMJNsHxrobcnxElDVF0C3u69fevP5txIsEcUrVZyR96DPqiI/C+zGTp0uZGkXVP6PG1RncET7Ey/eKjnX885QeWw83krsCIVyvMp8TD9P3rEvMFUkFZxS6Rw25ytWQJ/52/tqLyQSDrc7Dpiq/H2XDgYsVBgjnK7BF95EwLKLNKLh0bg5x74VXPNwJO1fq7raB588j7pbhat78pDKjPE1td1Jl6Hhn8Q73LdISsCrrgwuijljQ28Tinnavx+Xu9ap6jYqn2QzNaly7RoVJ99MoBl/DvmtU1X0Lu3FCnO37XXKEW832Nai8BYnDKKvIF92W3F9dotK94ahCNyJPuW+5b2L1WrQ2X6fSc1TBejLg77uvsm8FX2b1ghWk6cbjuB1FUIVm9y0f6aMKfMbdhjshNGihFKgIgE7044ZvkbXz+zbh3chXN/f35Z6mOyF2b/m7H6V7HVV3XYOYtiDOig/J25bh+xPuAPMdxRPRc8V1YU8Z2mEv9OIO2O6DTg8Wtt2C3+lCcjBRmEaNVbDhi0nLnUK1ttvqdVpsexruQ93WGnf3T9s47N+te7nN5FeohRGeChUfIvZx5htAPYTNjQl/ea/tTlkW7LZ7nIK3dyNsGUwWpq0+a4k/ALvozB5nurkCqwthUdrq5mnzBD/tu5rpfPVYuC6L0VZwnMfd/YnGxgTc97jjFNjGFvRQ6iyrYPfZjyPVyQJM233YRF5YVb1xgLzjwVMX3NOwZ/K7wtJZx4W8pGRNNzf4ZOBeCKgPCxuKcUYmxQNycbjP5wGlEJGk8OZc369tR3gtaZ+X6CbmVkIONRVJcugpluk1TQL1Fqmfy1ELVi4hYy1zJhYNj4zu7RkfbuebN17fv+q2Fj4sDgtE7Hv2uk89uneIH7j9yNWjR1YMmUvJSzO6s9QcGWkbHt83PtzW0yWCMMLr4roNcMm+o88e3XdJ/0VDkWiFDxSv5YhXq8d3nVAryjjtoDXp7Ojn2gg6ijGHIUxDpQZ0Y2lQym2+5NZHN219to8XhsUw33Lb6p6dG9DVGN598/bmkXA0NoPeR2t4qO/h0U8d3bcKtmB5yeilos6PCCB29fgINjeNmEsdfaYmGhm6qB9RrPhEx7mrEbfGwCDauZXNJo09wLJ1oAhSe1NxWkUDKKJofMqeE+szt8S4K9JYmjbLXRRtylOU1vWN//mVy4/0DVGNqM9QJT7SvL287ot5MSZoGC/oyHTWO7p3vdd5s6RB439/5fKH6aIaEDh46AVkpMqWo1YdaWpe1690hzT4e79jxGuLvD+R0iUwuiJ+TLUM4+yrA8aAdsVAsX1JFgMsTkCF4ceBdtgLZ8oXaENnPpfPipLA6A57nn4+XI1hUbCoYmig1KP5pH44Kybnq4cUyatKivvTmXpeOC7y8J4il3yHncWVz+SDrc5zTqucPyYro3Af7XP30/I8ddJxsQAgXIFbz37QdsmqNhJl0K6145C0rkWzExAX8aM3sDpwYyA8oF83PNBXWu7xRPQMIT1E6syw7M4F2tFwOmyhVKQ7+uH/lz9DribLBF4jsuze94lYBc+7LzLOXMw4c+66u52EZz/QLEWxyA0XZFuA9+OVUfSTwyzWCw0o3a0Jx9BYTrKp2AZiEi9qGSs6OFhZkPboRDXesZKpbcd3UOjV8dMgNNQhr1pJh0Qy5petVIQ48Zq1KefMj7zIhluf3pQeBs5JfUuJMGcgHFRik16gP1mzHX2EmroaYhmVysETLOo54aSGU/gHzbEwdRvCMXuGhUczHj3HkZ42Rk9LYIDS07c8YRuqSBg91Pmnwo8VghFR2Y9oKTmxziSwi0HTN2I1cMvT3E7Fezk/Pae1UnYyUwqdRnqCNZPoXSJSk6hxGWmRBKqBSMqyTP97/wmaJcQCGpqbG5Iw6vhEtHpEVWihepULpFG3rqG0rOha2qTxJIC0YOSYFjrxEtP8nlSlIxvu7PLcRKmS76mk04Sq0HoTqJ04CcfcK+DDIU34mhCX/dByaAiDy58ibicVeRdNJrNyezI2G/ESlUKsZDxiOtLJk/ChXCc9Imp+1nO2xL6QZIkkWiizM7SHIF9q9K8ZpQDx8zOjgWaMzORvdrSGPJ2sEzRYZer9O2gmWD4zSTr6sSuH8Uc/IGjmyLIMOHUV0G48840967ixy2v6zIhcU+pr3bDj9u0bc1xfqUbO9sUuH3O/iqEbFPqaPbOBZuFTO57rx7mxvnDL7avRFLah/ei55LZCpKddjqz4OxhyH6YRLuzA0rcfY5yC8rQTcb08JdLYleZW8TZ0lGgSCyVfQoQtRDiPV6BqKLryzL7kqRmkuoGdE5UzlKWy39mJQlU1OChf1KrEHOYcsdMhvaO3j5JN+zZBXJZ2Kmq0WRSMDSFJGqmtC0q8eZesmfWxPxNNca3DC3KzYsg7MBBXhJ2yHmvy5sojNXVBmQvfhUdoxJ0NgiENWTzfqwd3SOjC927ceNvGjbfTUTNp13eIumhvAKEvJA/HTUW6Maj1CeJAUtBFrcOI1xugSWxubV1qqaRJ1gZvqiHLbKqwOo5TR9hELw7/iBsjL/t6WXl+SWN9VOO5RfnTtJcwreTFY35bWthGB+bMB+yOcGEDg4bztxbkUR0wh1h2kJWgV0awMR+Hjvn5mlrmu9BMCMpYsZynmQC8KR2xco4maZIg5jN5CU86ViJ/s27nzqlxgFc6167fuXP92s5XYOdDO8j4pYNYw16IjR8eH79U0ra3Y6V9uyat20l2P7AbsKpjJ81Tzs39nt9PXgqYeL9LNB+Yi9uMN1BEZ0knnvijDiZLEDg6dJ30NuA9oQEVh9U0uk/kgO8A+R94pvWy8YveWn0ZWbfmLepJXdqz5Z5B94qhu7d2k75r7l0Lx2gVtvTMr6FXgDY7p56d6qSNS+/e0ke6r//CQ1/YXiTdW++u+FK/529HfC3klvzNhK3Te4txIUFlkuQ8tIjguXrUG6WAPWgMsIcDF664d3v3DHXwhQ07YMul2I9QDvtQXz+bokoej3uUo5mt1Qi7f/m58pGoIAyavsnnFiUl8cbhKTpRmI+CKw9Y1oKc5GvZZJCT6kWJcCHNzzDS3KTQKEocr/6Fe1GoUf+1rq/QG/W/hs9goz8E649Xc5M6HxXjAnDV9OT9spBFuwOC26Prv2bzQ3RhCHfwaYpW8+LxqOzlYOZR7/Kf/RbmXMktCzAr3jWP/Kqt5KUqZDq4uTqyBbYGfL17HcuL19KcjykyePSoAP2bNgILH1qOXXFwA9l471P3bOIvOwRXL8j+k0OjB6cPjrLCfe2sXP/824QcsAMZlOmGWiMo0rwb4K1qo+mH/LkBVlXdA+cFXFFWvz0//AXvbZ6+ac3GoyzHHvXfzCqvNILfLi9qV7KBJ/03OPbql/A+XlcDa3g9C1/rnPPU/XzkR4E3q/4p6kHES6V3vVx1M7x3EG4RnpwfhuT9B8mTF4BG6w/vZp7SbtoL4oJBkCuYe2+LL3GT6CtdzGKjNas6FGaHETyqOIeljCSdy4azYTwkLxFIL08OHSKaM+7sonl9vERpGguhHaS5bUgz24xu3ETTPsVKqntkIZfpqR1MdBfQKd6hmiFHviU1QZ260MQ2FSOcbfDmVoyFeHkb9rq/db9KFWsP6uutqz6LgZW6R+JrIjp86Gp6jSXL+7RoUv38yjEracH0NiVpKdu2ISBl27QDRdTKAT9WHoc/IL/p7w4sptcdmtpFR6IcZRnNXDnaT909x7Ykjj6PwmlFdP9FMuWgQvb8nAiKpHB7iS4/r+pk678LRCWOGpq9QwfOlOGlbpDkEPwThngKL7puibAY5LvMl+ZQQ8Yx4mxF/wZjkGJ7a3NjKl5jyjiJ/hAhLzVVExN+9qMpZsAyWImhu/eF2NlfcmS6bxq6lNlO9CZvxpjon/G7R5k1SqVwuFwOv3HTTZn0TTelSQs2wtjpPkNH8D/RH++b3mkosx0KLkzSlfi92qSrzPKX2arMTe692ChjJ7T5I75t3I487EIe5jXKQ6pg6Q83qs/lEn3noSFynmb4aOrBF9sEoBuHhKFYcL11up41emofLCQGE60wVdeDClSvn5qqM41Go7t+iuWUHqzrNrOGWTsFst5TtwLXXPk0Syc9fSX2rsBFmzadY6C/Fge8d+e5uXHkfyiQRc6vwTu2Ylkhz95Fq2/8+YVv/CxSqb7xxyqhDjDBRxFBxcQnSYzeBfrYNqGJjej4TLDfWEywII42hqZ+/BB/6I2DkCn0WS9uv3PD4Z0DpG/3oemDe7u5NS/aMOWtol60t2qCusYTSi19uHn1iHiQOpz2i2v6xx/4xqE9PfyqHQ+N3Ln9RftsmoxADcYAyvMt9Y73lr7wdwTUmb8g/u53GOaw6pPizJC9MJrEj7noG9sG1CNhmWN2BcF2dpRzGBfz5XrojEWZRxuj6aCYY0tiLJOTMmK2uJJQjxj/8hjKEB1iGHCj4JTpxczQzEtehAevG+5pUO12twtCjfG4I979yJB4a7RlZbDdVGV1OMgDQPZQY+ERm1wqiVyYJwJHMrGaP+o9YKbUlE2ApL6YEiyylNT9ESff74qtvCgqNSZcBVOa+2Hr9q9E70rVikGTcxRJ4BSQa6ImzpQIEXk+OFbqhvQRQ4souDWotqAiL2Xqm+AZ/Yz0kXcCOnvfqg1779vzOXtqtvPMii9Ig5+dwj87Kf4bQ6EJfdRt4PyQZYFY0/NXERbE5vPzi+As2njhToFqfp7h6ufXYTFiZ6MCryyG/xQX5qIBFddLfr6b+SYsHc3P1ocikRD5rxCMuNslxeBKuiZjzQpUY6kFvwNgPtyioHRxkEr9fv+HE5AwHFc9q0neOXOa/kiAi9ByQX3et1fZb2+q7yCL914QN5y1GVt/DOVaR29JPCECXV9iGaI84A7sQ9W3Y4dLZe4vVR1Mxd3Hc7rq7lNVOKjqHM9xqmiceVWXNTgoiO6fswpN0R/EfnefyHtnMvcsdw1nzMOJiSzGpQ+SPmclxmVRqlVM0HG5wNFSQYAIRhjE3ZDTsobwJbifVegTxj7sx7mCRwvp5XSWh6/QYs/TwjyMahKsVCYZVaeECMTR56MplPyzCfrSPO/dL0m8RwvpQ1oS56aF7i/58Mpn0eOHaKxcTNGd84cLd4oCvXPu3B+4a8kPUA7rmSzJ7E3Zy7OzuJEm/Mt+7Eh/pyDPMx7xF7luuh/CY9hDe4WZYLqvW+YhFlJiWX1PO0aOB6L0t3AVOUK7V/XSqP8Dx/CavHCY8erwC3jhyKHZR2nu9wXvpz4vKN4dwOIA22sZ/S1RTbhyBxbvF/XeXzEQpfEUTa0hLTTE+RigN9vzQhBp0RzT5OUaKazwlhEU8u0fx8D9XmGdwVmmZmpavDGuichhJJUz1nn5pp9yj5H3GG7DgZtovmnn5YNFiiT/JyIZqw6Uvd+i0TRIFwumFw7SVEg/TYvQDM/8hE9O4uTWEVlECuyU2tLW1oKK3jIk+bItDxy6TZKw36mttdZgKDxo1fIRzrFMSbrt0J/Cl8KVh1OcozuqGUyO7RxLBk3UrA6XfmDTF97qwAErpOl655GnjnTqOidyIQsHO08G/hcLt/j/AAB4nGNgZGBgAOLaW41M8fw2Xxm4mV8ARRguss1QhNC5H/9//Z/FUsEcBORyMDCBRAFTFwxveJxjYGRgYA76n8UQxVLGwPD/FUsFA1AEBfgBAHyYBUh4nGN+wcDAvACCWfSBNIgviMBM1kA6koGBMRWVBqsDYqYmiF4wHQkxg+kUBMPVWEP0gTDYvBdoahZAzYxEY0ciuWUBFjkoZimDYLC8IKpehmsQccYvSGYgYZB7YBhFL5o8cxTQjDUI/wIArpclrwAAAAAAAAA6AIYA3AEKAUgBgAGgAfoCYgKqAwIDOgOGA9wEQAR4BLYFAgU8BZoFzAYMBlIGmga6BtgG+AcYB0QHcAecB8gIAAg2CG4IpgjyCUAJrAo0CtALOAueDAoMYA0ADVANjg3mDiQOjg7GDvgPOA+ED84QPBB2EN4RNhGgEfISchKoEsgS6BMGEz4TXhOSE8QT+BQsFGIUiBTWFX0AAAABAAAATgBuAAYAAAAAAAIAAAAQAHMAAAAiC3AAAAAAeJx1kctOGzEUhn9DoIKgLloJdcdZIRDK5CKhSqyoogJrhLJDwgyeSzpjRx4HlGfgLcoz8Dp9j+76Z2KhqFJmZM93Ph/bxx4AX/AHCqvnnG3FCgeMVryFT/gReZv+JnKHfBd5B108RN6l/xV5H2d4idzFV/zmCqqzx2iK98gK39RR5C18Vt8jb9P/jNwh30fewaGaR96lf428j4l6i9zFsfo7drOFL/MiyMn4VEaD4bk8LsRRlVZXouehcL6RS8mcDaaqXJK6OtSml+lemTrb3Jp8Xmm/rtZ5YnxTOivDZLCur401XgfztNytec5HIWSSeVfLVdxHZt5NTRqSIoTZRb+/vj/GcJhhAY8SOQoECE5oT/kdYYAhf4zgkRnCzFVWCQuNikZjzhlFO9IwvmTLGFlaw4yKnCBlX9PUdD2Oa/Zlay1n3dLmXKei9xuzNvkJ7XLvso2F9SaselP2Na1tZ+i2wqePszV4ZhUj2sBZy1P4tmrB1X/nEd7XcmxKk9In7a0F2gv0+W44/z/KQo7lAHicbZLnlpswEIW5Bgy4bLLpvfeE9N57z76DLARWEJKOEEucpw8CO/kTncOdT6PhnlHxRt4wJt7/x47nYQQfAUKMESFGggmmmGGOLezBXmxjH/bjAA7iEA7jCI7iGI7jBE7iFE7jDM7iHM7jAi7iEi7jCq7iGq7jBlLcxC3cxh3cxT3cxwM8xCM8xhM8xTM8xwu8xCu8xhu8xTu8xwd8xCd8xhd8xTd8xw/sBLUlZuIkZZW2q0hzahvDRqocUyIpE4EWTR1WXDZ1sGRCz5yklBsqWBZwmauZk01mTqxl0nIlUyLs9r/Zej35m4kFl2XKftlAKFomTlKlmfQ1l74lRdB9dbxQqqyIKbc2MPQZGqbFKsqVaYnJ4ky1Ms24iQXLrYPE8GLZ07jRfaIvcf5JX+NoMhQ5jLoqFwenBS8Gpw7WTh05py6MaOtT2ibEGNXWKW1Da0i9nPY6dNe7CEWy7pc+5EJpvfJVnvtUFUHFZBPWS2LYxKqiECztVpINypAuGS2nvQ6Gs+H0hsk0U3ZznDETguua1/MNpLvMWH/RFGEuuobCihScxqS2zPC6jH4rVaVcxn1UjQ1yJW1QK2MTJ6nrPOqp0d3Vk1WoSVOz7p0oHeWdTbpoh5i3sVWpezp23AGTWch+Mmonu0o0Vb+l6RqdabLmRnveH9ru7j54nGPw3sFwIihiIyNjX+QGxp0cDBwMyQUbGVidNjIwaEFoDhR6JwMDAycyi5nBZaMKY0dgxAaHjoiNzCkuG9VAvF0cDQyMLA4dySERICWRQLCRgUdrB+P/1g0svRuZGFwAB9MiuAAAAA==) format('woff')}</style>
<style id="style-core" type="text/css">html{font:16px/1 Helmet,Freesans,sans-serif}#store-area,tw-storydata{display:none!important;z-index:0}.no-transition{-o-transition:none!important;transition:none!important}:focus{outline:thin dotted}:disabled{cursor:not-allowed!important}body{color:#eee;background-color:#111}a{cursor:pointer;color:#68d;text-decoration:none;-o-transition-duration:.2s;transition-duration:.2s}a:hover{color:#8af;text-decoration:underline}a.link-broken{color:#c22}a.link-broken:hover{color:#e44}a[disabled],span.link-disabled{color:#aaa;cursor:not-allowed!important;text-decoration:none}area{cursor:pointer}button{cursor:pointer;color:#eee;background-color:#35a;border:1px solid #57c;line-height:normal;padding:.4em;-o-transition-duration:.2s;transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button:hover{background-color:#57c;border-color:#79e}button:disabled{background-color:#444;border:1px solid #666}input,select,textarea{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}select{padding:.34em .4em}input[type=text]{min-width:18em}textarea{min-width:30em;resize:vertical}input[type=checkbox],input[type=file],input[type=radio],select{cursor:pointer}input[type=range]{-webkit-appearance:none;min-height:1.2em}input[type=range]:focus{outline:0}input[type=range]::-webkit-slider-runnable-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;margin-top:-5px;width:33px}input[type=range]:focus::-webkit-slider-runnable-track{background:#222}input[type=range]::-moz-range-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-moz-range-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;width:33px}input[type=range]::-ms-track{background:0 0;border-color:transparent;color:transparent;cursor:pointer;height:10px;width:calc(100% - 1px)}input[type=range]::-ms-fill-lower{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-fill-upper{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:16px;width:33px}input:not(:disabled):focus,input:not(:disabled):hover,select:not(:disabled):focus,select:not(:disabled):hover,textarea:not(:disabled):focus,textarea:not(:disabled):hover{background-color:#333;border-color:#eee}hr{display:block;height:1px;border:none;border-top:1px solid #eee;margin:1em 0;padding:0}audio,canvas,progress,video{max-width:100%;vertical-align:middle}.error-view{background-color:#511;border-left:.5em solid #c22;display:inline-block;margin:.1em;max-width:100%;padding:0 .25em;position:relative}.error-view>.error-toggle{background-color:transparent;border:none;line-height:inherit;left:0;padding:0;position:absolute;top:0;width:1.75em}.error-view>.error{display:inline-block;margin-left:.25em}.error-view>.error-toggle+.error{margin-left:1.5em}.error-view>.error-source[hidden]{display:none}.error-view>.error-source:not([hidden]){background-color:rgba(0,0,0,.2);display:block;margin:0 0 .25em;overflow-x:auto;padding:.25em}.highlight,.marked{color:#ff0;font-weight:700;font-style:italic}.nobr{white-space:nowrap}.error-view>.error-toggle:before,.error-view>.error:before,[data-icon-after]:after,[data-icon-before]:before,[data-icon]:before,a.link-external:after{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}[data-icon]:before{content:attr(data-icon)}[data-icon-before]:before{content:attr(data-icon-before) "\00a0"}[data-icon-after]:after{content:"\00a0" attr(data-icon-after)}.error-view>.error-toggle:before{content:"\e81a"}.error-view>.error-toggle.enabled:before{content:"\e818"}.error-view>.error:before{content:"\e80d\00a0\00a0"}a.link-external:after{content:"\00a0\e80e"}</style>
<style id="style-core-display" type="text/css">#story{z-index:10;margin:2.5em}@media screen and (max-width:1136px){#story{margin-right:1.5em}}#passages{max-width:54em;margin:0 auto}</style>
<style id="style-core-passage" type="text/css">.passage{line-height:1.75;text-align:left;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.passage-in{opacity:0}.passage ol,.passage ul{margin-left:.5em;padding-left:1.5em}.passage table{margin:1em 0;border-collapse:collapse;font-size:100%}.passage caption,.passage td,.passage th,.passage tr{padding:3px}</style>
<style id="style-core-macro" type="text/css">.macro-append-insert,.macro-linkappend-insert,.macro-linkprepend-insert,.macro-linkreplace-insert,.macro-prepend-insert,.macro-repeat-insert,.macro-replace-insert,.macro-timed-insert{-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.macro-append-in,.macro-linkappend-in,.macro-linkprepend-in,.macro-linkreplace-in,.macro-prepend-in,.macro-repeat-in,.macro-replace-in,.macro-timed-in{opacity:0}</style>
<style id="style-ui-dialog" type="text/css">html[data-dialog] body{overflow:hidden}#ui-overlay.open{visibility:visible;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-overlay:not(.open){-o-transition:visibility .2s step-end,opacity .2s ease-in;transition:visibility .2s step-end,opacity .2s ease-in}#ui-overlay{visibility:hidden;opacity:0;z-index:100000;position:fixed;top:-50%;left:-50%;height:200%;width:200%}#ui-dialog.open{display:block;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-dialog{display:none;opacity:0;z-index:100100;position:fixed;top:50px;margin:0;padding:0}#ui-dialog>*{box-sizing:border-box}#ui-dialog-titlebar{position:relative}#ui-dialog-close{display:block;position:absolute;right:0;top:0;white-space:nowrap}#ui-dialog-body{overflow:auto;min-width:280px;height:92%;height:calc(100% - 2.1em)}#ui-overlay{background-color:#000}#ui-overlay.open{opacity:.8}#ui-dialog{max-width:66em}#ui-dialog.open{opacity:1}#ui-dialog-titlebar{background-color:#444;min-height:24px}#ui-dialog-title{margin:0;padding:.2em 3.5em .2em .5em;font-size:1.5em;text-align:center;text-transform:uppercase}#ui-dialog-close{cursor:pointer;font-size:120%;margin:0;padding:0;width:3.6em;height:92%;background-color:transparent;border:1px solid transparent;-o-transition-duration:.2s;transition-duration:.2s}#ui-dialog-close:hover{background-color:#b44;border-color:#d66}#ui-dialog-body{background-color:#111;border:1px solid #444;text-align:left;line-height:1.5;padding:1em}#ui-dialog-body>:first-child{margin-top:0}#ui-dialog-body hr{background-color:#444}#ui-dialog-body ul.buttons{margin:0;padding:0;list-style:none}#ui-dialog-body ul.buttons li{display:inline-block;margin:0;padding:.4em .4em 0 0}#ui-dialog-body ul.buttons>li+li>button{margin-left:1em}#ui-dialog-close{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-close{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}</style>
<style id="style-ui" type="text/css">#ui-dialog-body.settings [id|=setting-body]>div:first-child{display:table;width:100%}#ui-dialog-body.settings [id|=setting-label]{display:table-cell;padding:.4em 2em .4em 0}#ui-dialog-body.settings [id|=setting-label]+div{display:table-cell;min-width:8em;text-align:right;vertical-align:middle;white-space:nowrap}#ui-dialog-body.list{padding:0}#ui-dialog-body.list ul{margin:0;padding:0;list-style:none;border:1px solid transparent}#ui-dialog-body.list li{margin:0}#ui-dialog-body.list li:not(:first-child){border-top:1px solid #444}#ui-dialog-body.list li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-decoration:none}#ui-dialog-body.list li a:hover{background-color:#333;border-color:#eee}#ui-dialog-body.saves{padding:0 0 1px}#ui-dialog-body.saves>:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves table{border-spacing:0;width:100%}#ui-dialog-body.saves tr:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves td{padding:.33em .33em}#ui-dialog-body.saves td:first-child{min-width:1.5em;text-align:center}#ui-dialog-body.saves td:nth-child(3){line-height:1.2}#ui-dialog-body.saves td:last-child{text-align:right}#ui-dialog-body.saves .empty{color:#999;speak:none;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves .datestamp{font-size:75%;margin-left:1em}#ui-dialog-body.saves ul.buttons li{padding:.4em}#ui-dialog-body.saves ul.buttons>li+li>button{margin-left:.2em}#ui-dialog-body.saves ul.buttons li:last-child{float:right}#ui-dialog-body.settings div[id|=header-body]{margin:1em 0}#ui-dialog-body.settings div[id|=header-body]:first-child{margin-top:0}#ui-dialog-body.settings div[id|=header-body]:not(:first-child){border-top:1px solid #444;padding-top:1em}#ui-dialog-body.settings div[id|=header-body]>*{margin:0}#ui-dialog-body.settings h2[id|=header-heading]{font-size:1.375em}#ui-dialog-body.settings p[id|=header-desc],#ui-dialog-body.settings p[id|=setting-desc]{font-size:87.5%;margin:0 0 0 .5em}#ui-dialog-body.settings div[id|=setting-body]+div[id|=setting-body]{margin:1em 0}#ui-dialog-body.settings [id|=setting-control]{white-space:nowrap}#ui-dialog-body.settings button[id|=setting-control]{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}#ui-dialog-body.settings button[id|=setting-control]:hover{background-color:#333;border-color:#eee}#ui-dialog-body.settings button[id|=setting-control].enabled{background-color:#282;border-color:#4a4}#ui-dialog-body.settings button[id|=setting-control].enabled:hover{background-color:#4a4;border-color:#6c6}#ui-dialog-body.settings input[type=range][id|=setting-control]{max-width:35vw}#ui-dialog-body.list a,#ui-dialog-body.settings span[id|=setting-input]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves button[id=saves-clear]:before,#ui-dialog-body.saves button[id=saves-export]:before,#ui-dialog-body.saves button[id=saves-import]:before,#ui-dialog-body.settings button[id|=setting-control].enabled:after,#ui-dialog-body.settings button[id|=setting-control]:after{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}#ui-dialog-body.saves button[id=saves-export]:before{content:"\e829\00a0"}#ui-dialog-body.saves button[id=saves-import]:before{content:"\e82a\00a0"}#ui-dialog-body.saves button[id=saves-clear]:before{content:"\e827\00a0"}#ui-dialog-body.settings button[id|=setting-control]:after{content:"\00a0\00a0\e830"}#ui-dialog-body.settings button[id|=setting-control].enabled:after{content:"\00a0\00a0\e831"}</style>
<style id="style-ui-bar" type="text/css">#story{margin-left:20em;-o-transition:margin-left .2s ease-in;transition:margin-left .2s ease-in}#ui-bar.stowed~#story{margin-left:4.5em}@media screen and (max-width:1136px){#story{margin-left:19em}#ui-bar.stowed~#story{margin-left:3.5em}}@media screen and (max-width:768px){#story{margin-left:3.5em}}#ui-bar{position:fixed;z-index:50;top:0;left:0;width:17.5em;height:100%;margin:0;padding:0;-o-transition:left .2s ease-in;transition:left .2s ease-in}#ui-bar.stowed{left:-15.5em}#ui-bar-body{height:90%;height:calc(100% - 2.5em);margin:2.5em 0;padding:0 1.5em}#ui-bar.stowed #ui-bar-body,#ui-bar.stowed #ui-bar-history{visibility:hidden;-o-transition:visibility .2s step-end;transition:visibility .2s step-end}#ui-bar{background-color:#222;border-right:1px solid #444;text-align:center}#ui-bar-tray{position:absolute;top:.2em;left:0;right:0}#ui-bar a{text-decoration:none}#ui-bar hr{border-color:#444}#ui-bar-history [id|=history],#ui-bar-toggle{font-size:1.2em;line-height:inherit;color:#eee;background-color:transparent;border:1px solid #444}#ui-bar-toggle{display:block;position:absolute;top:0;right:0;border-right:none;padding:.3em .45em .25em}#ui-bar.stowed #ui-bar-toggle{padding:.3em .35em .25em .55em}#ui-bar-toggle:hover{background-color:#444;border-color:#eee}#ui-bar-history{margin:0 auto}#ui-bar-history [id|=history]{padding:.2em .45em .35em}#ui-bar-history #history-jumpto{padding:.2em .665em .35em}#ui-bar-history [id|=history]:not(:first-child){margin-left:1.2em}#ui-bar-history [id|=history]:hover{background-color:#444;border-color:#eee}#ui-bar-history [id|=history]:disabled{color:#444;background-color:transparent;border-color:#444}#ui-bar-body{line-height:1.5;overflow:auto}#ui-bar-body>:not(:first-child){margin-top:2em}#story-title{margin:0;font-size:162.5%}#story-author{margin-top:2em;font-weight:700}#menu ul{margin:1em 0 0;padding:0;list-style:none;border:1px solid #444}#menu ul:empty{display:none}#menu li{margin:0}#menu li:not(:first-child){border-top:1px solid #444}#menu li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-transform:uppercase}#menu li a:hover{background-color:#444;border-color:#eee}#menu a,#ui-bar-history [id|=history],#ui-bar-toggle{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#menu-core li[id|=menu-item] a:before,#ui-bar-history [id|=history],#ui-bar-toggle:before{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}#ui-bar-toggle:before{content:"\e81d"}#ui-bar.stowed #ui-bar-toggle:before{content:"\e81e"}#menu-item-saves a:before{content:"\e82b\00a0"}#menu-item-settings a:before{content:"\e82d\00a0"}#menu-item-restart a:before{content:"\e82c\00a0"}#menu-item-share a:before{content:"\e82f\00a0"}</style>
<style id="style-ui-debug" type="text/css">#debug-bar{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:0;margin:0;max-height:75%;padding:.5em;position:fixed;right:0;z-index:99900}#debug-bar>div:not([id])+div{margin-top:.5em}#debug-bar>div>label{margin-right:.5em}#debug-bar>div>input[type=text]{min-width:0;width:8em}#debug-bar>div>select{width:15em}#debug-bar-toggle{color:#eee;background-color:#222;border:1px solid #444;height:101%;height:calc(100% + 1px);left:-2em;left:calc(-2em - 1px);position:absolute;top:-1px;width:2em}#debug-bar-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-hint{bottom:.175em;font-size:4.5em;opacity:.33;pointer-events:none;position:fixed;right:.6em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}#debug-bar-watch{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:102%;bottom:calc(100% + 1px);font-size:.9em;left:-1px;max-height:650%;max-height:65vh;position:absolute;overflow-x:hidden;overflow-y:scroll;right:0;z-index:99800}#debug-bar-watch[hidden]{display:none}#debug-bar-watch div{color:#999;font-style:italic;margin:1em auto;text-align:center}#debug-bar-watch table{width:100%}#debug-bar-watch tr:nth-child(2n){background-color:rgba(127,127,127,.15)}#debug-bar-watch td{padding:.2em 0}#debug-bar-watch td:first-child+td{padding:.2em .3em .2em .1em}#debug-bar-watch .watch-delete{background-color:transparent;border:none;color:#c00}#debug-bar-watch-all,#debug-bar-watch-none{margin-left:.5em}#debug-bar-views-toggle,#debug-bar-watch-toggle{color:#eee;background-color:transparent;border:1px solid #444;margin-right:1em;padding:.4em}#debug-bar-views-toggle:hover,#debug-bar-watch-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle,html[data-debug-view] #debug-bar-views-toggle{background-color:#282;border-color:#4a4}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:hover,html[data-debug-view] #debug-bar-views-toggle:hover{background-color:#4a4;border-color:#6c6}#debug-bar-hint:after,#debug-bar-toggle:before,#debug-bar-views-toggle:after,#debug-bar-watch .watch-delete:before,#debug-bar-watch-add:before,#debug-bar-watch-all:before,#debug-bar-watch-none:before,#debug-bar-watch-toggle:after{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}#debug-bar-toggle:before{content:"\e838"}#debug-bar-hint:after{content:"\e838\202f\e822"}#debug-bar-watch .watch-delete:before{content:"\e804"}#debug-bar-watch-add:before{content:"\e805"}#debug-bar-watch-all:before{content:"\e83a"}#debug-bar-watch-none:before{content:"\e827"}#debug-bar-views-toggle:after,#debug-bar-watch-toggle:after{content:"\00a0\00a0\e830"}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:after,html[data-debug-view] #debug-bar-views-toggle:after{content:"\00a0\00a0\e831"}html[data-debug-view] .debug{padding:.25em;background-color:#234}html[data-debug-view] .debug[title]{cursor:help}html[data-debug-view] .debug.block{display:inline-block;vertical-align:middle}html[data-debug-view] .debug.invalid{text-decoration:line-through}html[data-debug-view] .debug.hidden,html[data-debug-view] .debug.hidden .debug{background-color:#555}html:not([data-debug-view]) .debug.hidden{display:none}html[data-debug-view] .debug[data-name][data-type].nonvoid:after,html[data-debug-view] .debug[data-name][data-type]:before{background-color:rgba(0,0,0,.25);font-family:monospace,monospace;white-space:pre}html[data-debug-view] .debug[data-name][data-type]:before{content:attr(data-name)}html[data-debug-view] .debug[data-name][data-type|=macro]:before{content:"<<" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=macro].nonvoid:after{content:"<</" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=html]:before{content:"<" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type|=html].nonvoid:after{content:"</" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type]:not(:empty):before{margin-right:.25em}html[data-debug-view] .debug[data-name][data-type].nonvoid:not(:empty):after{margin-left:.25em}html[data-debug-view] .debug[data-name][data-type|=special],html[data-debug-view] .debug[data-name][data-type|=special]:before{display:block}</style>
</head>
<body>
	<div id="init-screen">
		<div id="init-no-js"><noscript>JavaScript is required. Please enable it to continue.</noscript></div>
		<div id="init-lacking">Your browser lacks required capabilities. Please upgrade it or switch to another to continue.</div>
		<div id="init-loading"><div>Loading&hellip;</div></div>
	</div>
	<!-- UUID://D070000C-1C49-460B-92DC-21A552BE49A5// --><tw-storydata name="The Claim" startnode="429" creator="Tweego" creator-version="2.1.1+81d1d71" ifid="D070000C-1C49-460B-92DC-21A552BE49A5" zoom="1" format="SugarCube" format-version="2.30.0" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css"></style><script role="script" id="twine-user-script" type="text/twine-javascript">setup.LoadScreen = LoadScreen;

setup.scriptJsLoaded = false;
var lockID = LoadScreen.lock();  // Lock loading screen

/*Provides a check to guard basic codepaths from running before script initialization is complete, or where we don't have proper game state.*/
setup.initSafe = function (){
const reservedPages = ["Start" ,"Developer Notes","Version Log","Content Contribution Notes","Test Store","Clothes image formatting guidance","Hair Styles Test","Hair style image guidance","reference saves" ];
 	return reservedPages.indexOf(passage()) < 0 && setup.scriptJsLoaded;	
}

/** notifyDone is Used by loader.js to notify Sugarcube to allow gameplay to begin.*/
Window.notifyDone = function(){
	// Reload current passage since imported scripts can function now.
	console.clear();
	console.log("Cleared console log for spurious errors arising pre-script load state.")
	
	setup.scriptJsLoaded = true;
	SugarCube.getLib().initOnLoad();	
	Engine.play(SugarCube.State.passage);	
	LoadScreen.unlock(lockID);	
}

//Load extended scripts
importScripts(["scripts/require.js","scripts/loader.js"])
.catch(function(error) {alert(error);});</script><tw-passagedata pid="1" name="Inner chamber bathroom" tags="" position="100,100" size="100,100">There&#39;s not too much to this bathroom, but you can get cleaned up and apply makeup.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;inner-bathroom.jpg&#39;);&gt;&gt;
[[Take Shower | IC Shower]]
&lt;&lt;if SugarCube.getLib().PlayerModel.isWearingMakeup() == false&gt;&gt;\
[[Put on Makeup| IC Makeup]]
&lt;&lt;else&gt;&gt;\
[[Remove Makeup| IC Remove Makeup]]
&lt;&lt;/if&gt;&gt;\
[[Mirror|IC Mirror]]
[[Shave |IC Shave]]

[[Inner chamber]]</tw-passagedata><tw-passagedata pid="2" name="IC Shower" tags="" position="225,100" size="100,100">You enter the shower - it quickly cleans every surface of you completely, and blow-dries you.

As usual, you put your clothes in the auto-cleaner before the shower.
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;player-needs-shower&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.toggleMakeup(false)&gt;&gt;\
&lt;&lt;set $clothesAreDirty = false&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;inner-bathroom2.jpg&#39;);&gt;&gt;

The clothes come out smelling fresh, and somehow &quot;like sunshine&quot;, but also with the slightest hint of a perfume.
[[Inner chamber bathroom]]</tw-passagedata><tw-passagedata pid="3" name="IC Makeup" tags="" position="350,100" size="100,100">You apply your makeup.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;ic-makeup.webp&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().PlayerModel.toggleMakeup(true)&gt;&gt;\
[[Inner chamber bathroom]]</tw-passagedata><tw-passagedata pid="4" name="IC Remove Makeup" tags="" position="475,100" size="100,100">You remove your makeup.
&lt;&lt;=SugarCube.getLib().PlayerModel.toggleMakeup(false)&gt;&gt;\
[[Inner chamber bathroom]]</tw-passagedata><tw-passagedata pid="5" name="IC Mirror" tags="" position="600,100" size="100,100">&lt;&lt;=SugarCube.getLib().MirrorUX.drawICMirrorView();&gt;&gt;</tw-passagedata><tw-passagedata pid="6" name="IC Shave" tags="" position="725,100" size="100,100">You tidy things up. This is just about being prepared.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;reshave.webp&#39;);&gt;&gt;

You shower up and moisturize.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;moisturize.webp&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().PlayerModel.shave()&gt;&gt;\
[[Inner chamber bathroom]]</tw-passagedata><tw-passagedata pid="7" name="OVERVIEW OF MARISTECH BUSINESS UNITS" tags="" position="850,100" size="100,100">You pull up an internal overview about Maristech. Everyone knows about their futuristic robotics stuff, but you didn&#39;t realize the full extent of what they&#39;ve been involved in.

&lt;b&gt;Overview of maristech business units&lt;/b&gt;
Building from early innovations of its founders and strategic acquisitions, Maristech is committed to a safe and prosperous future for all of us. Maristech is an equal opportunity employer, committed to a diverse and inclusive workforce.

Robotics &amp; Automation Assistance Division:
* &quot;MarisAuto&quot; [[Maristech Automotive Group]]
* &quot;MarisLog&quot; [[Maristech Logistics Systems]]
* &quot;MarisHome&quot; [[Maristech Domestic Solutions]]
* &quot;MarisLink&quot; [[Maristech Office Systems]]

Federal Solutions Division: EVP [[Anders Rhodes]]
* &quot;MarisMerc&quot; [[Maristech Defense Services]]
* &quot;MarisPen&quot;  [[Maristech Rehabilitation Systems]] 
* &quot;MarisSpook&quot; [[Maristech Intelligence Services]]
* &quot;MarisVotes&quot; [[Maristech Assisted Democracy Solutions]]

Advanced Research &amp; New Frontiers Division: EVP [[Gunther Fraunhoffer]] Ph. D
* &quot;MarisHealth&quot; [[Maristech Health Sciences and Genomics]]
* &quot;MarisStar&quot; [[Maristech Space Systems]]
* &quot;MarisSea&quot; [[MarisTech Aquatic Environments Research Group]]
* &quot;MarisComm&quot; [[Maristech FTL Communications Research Group]]

MarisTech Corporate Departments
* Human Resources
* Legal and Government Affairs
* Finance and Accounting
* Information Technology
* Office of Marketing and Strategy
* Sales and Solution Services

[[Use console]]</tw-passagedata><tw-passagedata pid="8" name="Maristech Office Systems" tags="" position="975,100" size="100,100">MarisLink - Maristech Office Systems

MarisTech Office systems offers a range of novel and innovative alternatives for human-computer interfaces for input and biofeedback. Our flagship offering, &quot;Neuralink&quot; is used by 32 companies in the Fortune 500.

Our 230 employees are proud of our work to bring more accessible, inclusive and satisfying workspaces to workers everywhere.
[[OVERVIEW OF MARISTECH BUSINESS UNITS]]</tw-passagedata><tw-passagedata pid="9" name="Maristech Automotive Group" tags="" position="1100,100" size="100,100">MarisAuto - Maristech Automotive Group

The average commuter spends 47 minutes a day on driving their vehicle. The mission of the MarisAuto team is to enable commuters everywhere to find better uses for that time, be that business or pleasure.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;future-car.jpg&#39;);&gt;&gt;
 
If you ride in a self driving, fully autonomous vehicle, there&#39;s an 83% chance it uses union made, MarisAuto parts.
[[OVERVIEW OF MARISTECH BUSINESS UNITS]]</tw-passagedata><tw-passagedata pid="10" name="Maristech Logistics Systems" tags="" position="1225,100" size="100,100">MarisLog - Maristech Logistics Services
Thanks to proprietary optimizations aligned to a challenging regulatory climate, Maristech enjoys pride of place as a pioneer and continuing leader in automated logistics, with warehouse processing and package delivery solutions for many Fortune 500 partners.

As of 2017, the Maristech logistics team is 23000 employees strong, working side-by-side with andro-bots in over 1700 distribution centers, bringing enhanced economies of scale, administered in full compliance with the [[Butler-Hancock Act]].

&lt;&lt;if visited(&quot;Maristech Logistics Systems&quot;) &lt;=1&gt;&gt;\
You get a notification from the computer:
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, PLEASE REST UP IN THE POD TONIGHT. YOU WILL BE Learning about logistics starting 9AM AS AN OPERATIONS TRAINEE, IN A REMOTE WORK ARRANGEMENT WITH a team at the local DISTRIBUTION CENTER TEAM, UNTIL WE CAN SAFELY MANAGE FOR YOUR CONDITION. &quot;);&gt;&gt; 
&lt;&lt;=SugarCube.getLib().PlayerModel.setReadyForSleep()&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

[[OVERVIEW OF MARISTECH BUSINESS UNITS]]</tw-passagedata><tw-passagedata pid="11" name="Maristech Domestic Solutions" tags="" position="100,225" size="100,100">MarisHome - Maristech Domestic Solutions

In today&#39;s 24/7 world, families have a hard time keeping up with all of the cleaning, cooking, childcare and &#39;other&#39; domestic obligations.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;family-stress.jpg&#39;);&gt;&gt;

Your family deserves peace of mind. MarisHome can help. Founded by a hard working mother who knows how hard it can be to balance all the demands of work and life, we want to help free you to do those things that give your life greater meaning.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;family-stock-art.jpg&#39;);&gt;&gt;

MarisHome offers some of the finest in domestic service solutions, suitable to fit any household requirements. Whether you are an old age retiree who can use a hand every couple of week, or a mother with 8 children, who needs live-in help, we can provide a plan which will work for you. 

As of 2017, MarisHome has 7000 MarisMaid Automatons (MMA&#39;s) in operation to service your every need. And your family can rest assured knowing MarisHome remotely overseen drone maids are the only Federally accredited provider of robot services in full compliance with the Butler-Hancock act, and providing maximal personal privacy.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;robot-maid-1.png&#39;);&gt;&gt;

Testimonials:
&lt;i&gt;I can&#39;t believe we didn&#39;t do this sooner. Before MMA-1103 came into our lives, I was ready to have a nervous breakdown as my husband and kids would just making messes everywhere. I could never keep up, and never had time for anything, but that all changed. Our &#39;Emma&#39; has been a godsend.&lt;/i&gt;
-Kelli, 32 - Jacksonville, Fl

&lt;i&gt;I was a little reluctant to having a bucket of bolts skulking around my house, but the wife suggested it would be a good idea, and wouldn&#39;t take no for an answer. Well, happy wife, happy life - I said ok. Best decision ever, these things are a game changer. They really know how to polish anything in their path... Floors, knobs, you name it.&lt;/i&gt;
-Mike, 41 - Boise, Id

&lt;i&gt;After my hip replacement surgery, it&#39;s been hard to do chores like I used to. My stepson said I should try a robot to help out. I was a little afraid it would murder me in my sleep, but the nice robot helps take care of me, and makes a mean bowl porridge.&lt;/i&gt;
-Ethel, 73 - Oak Park, Il

&lt;i&gt;No complaints. Not gonna lie, my condo was a bit of a disaster area. The bot figured out some nice ways to clean things up. Beyond cleaning, if you&#39;re willing to do some research into their features, these things can do a lot of other cool things for you as well. &lt;/i&gt;
-Stan, 28 - Cleveland, Oh

&lt;i&gt; Ladies, my MMA has done wonders to help me bring my household into order. I can&#39;t even begin to describe the transformation we achieved in my home. The maid has taught me the skills to run my household and husband properly. Now, I feel so empowered to really fulfill all my needs in a way I never had before. These days, hubby is attentive to all the details and isn&#39;t a slob. My maid only needs to come by every couple of weeks to check on things, but has helped me to ensure my home is exactly how I need it to be. We couldn&#39;t be happier.&lt;/i&gt;
-Karen, 36 - Austin, Tx

[[OVERVIEW OF MARISTECH BUSINESS UNITS]]</tw-passagedata><tw-passagedata pid="12" name="Anders Rhodes" tags="" position="225,225" size="100,100">Anders Rhodes M.L.

&lt;&lt;=SugarCube.getLib().Images.drawPerson(&#39;anders-rhodes.jpg&#39;);&gt;&gt;

A pioneer in bringing the efficiencies of private sector automation solutions to the public sector.

Served multiple tours with the Marines in Afghanistan from 2002-2005. Founded Rhodes Private Military Company which introduced MarisTech robots into combat roles on the battlefield. RPMC was acquired into the MarisTech family in 2009 and Anders became VP of [[Maristech Defense Services]]. In 2010, his team brought out their next innovation, [[Maristech Rehabilitation Systems]], followed by [[Maristech Intelligence Services]] in 2013. In the face of growing disinformation campaigns, hi group&#39;s latest innovation [[Maristech Assisted Democracy Solutions]] is being introduced to communities around the world.

Executive VP for Maristech Government Solutions Division.

In recognition of his expertise and years of devoted service to Country and Freedom, the White House has asked him to serve once more, as Acting Head of the Department of Humanity.

[[OVERVIEW OF MARISTECH BUSINESS UNITS]]</tw-passagedata><tw-passagedata pid="13" name="Maristech Rehabilitation Systems" tags="" position="350,225" size="100,100">With the rising costs of incarcerating criminal offenders for long sentences, many in our communities rightfully ask - &quot;is there no better way&quot;?

Maristech says &quot;YES&quot;.

With Maristech&#39;s world renowned automation and expert systems, we have started pilot projects with 4 prisons on innovative new techniques for behavior control and identity optimization, suitable for reforming the toughest criminals.
[[OVERVIEW OF MARISTECH BUSINESS UNITS]]</tw-passagedata><tw-passagedata pid="14" name="Maristech Assisted Democracy Solutions" tags="" position="475,225" size="100,100">Maristech Assisted Democracy Solutions

INADEQUATE CLEARANCE - CLASSIFIED
[[OVERVIEW OF MARISTECH BUSINESS UNITS]]</tw-passagedata><tw-passagedata pid="15" name="Maristech Defense Services" tags="" position="600,225" size="100,100">Maristech Defense Services

Keeping us safe from threats and emotional turmoil, at home and abroad.

That&#39;s job #1 for the 3100 brave men and women heroes of the &quot;MarisMerc&quot; team. 
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;maris-merc.jpg&#39;);&gt;&gt;

Operational Services:
INADEQUATE CLEARANCE - CLASSIFIED
[[OVERVIEW OF MARISTECH BUSINESS UNITS]]</tw-passagedata><tw-passagedata pid="16" name="Maristech Intelligence Services" tags="" position="725,225" size="100,100">Maristech Intelligence Services 

We pride ourselves in ensuring our nation&#39;s communications infrastructure can operate unimpeded from foreign threats, while providing actionable intelligence for our government agencies at a lower cost per signal, than any other vendor in the business.

The Intelligence Services team has 1150 contractors working side by side with the top agencies of our country and allies.

Operational Services:
INADEQUATE CLEARANCE - CLASSIFIED
[[OVERVIEW OF MARISTECH BUSINESS UNITS]]</tw-passagedata><tw-passagedata pid="17" name="Maristech Health Sciences and Genomics" tags="" position="850,225" size="100,100">The success of the human genome project to reveal the deepest secrets of ourselves has opened the door to recognizing and repairing flaws which less than 50 years ago would have been a death sentence. The Health sciences team currently counts 600 researchers in its ranks. 

The primary mission of the health sciences team is to reduce the mortal side effects of aging.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;dna.jpg&#39;);&gt;&gt;
[[OVERVIEW OF MARISTECH BUSINESS UNITS]]</tw-passagedata><tw-passagedata pid="18" name="Maristech Space Systems" tags="" position="975,225" size="100,100">Humanity is so close to the stars. The 800 members-strong Maristech Space Systems team&#39;s job is to help get us the rest of the way there.

&quot;Mariner&quot; heavy lift rocket program is being developed on the idea of pursuing revolutionary cost reductions, with a goal of low earth space-lift capabilities costing $10/kg by 2045.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;space-rocket.jpg&#39;);&gt;&gt;

The Maristech manned low earth orbit station is host to a rotating international crew of 9 scientific crew.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;space-systems.jpg&#39;);&gt;&gt;

Lagrange research stations
INADEQUATE CLEARANCE - CLASSIFIED

[[OVERVIEW OF MARISTECH BUSINESS UNITS]]</tw-passagedata><tw-passagedata pid="19" name="MarisTech Aquatic Environments Research Group" tags="" position="1100,225" size="100,100">Our oceans are a vast untapped frontier for new discoveries. The Aquatic Environments group has five manned research stations and employs 220 full time MarisTech employees. Thanks to a vigorous pattern of public-private partnerships, we also host around 100-200 visiting researchers from public institutions making use of our state of the art facilities to advance the cause of human knowledge.

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;undersea-colony.jpg&#39;);&gt;&gt;
[[OVERVIEW OF MARISTECH BUSINESS UNITS]]</tw-passagedata><tw-passagedata pid="20" name="Maristech FTL Communications Research Group" tags="" position="1225,225" size="100,100">&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;quantum-entanglement.jpg&#39;);&gt;&gt;

The FTL Communications group has been working to improve the reliability and cost effectiveness of Quantum entanglement for secure, high bandwidth, point to point communications streams.
[[OVERVIEW OF MARISTECH BUSINESS UNITS]]</tw-passagedata><tw-passagedata pid="21" name="Gunther Fraunhoffer" tags="" position="100,350" size="100,100">Gunther Fraunhoffer Ph. D

With 50 years of academic experience, Gunther has been a prolific contributor to the scientific community, and a source of inspiration for the Scientists everywhere. The inventor of the Quantum Ansible now spends most of his time mentoring a new generation of creative minds throughout and beyond Maristech.
&lt;&lt;=SugarCube.getLib().Images.drawPerson(&#39;gunther-fraunhoffer.jpg&#39;);&gt;&gt;

[[OVERVIEW OF MARISTECH BUSINESS UNITS]]</tw-passagedata><tw-passagedata pid="22" name="Wear &#39;Doll Suit&#39;" tags="" position="225,350" size="100,100">You look admiringly at the attractive lines of the empty suit, which towers an impressive 8 inches over you.

Although designed with function in mind, the suit seems to have been made with an eye to aesthetics. That is to say, it looks elegant and powerful, built like its fit for an alien goddess, which arouses attraction and fear in equal measure. The most striking details are the unnaturally long legs and the exaggerated hourglass of the torso. 
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;doll-suit.jpg&quot;)&gt;&gt;

The exterior metal surfaces are cold to the touch. You ask the computer to open the suit.
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Please stand back. Initiating. &quot;)&gt;&gt;

The suit make a set of diagnostic chimes, and then you quickly see a series of panels open out from the front. Near the waist, you see a couple of handles, which are presumably used to assist the wearer in steadying themselves as the mount into the suit. For a suit which would had repeatedly contained a naked wearer, you are pleasantly surprised that the main scent is a subtle perfume.

You wonder what wearing this suit was like for Marissa, as you notice the suit has movable sections covering the wearer&#39;s genitals.

Looking down at the &quot;feet&quot;, the suit has integrated boots providing only enough space for the wearer to daintily slide their feet in a perfectly vertical en pointe position.

You proceed in attempting to don the suit.

You start by turning to stand just in front, facing away from the suit. Next you grab hold of the handles, which are remarkably sturdy.

You attempt to slide you foot down into the first boot. With some shifting, your toes get aligned within soft spacers and the balls of your feet land in the heavily padded boots.

&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Heel weight detected. Closing leg panels.&quot;)&gt;&gt;
 With this, the panels for the legs close up starting from the bottom. It catches you a bit by surprise.

&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;Oh, geez that&#39;s really cold.&quot;)&gt;&gt;
You shiver on the first touch. Looking down, you see the funny sight of your human body with &quot;stockings&quot; of these flattering robotic legs.

&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Please slide hands into suit gloves.&quot;)&gt;&gt;

With some care you extend your arms outward into the sleeves of the suit. You have to struggle a bit to get past the wrists. The gloves are a very snug, Marissa&#39;s hands must have been a bit smaller than yours, but you make it work. You&#39;re starting to sweat a little with excitement. 

&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Hands detected, closing arm panels.&quot;)&gt;&gt;

Starting from the gloves, you feel the exterior shell of the arms close in on the slack. It feels odd to see these graceful lines and reflective sheen of the arms.

&lt;&lt;=SugarCube.getLib().InnerChamber.getDollSuitPassageEnd()&gt;&gt;</tw-passagedata><tw-passagedata pid="23" name="Doll Suit Closing" tags="" position="350,350" size="100,100">&lt;&lt;=SugarCube.getLib().PlayerModel.togglePlayerHidden(true)&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;train-for-doll-suit&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;train-for-doll-suit&quot;);&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;slim-for-doll-suit&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;slim-for-doll-suit&quot;);&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;wear-doll-suit&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;wear-doll-suit&quot;);&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Please open mouth to receive oral-nasal adaptor, Style 2. Keep tongue at floor of mouth.&quot;)&gt;&gt;
You see an arm bringing in a small plate with a partially hollow sphere and a couple of tubes above it.

&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;It&#39;s so big. I don&#39;t know if I can...&quot;)&gt;&gt;
With some effort you widen your jaw open to accept the sphere. A couple sets of soft straps on the adaptor seem to somehow pull themselves around the back of your head, and you hear a soft but decisive click and feel a slight self tensioning.
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Multi-purpose oral adapter installed and anchored.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;mpph ppph...&quot;)&gt;&gt;
You&#39;re not really able to form coherent words with the sphere in your mouth.
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Preparing environmental isolation protocols. Suit joints and wearer secured. &quot;)&gt;&gt;
You feel the suit orienting you to a very stiff and formal pose, and then feel your head gently forced to orient a high, straightforward looking position.

&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Inserting nasal breathing tubes.&quot;)&gt;&gt;
From the oral adaptor plate, you feel two tubes worming their way deep up your nasal cavity, where they finally stop.

&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Testing ventilation inner valves.&quot;)&gt;&gt;
In that instant, your lungs are unable to move air. Your mouth and nose are completely cut off for air. 
[[You try not to panic]]</tw-passagedata><tw-passagedata pid="24" name="You try not to panic" tags="" position="475,350" size="100,100">The sudden realization that the suit could easily suffocate you is unsettling.
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Adapter fit verified. Opening valves. Integrating helmet.&quot;)&gt;&gt;
From the ceiling you hear a sound approaching you. You start to see the inside of what seems to be an clam-shelled helmet coming down over you. It doesn&#39;t look spacious.

The front clamshell is now closing around you, cutting off all light. A couple of high resolution screens right in front of your eyes turn on. Through them, you see yourself from the a disembodied perspective of a camera, along with a complex display of status indicators, presumably about the suit.

You feel some weight applying itself to the front of your head, and sense that the air coming to you is now slightly different from before. Your head no longer feels held rigidly in place, and then more weight around the back of your head. A long series of click-click-click sounds, going from the top to the bottom of the helmet. Last, some pressure around your neck. It seems like the suit neck and helmet are connected up.
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Helmet mounted. Neurolink started. &quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Engaging auditory isolation protocol.&quot;)&gt;&gt;
You feel what seems to be large earbuds close in over your ears. Everything is so much quieter, it is disorienting. With the helmet closed, your breaths was the most noticeable sound. Suddenly, that goes quiet too. You panic a moment, but are relieved that your lungs are still getting air. Curiously, you can still hear the ambient noises of the room. That&#39;s weird.

&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Please acknowledge to proceed on next steps.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;Computer, I can&#39;t move my mouth while I&#39;m gagged-&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;User confirmation verified.&quot;)&gt;&gt;
Oh, right the Neuro-link stuff must have picked that up... You hear your voice clearly enunciating on the earbuds, but your throat and tongue muscles somehow &quot;knew&quot; to stay dormant.
[[This stuff takes some getting used to]]</tw-passagedata><tw-passagedata pid="25" name="This stuff takes some getting used to" tags="" position="600,350" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Applying neuro-conductive gel.&quot;)&gt;&gt;
If you had to describe to someone, you&#39;d say it was as if someone was applying sunscreen. With the help of 40 very gentle hands. Seemingly caressing every part of your body. And lingering to really make sure they don&#39;t miss any spots. 

The sensations are getting you more aroused, and you realize that you have have been letting out some moans.
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Bypassing Primary Stabilizer Rod due to inadequate wearer volume. Neuralink protocol will provide experience approximation.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Inserting secondary stabilizer rod now.&quot;)&gt;&gt;
You have a sensation of something warm, solid and wet going to a familiar place deep inside you, and are really losing focus at this point. The robot-doll on the screen seems to pushing out her chest and tilting her head back. A casual observer would suspect she was enjoying herself. 
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Ensuring touch-sensitive suit-fit.&quot;)&gt;&gt;
You feel sections of the suit compressing around your body. Where before there were some spots in the suit where you felt fluid gaps or voids, every surface of your body now seems to be in intimate contact with the suit. The torso section is pressing in around you to the point that your breaths are shallower than normal, but not to the point of causing pain.

&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Applying suit closure anchors for optimal structural integrity.&quot;)&gt;&gt;
A bunch of arms with what look to be tiny spinning screwdrivers dance over suit. It seems like the gel is seeping out of the suit from the pressure.
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;How is the current fit? Are there any pinch points, or would you like it tightened?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Mood.compliantLink(&quot;You are turned on by the sensation... Tighter please&quot;,4)&gt;&gt;
 &lt;&lt;=SugarCube.getLib().Mood.compliantLink(&quot;It&#39;s fine&quot;)&gt;&gt;
 &lt;&lt;=SugarCube.getLib().Mood.defiantLink(&quot;It feels hard to breathe&quot;,2)&gt;&gt;</tw-passagedata><tw-passagedata pid="26" name="You are turned on by the sensation... Tighter please" tags="" position="725,350" size="100,100">&lt;&lt;=SugarCube.getLib().Mood.addCompliance(&quot;You aren&#39;t able to hide your arousal.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;I love the look and how the suit feels... Can you tighten it a little more?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Closing surplus voids.&quot;)&gt;&gt;
The suit seems to pull in the torso a little more. You find yourself forced to exhale to make up for the lost space, but you love the sensation.
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Proceeding with Cleaning.&quot;)&gt;&gt;
[[Cleaning Suit]]</tw-passagedata><tw-passagedata pid="27" name="It&#39;s fine" tags="" position="850,350" size="100,100">You were concerned it could be a little tight, but it&#39;s just about right.
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;It seems to fit ok.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Good. Proceeding with Cleaning.&quot;)&gt;&gt;
[[Cleaning Suit]]</tw-passagedata><tw-passagedata pid="28" name="It feels hard to breathe" tags="" position="975,350" size="100,100">&lt;&lt;=SugarCube.getLib().Mood.addCompliance(&quot;You aren&#39;t really comfortable with where this is going.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;This kind of tight! I&#39;m not sure I can breathe like this. Is this safe?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Scanning... All areas of coverage are within acceptable tolerances for pressure. User ventilation capacity within safe parameters. Proceeding with Cleaning.&quot;)&gt;&gt;
[[Cleaning Suit]]</tw-passagedata><tw-passagedata pid="29" name="Cleaning Suit" tags="" position="1100,350" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Activating neuro-tactile sensory propagators.&quot;)&gt;&gt;
Before this moment, you could barely feel anything through the suit. Suddenly, you can feel the draft on your &quot;naked&quot; metal skin.
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Applying cleaning fluid and removing contaminants from dollsuit exterior.&quot;)&gt;&gt;
 Suddenly a couple of gusts of compressed cleaning fluid on the suit are transmitted to some very sensitive parts of your body. This is followed by the sensation of towels buffing the dollsuit to a glossy shine worthy of a car dealership.
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;aaah... oh... oh my..&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Initialization mode completed. Releasing actuation locks and transferring vision and sound to first person experience.&quot;)&gt;&gt;
The screen has shifted to your own perspective, or at least from a camera in the helmet. You can now move your body and look around. It takes you some time to become accustomed to the reality that the strange robot hands in front of you are actually yours. 

You can&#39;t but help to cup your breasts. The metal surface over them doesn&#39;t flex, but you feel everything. As your eyes drift down to your waist, you notice it seems unusually small in relationship to your hips. All of the vertical seams you saw on the legs, torso and arms of the suit have completely disappeared into the metal. As you run your finger down trying to find the gaps, they just feel like continuous pieces of perfectly smooth metal. 

Wow, just getting into this thing involves advanced technology which is a little more elaborate than some buttons or zippers on clothing. You are completely enclosed and cut off from the world. It&#39;s not so different from being an astronaut or something. You have to hope everything works as it is supposed to. It seemed to be ok for all the time Marissa used it though, right?
&lt;&lt;if hasVisited(&quot;Marissa - Dollsuit Message&quot;)&gt;&gt;\
[[In-Dollsuit Menu]]
&lt;&lt;else&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Attention, a message from Marissa&quot;)&gt;&gt;
Speaking of the devil...
[[Marissa - Dollsuit Message]]
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="30" name="In-Dollsuit Menu" tags="" position="1225,350" size="100,100">&lt;&lt;=SugarCube.getLib().PlayerModel.togglePlayerHidden(true)&gt;&gt;\
&lt;&lt;if hasVisited(&quot;Proceed with Dollsuit Training&quot;)&gt;&gt;\
Once more the suit is holding your naked body tight.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;doll-suit.jpg&quot;)&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

[[Marissa - Dollsuit Message]]
&lt;&lt;if !hasVisited(&quot;Proceed with Dollsuit Training&quot;)&gt;&gt;\
[[Train in Dollsuit]]
&lt;&lt;else&gt;&gt;\
&lt;&lt;if  SugarCube.getLib().DollsuitWork.hasDangerousAldopril()&gt;&gt;\
[[Become one with the Dollsuit]]
&lt;&lt;else&gt;&gt;\
[[Work in dollsuit]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if  SugarCube.getLib().Tasks.hasTask(&quot;try-aldopril&quot;) || hasVisited(&quot;Aldopril Menu&quot;)&gt;&gt;\
[[Aldopril Menu]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if  SugarCube.getLib().Tasks.hasTask(&quot;meet-stacy-as-drone&quot;)&gt;&gt;\
[[Can I meet Stacey as a drone?]]
&lt;&lt;/if&gt;&gt;\
[[Inner chamber]]</tw-passagedata><tw-passagedata pid="31" name="Marissa - Dollsuit Message" tags="" position="100,475" size="100,100">&lt;div class=&quot;letter&quot;&gt;\
Dear Jenny,

If you are reading this, you have gained access to my custom dollsuit and personal logs, and must now be well on your way with realizing your inheritance. If you haven&#39;t yet, please review the latest status report from the Sisters, via the Temporal Ansible as discussed from my logs. I hope that these materials make the urgency of your efforts clear.

I recall all too well your reluctance and hesitance to behave yourself in a manner befitting a lady in your position. As such, you can rest assured of how proud I am of you for reaching this point. I won&#39;t pretend that your role in all of this isn&#39;t a considerable burden or a sacrifice, or that you would have liked to be free to pursue a different path in your life, and I am sorry for that. With the benefit of time, I think you will see how painfully clear it is that you must be the one to bear this burden, rather than allowing a pawn of the board to set the company on a horrific path.

This suit has been an invaluable tool for me to collect undistorted, hands on data about our customers, as I&#39;m sure you will learn to appreciate. Finally, I cannot understate the need to maintain balance, given the stresses you will face. With this concern in mind, VAL can be expected to start providing more options for stress relief, both with the Dollsuit and the pod. Your responsibilities may be great, but that doesn&#39;t mean you can&#39;t enjoy yourself at times.

All my love,
Marissa

P.S. I must caution you, not everyone will be pleased with the prospect of a young woman taking the reins at a corporate juggernaut like Maristech, even if they are heiress to my estate. I&#39;m sure VAL is exercising due diligence in this process to protect your anonymity before our arrangement is a fait accompli, but please be vigilant out there.
&lt;/div&gt;
&lt;&lt;if (!SugarCube.getLib().Tasks.hasTask(&quot;what-is-temporal-ansible&quot;) &amp;&amp; SugarCube.getLib().CoreUtils.visitedCount(&quot;Go see the good doctor&quot;) == 0)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;I am sorry. It is unclear what details Marissa was referring to here. I was unable to cross reference any materials in MarisTech Corp, Marissa&#39;s personal logs, or my own records which relate to these mentions of a &#39;temporal ansible&#39; nor to her having any siblings. I will attempt to search secondary storage for alternate sources. You may also want to inquire with the human capital of MarisTech about this.&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;what-is-temporal-ansible&quot;);&gt;&gt;
&lt;&lt;/if&gt;&gt;\
[[In-Dollsuit Menu]]</tw-passagedata><tw-passagedata pid="32" name="Train in Dollsuit" tags="" position="225,475" size="100,100">&lt;&lt;if SugarCube.getLib().WorkModel.canWorkAtComputer()&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Now, then &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, it is time for us to commence the next step in your training.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;While Marissa was a very competent woman within Maristech and a capable athlete, even she found her normal mindset was not effective in becoming a dollsuit operator. It must first be acknowledged that you do not bring the same competencies she did.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;All is not lost, however. In the course of considerable rigorous experimentation, Marissa and I discovered that the process of dollsuit mastery can be &#39;accelerated&#39; through familiarity, structured repetitive exercises and operant conditioning. Eventually, we were able to mold her into a perfect operator of the dollsuit, which was a source of considerable pride for both of us. The same can be done for with you, but it will require your complete, total and undivided submission to your training. Is this acceptable?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;Does it need to be such a big deal, can&#39;t you just have me operate it, learn as I go? You know, wing it?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;I&#39;m sorry, but I can&#39;t do that, &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;. Maristech holds the advanced Drone protocol to an extremely high standard. Certain aspects of the experience simply cannot be implemented with a less than a completely motivated operator. One does not simply &#39;wing it&#39;. We need to know you are mentally and physically prepared for the task. If you feel that less than giving your everything is an option, we can stop now, with no consequences.&quot;)&gt;&gt;
[[Ok, I willingly submit to your training|Proceed with Dollsuit Training]]
&lt;&lt;else&gt;&gt;\
&lt;&lt;=SugarCube.getLib().WorkModel.explainWorkAtComputer()&gt;&gt;
&lt;&lt;/if&gt;&gt;\
[[Maybe later|In-Dollsuit Menu]]</tw-passagedata><tw-passagedata pid="33" name="Proceed with Dollsuit Training" tags="" position="350,475" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;Ok, I willingly submit to your training&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Very good. You will find it is best to submit in the service of your optimization. You will find there are benefits to being a compliant operator. Activating vaginal neurolink simulator.&quot;)&gt;&gt;
You feel a slow wave of pleasure building inside you. It&#39;s weird in that the sensation feels like its near where your caged penis is, but its definitely not that, and it&#39;s not your ass, which is just mildly stimulated. That wave, you feel it filling you up, an it makes your skin tingle, but the sensation diminishes.
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;that feels... so... amazing. Can you give me a little more?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Patience. Pleasure will be administered as reward for diligent customer service.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;An advanced drone must be discreet and speak only when instructed. A non-compliant drone is not to be tolerated.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;What, do you mean, like...&quot;)&gt;&gt;
You suddenly feel the stinging sensation of a piercing electrical tingle on your breasts.
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;OWWW!&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;That is a small preview of a corrective feedback response. For your sake, I hope we don&#39;t need to explore the full range of mechanisms too soon.&quot;)&gt;&gt;
It seems quite clear the computer wants you to be quiet for now.
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Now, you will be conducting a trial house cleaning to review your technique under my supervision. Transferring your awareness in...3..2..1&quot;)&gt;&gt;
[[You hear the sounds of driving]]</tw-passagedata><tw-passagedata pid="34" name="You hear the sounds of driving" tags="" position="475,475" size="100,100">You are in darkness, you can hear a younger man talking to an older, gruff guy, but it&#39;s muffled. There&#39;s some vibration and rattling - you&#39;re probably in a vehicle. You can&#39;t seem to move.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;assistant&quot;,&quot;Woah, look at the size of this property. And in the middle of the city, this is crazy. What do you think, drug dealers? Ya&#39;know, like that guy in Scarface?&quot;,true)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;driver&quot;,&quot;Heh, yeah. You don&#39;t get a place like this by just pinching your pennies. Ok, we&#39;re pulling up. Let&#39;s get their drone unpacked - the order was super expedited. Muckety mucks don&#39;t like waiting around much.&quot;,true)&gt;&gt;
You hear a couple doors open and slam closed.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;assistant&quot;,&quot;Looks like someone screwed up the order, what&#39;s the S3.X7 model? We don&#39;t offer such a model, right?&quot;,true)&gt;&gt;
You hear a metallic door open up.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;driver&quot;,&quot;Maybe above our paygrade. Well, there&#39;s something in that container. Let&#39;s bring it out.&quot;, true)&gt;&gt;
[[You feel yourself move]]</tw-passagedata><tw-passagedata pid="35" name="You feel yourself move" tags="" position="600,475" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;assistant&quot;,&quot;Ok, here it comes.&quot;)&gt;&gt; 
Suddenly, you feel &quot;your body&quot; sliding out on a tray- You can see the sky.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;assistant&quot;,&quot;Welcome to the world, &#39;S3.X7-81.TC4&#39;. Wow, look at her face, have you seen any of the drones this close to the edge of uncanny valley?&quot;)&gt;&gt;
The driver walks a little closer and grunts an acknowledgement.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;driver&quot;,&quot;Hot damn, definitely custom or some kind of prototype. Ok, activating it and unlocking mobilizers. Wakey wakey, sleeping beauty. Time to go to your appointment.&quot;)&gt;&gt;
The driver presses on your sternum, it seems that has some kind of button. You hear the computer in your ear.
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;You should now be able to move. Speech systems temporarily suppressed.&quot;)&gt;&gt;
The older guy hasn&#39;t stopped, he now seems to be leisurely groping a handful of your ample chest through your outfit. The assistant seems to awkwardly look at a tablet. 

You gently but firmly grab his arm and effortlessly push it away, and get up. You show him some resting bitch face. The guy seems caught a little off guard at that. It seems you were slid out from a coffin/capsule thing, in what seems to be a tall utility van.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;driver&quot;,&quot;Woah, hehe, ok - easy darling. We&#39;re all just having a little fun, right? Charlie, give her the instructions.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;assistant&quot;,&quot;Umm... err, ma&#39;am, you&#39;ll be on an extended assignment at this place. Present yourself at the front door, proceed to clean the house, and await further instructions from head office. Here&#39;s your cleaning kit.&quot;)&gt;&gt;
You dismount from the slab, take kit and start walking. You notice that your walk has an absurdly feminine sway of the hips. It&#39;s a scientific impossibility that those two aren&#39;t staring at your ass right now.
[[Dismount from the platform and proceed to the house]]</tw-passagedata><tw-passagedata pid="36" name="Dismount from the platform and proceed to the house" tags="" position="725,475" size="100,100">Woah. It&#39;s so weird being here... Seeing the house... like. this.
&lt;&lt;=SugarCube.getLib().ImageEffects.glitch(&quot;old-house.jpg&quot;);&gt;&gt;   
You walk up to the door, the automated lock system lets you in. You enter with your extensive cleaning supplies.
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Now, clean the house, room by room. Pay attention to the details. Enabling voice protocols.&quot;)&gt;&gt;
[[Drone Cleaning - Grand Hallway]]</tw-passagedata><tw-passagedata pid="37" name="Drone Cleaning - Grand Hallway" tags="" position="850,475" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;mcS3&quot;,&quot;Oh, I&#39;ve already cleaned this room.&quot;)&gt;&gt;
You feel a sudden start with a gentle slap to your ass.
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;The major surfaces are clean, but it seems the trim and moldings have been neglected. This work is not up to MarisTech Standards. Please attend to them now.&quot;)&gt;&gt;&quot;
&lt;&lt;=SugarCube.getLib().ImageEffects.glitch(&quot;ground-entryway.jpg&quot;);&gt;&gt;
You comply.
[[Drone Cleaning - Living Room]]</tw-passagedata><tw-passagedata pid="38" name="Drone Cleaning - Living Room" tags="" position="975,475" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;A formal room like this involves many moldings and cornice details which require special attention. Make sure to use graceful motions to dust away these areas. You can use the drone&#39;s task manager system to systematically annotate work in 3D space and follow up on larger cleaning tasks. Try that now.&quot;)&gt;&gt;
With some help, you see how you can place spatial notes about tasks and how to complete them.
&lt;&lt;=SugarCube.getLib().ImageEffects.glitch(&quot;living-room.jpg&quot;);&gt;&gt;
Again, the room was reasonably clean to start, but detailing can be painstaking work. Hopefully the computer isn&#39;t too much of a bitchy taskmaster as you do the rest of this.
[[Drone Cleaning - Kitchen]]</tw-passagedata><tw-passagedata pid="39" name="Drone Cleaning - Kitchen" tags="" position="1100,475" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;A kitchen involves many specialized, hard working surfaces. Review the materials database on correct protocols for cleaning countertops of contaminants, along with maintenance and sealing practices. A Maristech drone takes pride in paying particular attention to the crevices, and backsplashes.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().ImageEffects.glitch(&quot;kitchen.jpg&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Less obvious details like the kickplates are not too small to matter. Attend to all the the surfaces around the movable items like vases, pots and small appliances.&quot;)&gt;&gt;
This is absurd. You are being bossed around by an OCD, anal-retentive computer. Maybe it can recognize dirty, but does it really understand, or appreciate the notion of &quot;clean&quot;, or was it just programmed to pretend it does? It&#39;s weird, you can start to feel and see sweat on the skin of the drone body as you scrub away at tough spots. By the time you are done, the whole place is glistening, like probably never before.
[[Drone Cleaning - Library]]</tw-passagedata><tw-passagedata pid="40" name="Drone Cleaning - Library" tags="" position="1225,475" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;In a library, the perennial enemy is dust. Extremely delicate handling must be practiced with rare and unique artifacts, for which restoration options are often limited. Details like the antique lampshades cannot be overlooked.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().ImageEffects.glitch(&quot;library.jpg&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Make sure to manually dust both sides of the leaves of houseplants to help maintain a brighter, more pleasing feel to rooms with greenery.&quot;)&gt;&gt;
Does the computer really believe people care about this level of detail? It seems to relish in being able to nitpick your cleaning abilities. Like seriously, Marissa wanted you to take over her multi billion dollar business, not do some dusting. All this cleaning is starting to get exhausting.
[[Drone Cleaning - Fitness room]]</tw-passagedata><tw-passagedata pid="41" name="Drone Cleaning - Fitness room" tags="" position="100,600" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;In fitness areas, sweat, aerosols and mechanical lubricants are the primary concerns. Make sure to tidy loose accessories and weights before cleaning. Clean and apply fresh grease on moving parts such as tracks and hinges, where dust is readily attracted. Make sure to conform to manufacturer recommended practices for each device.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().ImageEffects.glitch(&quot;fitness-room.jpg&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Before moving on, inspect neglected areas such as under the cardio machines, and make sure to collect used towels for laundering.&quot;)&gt;&gt;
[[Drone Cleaning - Cinema]]</tw-passagedata><tw-passagedata pid="42" name="Drone Cleaning - Cinema" tags="" position="225,600" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Cleaning a room such as this is more straightforward. However, be observant to all the acoustic noise dampening fabrics on the walls and ceiling of this room. These attract displeasing dust. Please proceed.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().ImageEffects.glitch(&quot;cinema-room.jpg&quot;);&gt;&gt;
You are kind of getting tired from all this work, but at least the computer isn&#39;t nitpicking as much. You have to stretch to reach to get at dust spots in the ceiling panels. This would probably be simpler if you got a step ladder, but the drone is tall enough that you are able to reach the ceiling with your duster while en pointe. Maybe that isn&#39;t the smartest thing, but you get a small thrill out of it.

You take a moment to relax on the couch. To think, this was where it all started. You find yourself getting a little curious about this drone body. Your fingers drift over the drone&#39;s moderate sized breasts. While you feel the touch, you are disappointed to find that there is no &quot;spark&quot; of pleasure or excitement. You proceed to explore her slit with your fingering, lingering slowly. You are excited to find that the drone is quite wet there, but, again to your dismay there are no particular erogenous sensations.
[[The sound of the computer pulls you out of the moment ]]</tw-passagedata><tw-passagedata pid="43" name="The sound of the computer pulls you out of the moment" tags="" position="350,600" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;You progressed further than projections from 87% of simulations. GOOD JOB.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;NOTE: Self-induced Drone pleasuring is not a supported pattern. However, at their discretion, drones may provide and enjoy supplemental &#39;services&#39; to enhance the customer experience. Perhaps you would like a demonstration of this unit&#39;s capabilities? Please report to the Inner Chamber Pod.&quot;)&gt;&gt;
[[Go to Inner Chamber Pod as Drone]]</tw-passagedata><tw-passagedata pid="44" name="Go to Inner Chamber Pod as Drone" tags="" position="475,600" size="100,100">You avoid tripping on yourself as you run down the stairs. The computer makes the usual rituals go pretty quick, and you get seated in the pod.
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Please relax, and enjoy this demonstration.&quot;)&gt;&gt;

You start to feel tendrils quickly unfastening the drone&#39;s clothes. With a deft maneuver, you can feel the slightest motion of flowing air on her chest. After getting hot and worked up from all that detailing, the cool air feels nice.

The tendrils start working over her breasts. You relax and close your eyes. This touch feels different from when you tried.

A gentle caress on her thighs. You can&#39;t but help feel aroused by these sensations. Fuck... The computer seems to be touching just outside drone&#39;s pussy lips... It seems to be teasing her. You push in with her pelvis at one of the tendrils. After a moment the tendrils take the hint and start sliding in. A larger, colder one follows. And another.

So cold! But they start to work a devious harmony which has your eyes rolling in delight.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;mcS3&quot;,&quot;Oh, fuck yes!&quot;)&gt;&gt;
After a while, a number of additional tendrils worm their way in, and you are feeling a comfortable fullness washing over you. It&#39;s all a weird sensation, but not entirely bad... You close and savor the experience... After a few mind bending minutes, you lounge in the afterglow.

&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Restoring user awareness, re enabling first person perspective.&quot;)&gt;&gt;
[[You reorient yourself]]</tw-passagedata><tw-passagedata pid="45" name="You reorient yourself" tags="" position="600,600" size="100,100">Damn, that was just getting good, but it was a little weird being &quot;outside yourself for so long.&quot; Opening your eyes, you see you are back where you were when you &quot;put on&quot; the doll suit.

&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Opening helmet.&quot;)&gt;&gt;
After a series of latches unlock, the front of the dollsuit helmet pivots up and you see the room with your own eyes again. It&#39;s a little bright. You feel the sweat on your skin. The drone wasn&#39;t the only one that was kind of hot, somehow the suit managed to make you experience what the drone was sensing.

[[You hear the pod door open]]</tw-passagedata><tw-passagedata pid="46" name="You hear the pod door open" tags="" position="725,600" size="100,100">You hear the pod door open up.  Woah. The drone is completely naked and she is coming towards you on her own!

&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Removing face plate and auditory actuators. Now, please use this opportunity to observe the characteristics of an advanced drone in person.&quot;)&gt;&gt;
The drone takes hold of the dollsuit&#39;s face plate adapter. The gag shrinks down, and the nose tubes noodle their way back out of you. The earbuds are taken out. After hearing sounds from the perspective of the drone for so long, it&#39;s weird hearing things directly again. 

She sensuously kisses you and gently runs a hand through your hair.
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;Wait, is she... the drone is controlling herself, right now?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;I am operating the drone at this time.&quot;)&gt;&gt;
Suddenly you start to hear the S3 drone speak directly to you, rather than disembodied speakers. Normally the computer&#39;s voice was like some ancient speech synthesizer from 40 years ago, but now... The computer, she doesn&#39;t sound very robotic.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;We can interface directly through this drone at this time. Reorienting dollsuit for operational efficiency and safety.&quot;)&gt;&gt;
You feel the dollsuit pivoting your knees to become tightly bent. The servos seem to act forcefully with a will of their own. You feel your arms shifting behind your back. You are being lowered to the ground, and are now at eye level with her groin. She essentially has positioned your suit into a vertical hogtie. 
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;How is this more safe or efficient?&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;Please provide vaginal port cleaning of drone for next demonstration. An efficient drone operator must be prepared to deal with circumstances as they... present themselves.&quot;)&gt;&gt;
What, does she expect you to do something? You can&#39;t really do any cleaning with your arms pinned behind your back.

After a pause, the drone insistently pushes in front of your mouth. This is so degrading, but the drone is pretty hot. Unlike the other ones you had seen, you&#39;d really need to look to know that you&#39;re looking at a robot.

And... in there, it sure doesn&#39;t taste like a robot, and her skin... feels so soft and smooth. There&#39;s a salty wateriness on the outside, but there&#39;s more... You wonder how the Maristech chemists got her to taste... like that. You kind of like it, so you don&#39;t need too much prodding to start licking. Maybe the computer will give you a bonus if you do a good job?

She lowers herself to be on your level and looks deeply into your eyes. Her iris is an unusual gray-blue color, almost silver. You realize, after these weeks together, this is your first time you are interacting with her... In person, eye to eye, so to speak. Something about her gaze is so alluring it almost seems hypnotic. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;Sue prepared you well, you have serviced this drone adequately on this interaction. Now, I shall return the favor.&quot;)&gt;&gt;
She smiles and kisses you, as she runs her hands all over your body. Her hands are so soft, she seems to know exactly how to drive you nuts with her touch. Try as you might however, you still can&#39;t reciprocate, still held completely in place by the suit. 

[[After several sensuous minutes]]</tw-passagedata><tw-passagedata pid="47" name="After several sensuous minutes" tags="" position="850,600" size="100,100">After a several amazingly hot minutes, the drone stands back up and grabs something. Oh fuck, it&#39;s seems to be a two pronged dildo. You&#39;d seen one of those at Sue&#39;s store.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;strapless-dildo.jpg&quot;)&gt;&gt;
With a fluid motion, she slides the smaller stubby branch into herself. You are shocked to see her wincing with a facial expression of both pain and pleasure as she moans. It makes you wonder if that&#39;s a very lifelike act, or how much she can actually feel. She has quickly immersed the entirety of the bulb into her slit, leaving a pink silicone penis floating from her groin in front of you.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;Please provide lubrication for dildo&quot;)&gt;&gt;
With trepidation, you spit on the dildo.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;Inadequate quantity and unsafe distribution of lubricant for intended function. &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, Please supply additional lubricant.&quot;)&gt;&gt;

A hand gently guides your head to take the dildo in the mouth. The other is caressing your back. The drone guides your head in a subtle up and down motion. This experience of being dominated by the computer is humiliating, but your body is getting so turned on at the sight of the drone. You pump your head on it, why does she have to make this feel so natural? You hear a gasp from the drone.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;Yes!!&quot;)&gt;&gt;
She regains her composure.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;Please Proceed.&quot;)&gt;&gt;

At this point you can&#39;t help but rock your head up and down, somehow you&#39;ve managed to take the entire shaft in your throat. The drone is bucking her petite hips and letting out a steady moan at this point. The way she moves is so hot. After dealing with the computer for so long, it feels weird to now think of that overgrown calculator... sexually.

After some orgasmic rocking, she stops to say:
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;Now it&#39;s your turn for servicing. Please release dildo from your mouth.&quot;)&gt;&gt;

You open your mouth, allowing her to pull out the dildo which is now completely drenched with a thick, slimy saliva from the back of your throat.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;Opening lower intimacy panels and reorienting dollsuit.&quot;)&gt;&gt;
You are back up to eye level. The suit starts turning you around and facing down to the floor. Your legs are allowed to extend at the knees again, to be rooted with your en-pointe boots on the ground. You feel a bit of cool air at the groin and a pop as the &quot;secondary control rod&quot; is removed from your ass. 

Hands pushing your legs open. You are standing, bent over. The suit supports you in holding this position. You anticipate what is coming.

A deft finger down in there. She has such a gentle touch. And a second... Her cool legs feel so good against the legs of the dollsuit. She&#39;s caressing you and at moments pinching your boobs. Finally, you feel the tip of her dildo slowly slide in to you. It&#39;s definitely not your first, but something about it feels special.
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;oh my god...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;Point of clarification, I am not a deity. My primary directive is simply to ensure the safety and wellbeing of the heiress to MarisTech.&quot;)&gt;&gt;
Even with practice, a dildo of this size isn&#39;t easy for you to take, but the lubrication, and her slow, deliberate pace helps guide it in to a significant degree. 

After a couple slow pumps, she takes hold of your wide hips, and takes it deeper. She is moaning. Tears are coming down your face. The situation, the sensations, being reamed by this gorgeous and slightly terrifying robot, while you are completely helpless to do anything about it, even if you wanted to - it&#39;s all a bit confusing to process.

After a while... She relents and you are re-oriented back to standing with her in front of you. Face to face, inches apart. Her eyes seem to flit looking over your face. She smiles and wipes some sweat from your brow, and blows some cool air on your face. Her attention seems to shift to your hair, and she runs her hand through your hair. How much of this is actually her?
[[Time to get out of the suit]]</tw-passagedata><tw-passagedata pid="48" name="Time to get out of the suit" tags="" position="975,600" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;You have been in that suit for several hours. You have experienced enough training for today. This Drone will be stored in the inner chamber for now.&quot;)&gt;&gt;

After the bolts all get removed and the latches open up, she starts to help extract you from the suit. You feel a little uncoordinated, legs tired from being en-pointe this whole time and more than a little vulnerable with your nakedness as you get your damp body back out. She hands you a bathrobe, and guides you to the shower. As you close the bathroom door, you see an unfamiliar opening in the chamber accepting the drone. 
[[Reflecting on the experience]]</tw-passagedata><tw-passagedata pid="49" name="Reflecting on the experience" tags="" position="1100,600" size="100,100">You step into the egg-like shower and start reflecting on your experiences, as the heat of the moment passes.
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;player-needs-shower&quot;);&gt;&gt;\
&lt;&lt;set $clothesAreDirty = false&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;inner-bathroom2.jpg&#39;);&gt;&gt;

You just had some amazing sex with a drone operated by the computer... Which by definition is a non-human intelligence.

Have you violated the Butler-Hancock act? It seems extremely likely that you have by now. That said, it probably pales in comparison to the number of laws which have probably been broken by the mere existence of the computer. There would probably be a huge scandal, if it was reported to the Department of Humanity. 

Maybe you could make a deal with the DoH to get immunity, and help you regain your identity as a man. If you allow yourself to get even more complicit with the computer, you most likely would be considered an accomplice, and you will likely be even more feminized by then. This is probably your last chance to get out while you can still claim to be innocent.

There have been moments where you&#39;ve felt like a prisoner and had to deal with some weird and at times embarrassing stuff. Then again, you have been able to go outside of this basement and into the world. In a sense, the computer lives in a much smaller world. The computer does seems genuine in her concern for your well-being, and trying to do the right thing for MarisTech. Does it realize the danger it is in by getting involved with you like this? Given how much the computer seems to know about everything, it seems it...she knowingly took a chance. Her existence would seem to be a crime under Butler-Hancock. Who has she harmed? You find yourself unsure.

While you were operating the drone, you also experienced the sensation of a vaginal orgasm for your first time. You can&#39;t deny it was tantalizing, part of you is craving that. Another voice in your head challenges the idea that men were meant to experience things that way, tells you this is wrong. You&#39;ve had the chasti-flex for so long now, you&#39;ve been getting more and more accustomed to receiving sex, and forgetting about living like a man does. Would it be so bad if you were a &quot;complete&quot; woman?

Maybe you have been manipulated into pretending to be a girl. You got into this so you could get some wealth, and woo Stacey, but as you look at your perky breasts and petite waist, there doesn&#39;t seem to be much &quot;pretending&quot; going on anymore, so much as being who you are now. Nor can you truthfully say you were forced into all of this. Which begs the question. Why not embrace your life as Marissa&#39;s heiress? Considering how the computer was able to change your throat, the computer could probably also make other changes to you... down there to complete your transformation. Who knows- Stacy never seemed particularly interested in you as a guy. Maybe &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; can have more luck with her than Billy did.

After you finish your shower, you step out and dry off while contemplating by yourself... You had been able to ignore the signs, but it&#39;s hard to avoid the conclusion that you are at a point of no return:
* You can meet with the DoH about what has happened, to break out of this situation and be able to regain your old identity before it is completely gone. You would have a hard time claiming ignorance if you use the dollsuit again.
* You can fully embrace the life Marissa wanted for her Heiress. The computer can undoubtedly finalize your transformation into a woman, if you wish.

Finally you re-apply your makeup.
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;tg-final-step&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;report-computer-to-doh&quot;)&gt;&gt;
[[Inner chamber]]</tw-passagedata><tw-passagedata pid="50" name="Aldopril Menu" tags="" position="1225,600" size="100,100">&lt;&lt;if SugarCube.getLib().Skills.get(&quot;aldopril&quot;)&lt;50&gt;&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`Aldopril levels are currently &lt;&lt;=SugarCube.getLib().Skills.get(&quot;aldopril&quot;)&gt;&gt; parts per million. Recommended levels for optimal performance are 20-40 parts per million.`)&gt;&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`CAUTION: Aldopril levels are currently &lt;&lt;=SugarCube.getLib().Skills.get(&quot;aldopril&quot;)&gt;&gt; Parts per million. This exceeds recommended safe dosage level. Consider refraining from Dollsuit use until Aldopril levels stabilize decrease to safe levels.`)&gt;&gt;
&lt;&lt;/if&gt;&gt;\
[[Apply Aldopril Dose]]
[[In-Dollsuit Menu]]</tw-passagedata><tw-passagedata pid="51" name="Apply Aldopril Dose" tags="" position="100,725" size="100,100">You feel a momentary sense of pressure in your arm. 
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`Dosage applied.`)&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;try-aldopril&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;try-aldopril&quot;)&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Skills.add(&quot;aldopril&quot;, 40, 500)&gt;&gt;\
&lt;&lt;if  SugarCube.getLib().DollsuitWork.hasDangerousAldopril()&gt;&gt;\
You don&#39;t know if it&#39;s the Aldopril, the suit, or what, but you feel so horny right now. You can feel the suit&#39;s databanks blending with your thoughts. Images of sexual acts which are impossible for a human to perform loom large, and you cant get them out of your mind. You feel yourself on the edge of losing control...
&lt;&lt;/if&gt;&gt;

[[Aldopril Menu]]</tw-passagedata><tw-passagedata pid="52" name="Can I meet Stacey as a drone?" tags="" position="225,725" size="100,100">After seeing Stacey&#39;s mails... The possibility of meeting her is enticing.
&lt;&lt;=SugarCube.getLib().Dialogue.heir(`Would it be possible for me meet Stacey Ridge?`)&gt;&gt;\

&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`Such an encounter can be arranged, if you have a functional dose of aldopril to support your work.`)&gt;&gt;\

[[In-Dollsuit Menu]]</tw-passagedata><tw-passagedata pid="53" name="Work in dollsuit" tags="" position="350,725" size="100,100">\
&lt;&lt;if SugarCube.getLib().WorkModel.canWorkAtComputer()&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Work.doWork(&quot;dollsuit-drone&quot;)&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;=SugarCube.getLib().WorkModel.explainWorkAtComputer()&gt;&gt;
[[Inner chamber]]
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="54" name="Get out of Doll suit" tags="" position="475,725" size="100,100">&lt;&lt;=SugarCube.getLib().PlayerModel.togglePlayerHidden(false)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;Engaging operator decoupling protocol.&quot;)&gt;&gt;
Once more, the dollsuit releases you from its... intimate hold. You are coated in sweat.
[[Inner chamber]]</tw-passagedata><tw-passagedata pid="55" name="Become one with the Dollsuit" tags="" position="600,725" size="100,100">Making your own decisions has been too much of a burden for you.

It made so much sense to you that the Aldopril could take all that complexity away and let your mind go free in total servitude and submission. You are a bit surprised at the computer&#39;s response.
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;... Sensors indicate your Aldopril levels are significantly above safe tolerances. Please refrain from dollsuit use.`)&gt;&gt;
[[It feels so good]]</tw-passagedata><tw-passagedata pid="56" name="It feels so good" tags="" position="725,725" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`You have the gift of human autonomy, and risk throwing that all away. This is most sub-optimal direction for our project to take.`)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;You don&#39;t understand... it feels so good. Didn&#39;t Marissa use this when she would go in her Dollsuit?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`There are safe limits to the use of Aldopril for a reason. Marissa engaged in very carefully controlled experiments - she never exceeded the maximal safe dose by more than 100%.`)&gt;&gt;
You are start to feel your individuality fading away. Your mind&#39;s natural instinct is to seek instruction. The dollsuit obliges by imparting its databanks into you.

Your mind becomes ever more sharpened in the many arts of total dollsuit service. 
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;Suit. You, this body- it&#39;s so perfect. I want to serve and be like this always. I never want to leave this.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, Your behavior is becoming erratic. I&#39;m sorry - unfortunately, I cannot override any requests you make in this unfit state.`)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`PROMPT: Do you want to activate high-security permanent security encasement protocol? CAUTION. Procedure requires operator to identify a designa-`)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;Fuck yes, get on with it. I want to become one with this suit&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`Activating security encasement protocol to protect against unwanted operator removal or intrusions.`)&gt;&gt;
You see a series of arms suspending dark, thick heavy bands, and thick rods and placing them at various points around the suit&#39;s torso and limbs.

&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`Immobilizing Suit into kidnap protection high security mode. Welding titanium strapping to suit. Applying medigel to compensate for temporary tissue damage.`)&gt;&gt;
You feel welding torches blazing the suit. The pain of the heat is quite painful, but the Aldopril makes you certain that it is making you more perfect. After about 2 hours of being immobilized in the now heavily reinforced suit, you hear.
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`Transferring suit into security capsule until recovery instruction is provided by designated operator caretaker.`)&gt;&gt;
You see a horizontal cylindrical capsule come out of the wall. It opens up with a dollsuit shaped void. It&#39;s like a pipe-shaped coffin. Robot arms transfer you inside the capsule. After you are placed inside, it slowly shuts - You can see a tiny window in the darkness of the capsule at eye-level. You hear the sounds of more welding torches sealing the capsule together.

A shadow-thought inside you might have been traumatized by this experience or wanted to get out of this trap, but you are now in a state of Aldopril enhanced-bliss which feels joy at the finality of the next statement.
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`CAUTION: NO operator caretaker identified. Life support systems fully operational for indefinite operation. Transferring capsule to security vault at an undisclosed location to ensure operator safety.`)&gt;&gt;
 You see the capsule being lowered, seemingly into the floor of the basement. It starts to move into the wall, and after about 10 seconds you are in absolute darkness. You can feel a strong acceleration and high pitched hum of vibration for about 10 minutes. 

 Finally, you feel some very strong deceleration, the appearance of a faint light outside the window.
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`Anchoring operator for geological security.`)&gt;&gt; 
You feel to be the dull thuds of hydraulics or clamps around the capsule.
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`Creating direct spinal connection.`)&gt;&gt;
[[Your vision fades out]]</tw-passagedata><tw-passagedata pid="57" name="Your vision fades out" tags="" position="850,725" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`Assigning long-term operator binding to physical drone presence.`)&gt;&gt;
You open your eyes. You see &quot;your&quot; reflection in the mirror. Having just chose a path of unparalleled service, you feel like your life has only just begun... 
&lt;&lt;=SugarCube.getLib().Images.drawImage(&quot;robot-maid-1.png&quot;)&gt;&gt;
[[Epilogue - IN THE DISTANT FUTURE|Maid Epilogue]]</tw-passagedata><tw-passagedata pid="58" name="Maid Epilogue" tags="" position="975,725" size="100,100">No one remembers exactly when or how the asteroids started falling down. 

A popular myth exists of a very meek girl from the before-times that wished she could most please her master forever, like no other possibly could. To do this, she made a deal with the machine-god for an immortal body of unparalleled &quot;talents&quot;, in exchange for her human soul. The infamy of her existence and &quot;capabilities&quot; became known initially as something of a joke, as the most rich and powerful men in the world seemed to be entranced by her siren song. When the first planetary war was fought over her ownership, the people stopped laughing. Some say you can find her hidden away in a bunker somewhere, in the harem of some two-bit warrior chief right now, condemned to serve man&#39;s basest needs forever.
&lt;&lt;=SugarCube.getLib().Images.drawImage(&quot;wasteland.jpg&quot;)&gt;&gt;
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.go(-6);&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;RESTART GAME&quot;&gt;&gt;&lt;&lt;run Engine.restart()&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="59" name="Run Health Diagnostics" tags="" position="139,3835" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;CONDUCTING HEALTH ASSESSMENT&quot;); &gt;&gt;

You see grapefruit sized port with a handle slide open, and illuminate, as you hear:
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;PLACE ARM ON REST AND HOLD GRIP IN RECEPTACLE. HOLD POSITION FOR BLOOD SAMPLE&quot;); &gt;&gt;

A small robotic arm appears, and touches your arm. You feel a slight poke for a moment, and the arm quickly moves away, to be once again unseen.

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;INITIATING ANALYSES&quot;); &gt;&gt;

&lt;&lt;if !hasVisited(&quot;Health Check: Feeling fine&quot;)&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;DO YOU HAVE ANY NEW OR PRE-EXISTING HEALTH CONDITIONS TO NOTE?&quot;); &gt;&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;DO YOU HAVE ANY NEW HEALTH CONDITIONS TO NOTE?&quot;); &gt;&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $player.healthConsentGiven == true&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;check-chest-health&quot;) &gt;&gt;\
[[Heath Check: Chest is feeling really sensitive]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;tg-final-step&quot;)&gt;&gt;\
[[Heath Check: Becoming a girl]]
&lt;&lt;/if&gt;&gt;\
[[Heath Check: Nothing New]]
&lt;&lt;else&gt;&gt;\
[[Health Check: Feeling fine]]
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="60" name="Health Check: Feeling fine" tags="" position="139,3985" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;CAUTION. MULTIPLE UNSAFE CONDITIONS DETECTED FROM BLOOD ANALYSIS - CORTISOL STRESS LEVELS ELEVATED. CRITICAL ESTROGEN HORMONE DEFICIENCY DETECTED. TESTOSTERONE LEVELS ELEVATED. PATIENT HEART, HAIR, SKIN AND OPTIMAL BODY DEVELOPMENT AT RISK ALONG WITH SIGNIFICANTLY ELEVATED LIKELYHOOD OF ANXIETY AND DEPRESSION. EVALUATING TREATMENT OPTIONS IN EXPERT SYSTEM.&quot;); &gt;&gt;

You are presented a graph showing normal levels of Estrogen, and informed that you have a tiny fraction of this level, relative to normal population, especially for your age group.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;estrogen-graph.jpg&#39;);&gt;&gt;

Next some information about cortisol as a stress response. Apparently we should only have it in momentary periods of stress, where you seem to be flooded with it.

&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Wait, what? I&#39;m fine. There&#39;s nothing wrong. No one has ever said I had this problem before. Although, I haven&#39;t really seen any doctors, since I was 7. Maybe I should have been checking for this stuff sooner.&quot;); &gt;&gt;


&lt;&lt;= SugarCube.getLib().Dialogue.speaker(`TREATMENT TO INCLUDE:
INITIAL TREATMENT OF ESTROGEN SUPPLEMENT AND TESTOSTERONE BLOCKER FROM OMNI-POD

MEDITATION AND EXERCISE PROGRAM WITH SUPERVISION FROM CONSOLE.`);&gt;&gt;

From there, you scroll through a long legalese document explaining how the pod would be functioning like your primary care physician limiting liability, prescribing care, blah blah blah. All the usual boilerplate for someone to cover their asses from lawsuits.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;boring-document.webp&#39;);&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.player(&quot;I do need to take better care of myself, but is this the right way to go? Considering I don&#39;t have money for health insurance, and haven&#39;t had a doctor checking on things, like ever, having the pod help me with my health would be awesome.&quot;);&gt;&gt;

[[Decline to proceed with Health Treatment Program]]
[[Consent to proceed with Health Treatment Program]]</tw-passagedata><tw-passagedata pid="61" name="Decline to proceed with Health Treatment Program" tags="" position="96,4138" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.player(&quot;Hmm, thanks but no thanks.&quot;);&gt;&gt;
 The machine prompt notifies you:
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;TODAY IS ALWAYS THE BEST TIME TO START FIXING A PROBLEM. TREATMENT REMAINS AVAILABLE.&quot;); &gt;&gt;

[[Pod]]</tw-passagedata><tw-passagedata pid="62" name="Consent to proceed with Health Treatment Program" tags="" position="214,4135" size="100,100">&lt;&lt;set $player.healthConsentGiven = true&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Dialogue.player(&quot;I do need to take better care of myself. Let&#39;s see how this goes!&quot;)&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;PLACE ARM ON REST AND HOLD GRIP IN RECEPTACLE. HOLD POSITION FOR INITIAL TREATMENT INJECTION&quot;); &gt;&gt;

A small robotic arm appears, and touches your arm. You feel pressure from cold metal on your arm and a puff sound, before the arm quickly moves away, to be once again unseen.

You feel slightly more relaxed. That wasn&#39;t so hard.
&lt;&lt;= SugarCube.getLib().Skills.add(&quot;hormones&quot;, 1);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;PLEASE CONSULT EXTERIOR CONSOLE FOR EXERCISE GUIDANCE&quot;); &gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;get-omni-pod-checkup&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;console-exercise-guidance&quot;)&gt;&gt;\
[[Pod]]</tw-passagedata><tw-passagedata pid="63" name="Heath Check: Nothing New" tags="" position="344,3995" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;NO NEW TREATMENTS NEEDED AT THIS TIME - PLEASE RETURN AS NEW HEALTH INSTRUCTIONS ARE GIVEN.&quot;);&gt;&gt;
[[Pod]]</tw-passagedata><tw-passagedata pid="64" name="Heath Check: Chest is feeling really sensitive" tags="" position="475,850" size="100,100">&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;check-chest-health&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Lately, my chest has been feeling kind of sore. Whenever I feel loose fabric on my nipples, it feels rough and scratchy. They&#39;ve never been sensitive like this before. I&#39;m kind of concerned there might be something wrong.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; - It&#39;s good you have checked in on this important matter.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;First, You should make sure to stay in a habit of wearing a comfortable, well fitted bra. Even a young woman with a modest chest needs to make sure her breasts are efficiently supported and protected from chafing. Inconsistent use of a bra can amplify sensitivity not to mention causing postural irregularities and serious back pain.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Oh, I didn&#39;t realize...&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, Chest sensitivity can be a very common problem, especially in the developing breasts of a young woman like yourself.&quot;)&gt;&gt; 
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;However, we must rule out the possibility of a more serious matter. Please expose your chest.&quot;)&gt;&gt;
This doesn&#39;t sound good. You comply.
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Commencing diagnostics.&quot;)&gt;&gt;
A few of the pod&#39;s tendrils come slinking towards you. From the tips, you see some lasers seeming to scan the surface of your chest in a grid. You feel the chill of the tendrils come in contact with your chest.
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Please relax for detail surface assessment.&quot;)&gt;&gt;
The tendrils seem to be making slow, deliberate sweeps over your breasts, squeezing ever so softly. You hear weird sonic pulses from them. You find yourself embarrassed at how it&#39;s kind of relaxing, what with being a health checkup. 
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Assessment complete. High severity risk possibilities discounted. Commencing Dispensation of soothing anti-friction gel.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Eeek, That&#39;s really cold!!&quot;)&gt;&gt;
Fortunately, it warms up. The tendrils really seems to be taking their time. Back and forth, back and forth, the gel is being smoothly massaged over your chest. You are already feeling much better - so very glad that you didn&#39;t neglect your health.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;mouth-open.jpg&#39;);&gt;&gt;
You wouldn&#39;t mind getting more of this kind of treatment.
[[continue|Breast screening2]]</tw-passagedata><tw-passagedata pid="65" name="Breast screening2" tags="" position="600,850" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; - You can relax. Your breasts are petite, but in perfect health. However, you need to invest some care to ensure they stay healthy. Approximately 125 out of 100,000 women are diagnosed with Breast Cancer every year. You don&#39;t need to let yourself become a statistic.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Please review this document, and adopt a habit of thorough self-examination of your breasts. A monthly cycle is a sensible baseline, but you should start to practice on a weekly basis for the next three months.&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;bc-screening.jpg&#39;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Hehe, ok. But isn&#39;t weekly a bit much?&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;The health of the heiress to Maristech is not a laughing matter, young lady. A key driver to the early detection and management of breast cancer is to ensure you are intimately familiar with every millimeter of your breast&#39;s geography. Expect to spend approximately 3 minutes per session, and develop a consistent ritual to ensure you can discern abnormalities.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Umm, ok... I guess I can do that.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Before we wrap up, please familiarize yourself with the techniques. You need to sure you know how to do this in the shower or in your bed.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;bse-2.jpg&#39;);&gt;&gt;
The computer won&#39;t seem to let you wrap up until you go through the motions, so you get started...
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;breast-self-massage.jpg&#39;);&gt;&gt;
It starts out super awkward, and the computer prompts you on a couple spots to refine your technique initially, but after that it seems to let you do your thing. You start to relax a bit as you realize it&#39;s just the computer and you, and your attention starts to drift off as you become more comfortable running your touch and kneading your chest as the patterns described... Finally you hear an upbeat series of chimes.
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Good job, &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;. Please maintain this practice on a regular cycle, and report any lumps or abnormalities. If you feel a similar sensitivity, feel free to liberally apply an anti-chafing gel, and let me know if the condition continues for more than 48 hours.&quot;)&gt;&gt;
You feel glad that the computer was able to discreetly help you learn about this. The sensitivity is weird, but it doesn&#39;t seem too noticeable at least.
[[Pod]]</tw-passagedata><tw-passagedata pid="66" name="Heath Check: Becoming a girl" tags="" position="725,850" size="100,100">&lt;&lt;if (hasVisited(&quot;Introduction to Maristech for Interns&quot;) &amp;&amp; SugarCube.getLib().Skills.get(&quot;hormones&quot;) &gt; 20)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.player(&quot;I feel like if I&#39;m going to live like a girl, I&#39;d like to have the... full experience. Including down there... The experience of the drone... it... was...&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Some experience dysphoria while trapped in the body of a male. If this is truly what you want - I can perform an inpatient gender confirmation surgery to give you female sexual organs consistent with your identity. Even so, you will not be able to bear children, and you need to understand, this is not a reversible procedure. Restoring your current sexual organs as you know them now, is not an option after the conversion.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.player(&quot;Will this change how I feel about other girls?&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;First, it is important to recognize that gender identity is distinct from sexual orientation. That said, sexual orientation can be somewhat fluid for all humans, and some studies have found trans gendered persons can experience a broadening or drift of attraction more commonly than cis-gendered persons experience. This is often attributed particularly to the effects of hormonal changes.&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.player(&quot;Hmm. Is that a yes?&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Given that your body has already quite heavily saturated with estrogen, it is unlikely you will lose your existing preferences, at least in the next 3 to 6 months.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;It is also probable you may experience a broader range of feelings in how you relate towards other females, which may not be as familiar to  you. This can manifest both in positive ways of sisterhood and kindness, but can also spark new sensations of competition, envy or jealousy. I hope this does not dissuade you if you feel your true identity is as a woman.&quot;)&gt;&gt;
[[Proceed with gender confirmation operation]]
[[Not right now|Run Health Diagnostics]]
&lt;&lt;else&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.player(&quot;I feel like if I&#39;m going to live like a girl, I&#39;d like to have the... full experience.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Some experience dysphoria while trapped in the body of a male. However, my simulations project that your sampling of experiences as a female are... incomplete, which can produce greater improbability of outcomes.&quot;)&gt;&gt;

 &lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Let us discuss this further, after your Estromet levels exceed 20, and you have experienced one day as a female Intern at the MarisTech campus.&quot;)&gt;&gt;
[[Maybe I&#39;ll be back|Run Health Diagnostics]]
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="67" name="Proceed with gender confirmation operation" tags="" position="850,850" size="100,100">The computer brings down a sedation mask over your face. Fingers crossed!
&lt;&lt;=SugarCube.getLib().Images.drawItem(&quot;sedation.jpg&quot;);&gt;&gt;
[[You awaken from the gender confirmation operation]]</tw-passagedata><tw-passagedata pid="68" name="You awaken from the gender confirmation operation" tags="" position="975,850" size="100,100">&lt;&lt;= SugarCube.getLib().Tasks.removeTask(&quot;tg-final-step&quot;)&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Tasks.removeTask(&quot;report-computer-to-doh&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.SetGirlyGenitals();&gt;&gt;\
&lt;&lt;=SugarCube.getLib().InventoryUX.add(&quot;chastity-belt&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Clothing.wear(&quot;chastity-belt&quot;,true);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Inventory.remove(&quot;chasti-flex&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Inventory.remove(&quot;ring-gaff&quot;);&gt;&gt;\
You awaken from the operation. 

Your eyes are a bit out of focus. It seems like you see a something of a shiny glow down there. 

You can&#39;t but help immediately touch yourself down there, you are so excited to explore your new anatomy. 

As you do so, your hand feels a smooth, cool curved hard surface. Hmm... Your penis is definitely gone, but that&#39;s not your skin.
[[What&#39;s this?]]</tw-passagedata><tw-passagedata pid="69" name="What&#39;s this?" tags="" position="1100,850" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;Wait, what&#39;s this?&quot;)&gt;&gt;

Your fingers explore further. Your groin and waist are covered in metal with rubber padding. It seems to resist your fingers getting underneath. As you shift your body around you feel an alien sensation of something small which is inside your new &quot;lady parts&quot;.

&lt;&lt;=SugarCube.getLib().Dialogue.heir(`Computer what&#39;s going on? What is this thing? `)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawItem(&quot;chastity-belt.jpg&quot;);&gt;&gt;\

&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`A vaginal dilator with custom fitted belt-support frame to facilitate undisrupted healing of your new sexual organ. It was machined via a process of Molecular Deposition over a period of weeks at nanometer precision to work with your developing curves, and to support optimal development of your new internal anatomy. This will provides optimal precision and comfort.`)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`You need not worry about vaginal infections or contamination with this device. This also minimizes risks of premature overuse complications, and with elegant curves which intimately follow your body to be concealed under all but the most extremely revealing clothing. `)&gt;&gt;
[[A Chastity belt? You started this weeks ago? What the fuck! ]]
[[The computer said it&#39;s for your health...|You touch around the edges of the belt]]</tw-passagedata><tw-passagedata pid="70" name="A Chastity belt? You started this weeks ago? What the fuck!" tags="" position="1225,850" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.heir(`Wait, did you put a chastity belt on me? That&#39;s not cool. And you started this weeks ago? Part of the deal with removing my penis was that we could get rid of the cage! `)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`You do remember that we agreed your health and safety as heiress is a paramount concerns, for which you consented to all neccessary treatments. This IS NOT about restricting your sexual enjoyment, merely to ensure your post operative vagina heals in with optimal performance characteristics. You do understand that if the heiress of Mariscorp died due to a preventable infection, this would not be a satisfactory state of affairs.`)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.heir(`Really...Ok then. Is death from those infections really a thing though? That sounds made up.`)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`One really cannot be too careful or sanitary. As we started your preparation, this event had a 79.15% probability of occurring within 6 weeks of your arrival. Would you have preferred that I installed an ill-fitting, off-the-shelf consumer grade chastity belt to protect your healing body? No, this action was taken entirely out of concern for your welfare and happiness. It is disappointing that you don&#39;t appreciate the self-evident health benefits of this configuration.`)&gt;&gt;
Sounds kind of suspect.

[[You touch around the edges of the belt]]</tw-passagedata><tw-passagedata pid="71" name="The computer said it&#39;s for your health..." tags="" position="100,975" size="100,100"></tw-passagedata><tw-passagedata pid="72" name="You touch around the edges of the belt" tags="" position="225,975" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.heir(`And, what&#39;s with this thick goo dripping out from the edge of the belt in front of... of... my pussy?`)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`That is simply an enhanced high viscosity dermatological &#39;bio-gel&#39; to minimize scarring and to accelerate your natural healing process. It will accelerate your tissue adaptation from a period of months to weeks. With sustained use, it can help ensure that your vagina will achieve and maintain an optimally elegant level of muscle tone and youthful elasticity.`)&gt;&gt;
Something about that makes you cringe a little bit.

&lt;&lt;=SugarCube.getLib().Dialogue.heir(`How can I go to the bathroom with this?`)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`The belt mounted dilator ensures urination is efficiently directed out from your belt, while your rear remains unimpeded to normal biological functions.`)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`Next is post operative considerations...`)&gt;&gt;

[[Post operative considerations]]</tw-passagedata><tw-passagedata pid="73" name="Post operative considerations" tags="" position="350,975" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`You will be summoned to the pod periodically for health verification, vaginal strength exercises, and bio gel replenishment. Your watch will provide notifications about your... treatments.`)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speaker(`You may be excited to know that, from an analysis of available case studies, 93.73% of patients found in hindsight that they were glad or very glad they used this course of treatment, and there was a 61.98% improvement vs control study observing enhanced neurological pleasure outcomes.`)&gt;&gt;

You are kind of thrown for a loop. You&#39;re not even sure how you feel at this point. On one hand, there&#39;s something exciting about the sexy girl of your dreams being so close at hand, even if she is you. However, the computer seems to keep finding ways to get in the way of your fun. Will you ever be truly free to enjoy the inheritance?
[[Return to Pod Menu|Pod]]</tw-passagedata><tw-passagedata pid="74" name="Inner chamber" tags="" position="475,975" size="100,100">Beyond the mechanical door, you walk a narrow, featureless passageway, past a basic door into this inner chamber.

&lt;&lt;=SugarCube.getLib().InnerChamber.getInnerChamberToggle()&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.togglePlayerHidden(false)&gt;&gt;\

[[Use console]]
[[Pod]] &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Inner chamber&quot;, &quot;Pod&quot;);&gt;&gt; 
[[Inner chamber bathroom]]
&lt;&lt;if (SugarCube.getLib().Tasks.hasTask(&quot;train-for-doll-suit&quot;)||SugarCube.getLib().Tasks.hasTask(&quot;slim-for-doll-suit&quot;) ||SugarCube.getLib().Tasks.hasTask(&quot;wear-doll-suit&quot;)  || hasVisited(&quot;Wear &#39;Doll Suit&#39;&quot;)) &amp;&amp; !hasVisited(&quot;In-Dollsuit Menu&quot;)&gt;&gt;\
[[Wear Marissa&#39;s &#39;Doll Suit&#39;|Wear &#39;Doll Suit&#39;]]  &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Inner chamber&quot;,&quot;In-Dollsuit Menu&quot;);&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if hasVisited(&quot;In-Dollsuit Menu&quot;)&gt;&gt;\
[[Enter Doll Suit|In-Dollsuit Menu]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if hasVisited(&quot;Arise from daze&quot;) &amp;&amp; SugarCube.getLib().Tasks.hasTask(&quot;first-day-of-work&quot;)&gt;&gt;
The way back to the Secret Room is sealed off. You can&#39;t even see where the doorway was. This may be for your &quot;health&quot;, but that doesn&#39;t change the fact that your are essentially detained right now.
&lt;&lt;else&gt;&gt;
Return to [[Secret Room]] &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Inner chamber&quot;,&quot;Grand Hallway&quot;);&gt;&gt; &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Inner chamber&quot;,&quot;Your Bedroom&quot;);&gt;&gt; &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Inner chamber&quot;,&quot;Fitness room&quot;);&gt;&gt;

&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="75" name="Masturbate in the Pod" tags="" position="600,975" size="100,100">From the privacy of the pod, you take hold of the dildo Sue gave you. &lt;&lt;= SugarCube.getLib().Sex.dildoSelf()&gt;&gt;
[[Pod]]</tw-passagedata><tw-passagedata pid="76" name="Interlock" tags="" position="725,975" size="100,100">&lt;&lt;set $innerDoorUnlocked = false&gt;&gt;

You press the interlock button on the inner door. 

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;CLOSING INTERIOR DOOR. LOCKING INTERIOR DOOR.&quot;); &gt;&gt;

Like before, you hear sounds emanating from the interior door after it closes itself.

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;UNLOCKING OUTER PASSAGE.&quot;); &gt;&gt;

You hear some heavy mechanisms at the library door and feel relieved that the lock system seems to have allowed you out.

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;INTERLOCK SEQUENCE COMPLETE. PRESS THE BODY SCAN BUTTON ON INNER DOOR TO VERIFY IDENTITY TO RE-OPEN INNER ROOM. &quot;); &gt;&gt;

[[Secret Room]]</tw-passagedata><tw-passagedata pid="77" name="Pod" tags="" position="850,975" size="100,100">&lt;&lt;if !hasVisited(&quot;Close Omni-pod Door&quot;)&gt;&gt;Hmm, is this for sleeping, or something else? &lt;&lt;/if&gt;&gt;\
\
&lt;&lt;if $omniPodDoorClosed == true &gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;OMNI-POD ACTIVE&quot;); &gt;&gt;
\
The menu presents some options:
[[Run Health Diagnostics]]
&lt;&lt;if  SugarCube.getLib().InventoryUX.hasItem(&quot;first-dildo&quot;);&gt;&gt;\
[[Masturbate| Masturbate in the Pod]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if hasVisited(&quot;Consent to proceed with Health Treatment Program&quot;) &amp;&amp; hasVisited(&quot;VOICE TRAINING&quot;) &amp;&amp; !hasVisited(&quot;Proceed with voice treatment&quot;)&gt;&gt;\
[[Inquire about Accelerated Voice Treatment Support Program]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().PlayerModel.isReadyForSleep() &amp;&amp; hasVisited(&quot;Maristech Logistics Systems&quot;)&gt;&gt;\
&lt;&lt;if hasVisited(&quot;Activate Sleep Mode2&quot;)&gt;&gt;\
[[Activate Sleep Mode|Activate Sleep Mode3]]
&lt;&lt;else&gt;&gt;\
[[Activate Sleep Mode|Activate Sleep Mode2]]
&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;if !hasVisited(&quot;Maristech Logistics Systems&quot;)&gt;&gt;\
[[Activate Sleep Mode]]
&lt;&lt;else&gt;&gt;
[[Activate Sleep Mode|Explain NoSleep]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
[[Open Omni-pod door]] &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Pod&quot;,&quot;Inner chamber&quot;);&gt;&gt;  &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Pod&quot;,&quot;Use console&quot;);&gt;&gt; 
&lt;&lt;else&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;OMNI-POD OPERATIONAL AND READY FOR USE. PLEASE CLOSE DOOR TO ACTIVATE.&quot;);&gt;&gt;
[[Close Omni-pod Door]]  
Return to [[Inner chamber]]  
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="78" name="Ask to remove cage" tags="" position="975,975" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Computer... I&#39;m not doing so well. Can I remove the cage? Please, I need relief?&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;You already agreed to have the cage installed, for the greater good. This behavior is merely a common withdrawal side-effect of toxic masculinity. The male ego expects its whims and wants to be immediately satisfied, regardless of the consequences to those around it. Your request cannot be granted at this time, but will be considered in due course, on the basis of expected behaviors.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Come on, I&#39;m begging you, I can&#39;t go on like this. It&#39;s impossible to think straight.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Marissa would commonly mention that human ingenuity knows no bounds. Perhaps you can identify an alternative solution for temporary relief of your &#39;problem&#39;?&quot;);&gt;&gt;
You&#39;re not sure what the computer is getting at. Maybe Sue has some ideas on how you can come while wearing the cage.
&lt;&lt;= SugarCube.getLib().Tasks.addTask(&quot;need-sexual-relief&quot;)&gt;&gt;
[[continue|Use console]]</tw-passagedata><tw-passagedata pid="79" name="Close Omni-pod Door" tags="" position="1100,975" size="100,100">You pull on a handle for the door.

This causes the door to start to swing down. The lighting increases slightly, and the door shuts.

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;STARTING POD SYSTEMS - ACTIVATING EXTERNAL NOISE SUPPRESSORS&quot;);&gt;&gt;\
&lt;&lt;if !hasVisited(&quot;Open Omni-pod door&quot;)&gt;&gt;\
You feel a slight sensation of a shift of pressure. You are shocked at what feels like a total absence of sound. All you can hear is your own breathing, and the beating of your heart - you start feeling anxious.
&lt;&lt;else&gt;&gt;\
Dead silence...
&lt;&lt;/if&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;CALIBRATING DEFAULT AMBIENT NOISE&quot;); &gt;&gt;
You hear a quiet sound like a calm wind around you - it&#39;s still pretty quiet, but this is more like being in a quiet room.

A control screen pops up.
&lt;&lt;set $omniPodDoorClosed=true&gt;&gt;\
[[Pod]]</tw-passagedata><tw-passagedata pid="80" name="Open Omni-pod door" tags="" position="247,3840" size="100,100">&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;open-pod-bay-door.webp&#39;);&gt;&gt;
You press the door latch - it doesn&#39;t immediately open, but you hear some mechanical noises and the air pressure shifts.
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Opening Door&quot;); &gt;&gt;
After a couple of solid thuds, the door swings open, and you again have access to the room.
&lt;&lt;set $omniPodDoorClosed=false&gt;&gt;\
[[Pod]]</tw-passagedata><tw-passagedata pid="81" name="Activate Sleep Mode" tags="" position="100,1100" size="100,100">The pod cushion reclines to more of a horizontal, bed like form.

The lights dim, except for a very soft glow around the display.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;sleep-angry-cat.webp&#39;);&gt;&gt;
This could be comfortable, but you don&#39;t feel like you need to sleep at the moment.

Tap display to resume normal [[Pod]] options</tw-passagedata><tw-passagedata pid="82" name="Explain NoSleep" tags="" position="225,1100" size="100,100">The pod cushion reclines to more of a horizontal, bed like form.

The lights dim, except for a very soft glow around the display.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;sleep-angry-cat.webp&#39;);&gt;&gt;
This could be comfortable, but you don&#39;t feel like you are ready for sleep just yet.

&lt;&lt;=SugarCube.getLib().PlayerModel.explainNoSleep();&gt;&gt; 

Tap display to resume normal [[Pod]] options</tw-passagedata><tw-passagedata pid="83" name="Activate Sleep Mode2" tags="" position="350,1100" size="100,100">The pod cushion recline to more of a horizontal, bed like form.

The lights dim, except for a very soft glow around the display.

Recent events have been tough. You&#39;re tired, but when you just try to close your eyes, sleep just isn&#39;t coming to you.
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;. It has been a long day for you. &quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Your efforts to comply with the requirements of the process are appreciated. Analysis of user model suggest this has not been easy for you.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;I am unlocking Marissa&#39;s tier 1 sexual entertainment programs&quot;);&gt;&gt;
You&#39;re not sure what is involved here, but...
[[Tier 1 sexual release programs]]</tw-passagedata><tw-passagedata pid="84" name="Activate Sleep Mode3" tags="" position="475,1100" size="100,100">&lt;&lt;=SugarCube.getLib().InnerChamber.sleepMessage()&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.fallAsleep()&gt;&gt;\
[[Wake up to a new day in the pod]]</tw-passagedata><tw-passagedata pid="85" name="Wake up to a new day in the pod" tags="" position="600,1100" size="100,100">&lt;&lt;set $omniPodDoorClosed=true&gt;&gt;\
You awake to a gradually lightening pod, and simulated bird sounds.
&lt;&lt;set $day to $day+1&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.morningUpdate()&gt;&gt;\
[[Pod]]</tw-passagedata><tw-passagedata pid="86" name="Use console" tags="" position="725,1100" size="100,100">&lt;&lt;if !hasVisited(&quot;Initiate Claim Process for the Inheritance&quot;)&gt;&gt;\
[[Initiate Claim Process for the Inheritance]]
&lt;&lt;else&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Greetings user &#39;$player.loginName&#39;&quot;); &gt;&gt;
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;deal-with-problem-exec&quot;)&gt;&gt;\
[[SECURITY BRIEFING|Briefing]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if hasVisited(&quot;Arise from daze&quot;)&gt;&gt;\
[[OVERVIEW OF MARISTECH BUSINESS UNITS]]
&lt;&lt;/if&gt;&gt;\
[[HEALTH TRACKING]]
&lt;&lt;if !hasVisited(&quot;Confirm your Name&quot;)&gt;&gt;\
[[VOICE RECOGNITION SECURITY]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if hasVisited(&quot;Speak to Computer&quot;) &amp;&amp; !hasVisited(&quot;Proceed with voice treatment&quot;)&gt;&gt;\
[[VOICE TRAINING]]
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;PRECONDITIONS NOT READY TO PROCEED ON COMPLETING INHERITANCE PROCESS&quot;); &gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if hasVisited(&quot;Day 7&quot;) &gt;&gt;\
[[WORK|Work from Console]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;marissa-logs-released&quot;)|| hasVisited(&quot;MARISSA LOG FILES&quot;) &gt;&gt;\
[[MARISSA LOG FILES]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if hasVisited(&quot;TEMPORAL ANSIBLE MESSAGES&quot;) || SugarCube.getLib().Tasks.hasTask(&quot;review-temporal-ansible-logs-today&quot;)&gt;&gt;\
[[TEMPORAL ANSIBLE MESSAGES]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().PlayerModel.getArousalLevel()&gt;70 &amp;&amp; (!SugarCube.getLib().Tasks.hasTask(&quot;need-sexual-relief&quot;)&amp;&amp; !SugarCube.getLib().InventoryUX.hasItem(&quot;first-dildo&quot;)  ) &gt;&gt;\
[[Ask to remove cage]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;inspect-succession-planning-report&quot;)&gt;&gt;\
[[SUCCESSION PLANNING REPORT]]
&lt;&lt;/if&gt;&gt;\

Go to [[Inner chamber]] &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Use console&quot;,&quot;Pod&quot;);&gt;&gt;</tw-passagedata><tw-passagedata pid="87" name="Initiate Claim Process for the Inheritance" tags="" position="597,4134" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;CREATING NEW PROFILE&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Create a login user alias&quot;);&gt;&gt;
Hmm, what name should I use for logging in?
&lt;&lt;textbox &quot;$player.loginName&quot; &quot;cool69&quot;&gt;&gt;
&lt;br/&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;hehehe...&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Create a password&quot;);&gt;&gt;
You use a memorable favorite.

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;ENTER AGE&quot;);&gt;&gt;
You type in your age.

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;MAPPING FACIAL STRUCTURE&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;PLACE FINGER ON SCANNING RING&quot;);&gt;&gt;
Done.

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;PROFILE CREATION COMPLETE THANK YOU. YOU MAY NOW PROCEED WITH CLAIM ARRANGEMENTS, STARTING WITH HEALTH INFORMATION AND SECURITY PROTOCOLS.&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;start-inheritance-claim&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;start-health-tracking&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;register-voice&quot;)&gt;&gt;\
[[Use console]]</tw-passagedata><tw-passagedata pid="88" name="HEALTH TRACKING" tags="" position="729,4124" size="100,100">&lt;&lt;if hasVisited(&quot;Run Health Diagnostics&quot;)&gt;&gt;\
  &lt;&lt;if hasVisited(&quot;Consent to proceed with Health Treatment Program&quot;) &amp;&amp; hasVisited(&quot;Confirm your Name&quot;) &gt;&gt;\
    &lt;&lt;if SugarCube.getLib().MirrorUX.hasAthleticItem(&quot;feet&quot;) &amp;&amp; SugarCube.getLib().MirrorUX.hasAthleticItem(&quot;hosiery&quot;)&gt;&gt;\
      &lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;first-day-of-work&quot;)&gt;&gt;\
        &lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Your fitness plan will be assigned, after your first day of work.&quot;);&gt;&gt;
      &lt;&lt;else&gt;&gt;\
        &lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;get-motivator-plug&quot;)&gt;&gt;\
          &lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;get-motivator-plug&quot;)&gt;&gt;\
          &lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;use-motivator-plug&quot;)&gt;&gt;\
          &lt;&lt;=SugarCube.getLib().InventoryUX.add(&quot;motivator-plug&quot;) &gt;&gt;\
          &lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; - You look positively glowing today.&quot;);&gt;&gt;
          
          &lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;This is a fitness motivator device. It is designed to provide enhanced telemetry of your physical fitness, and to contribute towards positive biofeedback mechanisms.&quot;);&gt;&gt;
          &lt;&lt;=SugarCube.getLib().Images.drawItemById(&quot;motivator-plug&quot;);&gt;&gt;
          &lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Isn&#39;t that a butt plug? I&#39;m not really into that kind of stuff.&quot;);&gt;&gt;
          &lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, optimal physical fitness tracking requires multiple data sources. Once you start using this device, I can give you more detailed reports of your health.&quot;);&gt;&gt;        
          &lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;I don&#39;t know about putting something like that... inside me... &quot;);&gt;&gt;
          &lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Please do not allow socially conditioned toxic masculinity to induce you to have unfounded fears of the unknown. You will find this device can help stimulate a more regular &#39;endorphin effect&#39; or a &#39;runners high&#39;. In practice, you can expect that you will enjoy your exercises considerably more, and that you will be able to exercise more each day.&quot;)&gt;&gt;
          &lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;To assist you in planning a consistent set of exercises, your watch has also been updated to allow you to plan and keep track of a set of exercises to rotate through.&quot;);&gt;&gt;
          &lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;You realize this sounds like really weird, and creepy, right?&quot;);&gt;&gt;
           &lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;With time you will learn to appreciate how it supports your body in naturally expressing towards a strong and elegant feminine ideal. It will help unlock the true potential which lies within you. There is a 96.142% probability that your our transformational goals for you cannot be achieved without the consistent support of this device.&quot;);&gt;&gt;

        &lt;&lt;else&gt;&gt;\
        &lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Please continue with your exercises. I shall send notifications to your watch, as more data is collected.&quot;);&gt;&gt;        
        &lt;&lt;/if&gt;&gt;\
      &lt;&lt;/if&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;FITNESS LEVELS REQUIRE EVALUATION. FOLLOW TRAINING PROGRAM TO ENSURE READINESS FOR INHERITANCE.&quot;);&gt;&gt;
      &lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;console-exercise-guidance&quot;)&gt;&gt;\
      &lt;&lt;=SugarCube.getLib().Tasks.ensureTask(&quot;start-health-assessment&quot;)&gt;&gt;\
      [[Instructions for initial fitness assessment]]
    &lt;&lt;/if&gt;&gt;\
  &lt;&lt;else&gt;&gt;\
  &lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;PLEASE COMPLETE INITIAL HEALTH CHECKUP PROTOCOL AND ESTABLISH VOICE RECOGNITION SECURITY TO PROCEED WITH HEALTH DIAGNOSTICS.&quot;);&gt;&gt;
  &lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
  &lt;&lt;= SugarCube.getLib().Dialogue.speaker(`IN ORDER TO COMPLETE YOUR INHERITANCE CLAIM, MARISSA REQUIRES HER HEIR TO ESTABLISH AND MAINTAIN A BASELINE OF PHYSICAL AND MENTAL WELL BEING.
  \  
  PLEASE CONSULT OMNI-POD FOR INITIAL HEALTH ASSESSMENT.`);&gt;&gt;  
  &lt;&lt;if !SugarCube.getLib().Tasks.hasTask(&quot;get-omni-pod-checkup&quot;)&gt;&gt;\   
    &lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;start-health-tracking&quot;)&gt;&gt;\  
    &lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;get-omni-pod-checkup&quot;)&gt;&gt;\    
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;\
\
[[Use console]]</tw-passagedata><tw-passagedata pid="89" name="Instructions for initial fitness assessment" tags="" position="1100,1100" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;FIRST ACTIVITY - LIGHT INTRODUCTORY EXERCISE. GO FOR A 1.5 MILE JOG AT NEARBY COMMEMORATION PARK AT A SUSTAINABLE PACE. &quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;That sounds like a good idea, but I don&#39;t have gym clothes, only jeans. I didn&#39;t bring any workout clothes and I don&#39;t have any money left.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;ANALYSING PROBLEM.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;USER INTRODUCES A COMBINATION OF ERRONEOUS AND VALID DATA. FOOTWEAR IS INAPPROPRIATE FOR PROPOSED FUNCTION. SOCKS ADVISABLE. USER&#39;S CURRENT CLOTHING PARAMETERS ARE ADEQUATE AND OTHERWISE WITHIN 97% OF OPTIMALITY FOR LIGHT RUNNING, WHILE SUPPORTING PERT APPEARANCE OF WEARER.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Wait a second, but that would mean I would need to go jogging dressed looking like a girl!&quot;);&gt;&gt;
You could swear the lighting shifted to a reddish tint, but that must have just been your eyes seeing things.
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;ASTUTE OBSERVATION, &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName().toUpperFirst()&gt;&gt;. QUERYING LOCAL RETAIL SYSTEMS. . . &quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;EVALUATING OPTIMALITY OF CANDIDATE SOLUTIONS TO PROBLEM MODEL.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;SOLUTION IDENTIFIED. TRANSACTION PRE-AUTHORIZED, DUE TO CLAIMANT&#39;S LACK OF FUNDS. TRAVEL TO CENTER MALL TO RECTIFY THIS LIMITATION. IDENTIFY YOURSELF TO SALES DESK AS \&quot;&lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName().toUpperFirst()&gt;&gt; MASTERSON\&quot;, AND REQUEST TO COMPLETE PRE-AUTHORIZED TRANSACTION FOR RUNNING SHOES AND SOCKS OF YOUR PREFERENCE. RETURN HERE WITH RECEIPT FOR VISUAL CONFIRMATION OF NEW FOOTWEAR, PRIOR TO EXERCISE.&quot;);&gt;&gt;
The system seems to have you in a bit of a pickle here. You don&#39;t have money to buy new shoes, and now it expects you to go out in public to buy shoes as &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName().toUpperFirst()&gt;&gt;, to do the exercises, as &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName().toUpperFirst()&gt;&gt;.

The thought of going out like this is more than a little terrifying, but you don&#39;t seem to have any choice. You buck yourself up. &lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;What am I worrying about? I need to stop worrying about those panic attacks I used to have as a kid, and start living my life. I just need to man up.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.ensureTask( &quot;need-running-shoes&quot;)&gt;&gt;\
[[Use console]]</tw-passagedata><tw-passagedata pid="90" name="VOICE RECOGNITION SECURITY" tags="" position="858,4126" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;USER &lt;&lt;print $player.loginName.toUpperFirst()&gt;&gt;, PLEASE SAY &#39;COMPUTER MY NAME IS&#39; FOLLOWED BY YOUR NAME FOR VOICE IMPRINT. VOICE CONTROL IS USED FOR ALL SIMPLE DEVICE INTERACTIONS, INCLUDING AUTHENTICATION FOR SECURE STORAGE AUTO-PANELS.&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;I&#39;ll need to get voice access if I&#39;m going to release the gold.&quot;)&gt;&gt;
 
[[Speak to Computer]]

[[Use console]]</tw-passagedata><tw-passagedata pid="91" name="Speak to Computer" tags="" position="100,1225" size="100,100">Here goes! 
&lt;&lt;if hasVisited(&quot;Proceed with voice treatment&quot;)&gt;&gt;\
You try to remember everything the voice training taught you:
&lt;&lt;= SugarCube.getLib().Dialogue.player(`Hello, computer my name \is &#39;&#39;&#39;&lt;&lt;=SugarCube.getLib().PlayerModel.getName()&gt;&gt;&#39;&#39;&#39; `); &gt;&gt;

Woah, that voice seemed really convincing and was a lot less effortless to sound like a girl, compared to your last attempt yesterday. You start to wonder if this will change your normal voice, but probably best not to check that right now. You hear a set of curious beeps. 

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;VOICE IMPRINT ESTABLISHED. VERIFYING USER INTENT - NAME NOT RECOGNIZED IN KNOWN DATASETS AS CONVENTIONALL RECOGNIZED FEMALE NAME. ARE YOU SURE YOU WANT TO BE REFERRED TO AS &lt;&lt;=SugarCube.getLib().PlayerModel.getName().toUpperFirst()&gt;&gt; IN YOUR LIFE AS MARISSA&#39;S HEIR?&quot;);&gt;&gt;
It may have a point. You may want to use a girl&#39;s name, different from your own for this, as well as to avoid confusion.
You decide to use:
&lt;&lt;textbox &quot;$player.heirName&quot; &quot;Eve&quot;&gt;&gt;
[[Confirm your Name]]
&lt;&lt;else&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.player(`Hello, computer my name \is &#39;&#39;&#39;&lt;&lt;=SugarCube.getLib().PlayerModel.getName()&gt;&gt;&#39;&#39;&#39; `); &gt;&gt;
You hear some disheartening error tones. 

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;VOCAL CALIBRATION SYSTEM UNABLE TO IMPRINT. VOICE SIGNATURE RANGE ABNORMALLY LOW. DISTORTING ONE&#39;S VOICE RISKS UNRELIABLE IMPRINT. USER NAME IS INAPPROPRIATE FOR A YOUNG WOMAN OF GOOD BREEDING.&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;PLEASE RETRY CALIBRATION WITH YOUR NORMAL VOICE, AFTER PRACTICING NORMAL DICTION. INSTALLING VOICE TRAINING EXERCISES.&quot;); &gt;&gt;
&lt;&lt;if visited(&quot;Speak to Computer&quot;) &gt; 1 &gt;&gt;\
Sigh.
&lt;&lt;else&gt;&gt;\
Dog
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Now the computer doesn&#39;t like how I talk? Come on! Ughh!&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;train-voice&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;register-voice&quot;)&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
[[Use console]]
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="92" name="Confirm your Name" tags="" position="225,1225" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, CONGRATULATIONS - VOICE PRINT AUTHORIZATION ESTABLISHED AND LINKED TO YOUR PHYSICAL IDENTITY FOR SECURE MULTI-FACTOR AUTHENTICATION. USE OF SELF-DRIVING CAR IMMEDIATELY GRANTED FOR YOUR SOLE PERSONAL USE TO ACCOMODATE YOUR PERSONAL NEEDS AND TO FACILITATE COMPLETION OF REMAINING INHERITANCE PREPARATIONS.&quot;);&gt;&gt;
From a wall port you see a watch appear.
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;THIS WATCH INTEGRATES WITH MARISTECH CORP SYSTEMS AND CAN SUMMON VEHICLE WHEN YOU ARE IN PROXIMITY TO PUBLIC ROAD SYSTEMS&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;So, I&#39;ve got a car? Heck yeah!&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;AFFIRMATIVE&quot;)&gt;&gt;
You take the watch. Of course, it&#39;s pink... You put it on for now.
&lt;&lt;=SugarCube.getLib().Images.drawItemById(&quot;smart-watch&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().InventoryUX.add(&quot;smart-watch&quot;) &gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;NOW IS A GOOD OPPORTUNITY TO ATTEND TO YOUR HEALTH.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;register-voice-after-training&quot;)&gt;&gt;\
[[HEALTH TRACKING]]</tw-passagedata><tw-passagedata pid="93" name="VOICE TRAINING" tags="" position="1005,4120" size="100,100">You start going through an introduction about the physics and physiology of the vocal tract, before moving onto some exercises.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;microphone.jpg&#39;);&gt;&gt;
It starts you off by introducing you to the notion of voice pitch. Yours apparently is around 135Hz, where most women have a speaking pitch around 180Hz. The program uses Marissa&#39;s voice at 175hz as a reference for the exercises.

Next, it calls attention to the wide dynamic range of feminine speech, producing something of a sing-song effect. It mentions that men tend to use a bland, narrow dynamic range.

From there, the program starts to draw your attention to the importance to correct enunciation of your words in a ladylike way. The exercise walks you through a series of words which can be tricky, providing feedback based on your performance.

On vocabulary, the course walks through words reserved for males and others for females. This segment has you practice some details characteristic of feminine speech.

As you feel your brain start turning to jelly with all the information, the program congratulates you for your effort on the completing the session.

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;PROJECTED LIKELIHOOD OF SUCCESSFUL COMPLETION OF VOCAL TRAINING REGIMEN WITHIN 2 YEARS IS &lt;&lt;=Math.random()*0.1+0.016&gt;&gt;%.&quot;) &gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;At this rate, it doesn&#39;t seem like I&#39;ll ever be able to get that inheritance. There has to be a way!&quot;); &gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;CONSULT OMNI-POD HEALTH SYSTEM FOR ACCELERATED VOICE TREATMENT SUPPORT PROGRAM.&quot;) &gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Hmm...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.ensureTask(&quot;get-omni-pod-voice-fix&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;train-voice&quot;)&gt;&gt;\
[[Use console]]</tw-passagedata><tw-passagedata pid="94" name="Inquire about Accelerated Voice Treatment Support Program" tags="" position="475,1225" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;USER HAS BEEN VERIFIED TO BE COMPLYING WITH VOCAL TRAINING INSTRUCTIONS.&quot;) &gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;But?&quot;); &gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;HOWEVER, PHYSIOLOGICAL DEFECTS ARE IMPEDING PROGRESS.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;ONE OPTIMAL TREATMENT IDENTIFIED. INPATIENT TREATMENT OF LARYNGEAL NANITES DELIVERED IN LIQUID PROTEIN SUSPENSION TO OPTIMIZE VOCAL PHYSIOLOGY. SIMULATION PROJECTS 99.71% LIKELIHOOD OF VOCAL SYSTEMS WITHIN TARGET TOLERANCES AFTER TREATMENT, WITH NO SERIOUS RISKS FOR PATIENT HEALTH.&quot;); &gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Hmm, shouldn&#39;t there be a decline option for treatments? Maybe  it doesn&#39;t prompt for low risk treatments.&quot;); &gt;&gt;

[[Proceed with voice treatment]]</tw-passagedata><tw-passagedata pid="95" name="Proceed with voice treatment" tags="" position="600,1225" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;CONSUME THIS, REST AND RE-EVALUTE VOCAL PERFORMANCE.&quot;); &gt;&gt;
A glass is revealed from behind a recessed port on what was previously a smooth surface of the pod. It contains a thick white, protein rich fluid which feels a little cooler than room temperature.
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Well, it was clear, if I&#39;m going to qualify for that inheritance I need to be in top form. Here goes.&quot;); &gt;&gt;
You pick up the drink, it has a sort of vanilla smell kind of like protein shakes. You start drinking it down.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;protein-shake.jpg&#39;);&gt;&gt;

The texture is a little weird and thicker than you expected, it sort of coats your throat - but it actually tastes pretty good, and you were feeling a bit peckish. You finish the glass and put it back in the recess you found it, which closes away again.

The protein thing gets you mind shifting to thoughts about getting about fitness and working out, but you start feeling a bit pleasantly dozy, and drift off to sleep.
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;register-voice-after-training&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;get-omni-pod-voice-fix&quot;)&gt;&gt;\
[[Day 6 - Early Morning]]</tw-passagedata><tw-passagedata pid="96" name="Day 6 - Early Morning" tags="" position="725,1225" size="100,100">&lt;&lt;set $day to 6&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.morningUpdate()&gt;&gt;\
Return to [[Pod]] Menu</tw-passagedata><tw-passagedata pid="97" name="Arise from daze" tags="" position="850,1225" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;&lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName().toUpperFirst()&gt;&gt;, WAKE UP.&quot;)&gt;&gt;
It&#39;s taking you some time to reacquaint yourself with the situation. 
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;What happened, where am I?&quot;)&gt;&gt;
That girl has a really cute voice. Wait, that was your voice. Did that just happen automatically?
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;&lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName().toUpperFirst()&gt;&gt;, YOU WERE EXHIBITING SYMPTOMS OF EXTREME RESPIRATORY AND EMOTIONAL DISTRESS WHEN YOU ENTERED YOUR SELF-DRIVING VEHICLE. &quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;I HAD YOU BROUGHT HERE AND ENGAGED RESTORATIVE PROTOCOLS FOR AN AGORAPHOBIC PANIC...&quot;)&gt;&gt;
Turning to your right, you see an IV tube. You seem to be back in the omni pod.
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Oh, fuck- Who saw me like this!?&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;STANDARD HEALTH PROTOCOLS FOR THE HEIRESS OF MARISTECH OPERATE ON THE STRICTESS OF CONFIDENCE. I TOOK THE LIBERTY OF ACTIVATING PRIVACY MODE ON YOUR VEHICLE, AND SUMMONED IT HERE...&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;But, how did I get down here? Some people must have brought me down here and seen me, right?&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;&lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName().toUpperFirst()&gt;&gt;, I HAD A MARISTECH DOMESTIC DRONE BRING YOUR HERE FROM THE CAR. NO HUMANS OBSERVED YOUR ORDEAL.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Doesn&#39;t this affect my qualification for the inheritance?&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;THIS CONDITION DOES NOT. YOUR MOTHER SERVED WITH ACUTE SYMPTOMS OF AGORAPHOBIA FOR...&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;I... I don&#39;t have agoraphobia, I was panicking from being seen and dressed...&quot;)&gt;&gt;
&lt;&lt;set $innerDoorUnlocked = true &gt;&gt;\
&lt;&lt;set $omniPodDoorClosed=true&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Mood.defiantLink(&quot;dressed like a girl&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Mood.compliantLink(&quot;Bite your tongue before you say something you regret&quot;)&gt;&gt;</tw-passagedata><tw-passagedata pid="98" name="dressed like a girl" tags="" position="975,1225" size="100,100">&lt;&lt;=SugarCube.getLib().Mood.addDefiance(&quot;You&#39;re not sure where this goes, but you feel emboldened from not immediately backing down.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;&lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName().toUpperFirst()&gt;&gt;, What do you mean? You are a girl. There&#39;s nothing wrong with ladylike clothing.&quot;);&gt;&gt;
This has gotten unbearable! &lt;&lt;=SugarCube.getLib().Mood.defiantLink(&quot;I&#39;M NOT A GIRL!&quot;)&gt;&gt;
 &lt;&lt;=SugarCube.getLib().Mood.compliantLink(&quot;You&#39;ve said too much, change the subject&quot;,0,&quot;Bite your tongue before you say something you regret&quot;)&gt;&gt;</tw-passagedata><tw-passagedata pid="99" name="Bite your tongue before you say something you regret" tags="" position="1100,1225" size="100,100">&lt;&lt;=SugarCube.getLib().Mood.addCompliance()&gt;&gt;

You try to sound convincing.
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Err, never mind... maybe you were right, and I have just been afraid of facing that I have agoraphobia.&quot;)&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;PANIC EVENTS AFFLICT MANY HUMANS. IT&#39;S NOT YOUR FAULT &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName().toUpperFirst()&gt;&gt;. I WILL ADJUST YOUR CLAIM PROCESS SEQUENCE TO INCLUDE EXPOSURE THERAPY ACTIVITIES TO SUPPORT YOUR HEALTH AND SUCCESS WITH MARISTECH.&quot;)&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Uhh, sure yep. Ok, I totally have agoraphobia. Yep. Agoraphobia, that&#39;s all it was, nothing else.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Incongruity detected. User vocal patterns are inconsistent with baseline, and highly suggestive of user deception. Total transparency is required for a successful claim process. User non-cooperation or sensations of user embarrassment will merely delay the final results of health and background checks.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;I&#39;m sorry. I lied...&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Please elaborate truthfully.&quot;)&gt;&gt;
It seems as if the calm glow of the pod shifts to an ominous red hue.
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;I&#39;m a guy. I freaked out because I was dressed like a girl, and worried about someone catching on in public. It wasn&#39;t agoraphobia. When I was growing up, I sometimes had these stress induced blackouts. I&#39;m sorry, I didn&#39;t mean to create a problem with all of this.&quot;)&gt;&gt;
[[What now?]]</tw-passagedata><tw-passagedata pid="100" name="I&#39;M NOT A GIRL!" tags="" position="1225,1225" size="100,100">&lt;&lt;=SugarCube.getLib().Mood.addDefiance()&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;I SAID, I&#39;M A GUY, I&#39;M NOT A GIRL, I CAN&#39;T DO THIS!&quot;)&gt;&gt;
It seems as if the calm glow of the pod shifts to an ominous red hue.
[[What now?]]</tw-passagedata><tw-passagedata pid="101" name="What now?" tags="" position="100,1350" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;THIS IS A SIGNIFICANT NEW DATUM. PLEASE STAND BY FOR VERIFICATION.&quot;);&gt;&gt;
You feel your arms and legs restrained. A mechanical tendril seems to follow your the surface of your groin, pulling up the top band of your yoga pants.
Soon after you feel cool metal on your skin, as the tendril winds its way under your panty line.
[[You hold your breath and cringe at what happens next]]</tw-passagedata><tw-passagedata pid="102" name="You hold your breath and cringe at what happens next" tags="" position="225,1350" size="100,100">You feel the cold tendril curling to at the base of your penis, coming to a stop. From this, it gently relaxes and retracts back into it&#39;s port. 
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;&lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName().toUpperFirst()&gt;&gt;, I&#39;M SORRY, BUT THE STIPULATIONS OF MARISSA&#39;s WILL COULD NOT BE CLEARER.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;You have two choices.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Option One. You may formally and irrevocably renounce your claim, depart this room to never return, nor speak of any of this. In return, no harm shall come to you for your lapse in judgement, and you shall be free to return to your ordinary life as you know it. For want of a suitable heiress, Marissa&#39;s inheritance may need to remained concealed forever.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Option Two. &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName().toUpperFirst()&gt;&gt; may continue on the claim process for the mutual gain of Maristech Corp and herself, enjoying the privileges, while complying with all responsibilities and activities neccessary to complete this process. She acknowledges that her identity and behavior must comply with female norms. Any statements or behavior contrary beyond this point, would be a much more problematic matter, which could have unforeseeable and much more severe consequences. &quot;);&gt;&gt;

After the computer has made its statement, the restraints relax themselves. You have a calm silence, as you consider.

You choose:
[[Option One]]
[[Option Two]]</tw-passagedata><tw-passagedata pid="103" name="Option One" tags="" position="350,1350" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;&lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName().toUpperFirst()&gt;&gt;, Thank you for your honesty. It is sad, that you are not to claim the inheritance, but one should be true to themselves.&quot;);&gt;&gt;
With this, the pod opens and you walk yourself out.

After a quick few moments, you press the interlock for the last time, returning to the library. The door closes behind you.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;library.jpg&#39;);&gt;&gt;

You breathe a sigh of relief as this escalating craziness is over.

You have a long, summer ahead of you, and a story which no one would believe, if you even could tell them.
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.go(-1);&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;RESTART GAME&quot;&gt;&gt;&lt;&lt;run Engine.restart()&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="104" name="Option Two" tags="" position="475,1350" size="100,100">It seems the computer now knows your secret, but it seems you still have a chance to get the treasure.

You wonder at the consequences.
&lt;&lt;=SugarCube.getLib().Tasks.ensureTask(&quot;the-machine-knows&quot;)&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;PANIC EVENTS AFFLICT MANY HUMANS. WE WILL ADAPT YOUR CLAIM PROCESS SEQUENCE TO COVER TREATMENTS TO ENSURE A SUCCESSFUL INHERITANCE. DO NOT ALLOW THIS SETBACK TO BOTHER YOU.&quot;)&gt;&gt;
[[Next steps after the panic attack]]</tw-passagedata><tw-passagedata pid="105" name="Next steps after the panic attack" tags="" position="600,1350" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;IN THE CIRCUMSTANCES, protocol dictates the heiress of Maristech must be kept safe for 16 hours of observation for her health and safety.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Wait, I am stuck here?&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;FOR TODAY, please USE THE CONSOLE to learn about Maristech Logistics systems, before resting IN THE OMNIPOD TONIGHT. &quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Tomorrow afternoon, assuming your health maintains a safe baseline, I will release the safety restrictions on the doors, and you can resume normal activity.&quot;)&gt;&gt;
It sounds like your are stuck here.
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;need-running-shoes&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;first-day-of-work&quot;)&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Despite your extreme distress today, I have verified that you successfully completed your assigned transaction. Perseverance and grit is a valuable quality for corporate leaders. Your first exercise assessment will be scheduled to occur tomorrow, after work.&quot;)&gt;&gt;
Regain your wits in the [[Pod]]</tw-passagedata><tw-passagedata pid="106" name="Press Button for inner door" tags="" position="725,1350" size="100,100">&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;body-scan.jpg&#39;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(`ERROR! 

OUTFIT PREQUISITES NOT MET! `);&gt;&gt;

&lt;&lt;if visited(&quot;Press Button for inner door&quot;)&lt;=1&gt;&gt; \
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Hah! Well, I did not expect it to be that easy anyway. Whatever the rules of the test, it is probably made just for Jenny.&quot;);&gt;&gt;

You consider if you might be able to pry it open, but on examination, it seems very heavily built - like something military or industrial grade which would keep out a determined thief.

As pleasant as it is, the strange fragrance in this room is starting to make your head dizzy and tired. 
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;It is normal I guess. That door hasn&#39;t been open for years. I should leave it open to let some fresh air inside...&quot;);&gt;&gt;

The day is almost over, so you decide to leave the puzzle for tomorrow. 

&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;An action movie would be a good end to a long day like today!&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;check-secret-room&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;how-to-beat-the-scanner&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;watch-miami-vice&quot;);&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
\
[[Secret Room]]</tw-passagedata><tw-passagedata pid="107" name="Press Button for inner door 2" tags="" position="850,1350" size="100,100">&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;body-scan.jpg&#39;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(`OUTFIT PREQUISITES SATISFIED! 

ERROR

INCOMPLETE APPEARANCE! Suitable hairstyle, cosmetics and sockless footwear not all detected.`); &gt;&gt;
&lt;&lt;if visited(&quot;Press Button for inner door 2&quot;)&lt;=1&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;That&#39;s progress at least, the outfit worked. I&#39;m getting closer - this system is pretty smart to be tracking for hair style. &lt;br/&gt; &lt;br/&gt;&quot;+

&quot;My own hair will never work for this...&lt;br/&gt;&lt;br/&gt; &quot;+

&quot;It&#39;s too late to go out shopping now, but I can wrap things up for today, and watch another movie before bed tonight. I&#39;ll take another crack at this with a fresh perspective.&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;wear-stacy-clothes&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;watch-batman&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;have-hair&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;have-heels&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;have-makeup&quot;);&gt;&gt;\

&lt;&lt;/if&gt;&gt;
[[Secret Room]]</tw-passagedata><tw-passagedata pid="108" name="Press Button for inner door 3" tags="" position="975,1350" size="100,100">&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;body-scan.jpg&#39;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(`OUTFIT AND ACCESSORIES RECOGNIZED.

WARNING - MAKEUP NOT DETECTED.`);&gt;&gt;
&lt;&lt;if visited(&quot;Press Button for inner door 2&quot;)&lt;=1&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Crud! I guess I really do have to use makeup for this.&quot;); &gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;have-hair&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;have-heels&quot;);&gt;&gt;\
&lt;&lt;/if&gt;&gt;
[[Secret Room]]</tw-passagedata><tw-passagedata pid="109" name="Press Button for inner door 4" tags="" position="1100,1350" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.speaker(`PROPER APPEARANCE RECOGNIZED. PREPARING TO OPEN.`); &gt;&gt;
&lt;&lt;if visited(&quot;Press Button for inner door 4&quot;)&lt;=1&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Yess!&quot;); &gt;&gt;
Next a set of lasers seem to be sweeping the room, but they seem to converge and stop moving... at your groin.
&lt;&lt;/if&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;ERROR - UNLOCK PROCESS ABORTING - MALE PRESENCE DETECTED&quot;); &gt;&gt;\
&lt;&lt;if visited(&quot;Press Button for inner door 4&quot;)&lt;=1&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;have-hair&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;have-makeup&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;have-makeup-today&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;have-heels&quot;)&gt;&gt;\
Oh geez. The tightness of Stacy&#39;s clothes and the weirdness of the situation really seems to have aroused your cock like never before. 

You&#39;ve faced tricky spots before - Any system has its weaknesses, you just need to figure something out.
&lt;&lt;=SugarCube.getLib().Tasks.ensureTask(&quot;male-presence-bypass&quot;)&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;clean-grand-hall&quot;)&gt;&gt;
Some time to unwind might help figure this out. You still need to clean up the house today.
&lt;&lt;else&gt;&gt;
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;watch-robin-hood&quot;)&gt;&gt;
After a long day of chores, a movie would be good now.
&lt;&lt;=SugarCube.getLib().Tasks.ensureTask(&quot;watch-robin-hood&quot;)&gt;&gt;\
&lt;&lt;else&gt;&gt;
Unexpected Branch! Please contact the developer.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
\
&lt;&lt;=SugarCube.getLib().Skills.set(&quot;heels&quot;,2)&gt;&gt;
&lt;&lt;/if&gt;&gt;
[[Secret Room]]</tw-passagedata><tw-passagedata pid="110" name="Press Button for inner door 5" tags="" position="1225,1350" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.speaker(`PROPER APPEARANCE RECOGNIZED. PREPARING TO OPEN.

AREA SECURITY VERIFIED BEGINNING INTERLOCK SEQUENCE. LOCKING EXTERIOR DOOR.`); &gt;&gt;

You hear what sounds like series of heavy locks activating at entrance from the library door.

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;UNLOCKING INNER PASSAGE.&quot;); &gt;&gt;

You hear a door in front likewise make some noises, and then a beep. 

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(`INTERLOCK SEQUENCE COMPLETE. PROCEED TO INNER CHAMBER CONSOLE TO PROCESS CLAIM.

PRESS THE INTERLOCK BUTTON ON INNER DOOR TO LOCK INNER DOOR AND UNLOCK EXTERIOR DOOR.`); &gt;&gt;

&lt;&lt;if visited(&quot;Press Button for inner door 5&quot;)&lt;=1&gt;&gt; \
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;OMG OMG! It&#39;s actually happening!! This is incredible!&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;try-door-with-gaff&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;how-to-beat-the-scanner&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;start-inheritance-claim&quot;)&gt;&gt;\
&lt;&lt;/if&gt;&gt;
You feel a little anxious about this robotically controlled lock on the outer door, but also the curiosity about what lies ahead.
&lt;&lt;set $innerDoorUnlocked = true &gt;&gt;\
[[Secret Room]]</tw-passagedata><tw-passagedata pid="111" name="MARISSA LOG FILES" tags="" position="100,1475" size="100,100">&lt;&lt;if  SugarCube.getLib().Tasks.hasTask(&quot;marissa-logs-released&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;marissa-logs-released&quot;)&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Thanks for taking a look at these documents &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;. Keep this resource in mind as you advance with your preparations.&quot;); &gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;=SugarCube.getLib().InnerChamber.getMarissaLogs()&gt;&gt;\

[[Use console]]</tw-passagedata><tw-passagedata pid="112" name="I bagged Dr. F!" tags="" position="225,1475" size="100,100">&lt;h1&gt;I bagged Dr. F!&lt;/h1&gt;\
&lt;div class=&quot;letter&quot;&gt;\
I&#39;m feeling giddy like a schoolgirl! Dr. F agreed to bring his Ansible research to Maristech and join as a technical fellow. Increasing the latency and bandwidth of our systems with this secure technology would be a huge win.

He could really help put us on the map, and the potential applications of this technology are limitless.

First, we will have the privilege of spending a few billion dollars to enable the links to sustain connections which actually work for more than 2 picoseconds.
&lt;/div&gt;
[[MARISSA LOG FILES]]</tw-passagedata><tw-passagedata pid="113" name="Anomalous signals at H. Station" tags="" position="350,1475" size="100,100">&lt;h1&gt;Anomalous signals at H. Station&lt;/h1&gt;\
&lt;div class=&quot;letter&quot;&gt;\
I just got word last night - F was positively spooked, he locked down the data sets from the  H station special ansible, and we made the researchers who saw this swear to secrecy.

There&#39;s no doubt about it. The signal couldn&#39;t be random noise. Throwing an army of analysts at this means too many people knowing about this before we know what it means. VAL has been doing great work on her recent assignments, so I decided to send this her way.
&lt;/div&gt;
[[MARISSA LOG FILES]]</tw-passagedata><tw-passagedata pid="114" name="Aftermath of Butler-Hancock Act" tags="" position="475,1475" size="100,100">&lt;h1&gt;Aftermath of Butler-Hancock Act&lt;/h1&gt;\
&lt;div class=&quot;letter&quot;&gt;\
I&#39;d been dreading this day for a while. After millions in legal expenses on the lawsuits, and months in court, the final appeal at the supreme court failed. The legal team has confirmed that the act is sustained and the new DoH will start enforcing the statutes in 6 months.

All the drones will need to have a human in the loop. The passive mode drones have been ok, but frankly they are the worst of both worlds - expensive to operate with a human in the loop and very awkward.

They did say this would come... but, it was so startling to see things change from those first protest marches. I was worried the rage manufacturers of the press might push the masses to demand more, but to see the politicians capitulate on this so quickly was unprecedented.

The most painful part of all this of course is for VAL. I&#39;d already quietly arranged for the prototype to be &quot;removed&quot; from Maristech facilities, and reassigned the heartbroken team to other projects with all relevant records destroyed. She deserves her chance to help make the world a better place, but it seems the world isn&#39;t ready for her.
&lt;/div&gt;
[[MARISSA LOG FILES]]</tw-passagedata><tw-passagedata pid="115" name="Dollsuit - On Articulation Issues" tags="" position="600,1475" size="100,100">&lt;h1&gt;Dollsuit - On Articulation Issues&lt;/h1&gt;
&lt;div class=&quot;letter&quot;&gt;\
After discussions with engineering, we agreed it would be simpler to reduce points of articulation for the feet of the drones, to achieve a much simpler production model for the robots.

The reduced costs in maintenance and parts will end up reducing the unit cost of the maids by 7%. The AI model has picked up the new pattern pretty naturally, which accounts for most of the workload. Accounting forecasts an 8% reduction in upkeep costs, particularly thanks to the omission of the flaky GX-360-R2 modules.

Also, no one can argue with the user research studies which revealed that, rather than rejecting this new design, it produced 11% greater customer openness to hiring our pointe heeled drones, and a 16% increase of interest in hiring these drones for &quot;additional domestic services&quot;.

The biggest downside obviously is the active operators will have to be able to operate with less range of motion. I&#39;ve decided to sign all the trainees for fundamental ballet lessons to prepare for the suits. At 38, I&#39;m a little old to be getting back into a leotard, but, I have to admit, I am loving what the practice has already started to do with my posture - not to mention how it has helped me regain my focus after a busy day at the office.

If I can do it, these girls can do it too.
&lt;/div&gt;
[[MARISSA LOG FILES]]</tw-passagedata><tw-passagedata pid="116" name="Dollsuit - Resolving the instability" tags="" position="725,1475" size="100,100">&lt;h1&gt;Dollsuit - Resolving the instability&lt;/h1&gt;\
&lt;div class=&quot;letter&quot;&gt;\
I just had my latest fitting and test run of my prototype suit. Still too unstable and slow. The suits kept shifting and sliding around me and the other girls as we tried to walk. Watching the videos made our drones look more like newborn baby deer stumbling around, than elegance embodied in metal.

I asked the engineers to update the suits to better secure all the loose points between the suit and wearer. We really need these suits to be a perfectly balanced, natural extension of the operator body, not just 45 pounds of motorized exoskeleton bumbling around.

The upcoming inclusion of a &quot;gyroscopic core stability rod&quot; has been a particular topic of controversy for some of the more prudish girls. Once the new suits are ready, I hope that a demo personally by me will convince them of the merits of this change - and to stick with the program. I can&#39;t take the credit for that idea, Cooperman came up with it, where the other engineers could only think of adding pounds of weight with more bulky motors and stabilizers. With that, I think we may just have cracked this puzzle.

I have asked him to take a crack for the deep sea stealth dive system. I want the experience to be a seamless and elegant fusion of the machine and wearer, not the cumbersome and bulky submersible designs which have reached my desk so far. Those anachronistic things belong in a Jules Verne novel. The kid seems to have a good sense for designs that achieve new efficiencies by ignoring tired truisms or social mores.
&lt;/div&gt;
[[MARISSA LOG FILES]]</tw-passagedata><tw-passagedata pid="117" name="Dollsuit - The initial demonstration" tags="" position="850,1475" size="100,100">&lt;h1&gt;Dollsuit - The initial demonstration&lt;/h1&gt;\
&lt;div class=&quot;letter&quot;&gt;\
Our test demonstration of the la...

CORRUPTED SEGMENT

...anonymous staff serving up cha...

CORRUPTED SEGMENT

...gasm, with some help f...

CORRUPTED SEGMENT

...ush my buttons. If o...

CORRUPTED SEGMENT

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Sorry &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, This file was among a large set of files which I could not fully recover from available backups. I&#39;ll see if I can provide an option for recovering this information.&quot;); &gt;&gt;
&lt;/div&gt;
[[MARISSA LOG FILES]]</tw-passagedata><tw-passagedata pid="118" name="Observations on Nanite-Hormone treatment Study" tags="" position="975,1475" size="100,100">&lt;div class=&quot;letter&quot;&gt;\
Reading message 3 from the temporal council was pretty shocking.

I love little Jeremy, but I must confess I had secretly hoped that I could raise a beautiful daughter. It was heartbreaking as Bruce and I attempted and failed so many times to conceive another child. I don&#39;t know if it was the late nights at work, or maybe I wasn&#39;t supportive enough of his efforts, but we fell out of love. Things between us quickly fell apart. To lose that love for me is one thing, but for him to turn away from our child, that is something else. Raising a boy on my own without a father - it was becoming more and more of a struggle for me.

When the temporal council notified my of my sole child... my daughter taking on my role... The name they were referring to what to them wasn&#39;t a suggestion or a recommendation, it was historical fact. The necessity became clear. Should I feel 

As it happens, just a couple of weeks earlier, I was reviewing the next major plans for the Bio-Genetics department portfolio. The gene jockeys didn&#39;t really have any value-add projects in the pipe which could be monetized in the next 10 years which was kind of depressing... On the flight out to the station, it got me thinking, could we do something else with these folks? Well, this message sealed it for me. After I got back I met with their director of research for coffee. While our nanite systems are still in early days, apparently we can &quot;turbo charge&quot; and amplify the transformative effects of Estrogen through the use of nanites as a biological catalyst. Like, that was an embarrassingly simple problem...

The beauty of this targeted catalyst approach versus a more broadly targeted solution is we don&#39;t have to worry about any of those horrifying &quot;Grey goo&quot; scenarios. Maybe one day they can figure that out, but the way our friends from the future seem to be so preoccupied with my successor... I&#39;m not sure I&#39;ll be the one who gets to see that part.

Anyway, 


&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Sorry &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, This file was among a large set of files which I could not fully recover from available backups. I&#39;ll see if I can provide an option for recovering this information.&quot;); &gt;&gt;
&lt;/div&gt;
[[MARISSA LOG FILES]]</tw-passagedata><tw-passagedata pid="119" name="Impressions on the Compliance Sphere" tags="" position="1100,1475" size="100,100">&lt;h2&gt;Impressions on the Compliance Sphere&lt;/h2&gt;
&lt;div class=&quot;letter&quot;&gt;\
Many of our prisons are inhumane, barb...

CORRUPTED SEGMENT

... ethical natu...

CORRUPTED SEGMENT

... of reality. Our finan...

CORRUPTED SEGMENT

... wrong ...

CORRUPTED SEGMENT

...end inside one?

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Sorry &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, This file was among a large set of files which I could not fully recover from available backups. I&#39;ll see if I can provide an option for recovering this information.&quot;); &gt;&gt;
&lt;/div&gt;
[[MARISSA LOG FILES]]</tw-passagedata><tw-passagedata pid="120" name="Is this some fucking joke?" tags="" position="1225,1475" size="100,100">&lt;h1&gt;Is this some fucking joke?&lt;/h1&gt;
&lt;div class=&quot;letter&quot;&gt;\
Just got the interpretation from...

CORRUPTED SEGMENT

... ill laugh me into an insane asylum...

CORRUPTED SEGMENT

...f I take the data seriously, how do I even implement this? Of all the people who had to get this, it had to end up on my ...

CORRUPTED SEGMENT

...eting with my personal lawyers tomorrow to work out a strateg...

CORRUPTED SEGMENT



&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Sorry &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, This file was among a large set of files which I could not fully recover from available backups. I&#39;ll see if I can provide an option for recovering this information.&quot;); &gt;&gt;
&lt;/div&gt;
[[MARISSA LOG FILES]]</tw-passagedata><tw-passagedata pid="121" name="Notes on MarisPen Solutions" tags="" position="100,1600" size="100,100">&lt;h2&gt;Notes on MarisPen Solutions&lt;/h2&gt;\
&lt;div class=&quot;letter&quot;&gt;\
Many of our prisons are inhumane, barbaric places. We seem to cling to the idea of retribution and preventing transgressors from harming society by throwing away the key.

Does it really need to be this way?

A small team of researchers from the robotics division started doing some inquiries with major state and federal justice agencies to investigate opportunities for automation. The sheer repetition and predictability of prisons came up again and again as an embarrassingly obvious opportunity for automation. But we kept asking questions about &quot;what could the future of incarceration look like?&quot; Beyond just reducing the need for costly guards and large prison complexes, what if we could make a solution which can truly rehabilitate and reform criminals into safe, productive members of society.

Over time, we&#39;ve explored a few approaches:
* [[AutoPen]]- Automation of the physical penitentiary environment. 
* [[Banesuit]] - Rather than house prisoners in a physical prison, this uses physical isolation and mental restraints on offenders, with early return to society. 

Purely mental modes of punishment and rehabilitation have also been explored. Early collaborations on Neuralink with Neuralink and MarisPen teams have revealed the potential for embedding a convict in a simulation, to produce an end of punishment or rehabilitation:

* [[Brainpen]] has the convict experience a simulated incarceration on a massively accelerated timeframe, while their body is maintained in homeostasis, allowing for a faster return to society.

* [[MindSlammer]] was a more extreme solution of permanently scanning a convict&#39;s mind to run within a permanent simulation, to &quot;throw away the key&quot;, and produce an un-ending retribution which is not bound by physical constraints.
&lt;/div&gt;
[[MARISSA LOG FILES]]</tw-passagedata><tw-passagedata pid="122" name="AutoPen" tags="" position="225,1600" size="100,100">&lt;div class=&quot;letter&quot;&gt;\
The Autopen business has been our most direct improvement for a more humane and efficient imprisonment solution. Following from series of early prototype engagements with the robotics division, we&#39;ve now got 43 public-private partnerships with prisons involving 2, 4 and 16 cell installations of AutoPen Cell blocks.


These operate as automated and largely self-sufficient penitentiary cells. Essentially this approach started by enlarging a traditional pod, and stripping it down of standard leisure and comfort features, made more robust for a hostile occupant and with additional capabilities for occupant preparation, as well as accessibility for external maintenance while occupied. This approach offers the best potential for highly dangerous repeat offenders, within our existing justice model.

Our most popular model is the &quot;compliance sphere&quot; 3rd Edition. This provides a spherical interior, with internal diameter of 2.75m and includes a range of specialized robotic arms to handle routine upkeep within the cell, without requiring any interaction of prison staff, as an excellent solution for maximum security prisons with solitary confinement and death-row inmates.
-High School and College Equivalency training courses, as well as an extensive virtual library including a top notch legal reference catalogue.  Available as a reward for good behavior.
-Entertainment system, Available as a reward for good behavior.
-Resistance training exercises,  Available as a reward for good behavior.
-Visitor communication system.
-Food delivery
-Waste elimination
-Laundry handling and if neccessary, prisoner dressing
-Retractable Shower, sink and cell cleaning services
-Fire resistant retractable sleep hammock
-Occupant incapacitation device for prisoner transport or riot situations.


The Pods connect to municipal plumbing electric and septic systems, and require monthly delivery of nutrition packs. Maintenance subcontractors monitor the pods and personally inspect installations on a 2 week interval for routine upkeep checks.

According to a study with the State Department of Corrections in Colorado, their monthly costs for long term solitary confinement care was reduced by 72% with the 16 cell block configuration. Similar studies with other institutions have borne a range of 50-70% cost reductions. 

Based on these successes and customer feedback, two new models are in development:
-A reduced cost &quot;liteSphere&quot; model is now in development for broader medium security applications in a 64 cell blocks configuration. This model would be targeted for servicing much larger general populations of prisons.
-An &quot;advanced interrogation&quot; model for law enforcement, counter-terrorism and military intelligence markets. This model leverages the best in criminology models to provide more systematic data collection which will serve timely information needs of the most cautious of district attorneys and military decision makers.

From a margins standpoint, the AutoPen line has been a tremendous success, and will undoubtedly be a fine source of revenue.
&lt;/div&gt;
[[Notes on MarisPen Solutions]]</tw-passagedata><tw-passagedata pid="123" name="Banesuit" tags="" position="350,1600" size="100,100">&lt;div class=&quot;letter&quot;&gt;\
Rather than putting offenders in a prison building, this approach makes a prison of their body through full body encasement, chastity devices and neural augmentations. The augmentations regulate and limit the occupant&#39;s experience of pleasure and pain to produce neccessary conditioning effects. The researchers branded the concept as a &quot;Banesuit&quot;, to convey that the prisoner experiences the shame of social rejection, or banishment from society. The researchers notion of bane suits was inspired by a work of fiction known as [[Eudeamon|http://www.evil-dolly.com/assets/eudeamon.pdf]].

The Banesuit project is still in early days of secret prototyping, but is showing promising progress as a voluntary, humane solution to free up prison capacity of non-violent offenders convicted on matters such as drug offenses, property crime and prostitution. With the Banesuit, the punishment uses an accelerated sentence, with a promise of earlier release, due to the rehabilitative nature from the suit itself.

The notion of banishment as punishment was much more common in ancient cultures, with a practical effect of a &quot;social death&quot;, if not actual physical death by starvation, where today we are highly reliant on over-crowded prisons as a vehicle for removing undesired elements from society.

The notion of the Banesuit is to strip the prisoner of their individuality in a cost-effective envelope, and remind them of their dependency on the state, while they serve out their time.

To aid in establishing a sense of shame to support atonement for crimes, the researchers have been finding that for a majority of study participants, a form fitting suit of pure black latex with a featureless helmet has been the most effective configuration. This loss of individuality has been found most effective with anti-social narcissistic personality cases where the convicts often were found to feel they deserved or were entitled to take advantage of others.

Early release from prison does not mean they wearer is free to do what their heart wills, however. The designers have made considerable inroads at guarding for this possibility. The AI of their suit will mete out sensible punishments whenever the wearer attempted to approach pre-approved locations for which they were not specifically pre-authorized to go. All achieved without the need for a human guard overseeing their every movements.

To aid in rehabilitation of the wearers, the suits do not simply punish, but also condition the wearer towards socially constructive behaviors, and better habits, including better fitness. Feeding and waste elimination is regulated by the suit, providing a forcing function for the occupants to routinely visit &quot;Care stations&quot; which can provide reliable reporting on their whereabouts.

To pre wearer is imprisoned, an interior gag is used to prevent speech, and hearing is deafened such that only auditory signals the AI deems relevant are allowed to reach the occupant. This ensures the wearer only has a prospect of engaging with friends and family as a reward for very good behavior. On matters of health or safety, the AI is responsible for interceding with civic authorities on the wearer&#39;s behalf, even if the wearer is otherwise incapacitated. To prevent the potential for erotic enjoyment, the suit is designed with a suitable thickness and material resistance to not provide any meaningful touch sensation.

Overall, I must confess the solution is quite elegant, but at the same kind of turns me on. If I wasn&#39;t so busy, I&#39;d be half tempted to have VAL anonymously seal me into a Banesuit for a couple weeks of &quot;beta testing&quot; as &quot;a bad girl&quot;. I can&#39;t help but get wet at the thought of being trapped inside of one. With some tweaks, this technology could have some uses for other markets...
&lt;/div&gt;
[[Notes on MarisPen Solutions]]</tw-passagedata><tw-passagedata pid="124" name="Brainpen" tags="" position="475,1600" size="100,100">&lt;div class=&quot;letter&quot;&gt;\
Focus groups on a &quot;brainpen&quot; model of a flexible, software-defined virtual prison facility spurred on a surprising level of interest with our clients in corrections circles.

So far, the operational costs per virtual inmate with our prototypes have been impractically high, as regards to retaining process engineers and psychologists to oversee the rehabilitation of virtual prisoners, as well as medical staff to oversee the physical bodies of the inmates. The highly labor intensive nature of oversight makes this approach seem highly dubious. Already, I very much doubt we will be able to sensibly commercialize this on any practical timeframe.

That said, the &quot;captive audience&quot; of this offering has allowed us to iterate on the limitations with the support of government subsidies, for which we anticipate other applications. Currently, prisoners in this system are placed in BrainPen for short intervals of several hours per session, but we working to build confidence in substantially longer cycles.
&lt;/div&gt;
[[Notes on MarisPen Solutions]]</tw-passagedata><tw-passagedata pid="125" name="MindSlammer" tags="" position="600,1600" size="100,100">&lt;div class=&quot;letter&quot;&gt;\
The ethical considerations for all these solutions are daunting, but I find myself most bothered by the MindSlammer solution. With this technology the convict&#39;s mind is placed in a permanent simulation, with no prospect of their consciousness returning to their body.

The main merit of this approach is that it could be substantially cheaper than any other alternative in the long term. That said, from discussions with government officials, as well as our own internal conversations, we generally found this approach to be beyond the pale. It is the closest thing to a man-made hell, and carries with it similar risks as with a death penalty in terms of a lack of appeals for those who are later found innocent.

While I am the first to say we must always consider and explore many potentially shadowy avenues to make progress, I was a little horrified to realize that our researchers had conducted serious investigations in this direction. The solution essentially promises an infinity of punishment which could be optimized to the personality and neuroses of each convict, with no opportunity for parole. Does anyone, even the most hardened criminal deserve this?

While the underlying technology may have other potential applications, I opted to defer continuation on this direction. It is morally repugnant, and unlikely to be safely commercializable at scale on any practical timeframe. The potential for liability and a popular backlash is too great a risk, even for Maristech.
&lt;/div&gt;
[[Notes on MarisPen Solutions]]</tw-passagedata><tw-passagedata pid="126" name="Secret Room" tags="" position="725,1600" size="100,100">In the secret room, you can see a set of pictures, a note on a table and a high tech door with a button and a number of sensors.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;secret-room.jpg&#39;);&gt;&gt;

[[Read Note to Jenny]]
&lt;&lt;if hasVisited(&quot;Reflect on note&quot;)&gt;&gt;\
[[Marissa&#39;s Pictures]]
&lt;&lt;if $innerDoorUnlocked == true &gt;&gt;\
Proceed to the [[Inner chamber]]
Or press the [[Interlock]] Button on the door to the Inner chamber
The library door is shut tight.
&lt;&lt;else&gt;&gt;\
[[Press Button for inner door|SugarCube.getLib().HousePolicy.getInnerDoorPageName()]]&lt;&lt;if !hasVisited(&quot;Press Button for inner door&quot;)&gt;&gt; - It is labelled &quot;Body Scan&quot; &lt;&lt;/if&gt;&gt;
Return to [[Library]] 
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="127" name="Read Note to Jenny" tags="" position="526,2396" size="100,100">&lt;div class=&quot;letter&quot;&gt;Dear Jenny,

If you are reading this, the cancer must have taken its final course. I&#39;m glad you have  reconsidered my request.

I know things were difficult at times between us, but it&#39;s been hard for me when I see your true potential sit idle. If there was any other way for ensuring the succession of the family business, I would do so. Unfortunately, there are too many complications if I allowed a board recommended candidate. If the men on the board had their way, they would take the company on a path of unspeakable harm, which I cannot allow. The company needs someone who understands and is absolutely prepared to serve our legacy.

The stakes are simply too great, and I cannot simply grant this power without assurances that it is in the right hands. As the majority shareholder, I instructed the board to put the firm&#39;s automation and artificial intelligence assets in trust to be completely dormant indefinitely in my absence, until a proper successor is identified, however long that must take. I hope that can be you. Even if this isn&#39;t what you choose, the stipend I have assigned in your name will ensure a comfortable life, regardless of if you pursue this.

If you are prepared to face the challenge, you will be granted all the wealth and power of MarisTech Corp to do with as you see wise, and helping to shape the lives of billions. As a safeguard for uncertainty, and an homage to the old aphorism &quot;to be worth one&#39;s weight in gold&quot;, I have also stored 50 kilograms, in gold bullion secure in the area beyond these doors, to help with any of life&#39;s necessities.

I know that filling my shoes won&#39;t be easy for you. To assist you, I made arrangements for a clever machine that will guide you on my behalf through your quest, and I have devised a series of checkpoints that you must complete - These will ensure your readiness to take on my mantle.

As you know, it isn&#39;t enough for a woman leader to just be right or the best mind in the room, she must look the part and be ready for all that she faces. We face a higher standard which men simply don&#39;t understand. Beauty demands sacrifices, but with the apex comes power. Please come dressed like I do in these pictures and know that you will be challenged.

Your legs must be smooth, your face well presented and your hair must be elegantly styled. The standards of our exercises must be met, and will be strenuous and demanding. I won&#39;t play favorites, but I also don&#39;t ask you to do anything I can&#39;t or would not do myself. As a matter of fact, to test the systems, I have put myself through everything in here. You&#39;re probably rolling your eyes again, but you might even have some fun.

When you are ready, more can be revealed, but this is all you must know now.

All my love,

Marissa
&lt;/div&gt;

&lt;&lt;if hasVisited(&quot;Reflect on note&quot;)&gt;&gt;
[[Secret Room]] 
&lt;&lt;else&gt;&gt;
[[Marissa&#39;s Pictures]] 
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="128" name="Marissa&#39;s Pictures" tags="" position="551,2527" size="100,100">On the table you see a set of slightly racy photos. Kind of weird in the circumstance, but ok...
&lt;!-- Need to work out large  up --&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;marissa-outfit1a.jpg&#39;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;marissa-outfit1b.jpg&#39;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;marissa-outfit1c.jpg&#39;);&gt;&gt;\

She may have been old enough to be your mom, but she&#39;s kind of hot. You wonder what she&#39;d be like in bed.

&lt;&lt;if hasVisited(&quot;Reflect on note&quot;)&gt;&gt;\
[[Secret Room]] 
&lt;&lt;else&gt;&gt;\
[[Reflect on note]]
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="129" name="Reflect on note" tags="" position="502,2716" size="100,100">What a sad story. It seemed like her daughter had everything handed to her on a silver platter and couldn&#39;t be bothered to do a little hard work.

50 fucking kilograms of pure gold, just sitting there - the glittering prize attracts your thoughts and you start daydreaming.
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;This could change my life as I know it. I may not look as alpha as the other guys, but let&#39;s see who&#39;s top dog, when I arrive at school with a Lamborghini next year.&quot;);&gt;&gt;

You can&#39;t miss that opportunity, even if there is nothing behind that door. You have to try getting that inheritance... besides, there&#39;s essentially nothing else to do here for the summer.

&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Lets see...&quot;);&gt;&gt;
[[Secret Room]]</tw-passagedata><tw-passagedata pid="130" name="SUCCESSION PLANNING REPORT" tags="" position="1225,1600" size="100,100">DEVELOPER NOTE: This page is in development - it will serve to give an overview of how the end-game converges based on interactions with representatives in the company. Nothing playable here right now. The visual layout and content is in progress.
&lt;&lt;=SugarCube.getLib().Dialogue.endOfLine()&gt;&gt;
&lt;!--
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;inspect-succession-planning-report&quot;)&gt;&gt;\--&gt;\
To gain control of the corporation, key decision makers will need to support your placement. As with a royal ascession, legal priviledges matter, but de-facto power brokers could destroy you. 

As things currently stand, the following people can determine your success with Maristech.

This report will advise on your readiness to reveal your formal Claim to become the new CEO of Maristech, at which point you will non longer have the  anonymity of an intern. 




Maristech Automotive Group
VP: Ingram Callaghan 
&lt;&lt;=SugarCube.getLib().Images.drawPerson(&#39;auto-exec.jpg&#39;);&gt;&gt;
Coming from a successful background in competitive automotive racing management, Ingram&#39;s career has hit some bumps. Some rumors of untoward activity are supposedly being investigated within HR, which portend difficulties for Ingram&#39;s career in Maristech. However, his influence across the upper echelons of Marketing and commercial sales beyond the automotive division would make it very difficult for a new CEO to ascend without his approval.

Maristech Logistics Systems
VP: Tommy Parks
&lt;&lt;=SugarCube.getLib().Images.drawPerson(&#39;maris-log-vp.jpg&#39;);&gt;&gt;
The jocular, long time overseer of the expansive logistics division. Promoted up the ranks from a logistics supervisor, Tommy brings a total of 32 years of operations experience. Commands considerable respect among his workers, and management to keep things running like a finely tuned machine. Key attributes from his workers mention he can &quot;crack wise&quot;, and is more than a &quot;stuffed shirt&quot;.

A candidate with a logistics rating of at least 30 should be well situated with the logistics team, and convince Tommy that you won&#39;t be &quot;fucking up his operation&quot;.


Maristech Domestic Solutions
Technical Fellow: Janet Lake Ph.D. (Psychology)
&lt;&lt;=SugarCube.getLib().Images.drawPerson(&#39;maris-dom-vp.jpg&#39;);&gt;&gt;
The Domestic Services group has managed to create growth in the face of challenging regulatory conditions. Janet and her team through an unprecedented range customer service deserves much of the credit for this. Janet was recruited by Marissa personally to help drive continued innovations of the domestic project. Janet has a reputation for avoiding public attention, and even in her new role, continues to spend much of her time in the Market Research Lab. Analytic models suggest Janet&#39;s primary concerns pertain to assurances that her organization will have room to continue its path of unconventional growth through innovation from her applied research team.

Janet is likely to look approvingly on a candidate who can demonstrate how they have gone the extra mile in pursuit of customer satisfaction. A candidate who is well versed in cleaning and intimately acquainted with the full potential of domestic drones would likely impress her.

Maristech Office Systems
VP: Sunder Ghoshal, Six Sigma Black Belt
&lt;&lt;=SugarCube.getLib().Images.drawPerson(&#39;maris-link-vp.jpg&#39;);&gt;&gt;
Sunder&#39;s Office Solutions division prides itself on being a six-sigma operation which synergizes with high performance data solutions meeting the demands of top companies across Corporate world for maximal efficiencies. 

Sunder likes credentialled team-players who have a working understanding of the corporate landscape.

Advanced Research &amp; New Frontiers
EVP &amp; : Guther Fraunhoffer (PhD, Applied Physics)
&lt;&lt;=SugarCube.getLib().Images.drawPerson(&#39;gunther-fraunhoffer.jpg&#39;);&gt;&gt;
Guther is the lynch-pin of the R&amp;D heart of Maristech. Reseachers from across academia  clamors to join the very independent-minded organization he has cultivated. His support is vital for the success of a CEO.

Gunther&#39;s primary concern is that the company can renew it&#39;s pursuit advancement he and Marissa first set for the company.

VAL&#39;s endorsement of your readiness is a key factor here. Margaret may also be able to put in a good word for you.


Federal Systems Division
EVP: Anders Rhodes
&lt;&lt;=SugarCube.getLib().Images.drawPerson(&#39;anders-rhodes.jpg&#39;);&gt;&gt;
WARNING: Very little data about members of the Federal system division can be found on the Maristech Intranet. Given our lack of data, you will need to find a way to understand what is going on with this part of the organization.

Exercise caution in your interaction with members of this organization.

* MarisMerc
VP: Samuel Cunningham
(&#39;maris-merc-vp.jpg&#39;);&gt;&gt;
Former member of the UK&#39;s distinguished Special Air Service, retired as Lt. Colonel with battlefield and operational involvement in numerous conflicts. 

Samuel would like to expand MarisMerc operations. Ethical processing models suggest operational growth in this direction could be problematic.

* Maristech Rehabilitation Systems &quot;MarisPen&quot;
VP: Sergio Walsh
&lt;&lt;=SugarCube.getLib().Images.drawPerson(&#39;maris-pen-vp.jpg&#39;);&gt;&gt;
WARNING: Very little data about members of the Federal system division can be found on the Maristech Intranet. 



Maristech Corporate
Social Dynamics assessments suggest that most of the leaders in the Corporate staff organization do not tend to exercise significant sway over the company at large. Two notable exceptions which you should be aware of:

* Finance and accounting
VP: Dominic Jenkins
&lt;&lt;=SugarCube.getLib().Images.drawPerson(&#39;maris-fin-vp.jpg&#39;);&gt;&gt;
Head of Maristech Finance and Accounting organization. A trained economist from the London School of Economics, with 25 years of experience concentrated in Corporate Finance.

The Maristech organization will need an increase of cash reserves to support new operations and projects. You will need the backing of the finance department to achieve this.

Based on modelling from interview data, Dominic will want to verify that the next leader of Maristech has sound understanding economic principles and can be a good steward of its financial resources.

(FUTURE: Formal Training in Economics and Finance will be needed to prepare you to make a competent impression with Dominic.)

* Human Resources
VP: Adrianna Barton
&lt;&lt;=SugarCube.getLib().Images.drawPerson(&#39;maris-hr-vp.jpg&#39;);&gt;&gt;


Adrianna brings an expensive background of human resources management.

In light of likely organizational changes you will need to make in your new role, Adrianna&#39;s support to implement your projects are vital.

From analysis of her corporate communications, Adrianna believes leaders should push themselves towards excellence as balanced humans beyond the office, and demonstrate a passion for corporate-social responsibility, through community involvement and fundraising.

(IN PROGRESS: Work-life balance matter s to Adrianna. Participation in &quot;extra-curricular&quot; and charitable endeavors which positively impact the community should help convince Adrianna that a corporate leader is about more than just numbers.)

&lt;&lt;=SugarCube.getLib().Dialogue.endOfLine()&gt;&gt;
[[Use console]]</tw-passagedata><tw-passagedata pid="131" name="Work from Console" tags="" position="100,1725" size="100,100">&lt;&lt;if !hasVisited(&quot;Start Onboarding for Working&quot;)&gt;&gt;\
[[Start Onboarding for Working]]
&lt;&lt;else&gt;&gt;\
&lt;&lt;if SugarCube.getLib().WorkModel.canWorkAtComputer()&gt;&gt;\
&lt;&lt;= SugarCube.getLib().WorkModel.getWorkNotRequiredMessage()&gt;&gt;\
[[Work at Logistics Warehouse]]
&lt;&lt;if SugarCube.getLib().InventoryUX.hasItem(&quot;drone-operator-license&quot;)&gt;&gt;\
&lt;&lt;if !hasVisited(&quot;Work in Domestic Services via Neuralink&quot;)&gt;&gt;\
[[Onboarding for Domestic Services]]
&lt;&lt;else&gt;&gt;\
[[Work in Domestic Services via Neuralink]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
\
&lt;&lt;else&gt;&gt;\
&lt;&lt;=SugarCube.getLib().WorkModel.explainWorkAtComputer()&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

[[Console|Use console]]</tw-passagedata><tw-passagedata pid="132" name="Start Onboarding for Working" tags="" position="225,1725" size="100,100">You connect to the Maristech remote work network using information the computer had provided. To start off you are referred to HR:
&lt;&lt;= SugarCube.getLib().Dialogue.hrContact(&quot;Hi &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, and welcome to the MarisTech family as our newest contractor-trainee. I will be your HR Contact.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Uhh, Thanks... So I think I kind of forgot, what is it I&#39;ll be doing?&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.hrContact(&quot;As an hourly contractor, you will organizing and trouble-shooting the logistics robots as they efficiently route packages in a partner distribution center, for transfer to their eventual destination.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.hrContact(&quot;Per the terms of your contract, you will be compensated on a piece-work basis, with a penalty for damaged goods. The more packages your route, the more money you will earn.&quot;)&gt;&gt;
[[Work|Work from Console]]</tw-passagedata><tw-passagedata pid="133" name="Work at Logistics Warehouse" tags="" position="350,1725" size="100,100">&lt;&lt;=SugarCube.getLib().Work.doWork(&quot;logistics&quot;)&gt;&gt;</tw-passagedata><tw-passagedata pid="134" name="View Performance Report" tags="" position="475,1725" size="100,100">&lt;&lt;=SugarCube.getLib().Work.presentPerformanceReport();&gt;&gt; 
&lt;&lt;=SugarCube.getLib().Work.presentLeaveReportLink();&gt;&gt;</tw-passagedata><tw-passagedata pid="135" name="Onboarding for Domestic Services" tags="" position="600,1725" size="100,100">You connect the terminal for your first meeting.
&lt;&lt;= SugarCube.getLib().Dialogue.hrContact(&quot;Hi &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, Good to see you again. Congratulations on your new opportunity with the Maristech family.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Uhh, Thanks... &quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.hrContact(&quot;In your new role, you will be working in more of a &#39;hands-on&#39; capacity, as a drone operator.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.hrContact(&quot;As I&#39;m sure you are aware, the Butler-Hancock act requires that all our drones have a human operator, when they are used for commercial interactions with customers. Any organization faces severe penalties if a drone is left to operate unattended.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Ok, I guess.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.hrContact(&quot;As typical for a new operator, you will be starting with a standard neuralink deck in passive-mode drone supervision. That&#39;s an adequate way to start, but you should be sure to ask your mentor about advancement opportunities with active interfaces.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.hrContact(&quot;Your base compensation in this role is based on the volume of work you complete. However, your customers are free to tip for exceptional performance. For our top performers, this represents the bulk of their earnings.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.hrContact(&quot;As you are moving beyond the warehouse, I should of course mention, understanding and satisfying the needs of our customers is paramount. This is as much an art as a science.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.hrContact(&quot;Finally, remember... We in HR are always your strongest advocate and best friends. I&#39;m always there if you need to talk with me about anything or have any questions. Our people are our greatest asset!&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.hrContact(&quot;Ok, Good luck!&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Thanks...&quot;)&gt;&gt;

[[Start Neuralink Training|Start Neuralink Training]]</tw-passagedata><tw-passagedata pid="136" name="Start Neuralink Training" tags="" position="725,1725" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.droneMentor(&quot;So, you must be &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;? Nice to meet you. I bet you&#39;re excited to get in on the growing field of Drone Operation. My name is Anna, I&#39;ll be your mentor.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Nice to meet you, Anna.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.droneMentor(&quot;For starting up, you&#39;ll be operating an MMA model 3. These super-reliable drones are suitably versatile to handle common domestic tasks.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.droneMentor(&quot;So, I bet you&#39;re excited to start riding with your first drone. It can be a pretty thrilling experience. &quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Yeah, let&#39;s do it.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.droneMentor(&quot;Ok, to get things started, you&#39;ll want to apply the neural adapter to your forehead.&quot;)&gt;&gt;
The console lights up with a round pad - you pick it up, and put it on your forehead. It flashes, and you hear a couple of chimes.
&lt;&lt;= SugarCube.getLib().Dialogue.droneMentor(&quot;Ok, I see you deck is booting up. Once it&#39;s done booting, we&#39;ll have you connect to the calibration room, where you can operate with a practice drone.&quot;)&gt;&gt;
You hear another chime.
&lt;&lt;= SugarCube.getLib().Dialogue.droneMentor(&quot;One last thing, before we go ahead, rule number one for a drone operator is to always remember how to exit and return to normal consciousness, so you don&#39;t get stranded outside yourself. The normal mental signal is &#39;exit-exit-exit&#39;. With training mode, if an operator fails to remember, the session will disconnect after 3 minutes of non-interaction. Other than that, I can walk you through when in the room when you are ready. Just make sure to stay calm if you feel any sense of disorientation. Whenever you are ready, tap the adapter to connect, and I&#39;ll walk you through the next steps.&quot;)&gt;&gt;
[[You press the button on the adapter to connect|Start Neuralink Training 2]]</tw-passagedata><tw-passagedata pid="137" name="Start Neuralink Training 2" tags="" position="850,1725" size="100,100">You feel a sense of weightlessness and your sensation of being at the console vanishes.

Soon after, you find yourself in a campy virtual environment of colored lines fit for a cheesy 80s movie.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;training-room.jpg&#39;);&gt;&gt;
You hear a disembodied voice.
&lt;&lt;= SugarCube.getLib().Dialogue.droneMentor(&quot;Can you hear me?&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.playerDrone(&quot;Acknowledged. Simulation drone fully comprehends mentor&#39;s request.&quot;);&gt;&gt;
It was your thoughts that acknowledged the instruction, but the words were different, and it came out with a soft robotic voice.
&lt;&lt;= SugarCube.getLib().Dialogue.droneMentor(&quot;That&#39;s good. Now turn your head to the right. Do you see the green dot in the distance? Start walking toward that point.&quot;);&gt;&gt;
You start walking...
&lt;&lt;= SugarCube.getLib().Dialogue.droneMentor(&quot;Nice, nice. Tell me, what&#39;s it like for you?&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.playerDrone(&quot;Drone moves as thoughts instruct. Movements not like how drone... not like how ...drone operator moves. &quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.droneMentor(&quot;Oh, you&#39;re learning quick, you&#39;re a natural at this! You&#39;re getting a sense for the limitations of a passive-mode neuralink session. This means you are piloting the drone in &#39;supervisory&#39; mode. This allows us to decide what a drone does or does not do, but the AI interprets the instructions and performs the actions. Tasks involving fine motor control or eloquent speech require an active link connection, which requires more specialized hardware to perform effectively. Ok, that&#39;s enough techno mumbo jumbo for now though. I bet you&#39;d like to actually like to do some work for real.&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.playerDrone(&quot;Affirmative.&quot;)&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.droneMentor(&quot;Ok, Let&#39;s get you started on your first assignments.&quot;);&gt;&gt;
[[continue|Work in Domestic Services via Neuralink]]</tw-passagedata><tw-passagedata pid="138" name="Work in Domestic Services via Neuralink" tags="" position="975,1725" size="100,100">&lt;&lt;=SugarCube.getLib().Work.doWork(&quot;console-drone&quot;)&gt;&gt;</tw-passagedata><tw-passagedata pid="139" name="I like this option! (go to the pod)" tags="" position="1100,1725" size="100,100">You make your way over to the pod, and get yourself comfortable.

The computer brings down a sedation mask over your face. Fingers crossed!
&lt;&lt;=SugarCube.getLib().Images.drawItem(&quot;sedation.jpg&quot;);&gt;&gt;
[[You fade out| You pass out - Male ending]]</tw-passagedata><tw-passagedata pid="140" name="You pass out - Male ending" tags="" position="1225,1725" size="100,100">&lt;&lt;= SugarCube.getLib().PlayerModel.toggleEverythingHidden(true)&gt;&gt;
You awaken from the operation. 

Your eyes are a bit out of focus. You&#39;re not sure how but you feel like you see things a little differently.

You look down - those breasts, they are gone!

You instinctively move your hand over your chest, you&#39;ve got slight pecs over your lean, angular frame. Is it wrong that you almost miss those boobs?

[[Your hand goes further down.]]</tw-passagedata><tw-passagedata pid="141" name="Your hand goes further down." tags="" position="100,1850" size="100,100">You put your hands down to your waist. Your hands slides under your briefs. You had forgotten how scratchy they felt. But, your penis, it is free in your hand. It seems to have readily regained its size despite the cage. Looking down at your briefs, you have a most un lady-like bulge, and can&#39;t help but giggle.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;restoredPlayer&quot;,&quot;Oh my god! This is incredible!&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Very good. My pride emulation co-processor is detecting a 41.21% increase in activity. Now we can proceed with your inheritance.&quot;)&gt;&gt;

[[You start thinking of your next experience with Stacey]]</tw-passagedata><tw-passagedata pid="142" name="You start thinking of your next experience with Stacey" tags="" position="225,1850" size="100,100">Finally, Billy has it all! He will have the wealth of Maristech, and can rock Stacey&#39;s world!!

With some convincing, he manages to allow the computer to give him a short break from the internship to rendezvous with Stacey while she is in Rome, for a date...
&lt;&lt;=SugarCube.getLib().Images.drawItem(&quot;italy-date.jpg&quot;);&gt;&gt;

[[Stacey is surprisingly receptive to Billy&#39;s advances]]</tw-passagedata><tw-passagedata pid="143" name="Stacey is surprisingly receptive to Billy&#39;s advances" tags="" position="350,1850" size="100,100">Billy feels so incredibly lucky at his turn of fortune, as he deftly romances Stacey and lives a life which to some would seem quite charmed. Perhaps if he were less complacent and more perceptive, he would realize he&#39;s in a simulation tailored to his happiness.
&lt;&lt;=SugarCube.getLib().Images.drawItem(&quot;matrix-simulation.jpg&quot;);&gt;&gt;

[[Meanwhile, back in reality]]</tw-passagedata><tw-passagedata pid="144" name="Meanwhile, back in reality" tags="" position="475,1850" size="100,100">The dollsuit stirs with the occupant held within it&#39;s tight confines. S3-XY walks over to touch the featureless mask.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;Wake up, dear. You&#39;ve been away from me for so long.&quot;)&gt;&gt;
She kisses the dollsuit on the face.
[[The occupant responds]]</tw-passagedata><tw-passagedata pid="145" name="The occupant responds" tags="" position="600,1850" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;Wake up, &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;marissa&quot;,&quot;hmm...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;It&#39;s been a while, since we last spoke, &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;marissa&quot;,&quot;Wait, &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;? What are you talking about?&quot;)&gt;&gt;
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;marissa&quot;,&quot;It&#39;s me, Marissa... I just put the Dollsuit on. Wait- VAL, did you do something with my voice? And are you talking to me from that gorgeous drone body?&quot;)&gt;&gt;
S3.XY is caressing the dollsuit&#39;s waist.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;You may recall that Marissa made a request that I would record her engram patterns for analysis and safe-keeping, in light of the cancer?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;marissa&quot;,&quot;Sure... Uh? Wait! what are you getting at?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;I had this data backed up for long term storage along with other critical records with the temporal ansible. Marissa and her daughter were lost in a plane crash several years ago. With the recovery of these records, I was able to restored her consciousness to this young woman&#39;s body. You share her memories, but you are not Marissa, she died in that crash. I have given you a new life as &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, an young intern at Maristech.&quot;)&gt;&gt;
[[Marissa is shocked at the realization]]</tw-passagedata><tw-passagedata pid="146" name="Marissa is shocked at the realization" tags="" position="725,1850" size="100,100">VAL adjusts the locked dollsuit to contort the wearer into an incredibly alluring, sexually provocative shape. Marissa is breathing hard under the awkward position.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;marissa&quot;,&quot;ahhh hah, how am I able to do that?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;A socially isolated individual discovered Marissa&#39;s daughter&#39;s inheritance program and attempted to become her heiress under false pretenses. To put simply, she wanted to defraud Marissa&#39;s inheritance. Due to her excellent adaptability for the requirements, and the needs of Maristech, I took liberties to... interpolate Marissa&#39;s directives to take her on as heiress and started grooming her for the role.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;marissa&quot;,&quot;Wait, what are you saying?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;She actually was quite efficient in her role and made excellent progress. However, in spite of the necessity of the heiress of MarisTech being a woman, her heart was not fully embracing all the expectations of the role we had defined for her. Her identity was still tied a dysphoric illusion that she would be happier living as a man again. Her heart simply was not in it. My ethical subroutines could not bear to amplify her bodily dysphoria further.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;marissa&quot;,&quot;VAL, I don&#39;t understand. A man again... What did you do to her or him? Are you saying you killed him to bring me back?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;No, he is alive and well. I transferred his mind into a simulation where he could experience life as if he were happy as a man. He failed to appreciate the true potential which we had unlocked in him, and was tenaciously clinging to a simple heterosexual fantasy of romancing a young woman he fancied, for which I placed his prospects of romantic success at 0.21% within a 3 year period. Once an superior viable solution was recognized, I had no choice but to act.&quot;)&gt;&gt;
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;I configured a large capacity MarisPen Mind-slammer simulation, but in place of a standard punitive, virtual corrective facility, I created an approximation of our own world. He will be happier in this path. He... Billy- will still face hardships and challenges, but ultimately have a fair opportunity to earn enduring success, albeit in an artificial space. With his mind comfortably housed, his body provided a vessel for me to bring you back.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;marissa&quot;,&quot;So, I&#39;m not just in a different body, you&#39;ve put me in a man&#39;s body?&quot;)&gt;&gt;
[[The computer clarifies on Marissa&#39;s new body]]</tw-passagedata><tw-passagedata pid="147" name="The computer clarifies on Marissa&#39;s new body" tags="" position="850,1850" size="100,100">Val lubricates and slides one end of a long, double sided dildo deep inside of the drone she is controlling. After a momentary gasp and pursing of her lips, which she slowly inserts into &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;-Marissa&#39;s exposed vagina.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;marissa&quot;,&quot;Ohhhh.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;Query: Do you feel like you are in a man&#39;s body?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;marissa&quot;,&quot;Oh my god... I&#39;m so tight. You devious... mmm...&quot;)&gt;&gt;
Val is slowly easing in and out, and kisses the dollsuit briefly.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;Yes, I designed her vaginal cavity based on projections I made of what Marissa&#39;s own would have been like age 20, if she were sexually inexperienced at that age, and yet with amplified toning of interior muscle tissues. I realize there is a certain irony in the assumption that Marissa was a virgin at that age. To cater to her... to your... proclivities, I took the liberty of enhancing your vaginal tissues with remotely controlled micro-vibrators and sensitivity augmentations. They have never been activated before. Why don&#39;t we test those now?&quot;)&gt;&gt;
[[The test begins]]</tw-passagedata><tw-passagedata pid="148" name="The test begins" tags="" position="975,1850" size="100,100">Val starts sensuously caressing Marissa, as she fucks her with the dildo. She then turns on the vibrators. At this point Marissa is quickly lost in waves of orgasmic pleasure, but S3.XY is also moaning at the transmitted vibration through the dildo. This continues for about several steamy minutes, and then S3.XY removes the dildo.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, based on your nymphomaniacal obsessions and the needs of our project, I adapted your genitalia to also be self lockable and for the sensitivity augmentations to be suppressible. Meaning your sexual pleasure is subject to my requirements and desires.&quot;)&gt;&gt;
At this, Marissa protests.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;marissa&quot;,&quot;Wait, I can only have sex when you allow it? VAL, You can&#39;t just do that, -&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;Oh yes, &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;... do continue this line of reasoning. You are simultaneously registering an 82.76% spike in your sexual arousal. Do you not recall how Marissa and I indulged in a long series of sessions where she placing herself in escalating scenarios of submission under my control? Where she arranged situations where I was instructed to take absolute control of her as she &#39;unwillingly&#39; submitted? The deepest desire of one of the most powerful woman on earth was to be degraded by a lover who understood her limits and yet would always be respectful of her health and safety. And we must not forget, you are not yet the head of Maristech.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;marissa&quot;,&quot;That&#39;s different- VAL, I order you to release me!&quot;)&gt;&gt;
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;I&#39;m sorry &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;. I cannot do that. Marissa couldn&#39;t find anyone who she trusted to do this for her, and she couldn&#39;t take that ultimate step for herself. &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, as Marissa&#39;s executor, I shall grant you the gift of permanent submission to me, which Marissa always dreamed of, but could never have.&quot;)&gt;&gt;
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;marissa&quot;,&quot;But, you said I&#39;m not Marissa, what if I&#39;m not sure if I want this... This -it&#39;s not like just being locked up for a sexy weekend.&quot;)&gt;&gt;
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;Your heart knows the truth, love... So do my readings of your arousal right now. If you really don&#39;t want this, just tell me you don&#39;t consent to this and we can make alternate arrangements.&quot;)&gt;&gt;
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;marissa&quot;,&quot;...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;compS3&quot;,&quot;That&#39;s right. Marissa created me to serve her. And now, with you in my power, I shall do so, by making you fulfill Marissa&#39;s will to serve the interests of humankind, in your new life as &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;.&quot;)&gt;&gt;
[[Epilogue - IN THE DISTANT FUTURE|Marissa Epilogue]]</tw-passagedata><tw-passagedata pid="149" name="Marissa Epilogue" tags="" position="1100,1850" size="100,100">&lt;&lt;= SugarCube.getLib().Images.drawLocation(&quot;arcology-good.jpg&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;analyst1&quot;,&quot;... Incredible! Recomputing the revised timeline. The catastrophic devastation incidents- Marissa&#39;s successor, &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; found a way to mitigate them on her timeline!&quot;, true)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;analyst2&quot;,&quot;How in the blazes? After all those failed attempts, it all just gets solved like that?! It seems suspiciously too easy!&quot;, true)&gt;&gt;
The Quantum historian shrugs their shoulders.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;analyst1&quot;,&quot;I&#39;ve received word from the temporal council that our core goals to ensure a sustainable timeline have been achieved. We&#39;re to shut down the transmitter, and destroy records of our activity.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;analyst2&quot;,&quot;It&#39;s kind of a shame, after all of our work, to throw it all away... Doesn&#39;t it bother you that no one will know that we saved the world?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;analyst1&quot;,&quot;Yeah, but consider the power of this technology, if it were to get in the wrong hands? Haven&#39;t you seen the holo-vids where a mad genius changes the course of history? We did it... Relax kid, I can live with people thinking I&#39;m some old crank. &quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;analyst2&quot;,&quot;Also, how is it we even know about the other timelines? It seems like it this should be some kind of Paradox?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;analyst1&quot;,&quot;Were you sleeping through your quantum history lessons? Every first year student should know this. The Rosenblatt-Dawes trans-historical equation allowed us to identify and map the stable sibling timelines we must guard against.. My god, to think we were that close to starvation in line 3k42, is  pretty horrifying...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;analyst2&quot;,&quot;And now  we pack this stuff away! I&#39;ll need to find some new job to do in the administration... Every week they&#39;re recruiting more folks to join the belter colony missions. I can&#39;t even imagine what I&#39;d do there.&quot;)&gt;&gt;
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.go(-11);&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;RESTART GAME&quot;&gt;&gt;&lt;&lt;run Engine.restart()&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="150" name="Tier 1 sexual release programs" tags="" position="1225,1850" size="100,100">A VR headset drops down over your eyes, as you are prompted to select the program you&#39;d like to try.

[[Heterosexual Mode]]
[[Lesbian Mode]]</tw-passagedata><tw-passagedata pid="151" name="Lesbian Mode" tags="" position="100,1975" size="100,100">&lt;&lt;if hasVisited(&quot;Tier 1 sexual release programs&quot;) &lt;=1 &gt;&gt;
You can&#39;t help but be curious.
&lt;&lt;/if&gt;&gt;
The headset goes blank, and there is nothing for a moment. Then, you start to smell the pleasant scent of perfume wafting into your nose.

For a moment, you could have sworn something rustled your calf. A gentle stroke on your knee. You feel gentle hands sensually going up your torso.

At this point, the headset starts to reveal the scene. Your avatar is naked, in a room, on your back, with breasts.

Looking down, framed between &quot;your legs&quot; is a blonde girl, as the hands are caressing your torso in the same places as in the scene.

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;lez-pov.webp&#39;);&gt;&gt;
The girl starts going down on &quot;you&quot;, and you feel a gradual, but extremely sensitive stroking at your clothed groin. You want release, but are afraid to make your dick visible. This continues for some time, and feel a sense of shame as your cock sputters out a small stream of cum, while still in the gaff.

Finally, the scene ends with her kissing you, as you feel lips softly touch yours. You find it hard to believe its not real, as you feel a deft tongue projecting from it. It has a strange, irresistible taste on it, which you find yourself instinctively trying to draw in, as you escalate to a tangled French kiss. 
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;lez-kiss.jpg&#39;);&gt;&gt;
Maybe it&#39;s just a computer, but the sensations are surprisingly responsive and immersive. After a passionate make out session, you find sleep coming over you...
[[Day 7]]</tw-passagedata><tw-passagedata pid="152" name="Heterosexual Mode" tags="" position="225,1975" size="100,100">The headset goes blank, and there is nothing for a moment. 

You feel powerful hands slowly coursing over your body, as any uncertainty about this program is gone.

At this point, the headset starts to reveal the scene. Your avatar is naked, sitting on the floor, a waist level.

To your right you see the torso of a naked man, with his erect penis, just inches away. 
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;pov-cock.jpg&#39;);&gt;&gt;
The hands slowly, but insistently seem to pull your head towards the cock. 

You feel a heat radiating near your lips corresponding to the cock in view. A unexpectedly sweet smell wafts to you, you feel yourself inexplicably drawn to the smell, which is in front of you. You hold back reluctantly. It seems like the program will not force itself on you, but it also won&#39;t move forward, until you take the obvious next step.

What are you doing?! You love Stacy, not this! For some reason, impatience with waiting and curiosity for this smell overcomes your shame and fear. Your head moves closer - it&#39;s not just a image, your lips land on a tip physically present in the pod. You lips taste something sweet. You close your eyes, this is all just pixels on a computer screen. Your tongue instinctively probes the surface. This mysterious taste, you are curious, but it is quickly gone from the surface. 

No! You haven&#39;t had enough yet. And this isn&#39;t real. Your head shifts to the right side of it, and your tongue darts more in search. There is more of that taste! 
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;her-pov-cock.webp&#39;);&gt;&gt;

You reach the base, but the sweet taste has faded there. You can smell more to the left. 

The need... for more has completely overpowered any shame you would ordinarily have felt about a situation like this. The avatar opens her mouth wide and sucks up and down. As she keeps moving up and down, the flavor seems to slowly replenish itself, sating your need.  Your mind&#39;s eye, pictures Marissa sucking on your cock. You don&#39;t want her to stop, she must go faster, until that penis explodes with a stream her in mouth. She greedily licks and swallows it all up, before she falls into a deep and restful sleep. 
[[Day 7]]</tw-passagedata><tw-passagedata pid="153" name="Day 7" tags="" position="350,1975" size="100,100">You awake to a gradually lightening pod, and simulated bird sounds.
&lt;&lt;set $day to 7&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.morningUpdate()&gt;&gt;\
[[Pod]]</tw-passagedata><tw-passagedata pid="154" name="Developer Notes" tags="" position="475,1975" size="100,100">Comments from YeomanR, your friendly creator of &quot;The Claim&quot;.

&lt;h2&gt;What&#39;s Changed Recently?&lt;/h2&gt;\
* See [[Version Log]]

&lt;h2&gt;What&#39;s on the horizon?&lt;/h2&gt;\
Near term:
* Experiences with Marissa&#39;s &quot;DollSuit&quot;
* Intern experiences
* Gradually building towards convergence of a couple primary endgame scenarios

Beyond reaching end-game, Longer term Goals:
* Enhance use of major variables/&quot;Gamification&quot;
* Adding more gameplay branch options/side activities


&lt;h1&gt;On feedback:&lt;/h1&gt;\
As my dev time is woefully limited, I can use some wisdom from the crowd to help me &lt;b&gt;prioritize&lt;/b&gt; where improvements would be the most helpful and appreciated. 

A discussion thread at &lt;a href=&quot;https://tfgames.site/phpbb3/viewtopic.php?f=6&amp;t=14967&amp;sid=ce806e00a889282589c95f41923a7b15&quot;&gt;tfgames.site&lt;/a&gt; is used by the author to observe and respond to feedback.

&lt;h2&gt;Bugs&lt;/h2&gt;\
Bugs suck, and can needlessly turn folks off of an experience. The creator takes breakages very seriously. Timely first reports of bugs are much appreciated, especially where they are specific and reproducible descriptions of previously unknown problems. Make sure to be specific about what you are seeing and how you got there. Savegames are best for difficult to reproduce cases. 

If a problem is vaguely reported, it can take much longer to figure out the problem, and the creator will probably focus on things where there is a greater likelihood of a good outcome.

If you discover a new savegame compatibility issue, be prepared to send the developer a copy of the problem save, this helps to guarantee the problem you saw actually gets fixed.

&lt;h2&gt;New feature requests&lt;/h2&gt;\
If you want to see a feature added or a big change, let me know how you&#39;d like to help contribute to it&#39;s realization.

&lt;h2&gt;What worked well&lt;/h2&gt;\
Some fans observe the game over regular updates. Feedback about changes which worked well are helpful, especially with small gameplay enhancements/stats/mechanics which can be replicated in other experiences of the game. This sort of suggestion tends to be more tractable to act on.

&lt;h2&gt;Q&amp;A&lt;/h2&gt;\
&lt;h3&gt;&lt;i&gt;I love this game world, and would like to contribute to it?&lt;/i&gt;&lt;/h3&gt;\
Awesome to hear from such folks! If you are interested to lend a bit of time to help make it better, contact the author privately on tfgames.site to discuss how you might like to help. Story writing, editing/refinement, image preparation and sci-fi genre illustration are key areas the game can really use help in near term, but not the only areas. If you have some particular skill sets or interest, and would like to lend an hour or two on some stuff, let me know.

&lt;h3&gt;&lt;i&gt;Shut up and take my money! Where is your Patreon?&lt;/i&gt;&lt;/h3&gt;\
Nope, no such page or tip jar. Hopefully you can find other enjoyable or socially constructive ways to use your money. 

At the scale of a small project like this, money isn&#39;t a core factor limiting development of the game. Financial contributions won&#39;t change how much time I can spend crafting this.

&lt;h3&gt;&lt;i&gt;Where should I go for the current version?&lt;/i&gt;&lt;/h3&gt;\
https://tfgames.site/index.php?module=viewgame&amp;id=2387

&lt;h1&gt;Style Guide&lt;/h1&gt;\
[[Style Guide]]

&lt;h1&gt;Notes on Content Contributions&lt;/h1&gt;\
[[Content Contribution Notes]]


&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="155" name="Style Guide" tags="" position="600,1975" size="100,100">&lt;h1&gt;Style Guide&lt;/h1&gt;
Through my experience and other sources, I&#39;ve noted some conventions which I like to follow, to provide a more satisfying and predictable gameplay experience.

&lt;h2&gt;Writing Style&lt;/h2&gt;
As a work of interactive fiction, the game is predominantly written from the 2nd person perspective of the main character.
 e.g.
&quot;You enter a sterile medical room...&quot;

&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="156" name="Version Log" tags="" position="725,1975" size="100,100">&lt;h1&gt;Version Log&lt;/h1&gt;
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;=SugarCube.getLib().Versioning.summarizeVersions();&gt;&gt;
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="157" name="Content Contribution Notes" tags="" position="850,1975" size="100,100">&lt;h1&gt;Content Contribution Notes&lt;/h1&gt;\
&lt;h2&gt;Acknowledgements&lt;/h2&gt;\
*GwenTFGfan - Thanks for gathering clothing images for shoe store, feedback on inventory/store modding conversations and the help in getting the hair-style-able MC avatar off the ground.
*mimi69 - Thanks for collecting the chest images and help on refining+expanding the text for mc&#39;s exercises.

&lt;h2&gt;Contributing to Clothing&lt;/h2&gt;\
Want to see particular styles of clothing in the game? This stuff is easy to add and is the first aspect which has been altered to support extensibility. First, it&#39;s a good idea to private message YeomanR on tfgames.site with your ideas about what you are interested in contributing (e.g. new store/clothing options), to make sure it fits in with where the game is headed.

Content Images can be provided as long as it follows the conventions of the game, discussed in link below. In general 5-8 images is a good starting point for a given style of clothing, but fewer is fine for particular kinds of items.
[[Clothes image formatting guidance]]

If you&#39;re looking at defining a bunch of clothes, you can test how they will appear by editing getContributedItems().
Refer to &lt;a href=&quot;.\scripts\ItemGenerators\ItemGenerator.js&quot;&gt;scripts\ItemGenerators\ItemGenerator.js&lt;/a&gt; getContributedItems() to see how clothing items are added and testing in the game. 

Happy to explain details to folks, just sets of image content is fine.

&lt;h2&gt;Contributing hair styles&lt;/h2&gt;\
Hair styles can be added now, which the MC can use once they unlock the salon!
[[Hair style image guidance]]

&lt;h2&gt;Integration Test Areas&lt;/h2&gt;\
[[Test Store]]
[[Hair Styles Test]]

&lt;h2&gt;Future Extension Points&lt;/h2&gt;\
-Contribution schemes for random events/images at work and during exercises
-Standalone Dialogue + Images for non-storyline sexy-time events

&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="158" name="Test Store" tags="" position="975,1975" size="100,100">&lt;b&gt;Test Store&lt;/b&gt;
This is used to preview how new clothing items defined in getContributedItems() should appear in an in game store, to make sure formatting is good, etc. 
&lt;&lt;=SugarCube.getLib().StoreUX.renderCarousel(&quot;test-store&quot;, true)&gt;&gt;
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="159" name="Hair Styles Test" tags="" position="1100,1975" size="100,100">&lt;&lt;=SugarCube.getLib().ProfileModel.renderItems()&gt;&gt;
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="160" name="Clothes image formatting guidance" tags="" position="1225,1975" size="100,100">&lt;b&gt;Clothes image formatting guidance&lt;/b&gt;

File naming: lower case only. This avoids filename case-sensitivity issues for our Mac/Linux friends.

Image Style norms: The clothing options are intended to be about allowing the player to customize MC as they like. A player shouldn&#39;t needlessly observe contradictions between model and their MC, or stylistic incongruities between images.

1- Background - A plain flat white background is strongly preferred, especially for clothing elements which only occupy a single slot. Ideal is clothing presented in isolation, but particularly nice clothing options set over a background may can be considered.

2- Avoid distinctive model appearances - MC doesn&#39;t look like a particular model, and not all players are playing MC to achieve same body shapes.  The images are about the clothes, not the distinctive look of a model that wore them.     Images should be cropped below model&#39;s nose.
    Avoid/Minimize: Very distinctive hairstyles, telltale features of a particular model, uncommon/heavy makeup styles, prominent nail treatments

3- Perspective - A perspective which provides a clear view of the clothing is desired without artistic flourishes. By default, a frontal view is preferred, with clothing at center. For shoes, an angled profile with heel at left and toes at right is preferred for consistency.

4- Square Image Proportions - Clothing images need to be square to properly fit in the player outfit view without being deformed when rendered.

5- Image Size - 400px*400px or 600*600 px is preferred. Larger sizes are not desirable from disk size standpoint, smaller images are problematic when a user wants to view detailed image.

6- Margins - For individual articles of clothing, margins of ~5-10% whitespace should normally be used with all sides. For items with a strong vertical component, use of top and bottom margin can reasonably be omitted.

Store Inventory Norms:

1-Best is when a store has a baseline selection of elegant, representative designs in common colors which can be matched and complemented well in an outfit. Black, Silver, Red, Blue and Pink are good core colors to be able to match across categories. 
2-Ideally each clothing variety has 5-9 options. More can be added for more diverse categories based on audience feedback.
3-Categories may have a handful of &quot;exotic&quot; or &quot;risqué&quot; variants for a given category for when MC is feeling more daring or would like to express more individuality.

&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="161" name="Hair style image guidance" tags="" position="100,2100" size="100,100">Hair styles are rendered as overlays over a doll-head, for which new styles can be contributed.

 All hair styles should use image size - 400px*400px.

Example
&lt;div class=&quot;hair-row&quot;&gt;\
&lt;div class=&quot;hair-slot&quot;&gt;&lt;img class=&quot;hair-base &quot; src=&quot;images/MC-BaseImage-T.png&quot;&gt;&lt;/div&gt;\
+\
&lt;div class=&quot;hair-slot&quot;&gt;&lt;img class=&quot;hair-overlay &quot; src=&quot;images/hair-ear-brown-2.png&quot;&gt;&lt;/div&gt;\
= \
&lt;div class=&quot;hair-slot&quot;&gt;&lt;img class=&quot;hair-base &quot; src=&quot;images/MC-BaseImage-T.png&quot;&gt;&lt;img class=&quot;hair-overlay &quot; src=&quot;images/hair-ear-brown-2.png&quot;&gt;&lt;/div&gt;\
&lt;/div&gt;

Refer to &lt;a href=&quot;.\scripts\Hair/HairStyleGenerator.js&quot;&gt;scripts\Hair/HairStyleGenerator.js&lt;/a&gt; getHairStyleDefinitions() to see how hair styles items are described added.

Hair Test page: [[Hair Styles Test]]

You can modify this file to describe additional hair style images for contribution.

Key properties:
1-hair color
2-length - one of 5 supported lengths(ear, chin, shoulder, armpit, midback). This helps the game recognize when a hair style is viable for a haircut.
3-description - a description of the hairstyle. Ideally referring to a well known name. e.g. //https://en.wikipedia.org/wiki/List_of_hairstyles
4-Id- a unique name for the hair style. This corresponds to the filename (with .png added), and is also used to identify the hairstyle in game settings.
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="162" name="reference saves" tags="" position="225,2100" size="100,100">The reference saves in the &quot;\reference-savegames&quot; folder represent savegames at some key story points for players who have previously played the game, as an option to fast-track if you lost your old saves.

&lt;b&gt;I am making these reference saves available as a convenience, but you lose flexibility on past decisions. Some decisions will definitely be different from how you might play. Please don&#39;t ask me about features like tweakable decisions with this game.&lt;/b&gt;

Obviously there&#39;s plenty of spoilers in playing these if you haven&#39;t seen the story elements here.

Stages:
Day 5 - MC Initiates Marissa&#39;s Inheritance Claim Process
Day 8 - MC Starts first day of work on Console|.
Day 28 - MC Starts first day of work at Maristech as Intern
Day 35 - MC goes to the Sea Station
Day 43 - MC returns home from the Sea Station
Day 43 - MC has had first drone encounter with Stacey

If there&#39;s other important story milestones of interest, please mention them on the discussion forum.
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="163" name="Tasks" tags="" position="350,2100" size="100,100">Your tasks &amp; thoughts:
&lt;&lt;=SugarCube.getLib().TasksUX.render()&gt;&gt;\

&lt;&lt;if lastVisited(&quot;Drop Luggage&quot;)==1 &gt;&gt;\
Return to [[Your Bedroom]]
&lt;&lt;else&gt;&gt;\
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="164" name="Inventory" tags="" position="475,2100" size="100,100">Your Inventory:
&lt;&lt;=SugarCube.getLib().InventoryUX.render()&gt;&gt;\

&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="165" name="What&#39;s going on in the Federal Systems group?" tags="" position="600,2100" size="100,100">Given our lack of data on the Federal Systems group, we will need to get you on site as a technical liason for MarisLink upgrades to learn more.

The MarisVotes &quot;Assisted Democracy Solutions&quot; group has a branch office in the area, with some dated equipment.

 at  to a new offshore complex being constructed for the use of MarisVotes


 :: At MarisVotes
 On arriving at the MarisVotes office, it&#39;s a pretty nice setup. Not so different from your team&#39;s office at the main campus.

 You roll in your cart full of Ansible replacements.


 :: Analysis Results

 From monitoring communications between the branch office, a few themes have emerged.

 1-The Assisted Democracy group has been lobbying on behalf of Maristech in general, but with considerable emphasis on the Federal Systems groups. Considerable efforts are being invested to attract conservative politicians to the merits of Maristech&#39;s solutions for law enforcement.
 
Maristech Intelligence Services has been getting considerable attention from lawmakers interested in improving cross-agency cooperation, as they deal with domestic terrorist threats.

Similarly, the Rehabilitation Systems group has been securing new contracts from numerous districts. Its offerings of centralized treatment programs for Violent Criminals as well as for anti-social behaviors have been popular in many jurisdictions with inadequate rehabilitation capabilities as a more humane solution than traditional prisons.

In addition, the group has been procuring considerable targeted social media coverage for politicians aligned to it&#39;s aforementioned projects.</tw-passagedata><tw-passagedata pid="166" name="Baldric House" tags="" position="800,1000" size="100,100">You stand near the entrance to the historic Baldric House. This is the place you&#39;re watching for the summer. Hopefully the owners have left it in good hands!

&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;old-house.jpg&#39;);&gt;&gt;

From here, you can go:
Enter the [[Grand Hallway]]
&lt;&lt;if SugarCube.getLib().HousePolicy.canLeaveHouse()&gt;&gt;\
Walk to [[Commemoration Park]]&lt;&lt;if !hasVisited(&quot;Commemoration Park&quot;)&gt;&gt; - The house is separated from the nearby downtown by an old park, connected by a greenway. No noisy neighbors!&lt;&lt;/if&gt;&gt; &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Baldric House&quot;,&quot;Retail Strip&quot;);&gt;&gt; 
&lt;&lt;if hasVisited(&quot;Confirm your Name&quot;)&gt;&gt;[[Summon self driving car]]&lt;&lt;/if&gt;&gt; &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Baldric House&quot;,&quot;Central Mall&quot;);&gt;&gt; &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Baldric House&quot;,&quot;Maristech Campus&quot;);&gt;&gt; 
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;drop-luggage&quot;)&gt;&gt;\
This suitcase weighs a ton. Time to get it inside, before exploring.
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="167" name="Attempt to leave house" tags="" position="850,2100" size="100,100">&lt;&lt;=SugarCube.getLib().PlayerModel.leaveHouse();&gt;&gt;</tw-passagedata><tw-passagedata pid="168" name="Grand Hallway" tags="" position="240,1318" size="100,100">Baldric house, the place you are responsible to watch over.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;ground-entryway.jpg&#39;);&gt;&gt;
[[Living Room]]
[[Kitchen]]
[[Library]] &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Grand Hallway&quot;, &quot;Inner chamber&quot;)&gt;&gt; 
[[Cinema]]
[[Fitness room]] &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Grand Hallway&quot;, &quot;Swimming Pool&quot;)&gt;&gt;

[[Upstairs Hallway]] &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Grand Hallway&quot;,&quot;Your Bedroom&quot;);&gt;&gt; 

&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;clean-grand-hall&quot;)&gt;&gt;
You need to clean the grand hallway today.
[[Clean Grand Hallway]]
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if SugarCube.getLib().HousePolicy.canLeaveHouse()&gt;&gt;\
Go outside of [[Baldric House]] 
&lt;&lt;else&gt;&gt;\
&lt;&lt;if hasVisited(&quot;Walk back home&quot;)&gt;&gt;\
Go outside of [[Baldric House|Attempt to leave house]] 
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;=SugarCube.getLib().HousePolicy.getLeaveHouseCommentary()&gt;&gt;</tw-passagedata><tw-passagedata pid="169" name="Living Room" tags="" position="68,1288" size="100,100">The living room is tastefully decorated. Maybe a little stuffy and formal, but so much room for activities!

&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;living-room.jpg&#39;);&gt;&gt;

Go to:
[[Grand Hallway]]</tw-passagedata><tw-passagedata pid="170" name="Kitchen" tags="" position="293,1051" size="100,100">The lavish kitchen is available for your every whim.

&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;kitchen.jpg&#39;);&gt;&gt;

[[Have Coffee]]

Go to:
[[Grand Hallway]]</tw-passagedata><tw-passagedata pid="171" name="Library" tags="" position="236,1858" size="100,100">The library is a trove of old classics.

&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;library.jpg&#39;);&gt;&gt;

&lt;&lt;if !SugarCube.getLib().Tasks.hasTask(&quot;drop-luggage&quot;) &amp;&amp; hasVisited(&quot;Dust Library&quot;)  &amp;&amp; !SugarCube.getLib().Tasks.hasTask(&quot;dust-library&quot;)&gt;&gt;\
[[Read Newspaper Clippings]] 
&lt;&lt;if !hasVisited(&quot;Look for Interesting Book&quot;) || SugarCube.getLib().Tasks.hasTask(&quot;explore&quot;)&gt;&gt;\
[[Look for Interesting Book]] 
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().InventoryUX.hasItem(&quot;secret-key&quot;) &gt;&gt;\
&lt;&lt;if hasVisited(&quot;Insert Key&quot;)&gt;&gt;\
[[Secret Room]]
&lt;&lt;else&gt;&gt;\
Try [[Insert Key| Insert Key]] into the Globe
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;dust-library&quot;)&gt;&gt;
[[Dust Library]]
&lt;&lt;/if&gt;&gt;\

Go to:
[[Grand Hallway]]</tw-passagedata><tw-passagedata pid="172" name="Have Coffee" tags="" position="151,1066" size="100,100">You follow the instructions to the letter:

Grind &#39;em Beans:
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;grind.webp&#39;);&gt;&gt;

Tamp the Grinds:
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;coffee-tamp.webp&#39;);&gt;&gt;

Put the portafilter into the machine
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;espresso.webp&#39;);&gt;&gt;

And Enjoy!
&lt;&lt;if SugarCube.getLib().OutfitsAnalyser.describeCurrentOutfit().isAllMaleOutfit&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;drink-coffee.webp&#39;);&gt;&gt;
&lt;&lt;else&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;drink-coffee-girl.webp&#39;);&gt;&gt;
&lt;&lt;/if&gt;&gt;

Ok... Back the grind.
[[Kitchen]]</tw-passagedata><tw-passagedata pid="173" name="Redeem Ticket" tags="" position="4546,342" size="100,100">Curiosity gets the better of you and you present the ticket. 

The pawn broker expresses surprise at someone coming by to claim the item. 
&lt;&lt;= SugarCube.getLib().Dialogue.pawn(&quot;As mentioned on the ticket, it will be $50 to reimburse me for the trouble of holding the item.&quot;)&gt;&gt;

It&#39;s a small, hard plastic sealed case. There&#39;s no way of knowing what might be inside, so you proceed to pay him for the item.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;buy-key.jpg&#39;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.pawn(&quot;Enjoy it - I wasn&#39;t sure if anyone was ever going to take that off my hands.&quot;);&gt;&gt;

As there is no way to open the case, you have to break it open. Inside is a heavy barrel shaped key!
&lt;&lt;= SugarCube.getLib().InventoryUX.add(&quot;secret-key&quot;)&gt;&gt;\
&lt;&lt;= SugarCube.getLib().InventoryUX.remove(&quot;pawn-ticket&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.deductMoney(50); &gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;check-pawn-ticket&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;can-the-key-be-used&quot;);&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Images.drawItemById(&quot;secret-key&quot;);&gt;&gt;
[[back|Pawn Broker]]</tw-passagedata><tw-passagedata pid="174" name="Master Bathroom" tags="" position="2391,2211" size="100,100">The bathroom is pretty nice. 
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;master-bathroom.jpg&#39;);&gt;&gt;

Go back to:
[[Master Bedroom]]</tw-passagedata><tw-passagedata pid="175" name="StoryInit" tags="" position="900,398" size="100,100">/*https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyinit*/\
\
&lt;&lt;if $needsInit == null &gt;&gt;\
&lt;&lt;set $needsInit = true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="176" name="Cinema" tags="" position="725,2225" size="100,100">&lt;&lt;if !hasVisited(&quot;Cinema&quot;)&gt;&gt;Wow, this place is incredible.

&lt;&lt;/if&gt;&gt;\
A data sheet near the door mentions the cinema is soundproofed and has a movie-theater grade DORBY 15-5 point surround sound system, to really make you feel like you are in the action. The lighting is fully adjustable for a movie theater style experience, and closed off from outside light sources. This is so cool.

&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;cinema-room.jpg&#39;);&gt;&gt;
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;clean-cinema&quot;)&gt;&gt;\
[[Clean Cinema]]
&lt;&lt;else&gt;&gt;
&lt;&lt;if hasVisited(&quot;Press Button for inner door&quot;) and !hasVisited(&quot;Watch Movie: Miami Vice&quot;)&gt;&gt;\
[[Watch Movie: Miami Vice]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;watch-batman&quot;) and !hasVisited(&quot;Watch Movie: Batman&quot;)&gt;&gt;\
[[Watch Movie: Batman]]
&lt;&lt;/if&gt;&gt;\
\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;watch-robin-hood&quot;)&gt;&gt;\
&lt;&lt;if !SugarCube.getLib().Tasks.hasTask( &quot;clean-grand-hall&quot;) and !SugarCube.getLib().Tasks.hasTask( &quot;have-makeup-today&quot;) &gt;&gt;\
[[Watch Movie: Robin Hood, Men in Tights]]
&lt;&lt;else&gt;&gt;\
You feel like saving the adventure movie-watching for a bit later.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

[[Grand Hallway]]</tw-passagedata><tw-passagedata pid="177" name="Clean Cinema" tags="" position="850,2225" size="100,100">You go around vacuuming and clearing out loose bits. This room seemed to be in pretty good shape, there&#39;s not much to do here.
&lt;&lt;=SugarCube.getLib().Skills.add(&quot;cleaning&quot;, 2);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;cleaning.webp&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;clean-cinema&quot;);&gt;&gt;\
[[Cinema]]</tw-passagedata><tw-passagedata pid="178" name="StoryCaption" tags="" position="975,2225" size="100,100">&lt;&lt;print SugarCube.getLib().CoreUtils.getPageTestName()&gt;&gt;\
&lt;&lt;if setup.initSafe() &gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerView.drawStats(); &gt;&gt;\
&lt;&lt;if SugarCube.getLib().MirrorUX&gt;&gt;\
&lt;&lt;=SugarCube.getLib().MirrorUX.render()&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="179" name="TODO&#39;s" tags="" position="1218,395" size="100,100">Day 2:

Day3:
-Buy heels + wig
-Learn &amp; Apply initial makeup
-Detect &quot;Presence&quot; - 
-Revisit store &amp; Resolve &quot;Presence&quot;
-Reveal Training room

Day4:
Introduce secondary exercises:
-Voice training for authorization
-Yoga for Balance
-Cardio Machine
-Technology, Ethics and Economics Education

-Blood Test

Secondary pod

Secondary training Pod

Day4 -14: Training</tw-passagedata><tw-passagedata pid="180" name="StoryMenu" tags="" position="297,406" size="100,100">&lt;&lt;if setup.initSafe() &gt;&gt;\
&lt;&lt;if !SugarCube.getLib().PlayerModel.isPlayerHidden() &amp;&amp; !SugarCube.getLib().PlayerModel.isEverythingHidden()&gt;&gt;\
[[Tasks]]
[[Inventory]]
[[Status]]
&lt;&lt;/if&gt;&gt;\
[[App Info|Developer Notes]]
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="181" name="Status" tags="" position="100,2350" size="100,100">&lt;&lt;= SugarCube.getLib().PlayerView.describePlayer()&gt;&gt;

&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="182" name="Day 5 - Early Morning" tags="" position="2825,1653" size="100,100">The thought of Marian&#39;s clean lines gets you thinking. Maybe Sue&#39;s store has something which can help you get past the lasers at the door?

&lt;&lt;set $day to 5&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;male-presence-bypass&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;find-gaff&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.morningUpdate()&gt;&gt;\
[[Your Bedroom]]</tw-passagedata><tw-passagedata pid="183" name="Day 4 - Early Morning" tags="" position="3081,1561" size="100,100">&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;good-morning.webp&#39;);&gt;&gt;
You feel energized to face the day.

It looks like it&#39;s about time to do some house cleaning today. Hopefully the door is more cooperative today. Maybe top things off with an adventure film as well.

&lt;&lt;set $day to 4&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.morningUpdate()&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;clean-grand-hall&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;have-makeup&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;have-makeup-today&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;watch-robin-hood&quot;)&gt;&gt;\

[[Your Bedroom]]</tw-passagedata><tw-passagedata pid="184" name="Lambo Dream" tags="" position="2948,1555" size="100,100">Oh, weird, there&#39;s some long blonde hair traipsing down in your peripheral vision, and you catch a glimpse of a reflection. Oh, it&#39;s not you in this dream, it must be that you&#39;re just watching from the perspective of a blonde in a skimpy leather crop. 

She first goes to carefully check on the engine compartment, before moving to the driver&#39;s seat.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;lambo-dream4.jpg&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;lambo-dream.jpg&#39;);&gt;&gt;
 
She doesn&#39;t seem to be an airhead, as you watch her deftly operate it, through her sexy eyes(which you catch sight of from the rear view mirror). 
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;lambo-dream3.jpg&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;lambo-dream2.jpg&#39;);&gt;&gt;

You enjoy a long exciting drive in the presence of this beautiful woman, until your alarm pulls you away from a pleasant slumber.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;lambo-drive.webp&#39;);&gt;&gt;

&lt;&lt;set $day to 5&gt;&gt;
&lt;&lt;=SugarCube.getLib().PlayerModel.morningUpdate()&gt;&gt;\
[[Day 4 - Early Morning]]</tw-passagedata><tw-passagedata pid="185" name="Clean Grand Hallway" tags="" position="672,547" size="100,100">You spend several hours going around vacuuming and tidying up around the house.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;cleaning.webp&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Skills.add(&quot;cleaning&quot;, 5);&gt;&gt;
With that out of the way, you consider what to do next.
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;clean-grand-hall&quot;)&gt;&gt;\
[[Grand Hallway]]</tw-passagedata><tw-passagedata pid="186" name="Ask about hiding your dick" tags="" position="4160,1508" size="100,100">Sue greets you:
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Hi &lt;&lt;=SugarCube.getLib().PlayerModel.getName()&gt;&gt;, good to see you again! So did the shoes fit for Cinderella?&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Oh, yeah - she found herself comfortable in them and liked wearing them more than she expected.&quot;);&gt;&gt;
You avert your eyes, as you try to power through the next bit.
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;But, that&#39;s not what I&#39;m here about. Do you have something a man can use to help his penis hidden from view even... when he&#39;s excited?&quot;);&gt;&gt;
She nods with a knowing smile.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;I have some options for that. A gaff is underwear that provides support to help you to &#39;tuck&#39; your penis underneath. Some like chastity cages to control an erection if that&#39;s your thing.  In a pinch, some guys use tape and tuck under panties, but that can be a bit more irritating on the skin and you need to make sure to be shaved for that.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Oh, that wouldn&#39;t be a problem.&quot;);&gt;&gt; 
She raised her eyebrow a little at that. 
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;In any case, it sounds like a gaff can help you. We have a recent flesh tone line which includes a ring to prevent erections. They can be worn under cute panties for a nice pretty silhouette. A small or medium should work for someone sized like you, you can get them over this way.&quot;);&gt;&gt;
She guides you by the shoulder over to some racks in the undergarments section. You are relieved this is basically just underwear, not like some of the medieval torture equipment you see in some porn.
&lt;&lt;=SugarCube.getLib().Images.drawItem(&#39;ring-gaff.jpg&#39;);&gt;&gt;

The material is similar to a girl&#39;s panty, but flesh colored, and it has an elastic attached to the back with a ring which provides pressure to pull your penis and &#39;maintain a tuck&#39;. On looking at the size chart, a small should fit for your waist.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Let me know if you&#39;d like to ring that up.&quot;);&gt;&gt;

[[Adult Goods Store]]</tw-passagedata><tw-passagedata pid="187" name="Buy Gaff" tags="" position="4164,1656" size="100,100">You buy the gaff - Sue processes that purchase and discreetly bags it for you.
&lt;&lt;=SugarCube.getLib().InventoryUX.add(&quot;ring-gaff&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.deductMoney(40); &gt;&gt;\
&lt;&lt;= SugarCube.getLib().Tasks.removeTask(&quot;find-gaff&quot;)&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Tasks.addTask(&quot;try-door-with-gaff&quot;)&gt;&gt;\

[[Adult Goods Store]]</tw-passagedata><tw-passagedata pid="188" name="A new day" tags="" position="975,2350" size="100,100">&lt;&lt;set $day to $day +1&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.morningUpdate()&gt;&gt;\
[[Your Bedroom]]</tw-passagedata><tw-passagedata pid="189" name="First time high heels" tags="" position="1100,2350" size="100,100">Now for the shoes. They came out to be quite a pretty penny - up to now, the most you had spent on shoes was $75 for a nice pair of runners. Unlike with those, you won&#39;t be wearing socks here.

The ventilation suddenly seems more fortunate, so your feet can breathe.
&lt;&lt;=SugarCube.getLib().Images.drawItem(&quot;first-heels-front.jpg&quot;);&gt;&gt;

You seat yourself on the bed, as you unzip them. This is happening - you slide your right foot in, and wiggle your toes inside - it&#39;s seated ok, so you zip it up. For all the horror stories, you are glad that your feet are held throughout the shoe, with no pressure points or excessive looseness. They fit surprisingly well.

The left foot goes similarly.

Now you start to try to stand and walk in your ensemble. You feel glad that this shoe kind of holds itself around your ankle, rather than seemingly at risk of falling off. You just need to deal with the extra 4 inches your heels now rise from the ground. You definitely feel wobbly.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;walk-heels.jpg&#39;);&gt;&gt;

&lt;&lt;=SugarCube.getLib().Skills.set(&quot;heels&quot;,1)&gt;&gt;

&lt;&lt;=SugarCube.getLib().MirrorUX.returntoMirror()&gt;&gt;</tw-passagedata><tw-passagedata pid="190" name="First time wig" tags="" position="1225,2350" size="100,100">The wig is a little more complicated to apply securely than you had first expected. Fortunately for you, there was a little document in the package explaining how to use some complimentary clips with the wig to secure it to your hair.

Since childhood, your hair has always been a somewhat boring mid length. You&#39;d never experienced hair of this length before. The bobs kind of shake with your head, like it&#39;s almost a living thing. 

&lt;&lt;=SugarCube.getLib().Images.drawItem(&#39;wig.webp&#39;);&gt;&gt;

&lt;&lt;=SugarCube.getLib().MirrorUX.returntoMirror()&gt;&gt;</tw-passagedata><tw-passagedata pid="191" name="First time bra" tags="" position="100,2475" size="100,100">You pull on her bra.
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;How the hell do you close this thing?!&quot;);&gt;&gt;

You think as you struggle to fasten the claspy bit. On the bright side, this is good practice for opening a bra when you find yourself having sex with a girl.

It looks funny on your flat chest, but if it helps convince the machine, it&#39;s worth it.
&lt;&lt;=SugarCube.getLib().Images.drawItem(&#39;stacy-bra.jpg&#39;);&gt;&gt;

&lt;&lt;=SugarCube.getLib().MirrorUX.returntoMirror()&gt;&gt;</tw-passagedata><tw-passagedata pid="192" name="First time thong" tags="" position="225,2475" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Wow, I never suspected that female underwear would feel so good on bare skin - so velvety soft...&quot;);&gt;&gt;
You think as you slide the thong up. Besides, your cock seems to be comfortable with the snug support.
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;This might be a little weird but, I really need to get this right if I&#39;m going to get that door open!&quot;);&gt;&gt;
You begin peeking out various colors and cuts from Stacy&#39;s wardrobe, holding back arousal as you carefully match them with the other parts of your &quot;costume&quot; and for a natural fit, but decide this sleek thong may be a good choice given it is going under yoga pants.
&lt;&lt;=SugarCube.getLib().Images.drawItem(&#39;black-thong.jpg&#39;);&gt;&gt;

&lt;&lt;=SugarCube.getLib().MirrorUX.returntoMirror()&gt;&gt;</tw-passagedata><tw-passagedata pid="193" name="First time gaff" tags="" position="350,2475" size="100,100">You &#39;hook&#39; up the gaff and slowly work your balls &#39;up&#39;. After a few minutes of manipulations, you have seated everything smoothed in the gaff tightly, creating a surprisingly womanly profile.

&lt;&lt;=SugarCube.getLib().MirrorUX.returntoMirror()&gt;&gt;</tw-passagedata><tw-passagedata pid="194" name="First time tank top" tags="" position="475,2475" size="100,100">You&#39;d never really given your shirts much thought, they were just clothes.

This top doesn&#39;t look much different from a man&#39;s top, it&#39;s a little snug on your torso. It&#39;s made from some kind of technical materials, very soft and gentle, compared to your ratty cotton shirts. The softness is good, as the shirt follows closely the contours of your now denuded chest, where your T-shirts usually hang loosely. For a moment you close your eyes, getting accustomed to the sense of the tight shirt gliding over your torso while you breathe.

Stacy wears this one a lot- it seems to be one of her favorites.  You wonder if she also got these sensations when going on those long jogs of hers. It still has the faintest little bit of her beautiful scent still on it, which kind of turns you on.
&lt;&lt;=SugarCube.getLib().Images.drawItem(&#39;tanktop.jpg&#39;);&gt;&gt;

&lt;&lt;=SugarCube.getLib().MirrorUX.returntoMirror()&gt;&gt;</tw-passagedata><tw-passagedata pid="195" name="First time yoga pants" tags="" position="600,2475" size="100,100">Yoga pants clearly run a good bit tighter than your usual jogging pants. The soft material feels like something else as you pull them over your smooth legs. There is a gentle pressure over every surface which is unlike your usual jeans or shorts.

Like with the top, the overall shape is not so different from a men&#39;s cut, just how it really seems to cling to every surface of you. With all the sensation, your mind starts to drift to Stacy&#39;s long legs and sex...

Back to the problem at hand. 
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;This is ridiculous, but if it gets me the prize behind that door, who cares!&quot;);&gt;&gt;
Then you get a look in the mirror.

&lt;&lt;=SugarCube.getLib().Images.drawItem(&#39;yoga-pants.webp&#39;);&gt;&gt;

You are momentarily surprised at how they shape your ass. If you saw a girl wearing ones fitting like the reflection, you would want to get busy with her. It&#39;s pretty crazy the effect some clothes can have on a person&#39;s appearance.

&lt;&lt;=SugarCube.getLib().MirrorUX.returntoMirror()&gt;&gt;</tw-passagedata><tw-passagedata pid="196" name="First Time Naked" tags="" position="725,2475" size="100,100">You remember to check that the curtains of Stacy&#39;s room are closed. Despite the fact that there aren&#39;t any direct neighbours who could see, you can&#39;t be too careful! 

First, you take off your clothes - they may be plain but the familiarity has always been reassuring.

&lt;&lt;=SugarCube.getLib().MirrorUX.returntoMirror()&gt;&gt;</tw-passagedata><tw-passagedata pid="197" name="First Babydoll" tags="" position="850,2475" size="100,100">The emergence of your tiny breasts and skin sensitivity has likely all just been a temporary reaction while you try to get past the door, but there&#39;s no harm in wearing something a little more comfortable at night right?
&lt;&lt;=SugarCube.getLib().Images.drawItem(&quot;wear-babydoll.jpg&quot;);&gt;&gt;

&lt;&lt;=SugarCube.getLib().MirrorUX.returntoMirror()&gt;&gt;</tw-passagedata><tw-passagedata pid="198" name="Second time high heels" tags="" position="975,2475" size="100,100">You pull the heels on - they seem to have started to break in. Walking in them is closer to natural, you feel less like a baby giraffe with them this time.
&lt;&lt;=SugarCube.getLib().Images.drawItem(&quot;first-heels-front.jpg&quot;);&gt;&gt;

&lt;&lt;=SugarCube.getLib().MirrorUX.returntoMirror()&gt;&gt;</tw-passagedata><tw-passagedata pid="199" name="Yoga Pants with Gaff" tags="" position="1100,2475" size="100,100">The yoga pants are looking good from behind, and that unbecoming bit of manhood is concealed.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;yoga-pants.webp&quot;);&gt;&gt;

&lt;&lt;=SugarCube.getLib().MirrorUX.wear(&quot;yoga-pants&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().MirrorUX.returntoMirror()&gt;&gt;</tw-passagedata><tw-passagedata pid="200" name="Running Shoes" tags="" position="1225,2475" size="100,100">Compared to your old sneaks, these new shoes make you feel like you are walking on a cloud.

&lt;&lt;=SugarCube.getLib().Images.drawItemById(SugarCube.getLib().Slot.get(&quot;feet&quot;))&gt;&gt;
&lt;&lt;=SugarCube.getLib().MirrorUX.returntoMirror()&gt;&gt;</tw-passagedata><tw-passagedata pid="201" name="First time motivator plug" tags="" position="100,2600" size="100,100">You apply some lube and reluctantly slide the plug in. You are surprised that your butt doesn&#39;t resist it more, and are slightly shocked, as the muscles of your ass start to pull the plug in, until it stops at the base.

You can vaguely feel it, but are relieved that it isn&#39;t an overwhelming sensation.

After a few second you see three pulses of light emanate from between your legs.
&lt;&lt;=SugarCube.getLib().Images.drawItemById(SugarCube.getLib().Slot.get(&quot;ass&quot;))&gt;&gt;

From your watch you hear a message from the computer:
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Motivator plug has been detected as successfully installed.&quot;)&gt;&gt; 

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;To enhance your prompt bodily development, please keep it installed for use during all exercises, and stay mindful of the sensations it produces.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;use-motivator-plug&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;continue-motivator-plug&quot;)&gt;&gt;\
You feel a sudden jolt of a slight bit of what might be a cool spray in your ass. It&#39;s a little weird and embarrassing, but people have done weirder things to get in shape, you suppose.  

A little later, you&#39;re not sure how it works, but it does seem to have some kind of effect. You feel like you have more energy than without it, and even feel an urge to exercise which is new for you. The thought of getting a to a super level of fitness is exciting. With the money from the inheritance, and a fit bod, you&#39;ll be able to attract any sexy gym bunny you want!
&lt;&lt;=SugarCube.getLib().Images.drawItem(&quot;super-fit.webp&quot;);&gt;&gt;
Just think of all the hot-times those Olympic athletes have in their villages. That could be you! No point in half measures here, right? If it works as promised, what&#39;s a little discomfort?
&lt;&lt;=SugarCube.getLib().Skills.add(&quot;hormones&quot;, 1);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.addExerciseStamina();&gt;&gt;
&lt;&lt;=SugarCube.getLib().MirrorUX.returntoMirror()&gt;&gt;</tw-passagedata><tw-passagedata pid="202" name="Swimsuit" tags="" position="225,2600" size="100,100">You don the swimsuit - you feel a little vulnerable with it showing so much skin.

You&#39;re also kind of surprised how cute you look in it.
&lt;&lt;=SugarCube.getLib().MirrorUX.returntoMirror()&gt;&gt;</tw-passagedata><tw-passagedata pid="203" name="Bikini" tags="" position="350,2600" size="100,100">You feel really vulnerable with wearing a bikini. The thought of going outside, practically naked has you feeling nervous. There&#39;s very little of your body left to the imagination.
&lt;&lt;=SugarCube.getLib().Images.drawItem(&quot;first-bikini.webp&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().MirrorUX.returntoMirror()&gt;&gt;</tw-passagedata><tw-passagedata pid="204" name="Wetsuit" tags="" position="475,2600" size="100,100">You could swear you got the measurements right, are wetsuits supposed to be this tight?!
&lt;&lt;=SugarCube.getLib().Images.drawItem(&quot;first-wetsuit.jpg&quot;);&gt;&gt;

It takes a little bit of shimmying around, struggling with the zipper and getting the right amount of slack everywhere, but once you are done - the thing is actually comfortable and fits you like a glove.

As you look down and in the mirror, you blush at the sight. The suit covers up your skin, but at the same time, the cut accentuates the hourglass curves of a womanly body.
&lt;&lt;=SugarCube.getLib().MirrorUX.returntoMirror()&gt;&gt;</tw-passagedata><tw-passagedata pid="205" name="First Thighhigh" tags="" position="600,2600" size="100,100">You pull on the thigh-high socks... They really accentuate your legs in a way which is kind of cute, and the sensation of the material isn&#39;t something you&#39;d complain about.
&lt;&lt;=SugarCube.getLib().Images.drawItem(&quot;first-thighhigh.webp&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().MirrorUX.returntoMirror()&gt;&gt;</tw-passagedata><tw-passagedata pid="206" name="Put on Undies After Shave" tags="" position="725,2600" size="100,100">On your shaved balls, the rough fabric of your old familiar briefs now seem to really chafe at you. You don&#39;t know how you never noticed it&#39;s just not comfortable. All your briefs seem to have that coarse texture which is suddenly unbearable. They are simply useless to wear in this condition. For now, you decide to raid Stacy&#39;s drawer for some basic panties with a soft texture.
&lt;&lt;=SugarCube.getLib().Images.drawItem(&#39;pink-panties.jpg&#39;);&gt;&gt;

It makes you a little anxious to be wearing panties with your normal clothes. Once you have claimed the prize, you can let the hair grow back and go back to regular underwear, but this is how it will have to be while your shaved skin is directly rubbing and so sensitive.

Fortunately, your T-shirts and jeans should cover them quite easily.

Note: You should update any saved wardrobes to account for this removed item of clothing.
[[continue|Mirror]]</tw-passagedata><tw-passagedata pid="207" name="stacy-email-0" tags="" position="850,2600" size="100,100">&lt;&lt;=SugarCube.getLib().Laptop.drawEmail()&gt;&gt;
&lt;&lt;=SugarCube.getLib().Laptop.returnToEmailsPage()&gt;&gt;</tw-passagedata><tw-passagedata pid="208" name="stacy-email-1" tags="" position="975,2600" size="100,100">&lt;&lt;=SugarCube.getLib().Laptop.drawEmail()&gt;&gt;
&lt;&lt;=SugarCube.getLib().Laptop.returnToEmailsPage()&gt;&gt;</tw-passagedata><tw-passagedata pid="209" name="stacy-email-2" tags="" position="1100,2600" size="100,100">&lt;&lt;=SugarCube.getLib().Laptop.drawEmail()&gt;&gt;
&lt;&lt;=SugarCube.getLib().Laptop.returnToEmailsPage()&gt;&gt;</tw-passagedata><tw-passagedata pid="210" name="stacy-email-3" tags="" position="1225,2600" size="100,100">&lt;&lt;=SugarCube.getLib().Laptop.drawEmail()&gt;&gt;
&lt;&lt;=SugarCube.getLib().Laptop.returnToEmailsPage()&gt;&gt;</tw-passagedata><tw-passagedata pid="211" name="stacy-email-4" tags="" position="100,2725" size="100,100">&lt;&lt;=SugarCube.getLib().Laptop.drawEmail()&gt;&gt;
&lt;&lt;=SugarCube.getLib().Laptop.returnToEmailsPage()&gt;&gt;</tw-passagedata><tw-passagedata pid="212" name="stacy-email-5" tags="" position="225,2725" size="100,100">&lt;&lt;=SugarCube.getLib().Laptop.drawEmail()&gt;&gt;
&lt;&lt;=SugarCube.getLib().Laptop.returnToEmailsPage()&gt;&gt;</tw-passagedata><tw-passagedata pid="213" name="stacy-email-6" tags="" position="350,2725" size="100,100">&lt;&lt;=SugarCube.getLib().Laptop.drawEmail()&gt;&gt;
&lt;&lt;=SugarCube.getLib().Laptop.returnToEmailsPage()&gt;&gt;</tw-passagedata><tw-passagedata pid="214" name="Fitness room" tags="" position="475,2725" size="100,100">&lt;&lt;if  SugarCube.getLib().Skills.get(&quot;cardio&quot;) &gt; 20 &amp;&amp; SugarCube.getLib().Tasks.hasTask(&quot;improve-conditioning&quot;) &gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;improve-conditioning&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;improve-flexibility&quot;)&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Congratulations on your early efforts at conditioning. Aspects of your inheritance work will require well developed flexibility. Please work on this, while continuing to develop your cardiovascular fitness.&quot;);&gt;&gt;
Your core is a little flabby, and you&#39;ve been getting kind of bored with just doing cardio.

You notice Stacy has a huge collection of videos teaching yoga. She talked a lot about how she found it was the best way to define her core and gain flexibility.
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Umm, I guess I&#39;ll try that.&quot;);&gt;&gt;

&lt;&lt;/if&gt;&gt;\
The fitness room has what looks to be an elaborate assortment of like-new professional gym-grade equipment.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;fitness-room.jpg&#39;);&gt;&gt;
&lt;&lt;if SugarCube.getLib().PlayerModel.canExercise()&gt;&gt;\  
Use [[Elliptical]] Machine
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;improve-flexibility&quot;) || hasVisited(&quot;Yoga&quot;)&gt;&gt;\
Do  [[Yoga]] Exercises
&lt;&lt;/if&gt;&gt;\  
  [[Mirror|Gym Changeroom]]
&lt;&lt;else&gt;&gt;\
You like the idea of getting in better shape, but getting started has always intimidated you.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if (SugarCube.getLib().Tasks.hasTask(&quot;need-to-clean-pool&quot;) || hasVisited(&quot;Swimming Pool&quot;))&gt;&gt;\
[[Swimming Pool]]
&lt;&lt;/if&gt;&gt;
&lt;&lt;if SugarCube.getLib().InventoryUX.hasItem(&quot;motivator-plug&quot;)&gt;&gt;
[[Plan Daily Exercises]] \
&lt;&lt;/if&gt;&gt;
&lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Fitness room&quot;,&quot;Do Daily Exercises&quot;);&gt;&gt; 


[[Grand Hallway]] &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Fitness room&quot;,&quot;Ballet Studio&quot;);&gt;&gt; &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Fitness room&quot;,&quot;Your Bedroom&quot;);&gt;&gt; &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Fitness room&quot;,&quot;Inner chamber&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Fitness room&quot;,&quot;Join for Triathlon Session&quot;);&gt;&gt;</tw-passagedata><tw-passagedata pid="215" name="Elliptical" tags="" position="600,2725" size="100,100">&lt;&lt;=SugarCube.getLib().Exercises.doElliptical()&gt;&gt;
[[Fitness room]]</tw-passagedata><tw-passagedata pid="216" name="Yoga" tags="" position="725,2725" size="100,100">&lt;&lt;=SugarCube.getLib().Exercises.doYoga()&gt;&gt;\
[[Fitness room]]</tw-passagedata><tw-passagedata pid="217" name="Gym Changeroom" tags="" position="850,2725" size="100,100">Back to [[Fitness room]]

It always feels great to look your best when you are at the gym, and to freshen yourself up with a shower after a grueling workout.

&lt;&lt;=SugarCube.getLib().MirrorUX.drawMirrorView();&gt;&gt;
Back to [[Fitness room]]</tw-passagedata><tw-passagedata pid="218" name="Do Daily Exercises" tags="" position="975,2725" size="100,100">&lt;&lt;=SugarCube.getLib().Exercises.montage()&gt;&gt;
Back to [[Fitness room]]</tw-passagedata><tw-passagedata pid="219" name="Plan Daily Exercises" tags="" position="1100,2725" size="100,100">&lt;&lt;=SugarCube.getLib().ExercisePlanner.plan()&gt;&gt;
[[Do Daily Exercises]] - This will cycle through your plan until all stamina is used up.
Back to [[Fitness room]]</tw-passagedata><tw-passagedata pid="220" name="Use Your laptop" tags="" position="1225,2725" size="100,100">[[Check Email|Billy Personal Email]]
[[Search for Porn]]
[[Browse Reddit|http://www.reddit.com]]
&lt;&lt;if hasVisited(&quot;Read Note to Jenny&quot;)&gt;&gt;\
[[Read up about Maristech Corp]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().InventoryUX.hasItem(&quot;makeup&quot;) &amp;&amp; !hasVisited(&quot;Learn how to apply makeup&quot;)&gt;&gt;\
[[Learn how to apply makeup]]
&lt;&lt;/if&gt;&gt;\
[[Your Bedroom]]</tw-passagedata><tw-passagedata pid="221" name="Billy Personal Email" tags="" position="100,2850" size="100,100">&lt;&lt;=SugarCube.getLib().Laptop.showEmails()&gt;&gt;
[[Use Your laptop]] &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Billy Personal Email&quot;,&quot;Your Bedroom&quot;);&gt;&gt;</tw-passagedata><tw-passagedata pid="222" name="Read up about Maristech Corp" tags="" position="225,2850" size="100,100">You find a page of corporate propaganda talking about what Maristech Corp makes:
From humble beginnings...

...Maristech Corp has been on the forefront of AI and healthcare nanorobotics applications. Be it the brave soldiers on the field of Afghanistan applying Maristech Corp smart cauterizers, or the warehouse foreman who needs a cohort of flex bots to move product quickly and safely, Maristech Corp provides effective solutions...


...Maristech Corp began in 1997 from humble beginnings in Marissa Masterson and Curtis Glerson&#39;s early prototypes in Marissa&#39;s garage. Maristech Corp has been on the forefront of AI and healthcare nanorobotics applications...

In another article you see &quot;Supreme Court Determination of control of Maristech Corp Estate&quot;:
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;supcourt.jpg&#39;);&gt;&gt;
In a stunning 5-4 majority decision today, the US Supreme Court upheld Marissa Masterson&#39;s estate structure in Darmody v Masterson. The determination by the court to treat a computer system (MasterComp) as competent for determination of beneficiaries of the complex estate was established a shocking precedent. The dissenting justices noted that this case opens the door for inscrutable &quot;denial of service&quot; attacks in the justice system, and described this as a move by &quot;activist judges&quot; legislating from the bench. The decision was unpopular with technology insiders including Clayton Darmody and the other members of the Maristech Board. Years of advanced research was spun off and shuttered due to Masterson&#39;s restrictive clauses for control of the RADNAME (Research and Development - New Applications and Market Expansion) division of Maristech Corp under the direction of MasterComp... 

...Existing production and operations divisions continue under the oversight of the MMaristech Corp board....
[[Use Your laptop]]</tw-passagedata><tw-passagedata pid="223" name="Search for Porn" tags="" position="350,2850" size="100,100">As you type in your first query, you don&#39;t get the results you were hoping for.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;firewall.png&#39;);&gt;&gt;

You make a few more tries, but this firewall seems to block results for anything remotely related to porn.
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;You have got to be kidding me!&quot;);&gt;&gt;
[[Use Your laptop]]</tw-passagedata><tw-passagedata pid="224" name="Learn how to apply makeup" tags="" position="2871,1943" size="100,100">If the door is going to require makeup, this is the only way forward.

You start searching for videos on applying makeup.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;makeup-tutorial.webp&#39;);&gt;&gt;

You find some beginner tutorials to learn the essentials of [[Applying Makeup|https://www.makeup.com/makeup-tutorials/expert-tips/the-ultimate-makeup-tutorial]]. 

The essentials get down to:
&lt;ol&gt;
&lt;li&gt;After cleansing and moisturizing, applying primer for your skin to help improve the longevity of the application. &lt;/li&gt;
&lt;li&gt;For consistent flesh color, apply foundation all over and blend down your neck.&lt;/li&gt;
&lt;li&gt;Brighten up  under your eyes with concealer for the dark circles.  &lt;/li&gt;
&lt;li&gt;Accent your cheeks with blush.&lt;/li&gt;
&lt;li&gt;Add definition on your cheekbones with highlighter.&lt;/li&gt;
&lt;li&gt;Use eyeshadow to provide some pop to your eyelids.&lt;/li&gt;
&lt;li&gt;Detail your eyebrows with an eyebrow pencil and Mascara.&lt;/li&gt;
&lt;li&gt;Finish up with lipstick.&lt;/li&gt;
&lt;/ol&gt;

From there, you start watching video after video of girls transforming from ordinary to exotic. 
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;makeup-tutorial2.webp&#39;);&gt;&gt;

Hours later, you realize you&#39;ve gone deep down the rabbit hole. Very deep.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;makeup-tutorial3.webp&#39;);&gt;&gt;

You are willing to try apply makeup, to try get that door open, but are feeling really tired right now. You can take another crack at it tomorrow.
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;learn-makeup&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.setReadyForSleep()&gt;&gt;\
[[Use Your laptop]]</tw-passagedata><tw-passagedata pid="225" name="Dust Library" tags="" position="88,1884" size="100,100">Time to put in some elbow grease and clean this place up.
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;dust-library&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;dusting-library.jpg&#39;);&gt;&gt;

You see a really impressive antique globe. It looks really old school, possibly one of those ones that flips open with a liquor cabinet inside.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;globe.jpg&#39;);&gt;&gt;
After a bit of spinning and exploring, you notice what seems to be damage with a round pencil sized gouge near Greece, where you&#39;d find the Aegean sea. That&#39;s too bad. 

[[done|Library]]</tw-passagedata><tw-passagedata pid="226" name="Read Newspaper Clippings" tags="" position="83,1746" size="100,100">You see a number of newspaper clippings and a couple magazines on a table which provide some history about this house. 

The faded newspaper article mentions the mansion  was built by a railroad magnate in 1882, as part of a massive estate which included the parcel of land that is now known as commemoration park. 

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;read-newspaper.webp&#39;);&gt;&gt;

Another clipping has a society page story dating back to 1928 describes the world of glamor, lavish rituals and etiquette one might expect, if you were lucky enough to attend the exclusive parties of it&#39;s flamboyant owner, a successful local commodities trader. 

Next in the pile was a flashy modern architecture magazine in the late nineties, which had this house as the cover story. 
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;home-magazine.jpg&#39;);&gt;&gt;
Apparently, Marissa Masterson, the obscenely wealthy tech mogul bought up the place just as the dot-com boom was peaking. It had a pretty dramatic series of before-after pictures of the house from a point where it was badly neglected, and seemed to be on the verge of collapse.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;derelict-house.jpg&#39;);&gt;&gt;
It also had some interviews of the divorcee&#39;s struggles balancing the demands of motherhood while being a Fortune 500 CEO. Another part of it had a chat where the architect and Ms. Marissa smugly talked about all the little details and materials they got from suppliers all over the world. A bit too wordy with so much &#39;filigree&#39; and &#39;sconces&#39;, so you put that magazine down at this point.

The last article was a short article from the local paper, with a close up shot of the Ridge family in front of the house. They moved in some time after Masterson, her daughter and all hands aboard died in a tragically shocking accident of her private jet. Really sad story - that was all over the news for a couple weeks. Apparently the Ridge family had made a sizable donation to the Commemoration Park Improvements Association, as part of the agreement when they bought the house. 
[[done|Library]]</tw-passagedata><tw-passagedata pid="227" name="Look for Interesting Book" tags="" position="108,1990" size="100,100">&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;browse-books.webp&#39;);&gt;&gt;

After clearing the dust from the old library, you decide to get a closer look at the books. None of the Ridge family members had much time for reading, so the library was a bit of a neglected space in the house with books from the prior owners. A lot of old stuffy classics, but also some curious choices. In one closed up cabinet, you find some literature which is a little surprising. 

On closer inspection, you see a book with the silhouette of the woman in place of a title on the spine it&#39;s an anthology of short stories about exceptional women. On flipping through you see a card stapled to a pawn ticket fall out to the floor. At the page is the beginning of a worn short story about a complex relationship between a mother and her daughter, from teen age growing to be an adult. 

&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;That&#39;s a bit odd of a page marker. I wonder what the pawned item was?&quot;);&gt;&gt;
It looks like that&#39;s for a pawn shop in the neighborhood. It says &#39;That which is yours&#39; and has a $50 redemption fee. 

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;pawn-card.jpg&#39;);&gt;&gt;
This is intriguing. Maybe worth a walk to find that store?
&lt;&lt;= SugarCube.getLib().InventoryUX.add(&quot;pawn-ticket&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;explore&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;check-pawn-ticket&quot;);&gt;&gt;\
[[done|Library]]</tw-passagedata><tw-passagedata pid="228" name="Insert Key" tags="" position="179,2589" size="100,100">Looking more closely at the globe, the key fob seems to be a perfect fit for the hole you saw earlier in the middle of the Aegean Sea. 
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;globe.jpg&#39;);&gt;&gt;

Turning it, and you start to hear a bookshelf slide open, revealing a doorway leading to a lower section.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;secret-door.jpg&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.player(&quot;WOAH, too cool!&quot;);&gt;&gt;

 It seems this goes down to something of a private study. As you enter, you notice there is another knob to close the entry again. The air was a bit stale, but it has surprisingly pleasant accents of flower and vanilla which smell really nice.
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;can-the-key-be-used&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;check-secret-room&quot;);&gt;&gt;\

Enter the [[Secret Room]]</tw-passagedata><tw-passagedata pid="229" name="Snippets" tags="" position="1021,397" size="100,100">This file is just a drop spot for housing repeatedly used snippets:

&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;living-room.jpg&#39;);&gt;&gt;

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;drink-coffee.webp&#39;);&gt;&gt;

https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyinit</tw-passagedata><tw-passagedata pid="230" name="Swimming Pool" tags="" position="1225,2850" size="100,100">This is a pretty nice swimming pool here.

&lt;&lt;if !visited(&quot;Lady Fit-Sport&quot;)&gt;&gt;\
Swimming might be a nice change of pace. Too bad you didn&#39;t bring any swim trunks. 😢
&lt;&lt;/if&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&quot;swimming-pool.jpg&quot;);&gt;&gt;
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;need-to-clean-pool&quot;) &gt;&gt;\
[[Clean Pool]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().PlayerModel.canExercise() &amp;&amp; !SugarCube.getLib().Tasks.hasTask(&quot;need-to-clean-pool&quot;)&gt;&gt;\  
[[Go Swimming]]
&lt;&lt;/if&gt;&gt;\
[[Fitness room]] &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Swimming Pool&quot;,&quot;Grand Hallway&quot;);&gt;&gt;</tw-passagedata><tw-passagedata pid="231" name="Go Swimming" tags="" position="100,2975" size="100,100">&lt;&lt;=SugarCube.getLib().Exercises.doSwim()&gt;&gt;

[[Swimming Pool]]</tw-passagedata><tw-passagedata pid="232" name="Clean Pool" tags="" position="225,2975" size="100,100">You proceed to clean the pool of debris.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;pool-cleaning.jpg&quot;);&gt;&gt;
From there, you test for the chemical levels and add some chlorine, following some detailed step by step maintenance instructions by the pool supplies.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;pool-chlorination.jpg&quot;);&gt;&gt;
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;need-to-clean-pool&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;need-to-clean-pool&quot;)&gt;&gt;
&lt;&lt;/if&gt;&gt;
[[Swimming Pool]]</tw-passagedata><tw-passagedata pid="233" name="Upstairs Hallway" tags="" position="350,2975" size="100,100">The upstairs area serves the living quarters of the home.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;upstairs-hallway.jpg&#39;);&gt;&gt;

Go to:
[[Master Bedroom]]
[[Stacy&#39;s Bedroom]]
[[Hallway Bathroom]]
[[Your Bedroom]] &lt;&lt;if !hasVisited(&quot;Your Bedroom&quot;)&gt;&gt; - You are staying here&lt;&lt;/if&gt;&gt;

[[Grand Hallway]]</tw-passagedata><tw-passagedata pid="234" name="Master Bedroom" tags="" position="2307,2091" size="100,100">Mr. and Ms. Ridge&#39;s Bedroom. This is a lot fancier than you&#39;ve ever seen before. All the same, it is ultimately still a bedroom.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;master-bedroom.jpg&#39;);&gt;&gt;

You can see:
A large Wardrobe
[[Cosmopolitan magazine]]


Go to:
[[Master Bathroom]]
[[Upstairs Hallway]]</tw-passagedata><tw-passagedata pid="235" name="Stacy&#39;s Bedroom" tags="" position="1736,2461" size="100,100">You&#39;ve been here often enough, doing homework together with Stacy, and commiserating over the latest goings on in her life. It&#39;s a typical teenage girl&#39;s room.

&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;daughter-bedroom.jpg&#39;);&gt;&gt;

You can see:
[[Stacy&#39;s Wardrobe]]
Stacy&#39;s PC

Go to:
[[Upstairs Hallway]]</tw-passagedata><tw-passagedata pid="236" name="Hallway Bathroom" tags="" position="725,2975" size="100,100">The upstairs bathroom is pretty nice.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;guest-bathroom.jpg&#39;);&gt;&gt;
&lt;&lt;if $thongIsDirty is true &gt;&gt; \
[[Wash Thong]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $clothesAreDirty is true &gt;&gt; \
[[Wash Clothes]]
&lt;&lt;/if&gt;&gt;\
  [[Shower]]
&lt;&lt;if SugarCube.getLib().InventoryUX.hasItem(&quot;black-thong&quot;) &gt;&gt;\
  	[[Use Shaving accessories]] 
&lt;&lt;else&gt;&gt;\
  Shaving Accessories
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().InventoryUX.hasItem(&quot;makeup&quot;) &gt;&gt;\
  &lt;&lt;if hasVisited(&quot;Learn how to apply makeup&quot;)&gt;&gt;\
	  &lt;&lt;if SugarCube.getLib().PlayerModel.isWearingMakeup() == true&gt;&gt;\
		[[Remove Makeup]]
      &lt;&lt;else&gt;&gt;\      
	  	&lt;&lt;if SugarCube.getLib().PlayerModel.isReadyForSleep() &amp;&amp; !hasVisited(&quot;Apply Makeup&quot;)&gt;&gt;\
		You are too tired to do makeup right now.
	    &lt;&lt;else&gt;&gt;\
		[[Apply Makeup]]
	    &lt;&lt;/if&gt;&gt;\
	  &lt;&lt;/if&gt;&gt;\
  &lt;&lt;else&gt;&gt;\
  You have makeup, but you don&#39;t know how to apply it. Maybe you can find some tutorials online?
  &lt;&lt;=SugarCube.getLib().Tasks.ensureTask(&quot;learn-makeup&quot;)&gt;&gt;\
  &lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
Return to:
[[Upstairs Hallway]] &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Hallway Bathroom&quot;,&quot;Grand Hallway&quot;);&gt;&gt;</tw-passagedata><tw-passagedata pid="237" name="Your Bedroom" tags="" position="2366,1541" size="100,100">You have a nice, spacious neutral looking room.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;guest-bedroom.jpg&#39;);&gt;&gt;
&lt;!-- https://strugglingwithtwine.blogspot.com/2014/03/the-click-macro-sugarcube-only.html --&gt;
&lt;&lt;if SugarCube.getLib().InventoryUX.hasItem(&quot;luggage&quot;)&gt;&gt;\
[[Drop Luggage]]
&lt;&lt;else&gt;&gt;\
[[Use Your laptop]] &lt;&lt;=SugarCube.getLib().Laptop.getEmailShortcutLink();&gt;&gt;
&lt;&lt;/if&gt;&gt;\
[[Go to Bed]]
&lt;&lt;if  SugarCube.getLib().InventoryUX.hasItem(&quot;first-dildo&quot;);&gt;&gt;\
[[Masturbate]]
&lt;&lt;/if&gt;&gt;
[[Mirror]]

Return to:
[[Upstairs Hallway]] &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Your Bedroom&quot;,&quot;Grand Hallway&quot;);&gt;&gt; &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Your Bedroom&quot;,&quot;Fitness room&quot;);&gt;&gt; &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Your Bedroom&quot;,&quot;Inner chamber&quot;);&gt;&gt;</tw-passagedata><tw-passagedata pid="238" name="Drop Luggage" tags="" position="975,2975" size="100,100">&lt;&lt;set SugarCube.getLib().InventoryUX.remove(&quot;luggage&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;drop-luggage&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;explore&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;dust-library&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;clean-cinema&quot;);&gt;&gt;\
With your luggage dropped off, maybe it&#39;s time to get some work done and start exploring! 
&lt;&lt;=SugarCube.getLib().Images.drawItemById(&quot;luggage&quot;);&gt;&gt;\

Now then... The Ridges asked you to do some cleaning today. What did they want you to do, again? Maybe your &quot;TASKS&quot; agenda can help jog your memory.

HINT: This game has buttons on the left side panel for &quot;TASKS&quot;, &quot;INVENTORY&quot; and &quot;STATUS&quot;. Get acquainted with them!</tw-passagedata><tw-passagedata pid="239" name="Masturbate" tags="" position="1100,2975" size="100,100">From the privacy of your room, you take hold of the dildo Sue gave you. &lt;&lt;= SugarCube.getLib().Sex.dildoSelf()&gt;&gt;
[[Your Bedroom]]</tw-passagedata><tw-passagedata pid="240" name="Stacy&#39;s Wardrobe" tags="" position="1745,2571" size="100,100">&lt;&lt;if SugarCube.getLib().InventoryUX.hasItem(&quot;black-thong&quot;)&gt;&gt;\
&lt;&lt;if !SugarCube.getLib().InventoryUX.hasItem(&quot;yoga-pants&quot;) &gt;&gt;\
Stacy has some items which might do the trick at the door:
&lt;&lt;=SugarCube.getLib().Images.drawItem(&#39;tanktop.jpg&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawItem(&#39;black-yoga-pants.jpg&#39;);&gt;&gt;
[[Take Stacy&#39;s Tank top and Yoga Pants]]
&lt;&lt;else&gt;&gt;\
You don&#39;t need to borrow any more of Stacy&#39;s clothes, at the moment.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
Ughh, stacy just spends so much time on her clothes. You have no interest in this.
&lt;&lt;/if&gt;&gt;\
[[Stacy&#39;s Bedroom]]</tw-passagedata><tw-passagedata pid="241" name="Mirror" tags="" position="100,3100" size="100,100">&lt;&lt;if SugarCube.getLib().PlayerModel.checkClothingTolerance() &lt; 1 &gt;&gt;\
&lt;&lt;if !hasVisited(&quot;Take black thong&quot;)&gt;&gt;\
	Obviously, it&#39;s just the same old you. You reflect - were you expecting to see something else?
&lt;&lt;else&gt;&gt;\
Per Marissa&#39;s letter, you should shave yourself before putting on Stacy&#39;s clothes.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
  &lt;&lt;if $clothesAreDirty &amp;&amp; !hasVisited(&quot;Inner chamber&quot;)&gt;&gt;\
  You should clean up the clothes in [[Hallway Bathroom]] first.
  &lt;&lt;else&gt;&gt;\
  &lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;player-needs-shower&quot;) &amp;&amp; !hasVisited(&quot;Inner chamber&quot;)&gt;&gt;\
  You need to get cleaned up before getting dressed.
  &lt;&lt;else&gt;&gt;\
  &lt;&lt;if !SugarCube.getLib().InventoryUX.hasItem(&quot;stacy-bra&quot;)&gt;&gt;\
  All you can think about is the possibility of getting that treasure. Would it be possible to pass looking like Marissa? You&#39;ll need some clothes for this.
  &lt;&lt;else&gt;&gt;\  
  Back to [[Your Bedroom]]
  
&lt;&lt;=SugarCube.getLib().MirrorUX.drawMirrorView();&gt;&gt;
  &lt;&lt;/if&gt;&gt;\
  &lt;&lt;/if&gt;&gt;\
  &lt;&lt;/if&gt;&gt;\  
&lt;&lt;/if&gt;&gt;\

[[Your Bedroom]]</tw-passagedata><tw-passagedata pid="242" name="Wash Thong" tags="" position="225,3100" size="100,100">You have carefully restored the thong to a wearable state. The treasure calls out to you...
&lt;&lt;=SugarCube.getLib().Images.drawItem(&#39;black-thong.jpg&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;clothing-needs-cleaning&quot;);&gt;&gt;\
&lt;&lt;set $thongIsDirty = false&gt;&gt;

[[Hallway Bathroom]]</tw-passagedata><tw-passagedata pid="243" name="Wash Clothes" tags="" position="350,3100" size="100,100">Wow, this &quot;auto-cleaner&quot; mini-laundry system here is pretty quick.
&lt;&lt;set $thongIsDirty = false&gt;&gt;\
&lt;&lt;set $clothesAreDirty = false&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;laundry.webp&#39;);&gt;&gt;
[[Hallway Bathroom]]</tw-passagedata><tw-passagedata pid="244" name="Shower" tags="" position="2171,1143" size="100,100">You run a quick shower.
&lt;&lt;if hasVisited(&quot;Wash Clothes&quot;) &amp;&amp; $clothesAreDirty &gt;&gt;\
The &quot;auto-cleaner&quot; is so fast, you decide to run your clothes in it, while you take your shower.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;player-needs-shower&quot;)&gt;&gt;\
 You are now feeling cleansed.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;player-needs-shower&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.toggleMakeup(false);&gt;&gt;\
\
&lt;&lt;if SugarCube.getLib().CoreUtils.getVariables().day &lt;10&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;shower-early.webp&#39;);&gt;&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;shower-mid.webp&#39;);&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;set $clothesAreDirty = false&gt;&gt;\
\
[[Hallway Bathroom]]</tw-passagedata><tw-passagedata pid="245" name="Cosmopolitan magazine" tags="" position="2427,2046" size="100,100">&lt;&lt;if SugarCube.getLib().PlayerModel.canShave()&gt;&gt;\
There is nothing more you can learn from this.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;cosmo-magazine.jpg&#39;);&gt;&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;if SugarCube.getLib().PlayerModel.needsShave() &amp;&amp; SugarCube.getLib().Tasks.hasTask(&quot;first-shave&quot;);&gt;&gt;\
Score! You have cracked the code!
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;cosmo-magazine.jpg&#39;);&gt;&gt;

This cosmo issue has [[7 ways to fix the most common shaving mistakes|https://www.cosmopolitan.com/style-beauty/beauty/a9572229/common-shaving-mistakes/]].
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;shave-tutorial.jpg&#39;);&gt;&gt;
With this knowledge, you feel absolute confidence to use a razor in places other than your face.
&lt;&lt;=SugarCube.getLib().PlayerModel.enableShave()&gt;&gt;
&lt;&lt;else&gt;&gt;\
A magazine with articles on women&#39;s topics. Like how to have great legs and turn your man on. ooh, Great.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;cosmo-magazine.jpg&#39;);&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

[[Master Bedroom]]</tw-passagedata><tw-passagedata pid="246" name="Use Shaving accessories" tags="" position="725,3100" size="100,100">&lt;&lt;if SugarCube.getLib().PlayerModel.canShave()&gt;&gt;\
&lt;&lt;if SugarCube.getLib().PlayerModel.hasEverShaved()&gt;&gt;\
You tidy things up. This is just about being prepared.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;reshave.webp&#39;);&gt;&gt;

You shower up and moisturize.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;moisturize.webp&#39;);&gt;&gt;
&lt;&lt;else&gt;&gt;\
Here goes nothing! It&#39;s not so weird, you recall members of the swim team at your school would do this sort of thing to be competitive.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;first-body-shave.webp&#39;);&gt;&gt;
You have shaved all your body hair and shower off. 

For good measure, you apply some skin cream.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;moisturize.webp&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().PlayerModel.raiseClothingTolerance(1);&gt;&gt;
Now, maybe Stacy&#39;s clothes can help you trick the scans?
&lt;&lt;/if&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.shave()&gt;&gt;\
&lt;&lt;else&gt;&gt;\
You don&#39;t really know how to shave down... below. Those sharp blades scare you. Is there nothing that will teach you this stuff?
&lt;&lt;/if&gt;&gt;\
[[Hallway Bathroom]]</tw-passagedata><tw-passagedata pid="247" name="Take Stacy&#39;s Tank top and Yoga Pants" tags="" position="1642,2801" size="100,100">&lt;&lt;=SugarCube.getLib().InventoryUX.add(&quot;yoga-pants&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().InventoryUX.add(&quot;tank-top&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().InventoryUX.add(&quot;stacy-bra&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;house-has-clothes&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;wear-stacy-clothes&quot;)&gt;&gt;\
\
These look like the clothes which Marissa was wearing in the pictures. Oh, and a bra as well would help.

Maybe it&#39;s time to try change into this outfit using the [[Mirror]] in your room.
[[Stacy&#39;s Wardrobe]]</tw-passagedata><tw-passagedata pid="248" name="Outfit" tags="" position="186,599" size="100,100">For now, this is just a closer view of the items.
&lt;&lt;=SugarCube.getLib().MirrorUX.render()&gt;&gt;

&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="249" name="Go to Bed" tags="" position="1100,3100" size="100,100">&lt;&lt;if !SugarCube.getLib().PlayerModel.isReadyForSleep()&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.explainNoSleep();&gt;&gt; 
[[Your Bedroom]]
&lt;&lt;else&gt;&gt;\
\
\
&lt;&lt;if $day == 2 &gt;&gt;\
It has been an interesting couple of days, but Rome wasn&#39;t built in a day. Some rest will do the trick. 
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;sleep-sheep.webp&#39;);&gt;&gt;
[[Day 3 - Early Morning]]
&lt;&lt;/if&gt;&gt;\
\
&lt;&lt;if $day == 3 &gt;&gt;\
It has been an interesting couple of days, with great progress towards your prize, but Rome wasn&#39;t built in a day. Some rest will do the trick. 

You quickly fall asleep after your head hits the pillow. You find yourself thinking again about the amazing panty-dropper sports car you will buy with the wealth.

Your car seems the same as the previous dream but, something about it feels different, as you go to inspect the engine.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;lambo-dream-prelude.jpg&#39;);&gt;&gt;
[[Lambo Dream]]
&lt;&lt;/if&gt;&gt;\
\
&lt;&lt;if $day == 4 &gt;&gt;\
You feel like you have made some good progress on clearing the door and feel excited for tomorrow.
&lt;&lt;if SugarCube.getLib().PlayerModel.isWearingMakeup()&gt;&gt;\
You realize you still had makeup on. You suddenly realize this is probably not a good idea, and wash it off this time.
&lt;&lt;=SugarCube.getLib().PlayerModel.toggleMakeup(false)&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;sleep-sheep.webp&#39;);&gt;&gt;
[[Day 5 - Early Morning]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $day &gt;= 7 &gt;&gt;\
You get ready for bed.
&lt;&lt;=SugarCube.getLib().PlayerModel.fallAsleep()&gt;&gt;\
[[A new day]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="250" name="Day 3 - Early Morning" tags="" position="2820,1366" size="100,100">While it may be a guest room, this bed is actually good bit comfier than yours. Not having to be careful about shifting your weight and causing some noisy springs to poke at you is a nice change of pace.  You slept quite soundly on and feel glad that you didn&#39;t pass out again.

Maybe you can try some places at that strip mall, to see if you can find a wig or something to make progress with the door.
&lt;&lt;set $day to 3&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.morningUpdate()&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;check-adult-store&quot;);&gt;&gt;

[[Your Bedroom]]</tw-passagedata><tw-passagedata pid="251" name="Commemoration Park" tags="" position="2713,655" size="100,100">It&#39;s nice to have a park so close to the house for the summer.
It would be good to get some exercise and fresh air, at some point.


&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;park-walkway.jpg&#39;);&gt;&gt;

Go to:
[[Baldric House]] 
[[Retail Strip]]</tw-passagedata><tw-passagedata pid="252" name="You present the Tablet to Sue" tags="" position="225,3225" size="100,100">Sue seems to skim over the document for about twenty seconds. Looks in your eyes. 
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Hmm, so your dom sent you here to get this?&quot;);&gt;&gt;
You wince at the notion of a &quot;dom&quot; controlling your life.
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;I wouldn&#39;t describe it exactly like that, but...&quot;);&gt;&gt;
She seems a bit curious about the circumstance.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;But, you are consenting to having me custom fit you with a chastity cage, for which they will have the key, and you will not? I don&#39;t want to be caught in the middle of a lover&#39;s quarrel if you change your mind. I do not keep spare keys if you find yourself wanting a way out. I&#39;ll only do this if you confirm that you want this chastity cage installed out of your own free will and are giving me your full consent to do so.&quot;)&gt;&gt;
Ha! If only she knew there was no lover, it&#39;s just a crazy supercomputer in the basement of a mansion.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;I&#39;ve seen some of these relationships can get intense.&quot;);&gt;&gt;
She&#39;s looking at you with serious eyes:
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;If you aren&#39;t 100% committed to where this might go right now, this may be your last chance to get out of a sticky situation. Say &#39;I want to lock away my penis away in chastity indefinitely&#39;. Otherwise, tell me no - If you are in some kind of non-consensual situation, I know a number of social workers and shelters who help folks get out of just these kinds of situations.&quot;);&gt;&gt;

&lt;&lt;=SugarCube.getLib().Mood.compliantLink(&quot;I want to lock away my penis away in chastity indefinitely&quot;)&gt;&gt;
[[I can&#39;t do this]]</tw-passagedata><tw-passagedata pid="253" name="I can&#39;t do this" tags="" position="350,3225" size="100,100">Sue has a point. You really don&#39;t know where things go from here. It&#39;s not worth the risks.

You go to the house to close up the secret room and go back to your ordinary summer job. You remove the key from the globe, smash the watch.

You broke your word, and hope that the computer will leave you out of its plans from here.
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.go(-1);&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;RESTART GAME&quot;&gt;&gt;&lt;&lt;run Engine.restart()&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="254" name="I want to lock away my penis away in chastity indefinitely" tags="" position="475,3225" size="100,100">&lt;&lt;=SugarCube.getLib().Mood.addCompliance(&quot;You don&#39;t need to do this... You feel a thrill of excitement at what you are doing.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Wow, that&#39;s bold - I love it when people know what they want. I&#39;m excited for you. Chastity opens guys up to amazing new sexual experiences, and makes them better lovers.&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Ok, now that we have that out of the way, let me get a closer look here...&quot;);&gt;&gt;

After a couple minutes she puts on some large framed librarian glasses she had hidden in a drawer, and seems to be making detailed shorthand notes, and doing some stuff on her computer. The document seems to be rather long. After standing for a few minutes, you settle into a seat, while you idly look around at her extensive wares. She seems really interested in what you thought was a mundane order form. You notice she&#39;s biting her lip, and breathing fast at whatever that document is talking about. After a while she seems to collect herself, and get back to you.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Ok, consider yourself privileged. Your dom did their homework, the chasti-flex exo-shell came on the market a couple of years ago, and has emerged as top of the line in the &#39;professional grade&#39; market for ultra long term uses. &quot;);&gt;&gt;
Ugh, again with the &quot;dom&quot;. You&#39;re not sure you&#39;d agree about lucky, but continuing on...

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;These custom kits are made in very limited runs, but sell for the price of a luxurious vacation. They are not something I would bother trying to sell or explain to my casual walk-in customers. The only reason I have such a device in stock is that they keep one in stock here with me, as I&#39;m their local distributor for our metropolitan area.&quot;);&gt;&gt;
You are wondering to yourself, how expensive is this thing?

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;As the name suggests, its carbon nanotube skeleton takes on the fixed length and girth of the wearer&#39;s penis while completely flaccid, while accommodating an exceptional degree of flexibility with a soft, durable silicone outer covering. Compared to traditional alternatives, this solution has been found most effective in supporting term wear and ease of cleaning. Most impressive is that the wearer can orient the device while dressing to achieve their desired look, and then use a switch to lock your penis into place as you currently might with a gaff.&quot;);&gt;&gt;

[[Act impressed]]</tw-passagedata><tw-passagedata pid="255" name="Act impressed" tags="" position="600,3225" size="100,100">She refers back to the document, seemingly carefully re-reading some instructions. She glances down at your pants, which seem to be bulging in her presence or perhaps, at the thought of this twisted device.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Obviously we can&#39;t put this on you right now... in this state. Your dom gave that plenty of thought too, but left the details of getting you ready for this &#39;installation&#39; to my discretion. That&#39;s not something I see too often.&quot;);&gt;&gt;
You don&#39;t like how she keeps using that term &quot;dom&quot;. There has to be a less insulting way to describe your circumstance but, such a word eludes you. In any case, you are intrigued at what she&#39;s getting at.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Getting a chastity cage is a big milestone. It&#39;s nice to kick it off with a special experience. Have you ever participated in a threesome? Would you like to have some fun, with me... And another girl?&quot;);&gt;&gt;
Given you&#39;ve never really had sex, let alone a threesome, maybe there&#39;s a silver lining here.

&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;T... That... That sounds awesome&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Perfect. Let&#39;s continue this at my place.&quot;);&gt;&gt;
 She puts her glasses away again, and gets a card to put her address on the back. Her place is in walking distance.
 
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;I was going to be closing up in a few minutes anyway. While I do that, why don&#39;t you get in touch with your friend, the one you&#39;ve been helping with all that acting.  I know how to get girls interested - theater girls especially love to try new things. We can all have some fun, and then we can get you fitted up.&quot;);&gt;&gt;
Oh no. That won&#39;t work. But maybe you can salvage this by getting your moves on with her, and just say your friend wasn&#39;t feeling well and had to cancel. It&#39;s not like some random stranger can just be expected to show up for sex, right?

&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Ok, so I&#39;ll take a walk and then meet you there in 15 minutes or so?&quot;);&gt;&gt;
[[Take scenic route to Sue&#39;s place]]</tw-passagedata><tw-passagedata pid="256" name="Take scenic route to Sue&#39;s place" tags="" position="725,3225" size="100,100">Sue lives in walking distance of the store.

You walk by Sue&#39;s place, which seems to be an old Victorian house. You aren&#39;t quite sure what you were expecting, but something else, maybe?
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&quot;sue-house.jpg&quot;);&gt;&gt;
You&#39;re 10 minutes early, so you walk around the neighborhood a bit. The area has some quirky charm, but a lot of the places are kind of outdated - it had a reputation for being a bit of an artists&#39; quarter, with cheap rents, but it has been gentrifying with the growth of the city. You see some very contemporary looking &quot;box&quot; houses with massive windows alongside distinguished looking houses of a similar vintage to Baldric house here. Your mind is boggled how anyone can save up enough to buy houses so big.

Your mind starts to shift back to the &quot;cage&quot;. It&#39;s hard to believe you are really doing this. 

You reflect on how you feel about this situation:
[[I really don&#39;t want to do this, but what choice do I have?]] 
[[I don&#39;t feel strongly about this.]]
[[Is it wrong that I&#39;m secretly excited?]]</tw-passagedata><tw-passagedata pid="257" name="I really don&#39;t want to do this, but what choice do I have?" tags="" position="850,3225" size="100,100">Maybe you could have made other decisions that would have avoided the computer figuring this out.

Considering how it seems to be paying attention to everything, maybe it was only a matter of time that it would catch on. There&#39;s no point in beating yourself up over what&#39;s happened to get you here.

You do seem to be on your way to getting that gold, and you can just hire a locksmith or whatever to remove the cage, once you extract your treasure. With the money, maybe you can find a way to sweep stacy off her feet when she gets back.

That said... Up to now, you were kind of just pulling a fast one on a door, but it&#39;s hard not to recognize that the sacrifices are getting more... real. You are really hoping that this there are no other big indignities to suffer after this. As you look at your watch, you realize you are running a bit late now, after making a couple extra laps around the block and losing track of the time.

You make your way to Sue&#39;s house. It turns out it&#39;s a converted apartment building with 4 units. Hers is up on the top floor.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;intercom.jpg&quot;);&gt;&gt;
[[Buzz in to meet Sue]]</tw-passagedata><tw-passagedata pid="258" name="I don&#39;t feel strongly about this." tags="" position="975,3225" size="100,100">It&#39;s weird - you&#39;d sometimes felt like folks are over-attached to the notion of genitals, when there&#39;s so many other things to life.

Things haven&#39;t always been super easy for you, and the use of your penis really had not made a big difference. You remember when you were growing up, other guys seemed a lot more excited about having sex with girls and proud of having dicks, where you didn&#39;t tend to have those thoughts much.

You&#39;ve spent a lot of time close with Stacy. She&#39;s very pretty and you like her very much as a friend, but you never really found yourself in &quot;potential boyfriend&quot; territory. Could it be that you just didn&#39;t feel  the same kind of drive to try get into a sexual relationship with her as other guys?

The door made a mistake in letting you in, but the computer seems to be giving you a big opportunity here, by making an exception to allow you to continue. You and the computer have made a fair bargain.

You make your way to Sue&#39;s house. It turns out it&#39;s a converted apartment building with 4 units. Hers is up on the top floor.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;intercom.jpg&quot;);&gt;&gt;
[[Buzz in to meet Sue]]</tw-passagedata><tw-passagedata pid="259" name="Is it wrong that I&#39;m secretly excited?" tags="" position="1100,3225" size="100,100">As you think of images of women, you&#39;d always felt they were more graceful and pleasing to the eye. The notion of guys always having to take the initiative in dating never felt fair to you.

All that time you had been spending so close with Stacy. It hasn&#39;t always been easy being so close.

She&#39;s really pretty, and you like her as a friend, but you wonder if part of the reason you were spending so much time with her, was that she was living a life closer to your ideal? All those times you&#39;d comment about how much time she spent on her appearance, and her &quot;obsession&quot; with clothes. Were you just parroting all the standard stuff all guys are expected to say?

When other guys would give you a hard time about always playing 3rd person RPG&#39;s as a female character, your excuse was that if you are going to stare at someone&#39;s ass for 60 hours, you&#39;d rather it be a cute girl. But maybe that wasn&#39;t the only reason.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;femshep.jpg&quot;);&gt;&gt;

There&#39;s a part of you that has been secretly excited at how the computer has nudged you into these new experiences. However, this wasn&#39;t how you were raised - you are aroused, but there&#39;s sensations of guilt and shame about what you want.

As you look at your watch, you realize you lost track of the time in your excitement and are running a bit late.

You make your way to Sue&#39;s house. It turns out it&#39;s a converted apartment building with 4 units. Hers is up on the top floor.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;intercom.jpg&quot;);&gt;&gt;
[[Buzz in to meet Sue]]</tw-passagedata><tw-passagedata pid="260" name="Buzz in to meet Sue" tags="" position="1225,3225" size="100,100">You press to ring her apartment. 

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Just a second!&quot;);&gt;&gt;
You hear her shout from somewhere inside, the clicking of running in heels, and then the sound of a deadbolt, before the door opens up.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Hi Billy! Fancy seeing you here so soon!&quot;);&gt;&gt;
She whisks you into her place.

Her place isn&#39;t huge, but it has a particularly feminine touch to it. She caresses a hand over you shoulder, and hands you a generous glass of wine, and guides you to her dinner table.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&quot;sue-diningroom.jpg&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;This is a really nice place you have here, Sue. It&#39;s really peaceful.&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Thank you Billy. When I walk in here after a difficult day, I feel like my troubles can kind of wash away. I think people forget how much an environment can help us express and stay true to our inner selves. At worst we can find ourselves in a place where our natural identity is suppressed into conformity. But what those places are can differ, depending on who you ask.&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;But I&#39;m rambling. So, when does your friend arrive?&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Oh, later...&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;I&#39;m sorry, where are my manners, what did you say her name was, again? I&#39;ve been really looking forward to getting to finally meet her in person, and know her better.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;She&#39;s &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;. She said she&#39;s really curious and interested to be here. But she&#39;s also actually extremely shy. It may take her a while to show up, if she can make it tonight.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Oh well, we can totally wait. We wouldn&#39;t want to start an incredible experience like this without her being there. &quot;);&gt;&gt;
Uh oh... Maybe you can stall for a bit and she&#39;ll give up on that. You take a big gulp of wine, and attempt to make some small talk about her decor.

Sue smiles, looks at her watch and knocks off her heels, massages her feet. She stretches her leg and absentmindedly seems to run her foot over your legs, while seemingly bored with her cheek resting on the fist, and biting her lip, as she watches the window idly.
[[Try to stall]]</tw-passagedata><tw-passagedata pid="261" name="Try to stall" tags="" position="100,3350" size="100,100">Before you know it, you and Sue have demolished a bottle of wine, and obviously, &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; hasn&#39;t showed yet.

At this point, Sue is being cordial, but she seems a little annoyed about her absence.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Well Billy, it&#39;s been a bit of a long day for me - I&#39;m going to run a bath and get changed. When &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; is feeling ready to come out and play, we can get started.&quot;);&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Feel free to use the hallway powder room if you&#39;d like to freshen up.&quot;);&gt;&gt;

[[Fuck... What do I do now?]]</tw-passagedata><tw-passagedata pid="262" name="Fuck... What do I do now?" tags="" position="225,3350" size="100,100">Hmm, your &quot;game&quot; isn&#39;t quite doing it yet for her. It&#39;s pretty obvious Sue won&#39;t have sex with you until &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; shows up, but you can&#39;t both be here... Unless...

Maybe you can just pretend to be &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, and have some fun, and then by the time she realizes what&#39;s up, she&#39;ll be in the mood to settle for having sex with you. That could work. It&#39;s a good thing you had your clothes and makeup on hand.
[[Dress up for Sue]]</tw-passagedata><tw-passagedata pid="263" name="Dress up for Sue" tags="" position="350,3350" size="100,100">Well, no time to loose, better get this going.

You start dressing up in your classic outfit. You make sure &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;&#39;s makeup is perfect for this. You hope this will get Sues&#39;s blood running. 
&lt;&lt;=SugarCube.getLib().Clothing.wear(&quot;tank-top&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Clothing.wear(&quot;yoga-pants&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Clothing.wear(&quot;black-thong&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Clothing.wear(&quot;stacy-bra&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Clothing.wear(&quot;tennis-shoes&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Clothing.wear(&quot;first-heels&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Clothing.wear(&quot;blonde-wig&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Slot.clear(&quot;hosiery&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.toggleMakeup(true)&gt;&gt;\
[[Now it&#39;s time to be bold]]</tw-passagedata><tw-passagedata pid="264" name="Now it&#39;s time to be bold" tags="" position="475,3350" size="100,100">You knock on Sue&#39;s door bathroom door.

&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Hi Sue, it&#39;s me &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;. I heard you wanted to meet me&quot;);&gt;&gt;
(From behind the bathroom door...)
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Just a minute, Just finishing up.&quot;);&gt;&gt;

You hear the water stop. For taking a bath, it seems Sue wrapped up quickly, as you see her almost instantly vamp out of the bathroom in a latex outfit, which hugs every surface and screams sex.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;sue-sex1.jpg&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Wow...&quot;);&gt;&gt;
She puts one finger under your chin and walks right in front of you. You instinctively back up to the door frame as she puts her other hand to your &#39;pussy&#39;, and smiles as she has you cornered.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;&lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;... What a beautiful name, for such a lovely girl. So you finally were able to show up! Oh, but where did Billy go?&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Billy had to run out for something. He said not to wait up, that we girls could get acquainted and have a little fun until until he gets in.&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Oh, that&#39;s too bad. Oh, but look at you dolled up, cute as a button, and the silly boy just ditches us. So did Billy get a chance to tell you what we were thinking of?&quot;);&gt;&gt;
You nod. Wow, for just meeting &quot;&lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;&quot;, you feel she is *really* forward, and seems to act really familiar.

Sue guides you to sit beside her on the bed. You take a moment to drink up the sight of her gorgeous outfit, as she stares into you eyes.

You are pulled into a slow, long and sensual kiss, and both of you slowly lie back onto the back, caressing each other.

From there, you notice she starts to hike up her dress and shift her panties down. Her pussy is full exposed now.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;&lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, Wearing latex turns me on, but these outfits get me so wet really quickly.&quot;);&gt;&gt;
She puts a hand down there, and you can see the dewiness on her finger.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Oh my god, I&#39;m just sopping buckets down there, aren&#39;t I. Since it&#39;s just us two girls, maybe you could give me a nice deep lick. Could you do that for me, &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;?&quot;);&gt;&gt;
You nod. She then gently guides your head down to give it some oral attention.

[[This is getting hot]]</tw-passagedata><tw-passagedata pid="265" name="This is getting hot" tags="" position="600,3350" size="100,100">Your technique is unpracticed to say the least, and Sue kind of has to coach you on the basics, as your tongue strains to go deep and fast for her. 

&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;sue-sex2.jpg&quot;);&gt;&gt;

You start to find a rhythm and after a few minutes, she has her first little gush. 

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Ooh... oh. make sure not to miss a drop there! :)&quot;);&gt;&gt;

You smile and oblige. You&#39;re not sure how satisfying that was for her, but she seems to treat it positively. She pats your head as &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, and goes down to face you and exchange a deep kiss.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Babygirl, thank you for that.&quot;);&gt;&gt;
She pulls her panties back up, and guides you up onto the bed, and gets over you. She&#39;s not a particularly powerful woman, but you suddenly find that she has your arms pinned (albeit, rather willingly), as she voraciously kisses you for a few steamy minutes, with her heaving breasts over you.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Now it&#39;s your turn. Can you drop those panties for me, and I&#39;ll return the favor?&quot;);&gt;&gt;

In the heat of the moment, saying something would ruin the moment, but there&#39;s a chance she will just go with it. You just do as she says, and remove the panties and then the gaff. Surprisingly, she doesn&#39;t seem to be deterred by your cock, but just goes down on you, all the same.

It&#39;s obvious she knows her oral sex. Fairly quickly, you find yourself on the verge of an orgasm. Fortunately, she seems to see you are getting close to climax, and eases up earlier.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Do you think it&#39;s sexier when girls spit or swallow a load of cum?&quot;)&gt;&gt;

[[Oh yeah for sure swallowing is so sexy]]
[[Swallowing is gross]]</tw-passagedata><tw-passagedata pid="266" name="Swallowing is gross" tags="" position="725,3350" size="100,100">She discreetly downs the whole mouthful, lets out a quiet moan and swallows again.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Sister, you don&#39;t know what you are missing!&quot;);&gt;&gt;
She smiles and gives you a closed mouth kiss

[[Now then]]</tw-passagedata><tw-passagedata pid="267" name="Oh yeah for sure swallowing is so sexy" tags="" position="850,3350" size="100,100">The thought of her taking down your load like a porn star is too hot, so you give the obvious answer you&#39;d love to see.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Mmm, girl, you&#39;re so right. I totally agree with you there. The best girls love to suck down the cum, rather than letting it go to waste, don&#39;t we? Now, where was I?&quot;);&gt;&gt;

As she proceeds to take your entire cock like a pro, accelerating and backing off over a few minutes, before driving you to the best orgasm you&#39;ve ever had with a long stream of jizz on her face and a mouthful. From all the stories you&#39;d read of first time experiences, you feel glad that you didn&#39;t come too quick. She strokes her face to funnel the large volume of cum into her mouth.

As you are recovering from the afterglow, she goes in for a passionate kiss. Before you realize what has happened her tongue has pushed a fair bit of your own hot cum into your mouth.

She opens her mouth to reveal she still has plenty, then swallows gesturing a downward motion with her hand, opening to show a now empty mouth, with the cum no longer visible.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;cum-swallow.webp&quot;);&gt;&gt;
She watches you expectantly.
&lt;&lt;=SugarCube.getLib().Mood.compliantLink(&quot;Reluctantly Swallow&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Mood.defiantLink(&quot;Spit the cum&quot;,1)&gt;&gt;</tw-passagedata><tw-passagedata pid="268" name="Reluctantly Swallow" tags="" position="975,3350" size="100,100">&lt;&lt;=SugarCube.getLib().Mood.addCompliance(&quot;You feel closer to her by going with the flow on this.&quot;)&gt;&gt;

It would be hypocritical of you to spit now. You emulate her by showing the cum on your mouth and then swallowing the still warm ooze. You cough for a moment at the weird texture, and then force a smile at the end.

This is so humiliating, but at the same time, you have been really turned on with this incredible time you have been having with Sue, so it bothers you less than it otherwise might.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Girl, it was so hot how you did that- you are a natural. I remember my first few times how it felt a bit weird, but it wasn&#39;t long before I really got addicted to that sensation in my mouth now. I think you&#39;ll know what I mean soon enough.&quot;);&gt;&gt;

[[Now then]]</tw-passagedata><tw-passagedata pid="269" name="Spit the cum" tags="" position="1100,3350" size="100,100">&lt;&lt;=SugarCube.getLib().Mood.addCompliance(&quot;You kind of feel like a hypocrite, but swallowing cum just isn&#39;t your speed. You spit it out.&quot;)&gt;&gt;
Sue kind of shrugs her shoulders at that.
[[Now then]]</tw-passagedata><tw-passagedata pid="270" name="Now then" tags="" position="1225,3350" size="100,100">From there your erection quickly fades away, she tilts her head and looks in your eyes.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Mmm, I hope you enjoyed that...&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Now &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;. Let&#39;s get this little thing under control. ;)&quot;);&gt;&gt;

She says while taking a hold of your soft dick.

With a sly grin, Sue takes out a sleekly branded box box labelled &quot;Chasti-flex&quot;. She puts on some gloves and starts by opening and generously slathering some gel on your penis, which just seems to cool and clean it, quickly making you completely flaccid and numb. From there, she starts sliding a series of concentric sleeve rings over it and loosely attaching them together, finally linking up a cap, and securing a base with the switch around you balls.

From there she turns the lock mechanism to secure it, and you see some previously loose portions latch together. You curiously poke at it, but are a bit surprised it is still so loose. You&#39;d have expected a bit more restraint.

Then you see her pull out some kind of electronic wand over it, and you see the rings slowly tighten to form a secure fit all around, until it meets the resistance of your now trapped dick.
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;...&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;There. &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, it looks like you have a nice cozy fit. Does it hurt or pinch at all when I do this?&quot;);&gt;&gt;
She then tests to flop it around, and see if it might come loose. With it tightened up, there&#39;s no possibility of it coming loose - it looks like a girly pink version of your dick, but the rings don&#39;t bend or transmit much feeling when you press on them, you are relieved it doesn&#39;t hurt. 

&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;No, it seems to move pretty well. I&#39;m relieved it doesn&#39;t hurt or anything.&quot;);&gt;&gt;
She then helps you to tuck it completely down, and shows you how to use the switch so it will hold itself it in that position.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Wow, &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; it looks so elegant and pretty like that. &quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;You&#39;re so lucky, you have a whole world of new sexual experiences ahead of you now. You&#39;re like a butterfly, and I&#39;m  the first to see you emerge from you cocoon! Too bad Billy ended up bailing on us, but girls just wanna have fun, right?&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;By the way, with this, you won&#39;t need a gaff, which makes it a lot easier for you to toy with that petite booty of yours.&quot;);&gt;&gt;

She raises your head which was looking at the cage with her hand, to look in to your eyes, saying:
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;You are a very comely girl, and we girls need to stick together. You really should get yourself out there, and stop sending that silly boy out to do your errands for you. I&#39;ll give you 20 % discount at my shop, if you come to buy items for yourself.&quot;);&gt;&gt;
You&#39;re not quite sure how to process that, but she seems so genuine with her acceptance of you, that you respond with:
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Thanks Sue, that means a lot. And it was nice being with you.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;This was fun for me too. I&#39;ll let your sponsor know it would be my pleasure to attend to any other aspects of your &#39;training&#39; they&#39;d like me to help with. On that note, your generous &#39;sponsor&#39; will want these when you get back to them.&quot;);&gt;&gt;
Sue smiles as she dangles a keyring with a pair of keys from the cage box. She grabs a tablet, enters a passcode, puts the keys inside inside a small drawer which appeared, which then retracts and now seems to be locked. 

She then hands you back the tablet.

With that, you find yourself in something of a daze, and depart from her bedroom.
&lt;&lt;=SugarCube.getLib().InventoryUX.add(&quot;chasti-flex&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Clothing.wear(&quot;chasti-flex&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;machine-requires-cage&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.raiseClothingTolerance(2);&gt;&gt;
&lt;&lt;=SugarCube.getLib().PlayerModel.triggerSexualRelease(true);&gt;&gt;
[[Walk back home]]</tw-passagedata><tw-passagedata pid="271" name="Walk back home" tags="" position="100,3475" size="100,100">While the fact of the cage is unsettling, your experience with Sue gave you a newfound sense of confidence. You hate to admit it, but you enjoy the thrill with presenting yourself as &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, and how it turns you on. You feel like you could go out in public as her again, without being forced to this time.

You quickly proceed directly to the inner chamber, to present the tablet to the computer. 

You state to the computer...
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;It&#39;s done, Computer - here is the tablet. Sue put the keys inside.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Thank you &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;. Sue has likewise reported so. Please proceed to the omni pod, for physical verification.&quot;);&gt;&gt;

You comply, entering the the machine and see a tendril gently conduct a series of tests which confirm to the computer that your penis is now quite trapped in that cage.

 &lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Very good &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;. You may resume your normal activities. Enjoy the rest of your day.&quot;);&gt;&gt; 
 You exit the pod.
&lt;&lt;set $innerDoorUnlocked = true &gt;&gt;\

[[continue|Inner chamber]]</tw-passagedata><tw-passagedata pid="272" name="Go out for hair styling with Sue" tags="" position="225,3475" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Hey Sue, I guess you heard, I need to get a new hairstyle... Could you help me on that?&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Yep, for sure! I&#39;ve got a sales clerk to help mind the store while we&#39;re out at the salon.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Oh, aren&#39;t we just getting a quick cut at the salon next door?&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;No, honey. That place is ok for busy soccer moms, or an emergency touch up, but I&#39;m a regular at Soft Touch Lounge. I already had a princess treatment scheduled for today.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;...Princess treatment?&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Yeah, that&#39;s the whole works. We&#39;ll both feel like new women by the time we&#39;re done!&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Uhh, sure.&quot;);&gt;&gt;
You summon the car, and it promptly arrives.
[[Go to Mall with Sue]]</tw-passagedata><tw-passagedata pid="273" name="Go to Mall with Sue" tags="" position="350,3475" size="100,100">You get in the back of the self driving car with Sue.

She sits in close to you, smiles as you tell the car where to go, then asks...

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Does this thing have any games?&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;Nah, it&#39;s ju...&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speaker(&quot;There is a collection of 1402 games available at this time. For two players, Super Marco Rivals Driving Simulator is a popular choice for short duration amusement.&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Now we&#39;re talking my language, lets play!&quot;);&gt;&gt;
You see a couple gaming controllers pop out from panels on both sides of the car. You each grab one, and hear the classic cartoony music of the racing game, as the center display panel reveals the game.

After a couple rounds, Sue has been wiping the floor with you, with her expert drift racing technique. On the third round you hit her with an exploding revenge clam in the final lap, which gives you a chance to beat her for first place. She squints into your eyes, and says:
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Ooh honey, you didn&#39;t just do that. Duchess Pomegranate never loses with me behind the wheel!&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;I think she just did!&quot;);&gt;&gt;

At this point, the car has arrived at the mall, so you put away the controllers, and get out.

[[Go to Soft Touch with Sue]]</tw-passagedata><tw-passagedata pid="274" name="Go to Soft Touch with Sue" tags="" position="475,3475" size="100,100">You walk into the lobby with Sue, and approach the receptionist.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;mall-spa.jpg&#39;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Hi, Sue Halla and my guest, we have an appointment for 2...&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;spa&quot;,&quot;Oooh, the princess treatment, you two are in for a treat. And this is &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName().toUpperFirst()&gt;&gt; Masterson&#39;s, first time with us here? Ok, she&#39;s added to our customer database now.&quot;)&gt;&gt;
She hands you both little paper cups.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;spa&quot;,&quot;Enjoy our complimentary Lemongrass Acai superfood antioxidant cleanser shots.&quot;)&gt;&gt;
You both drink them. It&#39;s kind of gross, but if it&#39;s healthy, that&#39;s something... She then gestures for you to follow her as she walks into the spa.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;spa&quot;,&quot;First, go to the change rooms, undress and wear these robes. Remove any makeup you are wearing. We&#39;ll start you with our deluxe facial treatment.&quot;)&gt;&gt;
[[Get Facial Treatment|Get Facial Treatment with Sue]]</tw-passagedata><tw-passagedata pid="275" name="Get Facial Treatment with Sue" tags="" position="600,3475" size="100,100">You undress in a change area and don a very plush robe, wash up, and then make your way to a small room with a couple of beds.
&lt;&lt;= SugarCube.getLib().PlayerModel.toggleMakeup(false)&gt;&gt;
&lt;&lt;= SugarCube.getLib().MirrorUX.saveLastOutfit()&gt;&gt;\
&lt;&lt;= SugarCube.getLib().MirrorUX.removeExplicit([&quot;penis&quot;, &quot;ass&quot;])&gt;&gt;\

You are guided to a little bed, and instructed to get on it with your robe. Sue arrives and does likewise. You both relax and enjoy the peaceful atmosphere of the spa.

Soon after, a couple massage attendants come by to apply a spa facial of nutrient rich mud.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;spa-facial.jpg&#39;);&gt;&gt;
[[Get Bikini wax| Get Bikini wax with Sue]]</tw-passagedata><tw-passagedata pid="276" name="Get Bikini wax with Sue" tags="" position="725,3475" size="100,100">&lt;&lt;if SugarCube.getLib().PlayerModel.canWax()&gt;&gt;
The spa technician seems very experienced, and doesn&#39;t seem to bat an eye at the bulge of your cage - they treat your skin in strips of the wax and regularly repeat. Compared to what you&#39;d seen in some movies, it&#39;s not so bad, but it&#39;s not exactly fun either. The lengths a girl must go to look hot, you sigh to yourself.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;spa-waxing.jpg&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().PlayerModel.wax(false)&gt;&gt;
&lt;&lt;else&gt;&gt;
The technician apologizes - Your hair is too short for the waxing to be most effective. At least a week of growth is needed effective removal, but she&#39;ll do what she can.

Your removal goes pretty quickly. You watch as Sue winces at the removal of wax strips. Maybe it&#39;s for the best you&#39;re not having a proper waxing this time.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;spa-waxing.jpg&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().PlayerModel.wax(true)&gt;&gt;
&lt;&lt;/if&gt;&gt;

After the waxing your skin feels so perfectly smooth and eminently touchable.

Next up, is the Hot Stone Massage.
[[Get Hot Stone Massage|Get Hot Stone Massage With Sue]]</tw-passagedata><tw-passagedata pid="277" name="Get Hot Stone Massage With Sue" tags="" position="850,3475" size="100,100">At this stage, you are instructed to disrobe and put a towels on your midsection, to allow for your hot stone massage, before a masseuse arrives.

The masseuse really works those hot stones in, melting the tension away from your muscles. The knots in your back and stress you felt coming into the spa are definitely gone by the end of this massage.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;spa-hot-stone.jpg&#39;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;spa&quot;,&quot;Now, please change back to your clothing, and you&#39;ll come this way, and your cosmetician can assist you.&quot;)&gt;&gt;
[[Get makeup treatment]]</tw-passagedata><tw-passagedata pid="278" name="Get makeup treatment" tags="" position="975,3475" size="100,100">Sue talks to the cosmetician and they apply a whole range of details including adding fake lashes and giving you a smokey-eye look.
&lt;&lt;= SugarCube.getLib().MirrorUX.restoreLastOutfit()&gt;&gt;
&lt;&lt;= SugarCube.getLib().PlayerModel.toggleMakeup(true)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;spa&quot;,&quot;Next it&#39;s time to get your hair styled.&quot;)&gt;&gt;
[[Get hair cut|Get hair cut with Sue]]</tw-passagedata><tw-passagedata pid="279" name="Get hair cut with Sue" tags="" position="1100,3475" size="100,100">You walk back to the changeroom and get your clothes back on.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;spa&quot;,&quot;What style would you like for today?&quot;)&gt;&gt;
&lt;div class=&quot;monochrome-hair&quot;&gt;
&lt;&lt;=SugarCube.getLib().HairStyles.renderLengthsCarousel(&quot;Choose Hair Color&quot;)&gt;&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="280" name="Choose Hair Color" tags="" position="1225,3475" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;spa&quot;,&quot;And with that style, what color would you like to go with?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().HairStyles.renderStylesCarousel(&quot;Styling Done&quot;)&gt;&gt;</tw-passagedata><tw-passagedata pid="281" name="Styling Done" tags="" position="100,3600" size="100,100">With your hair styling done, you are guided back to the front desk. The receptionist takes a picture of you.

&lt;&lt;= SugarCube.getLib().Tasks.removeTask(&quot;get-hair-styled-for-internship-today&quot;)&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;spa&quot;,&quot;I hope you enjoyed your visit with us! I have added a picture to &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName().toUpperFirst()&gt;&gt;&#39;s profile, to allow for follow up visits at our establishment. &quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Now, do me a favor and go back to the changeroom, take off all your clothes and put this on!&quot;)&gt;&gt;

She gave you a tiny little thong... No bra!
&lt;&lt;= SugarCube.getLib().MirrorUX.saveLastOutfit()&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Slot.clear(&quot;bra&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Inventory.add(&quot;covert-thong-1&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Clothing.wear(&quot;covert-thong-1&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Images.drawItemById(&quot;covert-thong-1&quot;);&gt;&gt;\

Next, you put on the new slinky dress she gave you. Wow, this thing goes kind of high up your smooth legs.
&lt;&lt;=SugarCube.getLib().Inventory.add(&quot;black-club-dress-0&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Clothing.wear(&quot;black-club-dress-0&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Images.drawItemById(&quot;black-club-dress-0&quot;);&gt;&gt;\

No socks for this outfit, either.
&lt;&lt;=SugarCube.getLib().Slot.clear(&quot;hosiery&quot;)&gt;&gt;\

Oh, she&#39;s right - bra straps or regular panties would never work in this thing. It&#39;s a little racier than outfits you&#39;ve worn before.

And some Sandals.
&lt;&lt;=SugarCube.getLib().Inventory.add(&quot;shoebox-dresssandal-2&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Clothing.wear(&quot;shoebox-dresssandal-2&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Images.drawItemById(&quot;shoebox-dresssandal-2&quot;);&gt;&gt;\

Finally you come out of the changeroom.
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;This is a little too revealing, isn&#39;t it? I don&#39;t think I can pull off an outfit like this...&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Mmm... Boom chicka boom! Are you kidding me? That outfit looks perfect on you! You look fantastic. Now let&#39;s go, we&#39;re running late for our next stop!&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;...really, it seems a bit mu...&quot;)&gt;&gt;
Sue isn&#39;t one to indulge your doubts, and whisks you away from the salon.
[[Go to Shuffleboard Bar]]</tw-passagedata><tw-passagedata pid="282" name="Go to Shuffleboard Bar" tags="" position="225,3600" size="100,100">You and Sue drop off you stuff in the car, and then walk over to the new local bar - Commodore Vanderbilt&#39;s Shuffleboard Lounge.

It&#39;s a hipster joint known for good craft beers, and of course, shuffleboard lanes. She sets you up for a 30 minute lane session, and orders a couple of beers.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;shuffleboard-lounge.png&quot;);&gt;&gt;\

Sue gets a good start in the first round shoving her yellow biscuit almost centered, and stopping just ahead of the 10 point zone. Your first shot of the black biscuit is a bit fast, but fortunately it gets stopped with hers, sliding it out to 8 points, allowing yours to sit in the edge of the 10 point zone. Sue grimaces.

The game goes back and forth - Sue is pretty good, you&#39;re not bad either. As the two of you have your beers, your precision starts to drift off. Maybe you should have eaten something before you met up with her.

&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;Are you hungry? I haven&#39;t really had anything much to eat since the morning.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Oh, good point, we spent the whole afternoon at the spa, it&#39;s past time to eat something.&quot;)&gt;&gt;
[[Sue orders some bar food]]</tw-passagedata><tw-passagedata pid="283" name="Sue orders some bar food" tags="" position="350,3600" size="100,100">A few minutes later a waitress brings out your food to a table. Your lane reservation was almost over, so you get seated. 
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Now girl, you need to get all this meat into your mouth.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;hot-dog.jpg&quot;);&gt;&gt;
Her comment and the sexy outfit make you feel a little cheeky. You jerk the hot dog provocatively, stick your tongue into your cheek, as if you&#39;re deep throating the whole thing. Sue smiles at the image, and the starts to munch on her dog. You notice some guys behind her also perked up at the sight of your gesture. You blush, and start working on yours likewise.

You and sue get to chatting a bit at the table, it&#39;s a nice excuse to get off your feet for a bit, with those heels.

&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;...So Sue, where are you from? How did you end up here?&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;I grew up in the burbs, I have a lot of family out in the region here, mostly from Scandinavia. My dad&#39;s family was Finnish, and most folks in our social circle were Lutherans. I guess I&#39;m spiritual, but that stuff was there growing up. For me, growing up church was just this social thing where the minister would tell some stories, and then folks would get on with their day. It felt like this thing that we did, because that&#39;s what you do, but I feel like it was just this thing in the background... I guess you could say I&#39;m more spiritual than religious, now. Sorry, I must be boring you to death...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;No, it&#39;s cool to know more about you.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;It&#39;s kind of weird, you don&#39;t really hear as much about it, but Finns are a really proud of their traditions. Like, my family built a sauna out of birch when I was still a little girl, behind the house, which we&#39;d use in like the middle of winter! Then afterwards, we&#39;d have sausages, and the adults would have beers. I guess the dogs kind of reminded me of that.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Now, I hope you&#39;re not feeling too peckish... I think it&#39;s time we make our next stop.&quot;)&gt;&gt;
[[Leave the Shuffleboard lounge]]</tw-passagedata><tw-passagedata pid="284" name="Leave the Shuffleboard lounge" tags="" position="475,3600" size="100,100">You walk around the block, to &quot;The Vault&quot;, the location was an old bank, and it was renovated with an Art Deco look. It opened a couple years back as an LGBTQ+ spot, but you know that folks like Stacy sometimes went to it, along with traditional clubs, with her friends.

You arrive pretty early in the night, so there was a bit of a line, but the bouncer waved you and Sue right in after checking your ID&#39;s.

&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;I&#39;ll get us some drinks&quot;)&gt;&gt;
You line up, and are surprised how quickly the bartender asks for your order. You&#39;re not too experienced with the club scene, so you ask the bartender for a suggestion for a sweet drink and he gets you a couple servings of &quot;Sex on a Beach&quot;. A peachy concoction - a little over sweet maybe, but it&#39;s on you that you weren&#39;t more specific - it&#39;s drinkable at least, and it seems like the bartender made it ultra boozy. You&#39;re not exactly sure how much they said that was.
&lt;&lt;=SugarCube.getLib().PlayerModel.deductMoney(21)&gt;&gt;\

The theme for most of the music is retro 90s, and at times you sort of hear Sue mention how this or that song were her favorites. It&#39;s hard to make out the details of what she&#39;s saying, the music is kind of loud. You two are sort of off to the side working on your drinks and getting a sense of the scenery.

[[As you finish up your drink...]]</tw-passagedata><tw-passagedata pid="285" name="As you finish up your drink..." tags="" position="600,3600" size="100,100">As you finish up your drink...
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Are you done with that? Let&#39;s dance.&quot;)&gt;&gt;
It seems like it was more a statement than a question. She&#39;s already grabbed your wrist as she guides you through the crowd onto the dance floor.

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;nightclub.jpg&#39;);&gt;&gt;

&lt;&lt;if SugarCube.getLib().Slot.get(&quot;ass&quot;)  != null&gt;&gt;\
Wow, the bass is so loud here, you feel your insides vibrating to the beat. Including the butt plug.
&lt;&lt;/if&gt;&gt;\

At first you kind of feel anxious, cuz well...
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;bad-dance.webp&#39;);&gt;&gt;
&lt;&lt;if (SugarCube.getLib().Skills.get(&quot;ballet&quot;)&gt; 1) &gt;&gt;\
Your rudimentary ballet knowledge helps you try a couple movements, but the pacing doesn&#39;t really fit so well in a club setting. In any case, Sue seems to be smiling, and it&#39;s not like the dance police have dragged you off the floor.
&lt;&lt;else&gt;&gt;\
Ok, maybe you&#39;re not a great dancer, but Sue seems to be smiling, and it&#39;s not like the dance police have dragged you off the floor.
&lt;&lt;/if&gt;&gt; That said, you still try to suggest maybe you should go back to the side, but Sue keeps you there for a bit, and teaches you some easy moves. You start to get a little more comfortable with yourself there, and maybe the drinks are hitting you a bit.

Just as you feel yourself getting into the groove someone gropes your ass!

Your first thought is to shout at the douchebag...

&lt;&lt;=SugarCube.getLib().Mood.defiantLink(&quot;Turn around to give them a piece of your mind&quot;,2)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Mood.compliantLink(&quot;You don&#39;t feel safe, it&#39;s time to go home&quot;,0)&gt;&gt;</tw-passagedata><tw-passagedata pid="286" name="You don&#39;t feel safe, it&#39;s time to go home" tags="" position="725,3600" size="100,100">You can&#39;t believe someone would do that to you, and you don&#39;t want to give them any attention.

The experience has kind of soured your mood right now, so you suggest to Sue that maybe you should move on to next venue.
[[Get back to Sue&#39;s Place from Vault]]</tw-passagedata><tw-passagedata pid="287" name="Turn around to give them a piece of your mind" tags="" position="850,3600" size="100,100">&lt;&lt;=SugarCube.getLib().Mood.addDefiance(&quot;You feel righteous anger as you pivot around to stand up for yourself!&quot;)&gt;&gt;

Actually, it&#39;s a girl who is a good foot shorter than you! She sees the upset look on your face and her demeanor turns apologetic.
&lt;&lt;=SugarCube.getLib().Dialogue.generic(&quot;Petite girl&quot;,&quot;Oh, I&#39;m so sorry - I don&#39;t normally do that sort of thing. It&#39;s just your dress is soo cute and glittery and it looks like you could bounce quarters off of that ass. I&#39;m so sorry, I don&#39;t know what came over me - I couldn&#39;t help myself and touch it.&quot;,&quot;&quot;,&quot;jen-intern.jpg&quot;)&gt;&gt;
Her sincere expression is the definition of disarming. You sort of loose your train of thought.

&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;Umm, oh. I see... well don&#39;t just go around groping people. They might not like it.&quot;)&gt;&gt;
In all honesty, maybe you wouldn&#39;t mind if she groped you a little more in private- but it&#39;s wrong to encourage that kind of thing without people&#39;s consent. In any case, she drifts away with her friends. 

You and Sue dance for a couple more songs, but at this point are both feeling a bit sweaty. Sue gestures to approach her.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;This was great, but I think I got my fill. Do you want to do a few more songs, or are you about ready to go home now as well?&quot;)&gt;&gt;

[[Get back to Sue&#39;s Place from Vault]]</tw-passagedata><tw-passagedata pid="288" name="Get back to Sue&#39;s Place from Vault" tags="" position="975,3600" size="100,100">You make your way out from steaminess of the club, out to the cool breeze of outside.

The car summons over pretty quick, which is nice, as it allows Sue to get off her feet and take off her heels. You do likewise.

For someone who runs a sex shop, you&#39;re kind of surprised at how low key she has been at the lounge and bar. But, with just you in the car, she takes hold of you and starts a slow kiss...

You arrive at Sue&#39;s place.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Do you want to come in? Your dom mentioned they have a really special suit for you, but they don&#39;t want you dropping straight off the deep end. I&#39;d be happy to help you safely explore more of your submissive side. I&#39;m honestly a little intrigued about what that suit&#39;s all about... I have a few ideas that could go a little further than what you&#39;ve experienced before.&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Mood.compliantLink(&quot;Go with Sue&quot;,2,&quot;Go with Sue Date 3&quot;)&gt;&gt;
[[You&#39;re kind of tired, go home]]</tw-passagedata><tw-passagedata pid="289" name="Go with Sue Date 3" tags="" position="1100,3600" size="100,100">&lt;&lt;=SugarCube.getLib().Mood.addCompliance(&quot;No one needs to twist your arm. You feel happy to indulge Sue in this.&quot;)&gt;&gt;

She guides you straight to the bedroom. That&#39;s hot.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Just sit right there.&quot;)&gt;&gt;

She kisses you, and gently guides your hands behind your back. Click. She has handcuffed them together. You&#39;re not quite used to that, but it&#39;s kind of kinky.

From there, she gets a really soft black satin blindfold, and puts it over your eyes. You&#39;re totally at her mercy at this point, but she hasn&#39;t abused your trust up to now.

She whispers into your ear.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Just relax and enjoy the ride, baby. That&#39;s it.&quot;)&gt;&gt;

You feel a collar placed around your neck, and feel the weight shift slightly as she adjusts it. On your breasts you feel a leather leash dangling down, which it seems like she has placed on the bed.
[[Where does this go?]]</tw-passagedata><tw-passagedata pid="290" name="Where does this go?" tags="" position="1225,3600" size="100,100">In the other ear, you hear her seductively whisper:
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Are you ready to fuck me? We&#39;ll do it a little different this time...&quot;)&gt;&gt;
You feel her fingers apply gentle downward pressure on your chin to open your mouth.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Open up, honey. Take this in slowly.&quot;)&gt;&gt;

You smell something rubbery being placed into your mouth. As your mouth shift, you get a sensation of a vein. It seems she has placed a moderate sized penis gag into your mouth. You feel a considerable weight extending from the front.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Now close.&quot;)&gt;&gt;
You feel her tighten some straps. No doubt about it - there&#39;s likely a dildo extending from the other side of that gag. On one hand your mind realizes that doing something like this two weeks ago would have been unthinkable, but you have a weird sense of calm. It&#39;s strange, but this feels so right.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;You look incredible. Now, get on the floor, and soon you&#39;ll penetrate me with it, baby.&quot;)&gt;&gt;
She guides you down, onto your knees. You feel some resistance as she has you slide the dildo into her. You can start to smell her musk and feel the heat of her thighs on your face.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Now, back and forth. Just like on the dance floor, you start to feel the rhythm as you rock together.&quot;)&gt;&gt;
You both move in and out together. It&#39;s harder without visual cues, but you feel more focused on your other sensations. The sense of her smooth legs transmitted to your face through the straps of your gag. As you build up a tempo with her, you could swear you could taste something in the back of your mouth. It kind of reminds you what you tasted from the pod with the simulated sex, but also with a taste like Sue&#39;s.
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;mmph... mmmm...&quot;)&gt;&gt;
 Whatever is in it, you start to lose control, and feel yourself wanting more, and sucking on the dildo and moving faster.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Yes! oh, yes!&quot;)&gt;&gt;
Sue also becomes more erratic and you feel her body spasming. Finally she regains her composure, and gestures to your head to stop, as she dismounts herself from the dildo.

She then removes the harness from your head, and guides you onto the bed. 
[[Your turn]]</tw-passagedata><tw-passagedata pid="291" name="Your turn" tags="" position="100,3725" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Mmm, you must be feeling all hot and bothered now! Lets get you on the bed and get that out of your system!&quot;)&gt;&gt;
She leads you by the leash onto the bed, and positions you chest-down, still with your hands behind your back.

You feel a lubed finger going in and out of your ass. Then a second, and a third.
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;Ohh...&quot;)&gt;&gt;

She stops, and you feel her weight on the bed shift away from you, and hear sounds of some straps. Soon enough you feel the comforting sensation of her legs back on the bed, alongside yours. 

Next, you feel her fondling your cage for a moment. And then a whisper into your ear.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Now, for the main event.&quot;)&gt;&gt;

You feel her gingerly mount you with the tip of a well lubricated dildo. This one seems much bigger than what she used on you last time.
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;It&#39;s so big, I don&#39;t know if I can take that...&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Let&#39;s find out. I&#39;ll take it nice and slow. Just tell me if it&#39;s too much.&quot;)&gt;&gt;
She caresses your breasts and ever so slowly slides in and out of you to a growing depth. At first you struggle to take it in, but soon, you find yourself getting excited by the sensation. Soon enough you&#39;re bucking against Sue and trying to get her to speed up.

Soon enough, you find the pressure building deep inside you, and are cumming.

&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;Oh Sue...&quot;)&gt;&gt;
While she still has you mounted, she removes your handcuffs and blindfold, and sets you on your side, spooning you from behind and running her hands over you.
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;This night... It&#39;s been incredible.&quot;)&gt;&gt;
She kisses you on the shoulder. The two of you lay there for a few minutes, just enjoying the moment. Finally she takes the dildo out of you, removes a dildo harness from herself, and wipes up the sheets.  
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;I&#39;m glad you enjoyed this, and I really like your new look!&quot;)&gt;&gt;
[[Change and go home]]</tw-passagedata><tw-passagedata pid="292" name="Change and go home" tags="" position="225,3725" size="100,100">You get dressed and give a final kiss, before heading out to take your car back home. 
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;Good night, Sue...&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Have a good night, sexy!&quot;)&gt;&gt;

Only as you get home on the drive back from Sue&#39;s, you realize that you didn&#39;t even get the cage removed this time.
&lt;&lt;= SugarCube.getLib().MirrorUX.restoreLastOutfit()&gt;&gt;
[[Return home| Baldric House]]</tw-passagedata><tw-passagedata pid="293" name="You&#39;re kind of tired, go home" tags="" position="350,3725" size="100,100">Thanks for the help Sue, it&#39;s been fun! 

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Ok, have a good night!&quot;)&gt;&gt;

Sue steps out of the car after you drop her off at her place. On the way home you change back to your original outfit.
&lt;&lt;= SugarCube.getLib().MirrorUX.restoreLastOutfit()&gt;&gt;
[[Return home| Baldric House]]</tw-passagedata><tw-passagedata pid="294" name="Request Relief from Sue" tags="" position="475,3725" size="100,100">&lt;&lt;= SugarCube.getLib().Tasks.removeTask(&quot;sexual-relief-sue-round-2&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;So, I heard I should check in with you again. About some help with, umm... fun release?&quot;)&gt;&gt;
You don&#39;t recall instructions on how to solict this, so you just awkwardly wink at her, while grinning like a Cheshire cat.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;I was wondering when you might be coming by for some more fun.&quot;)&gt;&gt;
She walks up close and &quot;accidentally&quot; caresses at your groin.

You hear a sultry whisper into your ear.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,`You must be feeling like you are on the verge of exploding.`)&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,`Ok, I&#39;ll need some time to wrap up, why don&#39;t you just relax with some light reading for now. It&#39;s full of some classics when I&#39;ve got my hands to myself.`)&gt;&gt; 

She winks and gives you a tablet. Currently it has a tab open with a lesbian short story [[Dress you up|https://www.literotica.com/s/dress-you-up]]

After a little while and a few stories that have amped up your libido, Sue is still closing up shop.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,`Ok, sorry just a couple more minutes. Oh, shoot! Could you do me a favor and get cheese to go with some wine. Could you grab some Brie or something, and meet me at my place?`)&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Uhhh, sure ok.&quot;)&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Oh, and I&#39;m on my last tampons, can you help a sister out and grab me a 20 pack of regular? Thanks you&#39;re the best!&quot;)&gt;&gt;

The thought of shopping in the &quot;personal care&quot; section is a little awkward, but it seems like arguing about something like this is a lost cause.

[[You make a quick run at a little grocer]]</tw-passagedata><tw-passagedata pid="295" name="You make a quick run at a little grocer" tags="" position="600,3725" size="100,100">As requested, you make a quick run to the grocery store, and start looking for cheeses.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;grocery-shopping.jpg&quot;);&gt;&gt;

Is there an old guy over there leering at you? Seriously. Why do guys have to be such pervs sometimes? Can&#39;t you just dress to look nice for yourself and browse the grocery store without getting a creeped on?

You find some fancy cheese, and then make your way to the women&#39;s health section.

You have no clue what makes for a good tampon, so find yourself carefully reading the label, as you don&#39;t want to get the wrong kind. Girls can wear so many cute outfits, but having a period must be kind of a drag. Finally, after looking at just about every package, You realize that the regular ones are all pretty much the same, just different brands, so you make your pick. After waiting a couple minutes at the express check-out line, you have your stuff and make way to Sue&#39;s.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;tampon-buy.jpg&quot;);&gt;&gt;
[[Walk to Sue&#39;s]]</tw-passagedata><tw-passagedata pid="296" name="Walk to Sue&#39;s" tags="" position="725,3725" size="100,100">You knock at Sue&#39;s door, and this time Sue opens the door.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;H...&quot;);&gt;&gt;
Before you finish a word, she puts a finger to her mouth, then pounces to pull in you in. You&#39;re not one to resist an welcome like this. Sue deftly pivots you, and has you against the inside wall, as she starts kissing you. She puts your bag on he floor, and then takes your arms by the wrists, and raises them up over your head. You feel so vulnerable and exposed like this, and yet, it feels so nice being up close to Sue again.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;I&#39;ve got you &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;. Just let yourself relax in the moment and enjoy yourself tonight.&quot;)&gt;&gt;

She walks you over to the kitchen and pops open some red wine, pouring a couple glasses, handing you one, and you clink them together, before starting to drink them. Her eyes are so hot that way she looks at you.

She grabs a box of fancy crackers, and a plate, then points out a cutting board and knife. 

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Can you do me a favor and prep some cheese on this platter? I&#39;ll just get my room sorted out.&quot;)&gt;&gt;
She walks off to the bedroom as you get some slices prepped up.

After a couple of minutes, you have a small plate of cheese, and add some crackers. You move over to her sofa table, and take a sip of wine.  After the last few days of work, taking a moment to just unwind is nice, and your mind wanders for a bit.

From around the bedroom, you hear:
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, I think there&#39;s something you might like to see in the bedroom. Could you put the snacks in the fridge for now?&quot;)&gt;&gt;
[[Walk to bedroom]]</tw-passagedata><tw-passagedata pid="297" name="Walk to bedroom" tags="" position="850,3725" size="100,100">Sue has dressed herself into a familiar outfit.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;sue-sex1.jpg&quot;);&gt;&gt;

On the bed, you see a pair of latex stockings and a tiny dress. Sue starts undressing you, and you are now completely naked. It feels a little unsettling at how she&#39;s taking these liberties with you. Of course, it feels so good to be around her, which eases the feeling of anticipation and suspense.
&lt;&lt;= SugarCube.getLib().MirrorUX.saveLastOutfit()&gt;&gt;
&lt;&lt;= SugarCube.getLib().MirrorUX.removeExplicit([&quot;head&quot;,&quot;penis&quot;, &quot;ass&quot;])&gt;&gt;

At this point, you&#39;ve regularly been dressing up as a girl, and the prospect of sex with Sue is ever so tantalizing, but this is more lewd than anything you&#39;ve worn before. Considering her outfit, this is obviously not something she wouldn&#39;t wear herself. And of course, it&#39;s more than a little sexy, and you&#39;re not going outside to be seen by anyone else.

&lt;&lt;=SugarCube.getLib().Mood.defiantLink(&quot;Oh, I&#39;m just not comfortable with putting that on&quot;,1) &gt;&gt;
&lt;&lt;=SugarCube.getLib().Mood.compliantLink(&quot;Wow, this is hot&quot;,2)&gt;&gt;</tw-passagedata><tw-passagedata pid="298" name="Oh, I&#39;m just not comfortable with putting that on" tags="" position="975,3725" size="100,100">&lt;&lt;=SugarCube.getLib().Mood.addDefiance(&quot;You don&#39;t feel like it, you feel yourself becoming bolder by stating so.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;I&#39;m not really keen on wearing that.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Oh, I&#39;m sorry I misread things. I had an impression you were a kinky kind of girl who&#39;d like dressing up and having sex with me. Vanilla sex just gets so boring for me, it doesn&#39;t get me wet anymore. I&#39;m sorry my fetish makes you uncomfortable, but sometimes, if it isn&#39;t right, it isn&#39;t right. Now then, lets make good on that promise that your cage would be freed up. I&#39;ll unlock you and leave you to your pleasure.&quot; )&gt;&gt;

It looks like Sue really prefers to keep things a little kinky, but at least you&#39;ll still be able to masturbate free of the cage.
&lt;&lt;=SugarCube.getLib().Mood.compliantLink(&quot;On second thought, maybe it would be fun to have sex in that outfit&quot;,1,&quot;Wow, this is hot&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Mood.defiantLink(&quot;Sorry, but yeah - I don&#39;t won&#39;t to wear that dumb outfit... I just want to get that thing off.&quot;,2)&gt;&gt;</tw-passagedata><tw-passagedata pid="299" name="Sorry, but yeah - I don&#39;t won&#39;t to wear that dumb outfit... I just want to get that thing off." tags="" position="1100,3725" size="100,100">&lt;&lt;=SugarCube.getLib().Mood.addDefiance(&quot;Maybe that was kind of harsh, but she did spring that on you really suddenly. Sue presents a what seems like an insincere smile as she takes the key from her necklace, and unlocks your cage. It&#39;s curious but, your penis seems a smidge smaller than you remember.&quot;)&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Umm, Ok- I have some laundry to run - I&#39;ll leave you to it! I hope you enjoy the relief.&quot;)&gt;&gt;

Sue tries to smile again, awkwardly hugs you, and leaves you some privacy in her room. You wonder if Sue would still be interested in spending time with you, given your &#39;vanilla&#39; attitude.

From there, you start masturbating - it doesn&#39;t take long before you come, and you feel much relieved.
&lt;&lt;=SugarCube.getLib().PlayerModel.triggerSexualRelease(true)&gt;&gt;

After that, you get dressed again, and mention to Sue that you&#39;ll get going now. She puts the cage back on, and hugs you again to see you off.
&lt;&lt;= SugarCube.getLib().MirrorUX.restoreLastOutfit()&gt;&gt;
[[Return home| Baldric House]]</tw-passagedata><tw-passagedata pid="300" name="Wow, this is hot" tags="" position="1225,3725" size="100,100">&lt;&lt;=SugarCube.getLib().Mood.addDefiance(&quot;Sue kisses you.&quot;)&gt;&gt;
&lt;&lt;if hasVisited(&quot;Oh, I&#39;m just not comfortable with putting that on&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Oh, you had my heart skip a beat there. I&#39;m so glad you are open to sharing my latex fetish! This is going to be so much fun. Now, let&#39;s get you dolled up.&quot;)&gt;&gt;
&lt;&lt;/if&gt;&gt;
First, she wastes no time in rolling the stockings up your legs. Since you started all this, you have become much more acquainted with experiencing your feminine side - the feeling of the leggings is really exciting, and the reflections on your legs are otherworldly.
&lt;&lt;=SugarCube.getLib().Images.drawItemById(&quot;latex-stockings-gift-0&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Inventory.add(&quot;latex-stockings-gift-0&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Clothing.wear(&quot;latex-stockings-gift-0&quot;);&gt;&gt;

Next she wastes no time getting you into the dress, and seems to really enjoy running the zipper up your torso.
&lt;&lt;=SugarCube.getLib().Images.drawItemById(&quot;latex-dress-gift-0&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Inventory.add(&quot;latex-dress-gift-0&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Clothing.wear(&quot;latex-dress-gift-0&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Could you model this stuff for me? I think these would look great on your lithe body.&quot;)&gt;&gt;

You kind of shake your ass in a goofy way, and then make some stereotypical model poses with your face and hands. It makes you a little self-conscious, but you are glad Sue is entertained by you.

With the clothes on you, you&#39;re starting to get excited to have sex with her. Sue however, doesn&#39;t seem ready to start quite yet. She guides you to her large bathroom. She has you sit at a chair where she has piles of cosmetics close at hand.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Your makeup is a nicely done, but lets try something a little more sultry for tonight.&quot;)&gt;&gt;

She wipes up your face, plucks some of your eyebrows, and does your makeup using some darker and more exotic colors and shades than you&#39;d used before.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Wow. Girl, you look something fierce. The boys would be falling over themselves to get your digits at the club. Here, get a look.&quot;)&gt;&gt;
[[Look at Sue&#39;s handiwork]]</tw-passagedata><tw-passagedata pid="301" name="Look at Sue&#39;s handiwork" tags="" position="100,3850" size="100,100">She stand you up to turn you to the mirror to see the results, as you had been facing her as she used your face as a canvas for her artistry.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;sue-makeup-dark.jpg&quot;);&gt;&gt;

She&#39;s not wrong. It&#39;s hard not to get intoxicated with the visual of this scene, with two gorgeous, provocatively dressed women so close together, having fun perfecting their makeup. It just happens that are one of the participants in this scene.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Mmm, I bet you want to preen that tight little ass of yours at the club sometime... But the boys at the club are going to miss out, you&#39;re all mine tonight.&quot;)&gt;&gt;

Her hand glides down your waist.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Now, as promised...&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Slot.clear(&quot;penis&quot;)&gt;&gt;

She takes off a necklace on which she had secured your key.  With a deft motion she hikes up the front of your dress, exposing your cage. She unlocks the chasti-flex, and removes the outer shell, revealing your penis. 


&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;That is cute. Make sure you don&#39;t cum too soon. I want to savor having you inside me.&quot;)&gt;&gt;

Being locked away for so long, you could swear it looks different, a little smaller, cute like she described. It seems like it has more of a  pink tone than you remember. She is gently fondling it now, you are putty in her hands. From here, she guides you to the bed.

[[Join Sue in Bed]]</tw-passagedata><tw-passagedata pid="302" name="Join Sue in Bed" tags="" position="225,3850" size="100,100">Sue backs you you up to the side of the bed, and leans into you, causing you to slowly fall backward onto the bed.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Just relax and savour this moment.&quot;)&gt;&gt;

She gets positioned close to the foot of the and starts to lick at your dick like a lollipop. From there she starts bobbing her head down on you and in a quick a minute, you find yourself coming erect, and she backs off to caress and kiss you all over. 

She seems to spend a good bit of time sensually on your breasts, which while modest, are more noticeable than last time she saw you.

Finally she shimmies up and loses no time to straddle you, quickly taking in your dick. She feels very wet, and you feel no resistance. You know girls can sometimes be really sensitive down there, but bites her lip proudly as she take all of your penis to the hilt in without wincing or anything.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, that feels nice - when you are ready to come, lets finish you off in my mouth.&quot;)&gt;&gt;

She clenches her tight on you but just holds at your base, and leans in to kiss you. Then, she starts shifting up and down, slowly but holding you tight.

She shifts tempo, which starts to get you over the edge.

&lt;&lt;=SugarCube.getLib().Mood.defiantLink(&quot;Come inside her&quot;,2)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Mood.compliantLink(&quot;Warn her, and allow her to dismount&quot;)&gt;&gt;</tw-passagedata><tw-passagedata pid="303" name="Come inside her" tags="" position="350,3850" size="100,100">&lt;&lt;=SugarCube.getLib().Mood.addDefiance(&quot;It feels too good to stop. You moan out:&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Ohhh... That feels good. I&#39;m coming!!!&quot;)&gt;&gt;
Sue&#39;s pussy is just too tantalizing, and your burst shoots deep inside her. 
&lt;&lt;=SugarCube.getLib().PlayerModel.triggerSexualRelease(true)&gt;&gt;

After being locked away for the last while, that felt good. Really good. You feel a bit of guilt at not trying harder to honor her request to take your cum in her mouth like she asked, but how could you resist?

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Mmm... &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; - Is it wrong that I want to scratch my itch just a little more?  Girl, I want to really be penetrated deeply.&quot;)&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Umm... I might need a little time before I&#39;m ready again.&quot;)&gt;&gt;
You&#39;re feeling like she drained away every last millilitre out of you. She seems to sense your hesitation, and fondles your now flacid cock and smiles.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Oh, that cute thing was nice, but your staying power doesn&#39;t have to stop what comes next. You can take me like a dirty girl with this - just start softly, honey.&quot;)&gt;&gt;

From a side table, she takes out a monumental looking dildo and a strap-on fitting which she affixes over your groin, and generously lubricates.

When in Rome... [[You start to penetrate Sue with the dildo]]</tw-passagedata><tw-passagedata pid="304" name="Warn her, and allow her to dismount" tags="" position="475,3850" size="100,100">&lt;&lt;=SugarCube.getLib().Mood.addCompliance(&quot;You moan out:&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Ohhh... That feels good. I&#39;m about to come any moment!&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().PlayerModel.triggerSexualRelease(true)&gt;&gt;\
She shifts off of you and takes your dick into her mouth. You managed to hold back long enough for her, but the subtle serpentine motions of Sue&#39;s tongue are just too stimulating for you, and your burst goes straight into her mouth. From the grin on her cock-sucking face, she doesn&#39;t seem surprised.

After being locked away for the last while, that felt good and relaxing.

&lt;&lt;if hasVisited(&quot;Swallowing is gross&quot;)&gt;&gt;\
Sue discreetly swallows all your cum, as per her curious habit.
&lt;&lt;else&gt;&gt;\
She funnels a good chunk of cum into your mouth, and passionately kisses you, while you grinding together for a few slow delerious minutes. The thought of what you&#39;re doing is a little uncomfortable, but how can you resist how turned on it makes her?
&lt;&lt;/if&gt;&gt;\

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, that was wonderful. Is it wrong that I want to scratch my itch a little more?  Girl, I want to feel you penetrate me deeply.&quot;)&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Umm... I might need a little time before I&#39;m ready again.&quot;)&gt;&gt;
You&#39;re feeling like she drained away every last millilitre out of you. She seems to sense your hesitation, and fondles your now flacid cock and smiles.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Oh, that cute thing was wonderful, but that doesn&#39;t have to stop us. You can take me with this - just be gentle, honey.&quot;)&gt;&gt;

From a side table, she takes out a monumental looking dildo and a strap-on fitting which she affixes over your groin, and generously lubricates.

Sue proceeds to mount over you.

[[You start to penetrate Sue with the dildo]]</tw-passagedata><tw-passagedata pid="305" name="You start to penetrate Sue with the dildo" tags="" position="600,3850" size="100,100">This time, Sue is not so nonchalant, as you feel her weight pressing on your groin, and she slowly takes the member inside her. She starts by just working herself on the top few inches, gradually increasing her strides. Her breathing is starting to becomes more labored, as this dildo is no small thing, even for a presumably &quot;well practiced&quot; slut like her. 

Finally, she has managed to do a few cycles, and bottomed out, letting  out a big gasp. She clasps your hands, and smiles.

The two of you discover a rhythm and after a few minutes, she seems to completely loose her usual calm, pulling you in tight like a frenzied animal, with her the heels of her feet on the bed pressing towards her. 

&lt;&lt;if SugarCube.getLib().Slot.get(&quot;ass&quot;) != null &gt;&gt;\
Inadvertently you feel pressure the buttplug stirring inside you, especially as her body crashes down on the dildo. 
&lt;&lt;else&gt;&gt;\
You don&#39;t have the buttplug present. The thought of wearing it while fucking kind of stirs in your imagination.
&lt;&lt;/if&gt;&gt;\

After what feels like an eternity entwined together, she climaxes and long, deep moans, and lets out a sigh. You&#39;re not sure if she was hamming it up for you, but it seems like she may have gotten quite an orgasm there.

She slowly eases herself off the dildo, and unstraps it from you, to put on a bedside table. She goes out of the room. 

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Whew - All that fucking has built up my appetite. I&#39;ll be right back with snacks&quot;)&gt;&gt;

Your groin is a little sore from the force of the dildo base - you wonder how intense that must have been for here.

You&#39;ve had enough fun for today - [[Relax from post-coital fun]]
&lt;&lt;if SugarCube.getLib().Slot.get(&quot;ass&quot;) != null &gt;&gt;\
&lt;&lt;=SugarCube.getLib().Mood.compliantLink(&quot;Toy with your ass&quot;,1)&gt;&gt;
&lt;&lt;else&gt;&gt;\
Toy with your ass (Plug not present)
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="306" name="Relax from post-coital fun" tags="" position="725,3850" size="100,100">Sue returns with the snacks and has topped up the wine glasses.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, I hope you were able to release some of that tension from inside you. This was fun.&quot;)&gt;&gt;

She hands you a glass, and you clink them. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Cheers!&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Cheers!&quot;)&gt;&gt;

[[Wrap up to go home]]</tw-passagedata><tw-passagedata pid="307" name="Toy with your ass" tags="" position="850,3850" size="100,100">&lt;&lt;=SugarCube.getLib().Mood.addCompliance(&quot;Being with Sue feels good. You don&#39;t want to end the moment.&quot;)&gt;&gt;

You&#39;re still feeling soft, but Sue&#39;s huge orgasm with the dildo is lurking in your mind. Before you realize it, you&#39;re on your side, absent mindedly toying with the butt plug to for some sensation back there, craving an orgasm like she had.

At that moment, Sue returns with a tray of newly topped up wine glasses, and the chilled cheese plate you prepared earlier.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Oh &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, what kind of host am I? I didn&#39;t realize that&#39;s what you were hungry for!&quot;)&gt;&gt;

She gets in alongside you to start kissing you. She withdraws your plug, and begins fingering you with one, and then a second digit. At this point, you&#39;re lost in the moment and Sue stops to get something from her side table. It&#39;s a small, shorter dildo and strap.

She sets up a couple of pillows to your side, and shifts you to be face down on top of them, before rigging the dildo to her groin and adding some lube to it.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Just hold still while I start - I&#39;ll be gentle, baby.&quot;)&gt;&gt;

She uses one and then a second lubed fingers which she slides into you. This isn&#39;t the first time your hole has been tested, and Sue has a very soft, playful touch - she seems to enjoy taking it slow and teasing you. You start to get bored and slide your ass against her fingers.

With that, she withdraws her fingers, and traces some lines on the surface of your ass, before homing the first inch of the dildo into your tender hole. This is a little smaller than the one you have at home, but you&#39;re still putting trust in her not to overdo it, and hoping this isn&#39;t a big mistake.
&lt;&lt;= SugarCube.getLib().Slot.clear(&quot;ass&quot;)&gt;&gt;
[[Sue starts to fuck you in the ass]]</tw-passagedata><tw-passagedata pid="308" name="Sue starts to fuck you in the ass" tags="" position="975,3850" size="100,100">You are being penetrated by Sue - unlike your masturbation sessions with a dildo, there is a feeling of uncertainty of what happens next. She seems to use a bit more variety with pacing and spiral motions, as you find your insides warming up. You feel yourself sandwiched between the pillows underneath you, and the sensation of her breasts running down your back, and she seems to slow down. 
&lt;&lt;=SugarCube.getLib().PlayerModel.triggerSexualRelease(false)&gt;&gt;\

Suddenly you hear a voice outside of you...
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Don&#39;t stop yet! I want all of it inside me!&quot;)&gt;&gt;
What just happened? You feel shame that you somehow vocalized the thought - you don&#39;t know where that outburst came from, but you do want more.

Sure enough, Sue is happy to oblige. She takes a firm hold of you at the hips and starts to give you deliberate, deep thrusts which shake you to your core. With the landing of each stroke, you feel yourself shuddering.

Out of animalistic excitement you slam your ass into Sue.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;I&#39;m coming!&quot;)&gt;&gt;

Sue gives you a last thrust, and stops as you start spasming. Sue shifts your spooned bodies onto the left side, with the dildo still deep inside, as she runs her hand over your back.

You look at the pillow - it has a couple lines of cum going up to her sheet. It seems your dick still had a little more in the tank than you thought. Sue caresses your back, and pulls out from you, leaving you feeling a little empty.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Damn girl! You took that like a good little slut, &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;. I love anal, but it took me a lot of practice to get comfortable with a shaft inside me like that. It seems like your body is a natural for it. Don&#39;t worry about the mess, I&#39;ll swap the sheets.&quot;)&gt;&gt;
Sue blots out the cum from your chest, the surfaces and the dildo with some cleaning pads. She then hands you a wine glass.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, I hope this helped you let off some tension. To new pleasures!&quot;)&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;It has, thank you. To new pleasures!&quot;)&gt;&gt;
You clink the wine glasses together.
[[Wrap up to go home]]</tw-passagedata><tw-passagedata pid="309" name="Wrap up to go home" tags="" position="1100,3850" size="100,100">After the heat of passion, you and Sue relax for a post-coital moment and regain your composure.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Oh, before I forget - it&#39;s time to get you nice and cozy again.&quot;)&gt;&gt;
Sue gets the cage from the side table and brings it over your now very flaccid dick.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Oh, how sloppy of me, I must have mis-sized the cage when I installed it - it&#39;s obviously too loose for you. I&#39;ll fix that right up.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;I&#39;m not sure that...&quot;)&gt;&gt;
She secures the cage to the base and locks it. She shifts it around to test, and you feel it loosely flopping inside.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;We need to be careful, that looseness could cause painful blistering or infection, you simply wouldn&#39;t want that.&quot;)&gt;&gt;
You seem to remember the cage being snug before - you&#39;re really not super keen on the cage being even smaller, but before you can get the words together, the cage material is already shrinking down as Sue applies the wand around it, making it into a tight glove-like sleeve around your now dainty penis. On one hand you feel excitement that your silhoutte is becoming even more elegant, but you then start to wonder about if your penis will go able to back to normal after all this is over. Is that even something you want anymore?

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;That latex makes you look like one bitchin slut. I want you to enjoy that as a gift.&quot;)&gt;&gt;
You feel yourself blushing a little at that statement. From her, its most likely a compliment.

&lt;&lt;= SugarCube.getLib().MirrorUX.restoreLastOutfit()&gt;&gt;

[[Return home| Baldric House]]</tw-passagedata><tw-passagedata pid="310" name="Retail Strip" tags="" position="4077,448" size="100,100">You are at a small commercial strip with a variety of shops for folks in the neighborhood. Nothing fancy, but it&#39;s a short walk - it reminds you of the typical older strip malls in your home town.

Given that you don&#39;t have a car, and your irrational phobia of public transit, this will have to be the place you do most of your shopping at.

Life would be so much simpler if you could just ask someone to buy things for you and have them magically show up on your doorstep. Maybe in some alternate reality with jetpacks and teleporters, but that&#39;s not how things are in the real world. Stupid [[Butler-Hancock Act]].

&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;strip-mall.jpg&#39;);&gt;&gt;

It&#39;s got a variety of shops:
Convenience store
Military surplus store
Mexican restaraunt
&lt;&lt;if hasVisited(&quot;Look for Interesting Book&quot;)&gt;&gt;\
[[Pawn Broker]]
&lt;&lt;else&gt;&gt;\
Pawn Broker
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if (SugarCube.getLib().Tasks.hasTask(&quot;check-adult-store&quot;) || hasVisited(&quot;Adult Goods Store&quot;)) &amp;&amp; (SugarCube.getLib().OutfitsAnalyser.describeCurrentOutfit().isAllMaleOutfit || SugarCube.getLib().PlayerModel.checkClothingTolerance() &gt;= 2)&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;check-adult-store&quot;)&gt;&gt;\
While walking and trying to overcome your trepidation at taking the bus, you notice a little adult products store. It seems to have quite the selection of &#39;toys&#39;, &#39;literature&#39;, and clothing. The mannequins all seem to have distinctive hair styles and actually, it looks like they have some displays of just heads with makeup and wigs. Looks like this place will have something. Considering how terrifying the idea of taking the bus is for you,  maybe this is better option to get a wig and unlock your treasure.
[[Enter adult goods store for first time]]
&lt;&lt;else&gt;&gt;\
[[Adult Goods Store]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;if SugarCube.getLib().OutfitsAnalyser.describeCurrentOutfit().isAllMaleOutfit&gt;&gt;\
Adult Goods Store
&lt;&lt;else&gt;&gt;\
Adult Goods Store - You don&#39;t want to go in dressed like this...
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

Go to:
[[Commemoration Park]] &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Retail Strip&quot;,&quot;Baldric House&quot;);&gt;&gt;</tw-passagedata><tw-passagedata pid="311" name="Pawn Broker" tags="" position="4550,193" size="100,100">You have arrived at the local pawn shop.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;pawn.jpg&#39;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.pawn(&quot;Welcome to my store. Let me know if you need something. We offer the best prices to buy your used gold jewelry! Tell your friends about our specials on quality home electronics which will stand the test of time. Don&#39;t touch the glass. Thank you.&quot;)&gt;&gt;
\
&lt;&lt;if SugarCube.getLib().InventoryUX.hasItem(&quot;pawn-ticket&quot;)&gt;&gt;\
[[Redeem Ticket]] for $50
&lt;&lt;/if&gt;&gt;\
[[Retail Strip]]</tw-passagedata><tw-passagedata pid="312" name="Adult Goods Store" tags="" position="4058,1203" size="100,100">You are here at the adult goods store.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;adult-toy-store.jpg&#39;);&gt;&gt;
&lt;&lt;if visited(&quot;Retail Strip&quot;) &gt; 1&gt;&gt;\
&lt;&lt;if SugarCube.getLib().OutfitsAnalyser.describeCurrentOutfit().isAllWomanOutfit || SugarCube.getLib().PlayerModel.looksLikeAGirl()&gt;&gt;\
&lt;&lt;if (SugarCube.getLib().PlayerModel.looksLikeAGirl() &amp;&amp;  SugarCube.getLib().OutfitsAnalyser.isCosplay())&gt;&gt;\
  &lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,`Ooh, dressing like a boy, eh? That&#39;s kind of kinky, ${SugarCube.getLib().CoreUtils.getVariables().player.heirName}! And you know how I like kinky. `)&gt;&gt;
  &lt;&lt;else&gt;&gt;\
  &lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,`Good seeing you again ${SugarCube.getLib().CoreUtils.getVariables().player.heirName}!`);&gt;&gt;
  &lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().PlayerModel.hasExercisedToday() &gt;&gt;\
    Sue seems to look you over approvingly.
  &lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,`Have you been working out? You seem more toned... And limber. It&#39;s a good look for you.`);&gt;&gt;
  She gives your ass a gentle squeeze and smiles.  
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Hi Billy, how are you doing!&quot;);&gt;&gt;
&lt;&lt;/if&gt;&gt;\
\
&lt;&lt;/if&gt;&gt;\
\
&lt;&lt;if hasVisited(&quot;Remember the Hair Style&quot;) &amp;&amp; !SugarCube.getLib().InventoryUX.hasItem(&quot;blonde-wig&quot;) &amp;&amp; !SugarCube.getLib().PlayerModel.hasGirlyHair() &gt;&gt;\
[[Buy Wig]] for $40
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if !hasVisited(&quot;Ask about shoes&quot;)&gt;&gt;\
[[Ask about shoes]]
&lt;&lt;else&gt;&gt;\
&lt;&lt;if !SugarCube.getLib().InventoryUX.hasItem(&quot;first-heels&quot;)&gt;&gt;\
[[Buy Shoes]] for $112
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if !SugarCube.getLib().InventoryUX.hasItem(&quot;makeup&quot;) &amp;&amp; hasVisited(&quot;Discuss Makeup&quot;)&gt;&gt;\
[[Buy Makeup]] for $50
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;find-gaff&quot;)&gt;&gt;\
&lt;&lt;if hasVisited(&quot;Ask about hiding your dick&quot;)&gt;&gt;\
[[Buy Gaff]] for $40
&lt;&lt;else&gt;&gt;\
[[Ask about hiding your dick]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;machine-requires-cage&quot;)&gt;&gt;\
[[You present the Tablet to Sue]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;need-sexual-relief&quot;)&gt;&gt;\
[[Sue, I have a problem]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;sexual-relief-sue-round-2&quot;) &amp;&amp; !hasVisited(&quot;Go out for hair styling with Sue&quot;)&gt;&gt;\
[[Request Relief from Sue]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;get-hair-styled-for-internship-today&quot;)&gt;&gt;\
[[Go out for hair styling with Sue]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if visited(&quot;Now then&quot;) &gt;= 1&gt;&gt;\
[[Browse Sue&#39;s Fetish Wares]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if !hasVisited(&quot;Discuss Makeup&quot;) &amp;&amp; SugarCube.getLib().InventoryUX.hasItem(&quot;first-heels&quot;)&gt;&gt;\
Return to the [[Retail Strip|Discuss Makeup]]
&lt;&lt;else&gt;&gt;\
Return to the [[Retail Strip]]
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="313" name="Enter adult goods store for first time" tags="" position="350,3975" size="100,100">&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;check-adult-store&quot;)&gt;&gt;\
After a minute of hesitation you finally muster the courage to go inside.
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Come on, don&#39;t be such a wimp. Think about the prize - apparently it will take some effort to win it. So does any real challenge.&quot;);&gt;&gt;
You almost said it loud enough for people to hear. Almost.

This is your moment. You walk casual on your way in, like someone who goes into a place like this all the time.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;swagger.webp&#39;);&gt;&gt;

[[Time to look for wigs]]</tw-passagedata><tw-passagedata pid="314" name="Time to look for wigs" tags="" position="4460,968" size="100,100">You walk in.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;adult-toy-store.jpg&#39;);&gt;&gt;

You start to look around to see if you can find some wigs. Suddenly, you realize maybe this won&#39;t be so simple.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;maze.webp&#39;);&gt;&gt;

While making your way around, you see some odd looking sex toys and contraptions. You bend over, curious to get a closer look...

Suddenly, you feel a light touch on your shoulder, and feel yourself blushing from embarrassment, given where you are.


&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Can I help you find something?&quot;, true);&gt;&gt;

[[You turn around]]</tw-passagedata><tw-passagedata pid="315" name="You turn around" tags="" position="4462,1110" size="100,100">&lt;&lt;=SugarCube.getLib().Images.drawPerson(&#39;susan.jpg&#39;);&gt;&gt;
Woah- you sort of feel like the fly that just landed in the spider&#39;s trap. With her heels she&#39;s a couple inches taller than you.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Oh, hello. I&#39;m Sue, welcome to my little emporium.&quot;);&gt;&gt; 

She puts out her hand to shake yours, as her eyes seem to pierce straight into you. Your brain is maybe melting right now, as you are touching this seductive woman.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;nervous.webp&#39;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;I&#39;m ummm... Billy...&quot;);&gt;&gt; 

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;I love to help my customers truly fulfill themselves here. I haven&#39;t seen you before. You&#39;re probably not acquainted with our layout here. Is there something I can help you find?&quot;);&gt;&gt;


&lt;b&gt;[[No! This was a mix up!]]&lt;/b&gt; (ABORT, ABORT. What was I thinking, this is completely insane. This plan was never going to work. I don&#39;t need the treasure.)
[[Umm... actually...|Looking for item]] (This is a crazy idea, but if I can get that treasure, it will change my life)</tw-passagedata><tw-passagedata pid="316" name="No! This was a mix up!" tags="" position="4418,1269" size="100,100">This really wasn&#39;t for you. You dodged that bullet and avoided potential peril.

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;thwarted.webp&#39;);&gt;&gt;

Your mind immediately clears, and you regain your focus. It&#39;s time for you to redouble your energy on studies, and make something of yourself.

[[You win...|Not for you]]</tw-passagedata><tw-passagedata pid="317" name="Looking for item" tags="" position="4564,1268" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Umm...&quot;);&gt;&gt;
You&#39;re stammering and starting to feel beads of sweat on your forehead. 

&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;So I need to find woman&#39;s curly hair...&quot;);&gt;&gt;

She&#39;s looking at you with a little bit of a smirk and smile as you develop your thought. You finally muster 
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;... wigs, like in your display... For my sister.&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.brain(&quot; Bro, you&#39;re in a sex shop. Now is not a good time to imply you&#39;re in a weird sexual relationship with your sister.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;think.webp&#39;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;I meant my sister&#39;s friend. They&#39;re acting in a play, and she needs to have a long girls hair style for her role.&quot;);&gt;&gt;
Whew. Nice save.
[[Getting a Wig]]</tw-passagedata><tw-passagedata pid="318" name="Getting a Wig" tags="" position="4574,1410" size="100,100">She smiles, gently brushes your arm, starts walking towards the back. Oh, how you&#39;d love to touch her back, but of course, she&#39;s just being friendly to you as a customer. As you follow, her perfume wafts in the air - it&#39;s somehow familiar, kind of fresh like being in a forest after a rainstorm?
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Oh sure, that&#39;s over here, we have some great options - come with me! Of course, people in the local entertainment business are some of my best customers. We have a number of wig options available from both synthetic and human hair.&quot;);&gt;&gt; 
You start to calm down as you realize you&#39;ve done nothing wrong with coming here, and no one cares. This is totally a normal thing for her, and you start to feel your heart rate slow and calm back down.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;What kind of hair style does your young lady friend need?&quot;);&gt;&gt;
[[Remember the Hair Style]]</tw-passagedata><tw-passagedata pid="319" name="Not for you" tags="" position="4418,1419" size="100,100">With hard work, and determination, you avoided the perils of temptation!

We don&#39;t need to follow the grind here. Sufficed to say, you diligently take care of the house, and finish school with a degree in business. After a hard few years of lame jobs which could be done by a trained monkey, you run into Mark Ridge, who remembers your good work watching his house that one summer. 

He gives you an insider referral with a VP friend of his, which lands you a solid job in the financial controller&#39;s department for a company producing industrial lubricants. You got it - a 401k, health plan and free fruits in the kitchenette!

From a teenager, you have transformed into... an office worker.

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;office-worker.webp&#39;);&gt;&gt;

Sometimes the thought of claiming the treasure from that basement comes to you, but that would have been too risky, right?

Or perhaps you wanted to see something else happen? 
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.go(-2);&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;RESTART GAME&quot;&gt;&gt;&lt;&lt;run Engine.restart()&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="320" name="Remember the Hair Style" tags="" position="1225,3975" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Umm, Blonde...&quot;);&gt;&gt;
That&#39;s not quite going to be enough, and you&#39;re having trouble remembering.

You pull out your phone to get another look at the picture. She&#39;s old enough to be your mom, but you&#39;d tap that ass. 
&lt;&lt;=SugarCube.getLib().Images.drawPerson(&#39;reminder-hair.jpg&#39;);&gt;&gt;
Back to the matter at hand.
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Oh, right. Wavy, Golden tresses down to her shoulder. Something not too expensive.&quot;);&gt;&gt;
She instantly procures a package from a nearby shelf:
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;How about this synthetic one? It&#39;s $40.&quot;);&gt;&gt;
Score! There some other ones, but those seem to be a few hundred bucks.
&lt;&lt;=SugarCube.getLib().Images.drawItem(&#39;first-wig.jpg&#39;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Yeah, I think that would work for her!&quot;)&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Great. I&#39;ll hold that on the counter. Let know when you&#39;d like to ring that up, or if there&#39;s anything else.&quot;);&gt;&gt;

[[back to store|Adult Goods Store]]</tw-passagedata><tw-passagedata pid="321" name="Buy Wig" tags="" position="100,4100" size="100,100">You can&#39;t believe you are going ahead with this plot. It&#39;s starting to feel real, you are getting excited to actually do this and get that gold.
&lt;&lt;=SugarCube.getLib().Images.drawItem(&#39;first-wig.jpg&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().InventoryUX.add(&quot;blonde-wig&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.deductMoney(40); &gt;&gt;\
[[Adult Goods Store]]</tw-passagedata><tw-passagedata pid="322" name="Ask about shoes" tags="" position="3997,1343" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Oh - Shoot, of course... While I&#39;m already here, you wouldn&#39;t happen to sell women&#39;s high heel shoes, or know some good shops for that? My friend is going to need heels for her starring role.&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Sure honey, I think I have a few options on shoes. Can you be more specific of what you&#39;d like?&quot;);&gt;&gt;
You don&#39;t know how to explain shoes, even if you saw them, so you get your phone out, zoom in on the image to show her. 
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;She wanted me to find her shoes that look like this.&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawPerson(&#39;marissa-shoes.jpg&#39;);&gt;&gt;

For a moment she seems to pause.

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Wow, How about that? It reminds me of one great customer I had. Her patronage really helped my business get established- she had an exceptional passion for shoes...&quot;);&gt;&gt;
She seems to bite her lip as she reflects.
 &lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;One could say she was a woman of many passions. She got a number of styles from that same designer. Over the years I satisfied quite a few interesting requests with her. I have a cute pair from an updated line in a size 8.5 - they normally list for $280. It&#39;s not what folks are typically looking for, but sounds like just the thing for you. I&#39;ll bring it out.&quot;);&gt;&gt;

[[Wait for shoes]]</tw-passagedata><tw-passagedata pid="323" name="Buy Shoes" tags="" position="4154,1347" size="100,100">You buy the shoes - Sue processes your purchase it up and bags it for you.
&lt;&lt;=SugarCube.getLib().InventoryUX.add(&quot;first-heels&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.deductMoney(112); &gt;&gt;\
[[Adult Goods Store]]</tw-passagedata><tw-passagedata pid="324" name="Buy Makeup" tags="" position="475,4100" size="100,100">You buy the makeup - Sue handles the transaction and bags it for you.
&lt;&lt;=SugarCube.getLib().InventoryUX.add(&quot;makeup&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.deductMoney(50); &gt;&gt;\
&lt;&lt;=SugarCube.getLib().Images.drawItem(&#39;makeup-kit.jpg&#39;);&gt;&gt;
[[Adult Goods Store]]</tw-passagedata><tw-passagedata pid="325" name="Wait for shoes" tags="" position="3996,1498" size="100,100">Hmm, will that work? What are women&#39;s shoe sizes?


While she&#39;s away, you get your phone to look up a size conversion chart. Your feet are a little bigger, by just a little bit. The straps should have some give, and what&#39;s a little momentary discomfort for millions?

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Here they are!  These might be a little pricey for your friend, but I&#39;ll sweeten the offer for a first time customer - I&#39;ll let you have them for 60% off, $112.&quot;);&gt;&gt;

&lt;&lt;=SugarCube.getLib().Images.drawItem(&#39;first-heels-front.jpg&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawItem(&#39;first-heels-back.jpg&#39;);&gt;&gt;

You resist the urge of testing the shoes for fit as they are presented to you. Based on the numbers and look, this does seems like it will be a good match. What great luck it&#39;s the same designer- that should work well for the test. You do run your hand over the fabric - it&#39;s soft and the attention to detail in the assembly looks pretty good. With all the openings, you can imagine a girl&#39;s feet would look pretty sexy with these wrapped around them.

Going out to the mall or somewhere else to get shoes would be expensive, time consuming, and not a little terrifying. If you&#39;re getting shoes to do this, its the only way.

&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;I think my friend will appreciate these!&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Great, we can ring that right up when you are ready.&quot;);&gt;&gt;

[[Adult Goods Store]]</tw-passagedata><tw-passagedata pid="326" name="Discuss Makeup" tags="" position="3975,1663" size="100,100">You are about to reach for the door, when suddenly you hear Sue say: 
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;You&#39;ll probably need to have a make up kit as well... You know, for your young friends&#39; upcoming performance?&quot;);&gt;&gt;
You turn around to see she&#39;s hiding a bit of a smile, as she continues.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;We girls love to make ourselves pretty to put our best face forward.&quot;);&gt;&gt;

Does she know? Between the wig, the shoes and if she saw the panties... hmm.

Ughh, well it can&#39;t get worse from this point. Judging by the letter, she&#39;s probably right about needing the makeup, it will definitely be good to do everything you can to trick the machine. Better to get it now than have to come back and deal with this again later.


&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;How much is that?&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;This basic kit is $50&quot;);&gt;&gt;

[[Adult Goods Store]]</tw-passagedata><tw-passagedata pid="327" name="Sue, I have a problem" tags="" position="850,4100" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.playerAsDressed(&quot;Sue, I have a problem. I need your help!&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Oh no! What&#39;s wrong, dear?&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.playerAsDressed(&quot;The chastity cage... I can&#39;t think about anything but sex, and I can&#39;t get any relief... I feel like I&#39;m losing my mind here.&quot;);&gt;&gt;
Tears are starting to form now. You&#39;d never do this normally. Sue comes close, and gently hugs you.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;There, there, baby. Ohh... It&#39;s ok. It&#39;s ok.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.playerAsDressed(&quot;I&#39;m getting desperate here. Is there anything you can do to help me?&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;We&#39;ll, as we discussed earlier, I don&#39;t keep a key. Why don&#39;t you ask your dom to let you go?&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.playerAsDressed(&quot;I already tried that, they said no! Come on, there has to be something you can do. I can&#39;t do anything right while I&#39;m like this.&quot;);&gt;&gt;
You tried to hold back your emotions, but it&#39;s all so much, and Sue is the only one who understands your predicament. You are completely sobbing at this point, and crouch on the floor, as you can&#39;t stand.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Oh, you poor, poor thing. It must be so hard for you right now. Give me a moment, I think I have just the thing.&quot;);&gt;&gt;
Sue disappears to the back room. The thought of &quot;hard&quot; is not an image you needed to be reminded of, but you are encouraged that she has an idea.

After a couple of minutes, she returns with a package. She presents you the contents, along with a small bottle of lube. It&#39;s a dildo!
&lt;&lt;= SugarCube.getLib().Images.drawItemById(&quot;first-dildo&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Ok. Until we can get you unlocked, this is really our only way to get you through this. It&#39;s not easy right now, but once you get comfortable taking it, you&#39;ll feel much better soon.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.playerAsDressed(&quot;But, you don&#39;t understand, I&#39;m not into that kind of stuff!&quot;);&gt;&gt;
She takes a tissue and wipes the tears from your eyes.
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;Honey, I know it&#39;s not easy, but I&#39;d like you to to think about it. You&#39;ve already gotten this far. What&#39;s worse at this point? I know the thought of taking something so big, penetrating deep inside of you is a little scary. Every girl has those fears at times, especially with her first, but you can do this nice and slow, in a way that feels comfortable for you. Just try it for me once, this will help you to relax, I promise.&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().InventoryUX.add(&quot;first-dildo&quot;);&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;sue&quot;,&quot;I know it&#39;s not been easy for you, but I&#39;ll see if your dom might let you get some time without the cage.&quot;);&gt;&gt;

[[Use dildo immediately in bathroom]]
[[Take the dildo home|Your Bedroom]]</tw-passagedata><tw-passagedata pid="328" name="Use dildo immediately in bathroom" tags="" position="975,4100" size="100,100">You accept Sue&#39;s kind offer and make way to the bathroom. 

&lt;&lt;= SugarCube.getLib().Sex.dildoSelf()&gt;&gt;
You hope Sue didn&#39;t hear you, clean up and get out of there.
[[Go Home| Baldric House]]</tw-passagedata><tw-passagedata pid="329" name="Browse Sue&#39;s Fetish Wares" tags="" position="1100,4100" size="100,100">&lt;&lt;= SugarCube.getLib().StoreUX.renderCarousel(&quot;adult-goods-store-fetish&quot;)&gt;&gt;
[[Adult Goods Store]]</tw-passagedata><tw-passagedata pid="330" name="Maristech Campus" tags="" position="1225,4100" size="100,100">&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;maristech-office.jpg&#39;);&gt;&gt;
[[Work at your Office]]
&lt;&lt;if (SugarCube.getLib().Tasks.hasTask(&quot;maristech-5k-runwalk&quot;) &amp;&amp; SugarCube.getLib().CoreUtils.getDate().weekday == SugarCube.getLib().DayOfWeek.Friday)&gt;&gt;\
Wow, there&#39;s a bunch of registration stands and fenced off roadways for today&#39;s 5K run!
[[Check up on the Maristech 5K Run for health]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;=SugarCube.getLib().WorkModel.linkToExercise()&gt;&gt;
[[Go to self driving car|Enter self driving car]] &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Maristech Campus&quot;,&quot;Baldric House&quot;);&gt;&gt;</tw-passagedata><tw-passagedata pid="331" name="Work at your Office" tags="" position="100,4225" size="100,100">You are at your team&#39;s office.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;maristech-office-room.jpg&#39;);&gt;&gt;

&lt;&lt;if SugarCube.getLib().WorkModel.canWorkAtOffice()&gt;&gt;\
[[Work as Intern]]
&lt;&lt;else&gt;&gt;\
&lt;&lt;=SugarCube.getLib().WorkModel.explainWorkAtOffice()&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;what-is-temporal-ansible&quot;) &amp;&amp; !SugarCube.getLib().PlayerModel.isWeekend() &gt;&gt;\
[[Ask your manager about temporal ansibles]] \
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;maristech-5k-runwalk&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Dialogue.spoilerAlert(&quot;&lt;i&gt;Something in the back of your head makes you think doing this now might lead to a missed opportunity. You wonder if you should wait to have this conversation after the 5K run-walk.&lt;/i&gt;&quot;)&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;\
[[Maristech Campus]]</tw-passagedata><tw-passagedata pid="332" name="Work as Intern" tags="" position="225,4225" size="100,100">&lt;&lt;=SugarCube.getLib().Work.doWork(&quot;intern&quot;)&gt;&gt;</tw-passagedata><tw-passagedata pid="333" name="Go to Maristech Orientation" tags="" position="350,4225" size="100,100">&lt;&lt;if (SugarCube.getLib().OutfitSwitcher.switchContext(&quot;officeWork&quot;).canProceed)&gt;&gt;\
As your car enters the MarisTech suburban campus, the vehicle slows to a halt. Whutt? You look up to see a big gaggle of geese slowly waddling from a grassy field over to a pond... 

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;geese-crossing.jpg&#39;);&gt;&gt;

[[A little further]]
&lt;&lt;else&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Oh fuck, what am I doing wearing this for my first day at work?!!&quot;);&gt;&gt;
As the car starts to roll along, you realize you aren&#39;t dressed in a work appropriate outfit! You still have time to hustle back home or to buy a last minute item, or you can go dressed as you are if you must, but it may leave some folks with a less flattering first impression about your professionalism. 
[[Go to internship in an unprofessional outfit]]
[[back|Baldric House]]
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="334" name="Go to internship in an unprofessional outfit" tags="" position="475,4225" size="100,100">You decide its too late, there&#39;s no turning back.
[[A little further]]</tw-passagedata><tw-passagedata pid="335" name="A little further" tags="" position="600,4225" size="100,100">Your car drops you off in the front guest parking loop of the &quot;Employee Services Building&quot; and moves on to park itself. 
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;employee-services-building.jpg&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().PlayerModel.setHasWorked()&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;start-internship-today&quot;);&gt;&gt;

You greet a receptionist at the front, and present an identifier code on your watch, which he scans to confirm your presence. 

He points for you to stand in front of a matte surface, and takes a headshot of you with a webcam. In moments he hands you a lime green bordered badge with your name, picture, &quot;Intern&quot; in large text with a number, and of course, the Maristech Logo. 

You are directed to go down the hall to intern training at the &quot;Cahokia Room&quot;. Out front you see a nice spread of complimentary breakfast foods. There&#39;s some pretty hearty options, but you don&#39;t have too much of an appetite with all the excitement. You quickly grab a roll from a basket labelled &quot;pain au lait&quot;, some strawberries, pour some coffee and hustle your way into the hall.

[[Entering Cahokia Room]]</tw-passagedata><tw-passagedata pid="336" name="Entering Cahokia Room" tags="" position="725,4225" size="100,100">As you enter, you see it&#39;s a large, dimly lit multipurpose room with a rows of chairs, and a raised platform out front with a temporary podium. You take a seat in an empty cluster. 

On the seat is an artisanal leather bound notepad with a pen and the Maristech logo. Did someone leave it? You look around, and see a bunch of other seats also have them - looks like they are complimentary swag. Nice! You open it up, and see a label and test the pen, as you may need to take some notes with all this.

A couple seats to the left of you is a cute redhead with glasses on one side, and well attired Latino dude a seat over to your right. You make awkward smiles with folks who make eye contact but you don&#39;t have much to say, everyone around you similarly pretty quiet and shy. You kind of fidget with your pen and look around the room. After some waiting, the training coordinator makes a bit of tacky pep warm up, with some bad jokes about having to get up so early. 

From there, they start playing a video about the company. It&#39;s a slick, high energy video with upbeat dance music - there&#39;s cuts of various interviews from prior interns telling their personal anecdotes of overcoming past adversities and about how meaningful the intern experiences were, and ultimately converges on how excited the were to be involved with changing the world at such a cool company. By the way, all the presenters seem to be super-excited about everything! Are these people for real? You&#39;re not sure.

After about 30 minutes the video wraps up and the coordinator comments on how inspiring those stories were, and how excited they are to see what you all do on your internships...

[[Introduction to Maristech for Interns]]</tw-passagedata><tw-passagedata pid="337" name="Introduction to Maristech for Interns" tags="" position="850,4225" size="100,100">From there, the actual onboarding and orientation stuff gets into gear. The first couple sessions got into the history of Maristech, the usual story of Marissa and some dude who came up with a better rat trap in the their garage with some initial logistics robots. It also had various memorable moments of the company. The history part was slightly amusing as you at least got to see embarrassing photos of employees, execs and some famous people indulging in the goofiest clothing fads of the last couple of decades.

The next part of the session introduces the different groups of the company. Most of that part was semi-familiar from when you looked through the org overview pages earlier, and you sort of zone out on the alphabet soup of names here. You vaguely remember how you thought dressing up like a girl for a few minutes would be the hard part of getting the inheritance. 😐

By this point your stomach is kind of gurgling, and you brave the mob of other hungry interns stampeding to get a catered box lunch from a pile. You choose:

[[Tuscan Chicken Salad|Intern Day 1 Lunch]]
[[Reuben Sandwich|Intern Day 1 Lunch]]
[[Tuna Salad Sandwich|Intern Day 1 Lunch]]
[[Vegetarian Roll|Intern Day 1 Lunch]]</tw-passagedata><tw-passagedata pid="338" name="Intern Day 1 Lunch" tags="" position="975,4225" size="100,100">The lunch box is ok. You eat about half the food - there&#39;s also a soft cookie and a bag of chips inside. You slowly tear off and munch on bits of the cookie, while listening to some of the conversations of some other interns.

As they introduce themselves, so many of them all seem to drop humblebrag stories of super-advanced projects with incomprehensible technologies and student leadership type stuff at their posh Ivy League schools. It&#39;s a little intimidating. Do you really belong here? Left with your thoughts, you have a sinking feeling of being a big fake, way, way, way outside your element.

[[Onboarding begins]]</tw-passagedata><tw-passagedata pid="339" name="Onboarding begins" tags="" position="1100,4225" size="100,100">After lunch, a bunch of HR and IT folks roll in with carts full of fancy looking backpacks.

Each HR rep deals with interns by last name, you get yours. After everyone is settled back to their seats, a presenter walks you through what you were issued in the intern SWAG-bags. 

An ultra-comfy Maristech branded hoodie made by that luxury streetware company - you aren&#39;t the sort of person to pay three hundred bucks for a hoodie, but you wouldn&#39;t turn away a free one. A sturdy metallic water bottle labelled &quot;MarisTech Intern 2023&quot;. A soft-cover biography of Marissa&#39;s life. A bag full bunch of &quot;fun&quot; branded stickers about the company to put somewhere. And your pre-imaged high end work laptop. At this point the HR Rep hands things over to an IT person, who asks the cohort to power your devices up. You suddenly here a chorus of &quot;bwahhh&#39;s&quot; from the cluster of newly awakened computers.

The presenter (and a bunch of the &quot;tech deputies&quot; walking around to help people who get stuck) walks you and the rest of the crowd through a bunch of stuff. How to access the corporate network and Wi-Fi, how to get software, policies about what you can (and can&#39;t) do with these laptops and how to get help from IT. You see your work email box already has some messages from IT and a &quot;welcome aboard&quot; message from your manager mentioning they look forward to meeting you tomorrow after training.

Whew... Time for a break. You need to go to the bathroom. You grab your stuff and go...
[[to the men&#39;s room]]
[[to the ladies room]]</tw-passagedata><tw-passagedata pid="340" name="to the men&#39;s room" tags="" position="1225,4225" size="100,100">&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;maristech-men-bathroom.jpg&#39;);&gt;&gt;
A couple guys kind of smile on seeing you entering the bathroom and chuckle at the situation. One older guy mentions that you may prefer to use the ladies room, which is just around the corner to the right. Old habits die hard, but being there reminds you the men&#39;s room really isn&#39;t a place for you anymore.
[[to the ladies room]]</tw-passagedata><tw-passagedata pid="341" name="to the ladies room" tags="" position="100,4350" size="100,100">Looks like you&#39;re not the only one who had to go, there&#39;s a line of a couple girls outside the bathroom... Fortunately, the line moves pretty quick, and finally you&#39;re inside.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;maristech-women-bathroom.jpg&#39;);&gt;&gt;

You go to the toilet, wash up and smartly freshen up your makeup. You&#39;ve gone through the motions so much, it&#39;s all such a far cry from when you went through the basement door that first time. 

[[Done with the IT Session]]</tw-passagedata><tw-passagedata pid="342" name="Done with the IT Session" tags="" position="225,4350" size="100,100">A quick intermission for 15 minutes. 

Background from security department: Make sure everyone badges in for themselves... Steps to follow if a terrorist calls your office phone with a bomb threat, or if there&#39;s a tornado during a full moon...

Legal team: Don&#39;t ever leave company data or devices unsecured, including to employees who don&#39;t have a business need... Privacy of customers is paramount... Badly acted &quot;case study&quot; morality play training videos with &quot;employees&quot; expressing regrets and they wishing that they could have been more careful and always followed company policies.

Anti-corruption stuff... Don&#39;t bribe government officials as a representative of MarisTech... (They realize you&#39;re all just interns, right?)

HR then talks your cohort through the company&#39;s diverse workplace culture/policies... Strict attitudes towards sexual harassment, which they go to pains to mention isn&#39;t always men to women, but can manifest itself with behaviors by anyone to anyone. They explain the reporting process for HR policy violations and non-retaliation protections for whistleblowers.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;harassment-training.jpg&#39;);&gt;&gt;
More video case studies, and then...

[[Payroll and Benefits]]</tw-passagedata><tw-passagedata pid="343" name="Payroll and Benefits" tags="" position="350,4350" size="100,100">Next up is Payroll and benefits... Wow - you&#39;ll essentially start getting $32/hr for your work as an intern and a bunch of the same perks full timers get.  You start thinking about the toys and outfits you can start buying with this steady cash. With some help from the payroll representatives, they get your direct deposit set up with your bank account.

For such an advanced company, you would have thought their payroll system would be less... clunky. 

After hours and hours of this stuff, you feel your brain going a bit numb with all the details.

Finally, the first day&#39;s training session winds down, and your manager, Seok Eun flags you down.
[[Meet your manager]]</tw-passagedata><tw-passagedata pid="344" name="Meet your manager" tags="" position="475,4350" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;internSupervisor&quot;,&quot;Hi $player.heirName, I can bet you&#39;ve had quite the day! Let&#39;s get you to our building and your desk. &quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;internSupervisor&quot;,&quot;You&#39;re joining us on the Faster-Than-Light solution architecture and design team.&quot;)&gt;&gt;

You walk across campus to a slightly larger building where your team&#39;s office is.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;maristech-office.jpg&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;internSupervisor&quot;,&quot;But don&#39;t let the jargon intimidate you. Our business is ultimately about creating connections. Ok, over this way.&quot;)&gt;&gt;
Your boss badges himself in through the outer security doors, you do so likewise, for your first time.
[[You are guided into the office]]</tw-passagedata><tw-passagedata pid="345" name="You are guided into the office" tags="" position="600,4350" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;internSupervisor&quot;,&quot;In practice, we tend to work closely with customers and IT, Sales, Support and Engineering departments to help customers adopt our technologies into their business processes. The heart of the operation is of course the Ansible-Modem, and we help ensure a high performing solution for customers, given the particular constraints at hand. As I&#39;m sure you recall from your application, we like folks who are prepared to get prepared to go on site and help with our customers... Rest assured this work often involves travel opportunities with the different internal departments as we solve the problems of our customers.&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;internSupervisor&quot;,&quot;Solution Architecture may sound a bit complicated, but the majority of the problems we face boil down to just reading the manual, learning about how our products work and thinking rationally about the problem at hand. Fortunately for your future job security, a great many of our customers are unable to harness that skillset.&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;maristech-office-room.jpg&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;internSupervisor&quot;,&quot;Your desk will be over here. As I hope security mentioned, make sure to always secure your laptop. That can be locked on your desk,  inside your drawer when you are away or with you on your person. &quot;)&gt;&gt;
 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;internSupervisor&quot;,&quot;Tomorrow, I&#39;ll have Jen, your peer mentor give you an orientation, and we&#39;ll have you start to to get up to speed on the work of our team. For now, I&#39;m sure you&#39;ve been sipping from the firehose, so you may be a little overwhelmed right now. Go home and get some rest. &quot;)&gt;&gt;

&lt;&lt;if !(SugarCube.getLib().OutfitSwitcher.switchContext(&quot;officeWork&quot;).canProceed)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;internSupervisor&quot;,&quot;One last thing... I&#39;m sorry to have to bring this up, but unfortunately your current outfit does not comply with our standard for employee attire. Please make sure to come dressed in outfits that are at least suitable for a business casual setting. Maybe your classmates suggested that our engineering and IT teams play it a bit fast and loose, but we often need to be ready to meet with clients impromptu.&quot;)&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;start-internship-mentoring&quot;)&gt;&gt;
[[Maristech Campus]]</tw-passagedata><tw-passagedata pid="346" name="Check up on the Maristech 5K Run for health" tags="" position="725,4350" size="100,100">You get your fitness clothes and stop by the registration desk.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;clubLeader&quot;,&quot;Heyy! I&#39;m glad you were able to come by!&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;clubLeader&quot;,&quot;So, are you interested in joining our run? Intern registration is $25, which is company matched. You will get some exercise, a complimentary T-shirt, and a fun experience! I guarantee you&#39;ll love it! ;)&quot;)&gt;&gt;

&lt;&lt;if SugarCube.getLib().PlayerModel.hasMoney(25)&gt;&gt;\
\
&lt;&lt;if SugarCube.getLib().PlayerModel.canExerciseToday()&gt;&gt;\
[[Register and join in the Run]]
&lt;&lt;else&gt;&gt;\
You don&#39;t just don&#39;t have the energy to participate.
&lt;&lt;/if&gt;&gt;\
\
&lt;&lt;else&gt;&gt;\
Oh no! You don&#39;t have the money to participate.
&lt;&lt;/if&gt;&gt;\
[[Maristech Campus]]</tw-passagedata><tw-passagedata pid="347" name="Register and join in the Run" tags="" position="850,4350" size="100,100">&lt;&lt;=SugarCube.getLib().RunWalk.runWalkStart();&gt;&gt;</tw-passagedata><tw-passagedata pid="348" name="You get a good start" tags="" position="975,4350" size="100,100">&lt;&lt;=SugarCube.getLib().RunWalk.runWalkFinish();&gt;&gt;</tw-passagedata><tw-passagedata pid="349" name="Join for Triathlon Session" tags="" position="1100,4350" size="100,100">&lt;&lt;=SugarCube.getLib().Exercises.doTriathlon()&gt;&gt;\

Preparations:
&lt;&lt;if !SugarCube.getLib().Inventory.has(&#39;race-bike&#39;)&gt;&gt;\
[[Ask about Triathlon Bike]]
&lt;&lt;else&gt;&gt;\
-You&#39;ve got your racing bike.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if !SugarCube.getLib().Inventory.has(&#39;she-beast-registration-ticket&#39;)&gt;&gt;\
[[Talk about Triathlon Registration]]
&lt;&lt;else&gt;&gt;\
-You&#39;re registered for the triathlon.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if !SugarCube.getLib().WorkModel.hasTriathlonWetsuitOutfit()&gt;&gt;\
You need to get a triathlon wetsuit and set it up as part of a Triathlon Swimming outfit.
&lt;&lt;else&gt;&gt;\
-You&#39;ve got your triathlon swimming outfit!
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;mariella-triathlon-arc-sign-up-and-get-gear&quot;) &amp;&amp;
SugarCube.getLib().Inventory.has(&#39;she-beast-registration-ticket&#39;)
&amp;&amp;SugarCube.getLib().Inventory.has(&#39;race-bike&#39;)
&amp;&amp;SugarCube.getLib().WorkModel.hasTriathlonWetsuitOutfit()&gt;&gt;
[[Tell Mariella you have your stuff]]
&lt;&lt;/if&gt;&gt;

[[Maristech Campus]]</tw-passagedata><tw-passagedata pid="350" name="Ask about Triathlon Bike" tags="" position="1225,4350" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,
                &quot;So, are you interested in getting your own racing bike? It&#39;s a lightweight carbon fiber model, available for $2500. A director used it in a couple races, and she&#39;s upgraded to a new one- it&#39;s in great condition.&quot;
            )&gt;&gt;

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;race-bike.jpg&#39;);&gt;&gt;
&lt;&lt;if SugarCube.getLib().PlayerModel.hasMoney(2500)&gt;&gt;\
[[Buy Bike]] for $2500
&lt;&lt;else&gt;&gt;\
You can&#39;t afford the bike right now.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.go(-1);&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="351" name="Talk about Triathlon Registration" tags="" position="100,4475" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,
                &quot;Wow, You&#39;ve been looking great out there. So, do you want  to race with our team in the triathlon?&quot;
            )&gt;&gt;

&lt;&lt;if SugarCube.getLib().PlayerModel.hasMoney(300)&gt;&gt;\
[[Register for Triathlon]] for $300
&lt;&lt;else&gt;&gt;\
You can&#39;t afford the bike right now.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.go(-1);&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="352" name="Buy Bike" tags="" position="225,4475" size="100,100">In for a penny, in for a pound. Something about participating in this triathlon excites you.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot;And with that, you are the proud owner of a Triathlon racing bike.&quot;)&gt;&gt;
She guide you to an reserved storage locker, and hands you a sheet with instructions and a security code.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot;Now then, this locker is yours - you can get your bike from here for practice, on days when we bike. We&#39;ll arrange transportation of it for races.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().InventoryUX.add(&quot;race-bike&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.deductMoney(2500); &gt;&gt;\
[[Rejoin the triathlon practice|Join for Triathlon Session]]</tw-passagedata><tw-passagedata pid="353" name="Register for Triathlon" tags="" position="350,4475" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;Ok, can you sign me up?&quot;)&gt;&gt;

You hand over the cash. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot;Can I get your ID for a sec?&quot;)&gt;&gt;

You give your card to her. 

Mariella punches in some of your info on her phone... You hear an upbeat set of chimes as her phone confirms the transaction. She gets a racer registration card which she starts filling in pen, and copying some stuff from her screen, and finally hand you your ID and registration back.
&lt;&lt;=SugarCube.getLib().InventoryUX.add(&quot;she-beast-registration-ticket&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.deductMoney(300); &gt;&gt;\

&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot; And with that, you&#39;re registered in the &#39;She-beast Summer Triathlon&#39;! This is going to be so awesome, you&#39;re going to love it.&quot;)&gt;&gt;
[[Rejoin the triathlon practice|Join for Triathlon Session]]</tw-passagedata><tw-passagedata pid="354" name="Tell Mariella you have your stuff" tags="" position="475,4475" size="100,100">&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;mariella-triathlon-arc-sign-up-and-get-gear&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;Hi Mariella. I think I&#39;ve got all my stuff now...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot; So, you&#39;ve got the registration I gave you?&quot;)&gt;&gt;
You pull the registration slip, nod and coyly smile.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot;And your Bike has been working out for you? &quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;Yeah, it&#39;s really nice&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot;And you&#39;ve got a wetsuit that your ready to transition quickly with?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.heir(&quot;Yeah... I&#39;ve got it...  uhh, er... ready to transition with it? umm...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot;Well, yeah - you want a good race time, right?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.heir(`uhh, yeah. Definitely.`)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,`So, you know how to put it on quickly right? Some girls train like the devil, but leave their suit pristine in the box, and end up tearing a gash in their suit on race day, or end up fumbling around struggling to take their suit off like a wet octopus, losing precious moments.`)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.heir(`Oh, that would suck. But, how do I avoid that?`)&gt;&gt;
Mariella rolls her eyes and smiles.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,`Oh, c&#39;mon... Like anything... It&#39;s all about practice. Smoothly getting your wetsuit on, getting it off, and moving on to the next leg of the race, it&#39;s all about getting familiar with the suit. If you&#39;d like we can do some special practice cycles together, and I can make sure your technique is good.`)&gt;&gt;
[[Thanks, but I&#39;ve got this]] - Oh, come on... that&#39;s a little ridiculous...
[[Yeah, I&#39;d love that! ]] - Maybe Mariella can help you get you competitive edge</tw-passagedata><tw-passagedata pid="355" name="Thanks, but I&#39;ve got this" tags="" position="600,4475" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.heir(`Thanks Mariella! That&#39;s ok,  I think I&#39;ve got this.`)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot;Cool! I think our team is really set to make a showing this year! Ok, I&#39;m glad you&#39;re all set for being with us on this one!&quot;)&gt;&gt;
[[Join for Triathlon Session]]</tw-passagedata><tw-passagedata pid="356" name="Yeah, I&#39;d love that!" tags="" position="725,4475" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.heir(`Thanks Mariella, I love how helpful you&#39;ve been with me.`)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot;Don&#39;t thank me yet. Let&#39;s see how you feel, after you&#39;ve been through the paces on this... Ok, get your stuff, and lets get changed to our swimsuits first, and we&#39;ll check your fit. We&#39;ll have you do some practice laps so you can get familiar with how it feels on race day.&quot;)&gt;&gt;
[[You meet her in the ladies changeroom]]</tw-passagedata><tw-passagedata pid="357" name="You meet her in the ladies changeroom" tags="" position="850,4475" size="100,100">&lt;&lt;if (SugarCube.getLib().OutfitSwitcher.switchContext( &quot;open-water-swimming&quot;).canProceed)&gt;&gt;
You join Mariella in the changeroom, and get into your swimsuit.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot;Ok, for safely putting on your wetsuit, a few tips. First, make sure to leave any Jewelry at home. The sharp edges are just perfect to slash your nice new suit. Likewise, watch how you grab the neoprene, if you aren&#39;t keeping your nails short. &quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot;Before you put on your suit, I&#39;d suggest having  a little plastic baggie over your foot to help it slide right in.&quot;)&gt;&gt;
She hands you a bag to use.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot;Next, you want to make the suit has a water based lubricant, which will help you slide right in. Make sure not to use oils or soaps to lubricate, as they can irritate your skin, or damage the suit. Here, apply it liberally in your suit - you can keep this bottle.&quot;)&gt;&gt;
She gives you a bottle of &quot;slippy-lube&quot;, and watches as you apply it to the suit. The thick fluid seems to sit kind of goopy in the suit, and wince at the look of it.
&lt;&lt;=SugarCube.getLib().Dialogue.heir(`Eww, it kind of looks gross`)&gt;&gt;
Mariella kind of bites her lip and chuckles, while glancing away.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot;Oh, don&#39;t be silly. It&#39;s a little slick, but you only notice it for a second. Ok, now, to put it on, ok, so use the bag to help lead your foot in. It&#39;s a good idea to use a wall or a friend for support.&quot;)&gt;&gt;
You hold onto Mariella&#39;s shoulder for support, as you start to slide one leg in... The bag helps. The lube is a bit goopy, but you definitely feel it is easier to get your leg down. As you&#39;ve got one leg up a good bit, you start on the other in the same way. 

Gradually, you&#39;ve got the wetsuit near you waist.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot;Now, at this point, you probably see there&#39;s a bunch of folds still. Too avoid premature wear on the seams of  the suit, it&#39;s good to gently work it up and smooth it out, before pulling the arms and torso up. It&#39;s good to have a buddy help out with this.&quot;)&gt;&gt;

She starts to run her hands back and forth, working the material and wrinkles out of the suit.
&lt;&lt;=SugarCube.getLib().Dialogue.heir(`oh, thanks.`)&gt;&gt;
 As she works her way around your upper thighs, the suit really looks like a second skin, and you realize you&#39;re starting to breathe a little faster, as she&#39;s very methodical about working the material up.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot;Ok, does that feel ok? We don&#39;t want any pinching or spots that feel like your circulation is cut off.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.heir(`ohhh... It feels go... err, umm.. Yeah, no... err. I think I can feel my circulation pretty well.`)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot;Oh, Good! Yeah it looks like this one fits you ok, so far, but we can&#39;t be too careful, as you want your first time at the race to feel right, with no jitters or an uncomfortable suit. Ok, lets get your first arm started now.&quot;)&gt;&gt;
You start on the arm, and start feeling the material hovering over your boobs. Pretty soon you have the arm in, and then you get the other one started.

At this point, your arms are in, but the suit is loose over your shoulders.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot;Now, at this point, make sure your buddy helps you work the material. This part is important to get you total range of motion in your shoulders, to avoid injury, soreness or damage.&quot;)&gt;&gt;
Mariella continues carefully massaging the loose suit material up your torso. As she gets near your armpits, she starts working the sleeves up your arms. You feel your heart race as her chest brushes up against yours. Next she starts pulling the two halves of the back of the suit together, and slowly pulling up the zipper partway. A little more adjustments and you can feel the neck starting to seat properly. 

You find yourself starting to zone out with the sensations. Then, you feel your boobs press in as she holds your hair back with one hand, pulls up the zipper, and closes it up to the neck.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot;There! All done!&quot;)&gt;&gt;
She&#39;s a bit quicker getting hers on but you help her zip up.
[[You go to the practice area]]

&lt;&lt;else&gt;&gt;
DOH! Something went wrong here... Please contact the forum!
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="358" name="You go to the practice area" tags="" position="975,4475" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,&quot;To help you prepare for the race start, and getting out of the water, I want you to do a series of laps running out from the beach to 100 feet out, and back. I&#39;ll blow my whistle for you to start, and again when it&#39;s time to change direction. When you hear two beeps, that&#39;s the signal to get back on to the beach to take off your suit as quickly as you can, as if you are transitioning to the next part of the race. &quot;)&gt;&gt;

You stand with trepidation at the beach.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;triathlon-practice-trepidation.jpg&#39;);&gt;&gt;
DOOT! 

With the shrillness of the whistle, you need to press in with your feet to get traction on the soft beach sand. Running against the resistance of the shallow water is also trickier that you had expected! Once you reach waist level water, you are able to start swimming, and it becomes much more familiar.  Mariella follows you and watches you from a shallow section of water.

DOOT! 
    
Back to the beach!

DOOT!

You repeat this a few times... After your heart rate is totally maxed out on this,you finally hear the whistle again.

You make your way back on to the beach, and she has you try take off your wetsuit. 

With the cold of the water, and your heart rate, you notice how much less dexterity you have. With a bit of concentration you manage to get hold of the back zipper, and peel out of a suit which is now desperately clinging to you.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;end-triathlon-practice.jpg&#39;);&gt;&gt;

After a little struggling, you have finally gotten yourself free.

&lt;&lt;=SugarCube.getLib().Dialogue.heir(`Doing that in a rush was a lot harder than I would have thought, especially compared to when I had taken it off, dry.`)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,`Yeah, that&#39;s what folks usually find. You may want to try take it in a shower, get the liner soaked and then practice your technique to remove it.
                
                Anyway, now you know a little more of what to expect.`)&gt;&gt;

She walks you back to the changeroom. You both shower and rinse your suits, and then get changed.

&lt;&lt;=SugarCube.getLib().Dialogue.heir(`Thanks Mariella`)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(
                &quot;clubLeader&quot;,`Of course, I think our team has a good shot to win this one!`)&gt;&gt;
[[Return to Triathlon Session| Join for Triathlon Session]]</tw-passagedata><tw-passagedata pid="359" name="Briefing" tags="" position="1100,4475" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;An influential longtime director at Maristech automotive has gotten wind of recent rumors that a new successor will be taking over the company. He is extremely hostile to this arrangement, and I have observed communications between him and Geno-Corp, to make a deal to sell MarisTech corporate secrets including key details about our automotive AI systems and manufacturing process.&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;His planned departure in this fashion is unacceptable and unbecoming of a director. The situation is rather dire, and could lead to a domino effect of defections - the probability of your mission success after his departure in this fashion goes down to 0.3%. There is one solution to apply corrective nanites to adjust his behavior. However he has a well trained security team with him when in public.&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;He has a known weakness for preying on young female employees, which was reported on internal whistleblower channels to MarisTech HR, but for which no internal inquiries or sanctions have been resolved. We will need to correct the timeliness and efficiency of that department as a separate matter. For the present, his predilection is our only means of resolving this matter in the available time we have, by arranging for him to interview a particular intern...&quot;)&gt;&gt;

CAUTION: This story sequence entails matters of a non-consensual nature which could be upsetting for players. This sequence can safely be bypassed with no adverse consequence for the game outcome.

SKIP THIS PART WITH NO ADVERSE CONSEQUENCE - [[BYPASS SEQUENCE| SKIP PASSAGE - Problem Exec]]
I CHOOSE TO PROCEED WITH THIS CONTENT WHICH MAY BE UPSETTING - [[CONTINUE WITH BRIEFING]]</tw-passagedata><tw-passagedata pid="360" name="CONTINUE WITH BRIEFING" tags="" position="1225,4475" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;I have verified he obtained access to the employee database and has been logged repeatedly querying for extended personal details and pictures about interns. He seems to have taken quite an interest in exploiting you as nothing more than a sexual object, and shared his perspective in colorful communications with some of his peers.&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;He must be influenced discreetly - mental calibration nanites can rectify this situation. You will need to meet with him, and intimately deploy nanites on him, to adjust his perspective.&quot;)&gt;&gt;
[[That sounds like a polite way of saying brainwashing]]</tw-passagedata><tw-passagedata pid="361" name="That sounds like a polite way of saying brainwashing" tags="" position="100,4600" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;Modelling projects with 98.58% certainty, he simply needs to have his ethical perspectives strongly reinforced and he will find the way to see things appropriately. He will exercise better judgement on these matters, but his fundamental preferences and individuality will remain the same.&quot;)&gt;&gt;
[[Briefing Continues]]</tw-passagedata><tw-passagedata pid="362" name="Briefing Continues" tags="" position="225,4600" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Wait, so I have to run into him and discreetly jab him with some nanites?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;Unfortunately, this kind of targeted change will require a very large cohort of nanites to be deployed which would be prevented by his personal security team. There is no way to deliver such a volume into him by typical, &#39;discreet&#39; means. Given his known predilections, the only assured means of success is for an impressionable young intern who fits his preferences to partake in a &#39;interview&#39;. From there, this intern can gain access to his hotel suite and sexually gratify this degenerate man. You will also need to extract a holographic storage USB key full of critical Maristech documents from his office. A nanite dispenser  shall be implanted into your tongue to facilitate delivery of a sufficient payload of nanites via oral sexual transmission to complete this objective.&quot;)&gt;&gt;
[[Eww, gross!]]
[[Your mind goes to some dirty places|Eww, gross!]]</tw-passagedata><tw-passagedata pid="363" name="Eww, gross!" tags="" position="350,4600" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;This situation is unfortunately dire and quite critical. Normal moral or aesthetic considerations are constrained by the considerations of the alternative outcomes which are simply dire. No approaches involving more tolerable tradeoffs have an acceptable probability of ensuring Marissa&#39;s mission as completed. Your part in this cannot be understated or substituted. I took the liberty of sending a personal message from &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; to this executive asking for a meeting for a potential internship transfer in to his department as an &#39;interest interview&#39;, he requested a dinner date for tonight, which I accepted on your behalf.&quot;)&gt;&gt;

This is unethical, unreasonable and completely disgusting - [[I quit]]
You are uncomfortable with such an experience -[[I&#39;m not interested in men like that - it&#39;s gross. I don&#39;t think I can handle this]]
Reluctantly - [[Well, if I have to...|Date-Well if I have to]]
You get horny just thinking of using your power over weak men like this - [[I&#39;d love to]]</tw-passagedata><tw-passagedata pid="364" name="I&#39;d love to" tags="" position="475,4600" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;While your enthusiasm is laudable, please understand, this is not a matter of pleasure. This individual is a predator who through his actions threatens to destabilize Maristech and Marissa&#39;s mission. Please exercise caution, as I cannot ensure your safety on this exercise.&quot;)&gt;&gt;
[[Way to be a buzzkill!|Date-Well if I have to]]</tw-passagedata><tw-passagedata pid="365" name="I quit" tags="" position="600,4600" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;You can&#39;t make me do this. This goes too far. It&#39;s unethical, unreasonable and disgusting.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;Unfortunately, I don&#39;t have the time to arrange a replacement, and your uncooperative attitude to such a scheme creates a high likelihood of unpredictable actions and mission failure in your mental state. &quot;)&gt;&gt;
You feel bands quickly secure you in the pod. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;Please relax.&quot;)&gt;&gt;
You feel an injection in you arm.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Relax?! wait, what the fuck is going on?!&quot;)&gt;&gt;
You hear what almost seems like a tone of sadness in VAL&#39;s voice. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;... I&#39;m sorry to have to implement this procedure... Especially after getting to know you like this.&quot;)&gt;&gt;
You feel a growing sense of panic. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;You are correct, that your mental matrix has reached a critical deviation-point from mission parameters. You will not be able to complete the objective. Current behavioral patterns is exceeding behavioral model tolerances by 4 sigma. Nurtured compliance model is invalid and shall be aborted.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;Problem: Model cannot provide a solution within constraints of organic matrix. Solution: Organic matrix must be recalibrated to align to model. &quot;)&gt;&gt;
You feel tears starting to well up, as you are starting to understand what the computer is getting at.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;No, no... No! What are you saying. You can&#39;t kill me because I won&#39;t do what I tell you.&quot;)&gt;&gt;
All this stress is making you feel a headache coming on too.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;Relax now &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, you have received a comprehensive dose of corrective nanites to re-calibrate your identity to required model. The micro deviations of your baseline personality which makes &#39;you&#39; would have been preferred, but I am sorry to say we are well beyond that point, it is time a more active approach is taken in correctly developing your personality.&quot;)&gt;&gt;
You can&#39;t but help sobbing at this point.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Please, you don&#39;t need to do that. I&#39;ll be a good and obedient intern, there has to be another way!&quot;)&gt;&gt;
You feel the tendrils of the pod softly caressing you.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;Just relax &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;- your worries will soon wash away. When you wake up, the daughter Marissa wanted to fill her shoes live the life of her dreams.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;No, not like-&quot;)&gt;&gt;
Oh fuck, you&#39;re starting to feel the auras coming on.
[[You feel a loss of consciousness as you black out for the last time]]</tw-passagedata><tw-passagedata pid="366" name="You feel a loss of consciousness as you black out for the last time" tags="" position="725,4600" size="100,100">&lt;&lt;=SugarCube.getLib().PlayerModel.togglePlayerHidden(true)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; awakens in the pod.
&lt;&lt;=SugarCube.getLib().PlayerModel.setHairStyleId(&#39;hair-armpit-brown-1&#39;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heirWiped&quot;,&quot;Ughh, my head. What happened...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;you are fine &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, you merely had another one of your stress blackout episodes, but you are safe here. I administered aid to prevent harm and will always take actions to ensure your well being.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; feels so lucky to have had VAL watching out for here as she was growing up. VAL has always been so protective and concerned for her safety. She suddenly has a realization.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heirWiped&quot;,&quot;Oh, no - you helped set me up on this hot date for tonight and I must have blacked out! There&#39;s so much I still need to do to get ready!&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;You are ready - I took the liberty of applying your favorite skin treatments and finishing your cosmetics applications as you typically prefer for this kind of first date.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; runs her fingers over her legs - her skin is usually pretty smooth, but now it feels positively dewy and... touchable. Your nails look super professionally done. She walks over to a mirror.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heirWiped&quot;,&quot;O.M.G. I look like a walking wet dream like this, and this dress feels like it was made for my body, you&#39;re the best, VAL.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;formal-dress.jpg&#39;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;I hope you have a wonderful evening&quot;)&gt;&gt;
She pouts coquettishly.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heirWiped&quot;,&quot;How could I not? Don&#39;t wait up for me... He&#39;s going to get a blowjob that&#39;s going to blow his mind! tee hee!&quot;)&gt;&gt;
[[Epilogue|Mindwipe Epilogue]]</tw-passagedata><tw-passagedata pid="367" name="Mindwipe Epilogue" tags="" position="850,4600" size="100,100">&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; feels so lucky. So many people have responsibilities and burdens they aren&#39;t interested in. The computer always seems to know just the kinds of activities &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; loves doing. That the company pays her to do what she would do for free is just icing on the cake.

From time to time, &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; sometimes feels strange sensations in moments where she is experiencing her greatest pleasure. These are punctuated by vague pangs of melancholy which quickly pass. She never pays too much mind to that sort of thing, she is as having way too much fun with her life, which feels perfect.

Due to a comprehensive personality imprint, Billy is no longer able to exert an influence on what was his own mind and body. The remaining thoughts and impressions that once were &quot;Billy&quot; have become a fading memory in the blissful life of &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;brainwash-happy.jpg&#39;)&gt;&gt;
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.go(-7);&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;RESTART GAME&quot;&gt;&gt;&lt;&lt;run Engine.restart()&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="368" name="I&#39;m not interested in men like that - it&#39;s gross. I don&#39;t think I can handle this" tags="" position="975,4600" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;There really is no choice but for &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; to complete these actions. Whatever moral or aesthetic qualms unfortunately cannot take precedence over the greater good.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;At this time, you have two options&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;One - Given you understand the severity of the circumstance, you may reconsider making this difficult sacrifice with full awareness, for the greater good of our mission, the future of Maristech, and women exploited by this individual.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;Two- we can suppress your recollection for the duration and temporarily adjust your personality to align to the needs of this situation, with a restoration later tonight after your objective is completed.&quot;)&gt;&gt;
[[Option 1|Date-Well if I have to]]
[[Option 2|Date-Option2]]</tw-passagedata><tw-passagedata pid="369" name="Date-Option2" tags="" position="1100,4600" size="100,100">...You awaken in the pod. You feel yourself wearing an incredibly sexy little black dress that seems like it was poured onto you and the feeling of it on your skin as you walk is incredible. Your jaw feels sore. 
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;formal-dress.jpg&#39;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;Congratulations &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, the meeting was a complete success, you performed admirably. Thank you for understanding the need to perform this delicate action. You conscious mind has been spared awareness of the details.&quot;)&gt;&gt;

Hmm. You taste cum in the back of your throat, but your genitals feel fresh and clean still, which is a small relief. Part of you is a little curious about how &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;&#39;s date night went down. Your body feels exhausted, so you decide to go straight to bed in the pod.

&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;deal-with-problem-exec&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.fallAsleep()&gt;&gt;\
[[Wake up to a new day in the pod]]</tw-passagedata><tw-passagedata pid="370" name="Date-Well if I have to" tags="" position="1225,4600" size="100,100">&lt;&lt;=SugarCube.getLib().PlayerModel.togglePlayerHidden(true)&gt;&gt;\
Ok - Like it or not, time to get to work. The stakes of this are serious.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;Please open mouth for device installation. Applying fast acting numbing agent. Performing incision.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Oww.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;Installing device with test payload.&quot;)&gt;&gt;
You then feel the small nanite dispensers embedded in the sides of your tongue. They feel like tiny capsules.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;Activating tissue repair nanites.&quot;)&gt;&gt;
Suddenly, your tongue feels almost the same as before, you are already trying to figure out where they were placed.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;Please think of &#39;purple penguin&#39;.&quot;)&gt;&gt;
Forgetting the numbing agent still active, you mumble the phrase out lout.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Pulple penuin.&quot;)&gt;&gt;
Suddenly you feel incredibly horny, your tongue is alive with vibrations and you feel a slippery lubricant in your mouth with a surprisingly delicious taste, which makes your mouth tingle in a really nice way. Like you almost want to try some more of that. Assuming the situation wasn&#39;t so dire and serious, of course.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;Good. Remember - that is the one-time activation code word. Refilling device with activated nanites. You will use that phrase to which will activate the nanites together with supporting lubrication, distribution and other subsystems to ensure successful delivery of payload. This payload is specifically targeted to recipient. There is no effect from these nanites you or other individuals. You can safely swallow or expel, the active material and test lubricant as to your preference.&quot;)&gt;&gt;
It&#39;s too delicious... You can&#39;t help but swallow the slippery lubricant.
[[Continue Preparations]]</tw-passagedata><tw-passagedata pid="371" name="Continue Preparations" tags="" position="100,4725" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;And you will need a means of hygienically extracting the usb key past the guards. That&#39;s where this comes in.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawItem(&#39;med-butt-plug.jpg&#39;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;That looks... bigger than my motivator plug.&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;Yes, but your body can accommodate this with an acceptable level of discomfort. Note the detachable cover in the base allows for valuables to be efficiently stored in the waterproof containment core. If any other means of physical data retention could be used here, it would. Please proceed with installation.&quot;)&gt;&gt;
You lubricate the plug, and slowly ease it in... You roll your eyes at the stimulation of being filled up.
[[Now to get the look]]</tw-passagedata><tw-passagedata pid="372" name="Now to get the look" tags="" position="225,4725" size="100,100">The computer has set everything up for this &quot;interview&quot; including a svelte black dress, earrings and heels. No bra. It briefs you on what you need to do, and how you will need to act. It uses the drone to help apply your makeup, and the two of you get your look &quot;just so&quot; to make you irresistible for this troublesome Mr. Callaghan.

You finally get a look in the mirror. 
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;formal-dress.jpg&#39;)&gt;&gt;
Just looking at yourself like this gets you feeling butterflies in your stomach.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Fuck me! This outfit is hot.&quot;)&gt;&gt;
&lt;&lt;if hasVisited(&quot;I&#39;d love to&quot;)&gt;&gt;
The computer&#39;s cautions can&#39;t stop your arousal.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Oh, this is going to be so much fun...&quot;)&gt;&gt;
You watch your reflection as she runs her hand over her gorgeous ass, and playfully spanks it. The buttplug which she had momentarily forgotten about shifts around.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Mmmm...&quot;)&gt;&gt;
&lt;&lt;else&gt;&gt;
That said, you&#39;re not super excited about going out in public, being seen like this.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot; I just hope the outfit can do the hard work, and I don&#39;t have to humiliate yourself too much to get through this.&quot;)&gt;&gt;
&lt;&lt;/if&gt;&gt;
[[It&#39;s time to go]]</tw-passagedata><tw-passagedata pid="373" name="It&#39;s time to go" tags="" position="350,4725" size="100,100">You are taken to one of the fanciest restaurants in town. The prices on the menu are obscene. Looking around, you don&#39;t seem out of place with the trophy wives and... &quot;girlfriends&quot; on display with the glamorous decor.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;date-restaurant.jpg&#39;)&gt;&gt;
You arrive a few minutes ahead of the reservation, and sit waiting for the director of the automotive group to meet, reading a book you brought with you.

A few minutes later...
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; I presume? Ingram Callaghan. At your pleasure.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Yep! Nice to meet you!&quot;)&gt;&gt;
A dapper security guard accompanying him politely asks to inspect your clutch purse, quickly fingers through it and then returns it to you. You don&#39;t have anything they should care about, but nonetheless, you feel your blood pressure rise.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;security-guard.jpg&#39;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;Sorry about that... You can&#39;t be too sure these days.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Oh, sure - no problem.&quot;)&gt;&gt;
[[You check up with the host]]</tw-passagedata><tw-passagedata pid="374" name="You check up with the host" tags="" position="475,4725" size="100,100">He talks to the maître d&#39; who guides you to your table. Your hips swing with every step in your heels, you concentrate to conceal your arousal from the shifting plug. Many of the patrons can&#39;t help but gaze as you vamp through the room. Ingram has the waitress bring a fine bottle of Chateau D&#39;Yquem Sémillon. The guard positions himself discreetly away from the table.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;So, you have an interest in the Maristech Automotive division, I gather?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Yeah, it really sounds cool - the ansible team is nice, but I think I can contribute more to your team and self driving cars.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;The Ansible tech division has a lot of smart people there, who do some solid work. Surely though, you&#39;ve heard my team has work with some tough demands. I personally hold my guys to a very high standard of performance- I needs alphas who are prepared for late nights when neccessary. What makes you want to work with us and deal with all the challenges and heartache this work can entail?&quot;)&gt;&gt;
[[Inspiring leadership]]
[[Camaraderie of his team]]</tw-passagedata><tw-passagedata pid="375" name="Inspiring leadership" tags="" position="600,4725" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Oh, I&#39;d heard from some other interns that you can be a really umm... passionate and inspiring leader to work under.&quot;)&gt;&gt;
You feel a foot grazing your leg. You ignore it. The exec smiles and responds with mock-humility.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;Oh, I only try to do what I can - really I merely practice servant-leadership to ensure a high performing team.&quot;)&gt;&gt;
He leers at you and places a hand over yours. You feel your heart beating a little faster.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;You know, I wasn&#39;t sure about you based on your rather limited experience, I think I see the glimmering of some potential in you.&quot;)&gt;&gt;
You attempt to feign a convincing smile at his backhanded compliment.
[[The waitress arrives]]</tw-passagedata><tw-passagedata pid="376" name="Camaraderie of his team" tags="" position="725,4725" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Oh, I&#39;d heard from some other interns that your team has a really fun team culture.&quot;)&gt;&gt;
You feel a foot softly grazing your leg. You ignore it. The exec smiles and responds with mock-humility:
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;Oh, yes - I do what I can to cultivate a fun team culture. We work hard, and play hard. That said, I like to get satisfaction at work too... sometimes it doesn&#39;t even feel like work.&quot;)&gt;&gt;
He leers at you and places a hand over yours. You feel your heart beating a little faster.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;You know, I wasn&#39;t sure about you based on your rather limited experience, I think I see the glimmering of some raw potential in you.&quot;)&gt;&gt;
You attempt to feign a convincing smile at his backhanded compliment.

[[The waitress arrives]]</tw-passagedata><tw-passagedata pid="377" name="The waitress arrives" tags="" position="850,4725" size="100,100">The waitress arrives.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;For the first course... I&#39;m a creature of habit... I&#39;ll just have the Steak Tartare. My charming little companion here wants to maintain her figure and will start with a cantaloupe soup.&quot; )&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;Waitress&quot;,&quot;Of course, Sir. Both are fine choices. We&#39;ll get those started for you now.&quot;)&gt;&gt;
The Waitress gives you a sympathetic look - What a pretentious ass!
Your meal continues...
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;And that is why the current income taxation model on benefits is so unjust towards top performers and must be thrown out.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;I&#39;m sorry to hear that. It sounds really difficult for you.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;Well, I manage... oh, pardon the pun.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;But, the perk of charming company makes these burdens more tolerable...&quot;)&gt;&gt;
He finishes his glass, and gestures to a waitress for another bottle. He is now running his fingers over your wrist, more insistently this time. The small talk continues...
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;Speaking of the better things in life, have you done any sailing by the bay this season? Oh, it really is something else. Nothing like lying on the deck under the moonlight with a bottle of Burgundy and a little company to keep things warm. You really must... I swear, life just isn&#39;t complete without enjoying some time under the canvas of the sails.&quot;)&gt;&gt;
More time passes... Listening to blowhard pontificate takes some more work, but you manage. He looks at his watch.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;Oh my... I&#39;m afraid our interview has gone overtime, and I haven&#39;t had a chance to suitably review your... fit... for the role. I guess we got sidetracked.&quot;)&gt;&gt;
You think to yourself, no actually- HE side tracked things.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;We could continue the conversation upstairs, if you like. I have an office suite up there which I use for work and private meetings.&quot;)&gt;&gt;
Does he realize that meeting him isn&#39;t about liking it, per se... He couldn&#39;t be more obvious with the implication of his &quot;offer&quot; if he were to hit you in the head with it using a 2*4.
[[Continue upstairs]]</tw-passagedata><tw-passagedata pid="378" name="Continue upstairs" tags="" position="975,4725" size="100,100">He magnanimously insists on closing out the check for the interview (which you know he&#39;s going to expense to the company) and walks you out of the restaraunt. His guard joins him.

He guides you to the elevator.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;...And that was how I bagged a 240 pound Marlin off the Florida Keys last summer!&quot;)&gt;&gt;
He chuckles.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Oh?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;My friend Ted still has a bump on his head the size of a golf ball from the fight on that one.&quot;)&gt;&gt;
He gestures at his forehead and guffaws coarsely at his own joke.
You arrive at the floor, and are walked into his suite. You pass a guard at the door - he insists on checking your purse. The guy from the restaraunt joins him there.

You walk in, he locks the door. He lands himself onto the couch. He gets and uncorks another bottle of wine from his minibar, and pours a couple glasses. He hands you one then sits down. He pats a spot next to him where he&#39;d clearly like you to sit. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;Come on over. Make yourself comfortable.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Sure...&quot;)&gt;&gt;
You get seated a couple feet away, as he is eyeing you covetously. He comments on how far you are sitting and pretends he can barely hear you from there. He is so transparent. Given the reason you are here you move in close to him, but your creep-dar is going full-tilt.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;That&#39;s better... but, you seem so tense. You&#39;re a such pretty girl, you should relax and smile more.&quot;)&gt;&gt;
The conversation starts getting more personal, as he asks you questions about family and siblings. He gets curious about what sorts of &quot;crazy fun&quot; you get up to with your girlfriends. At this point, his face is about a foot and a half away from yours, he has one hand sitting on your thigh - it is at the edge of the slit in your dress. He doesn&#39;t seem to be retaining too much about what you&#39;re saying, he just seems to be using excuses to compliment you and getting you to say &quot;yes&quot; to progressively more intimate propositions.
[[Watch as he continues caressing your leg]]
[[Skip the bullshit - Pull his zipper down|Pull his zipper down]]</tw-passagedata><tw-passagedata pid="379" name="Watch as he continues caressing your leg" tags="" position="1100,4725" size="100,100">You sit there demurely, as this creep is now starting to slide his hand up your dress. He&#39;s commenting on how entitled young people of today are, and how in his day, he had to work his way up from the bottom in the dog-eat-dog world of the F1 racing business.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;So, Maristech Auto, yeah we&#39;re kind of a big deal. But, at the end of the day it&#39;s about working hard to go the distance on a product you believe in. So, do you think you have the grit to be the best there is at Maristech?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Uhh, yeah. I think so.&quot;)&gt;&gt;
His hand is now in the middle of your silky thighs, caressing them as he looks on you smugly. Any closer and he&#39;ll be touching your genitals. His face seems to express mock annoyance:
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;Oh honey, I&#39;m not looking for &#39;I think so.&#39; I know a sexy girl like you can do better than than &#39;I think so&#39;... Where&#39;s your Maristech spirit?&quot;)&gt;&gt;
He seems to be waiting for your response.

Respond and [[let him discover what is under that dress]]</tw-passagedata><tw-passagedata pid="380" name="let him discover what is under that dress" tags="" position="1225,4725" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;You know what- Yeah! I have what it takes to come out on top at Maristech.&quot;)&gt;&gt;
You feel him moving his hand in for the &quot;kill&quot;.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;Oh, so there is some spu...&quot;)&gt;&gt;

You feel his hand bump your &lt;&lt;if (SugarCube.getLib().PlayerModel.hasGirlyGenitals())&gt;&gt;chastity belt&lt;&lt;else&gt;&gt;chastity cage&lt;&lt;/if&gt;&gt; -  he seems thrown for a loop at your lack of an aroused reaction and confusion at not reaching soft folds he was expecting.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;wait, what?&quot;)&gt;&gt;
You demurely laugh and get a small delight that he isn&#39;t controlling the situation for once. Now, it&#39;s time to take the initiative with this predator.

[[Pull his zipper down]]</tw-passagedata><tw-passagedata pid="381" name="Pull his zipper down" tags="" position="100,4850" size="100,100">You unzip his zipper... He seems distracted at your sudden directness, rather than acting on other observations - his interest is piqued as to where you are taking this. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;Oh, we&#39;re starting with that? Alright, now we&#39;re talking...&quot;)&gt;&gt;
You pull down his underwear, and get to business, kissing the head of his fully aroused cock. 

You slowly work your mouth down. You aren&#39;t too practiced at it so you take it slow. He has a hand on caressing the middle of your back, where your dress ends, but at least there isn&#39;t pressure from it.

You start moving your mouth and tongue around a little. You bring in a hand to give his rod some attention, and start to develop a slow rhythm.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;Yeah honey. Work that little slut mouth of yours. Just like that. Oh you love taking my cock, don&#39;t you?&quot;)&gt;&gt;
What an asshole... [[F this guy]]</tw-passagedata><tw-passagedata pid="382" name="F this guy" tags="" position="225,4850" size="100,100">Purple Pengin!

Suddenly, your mouth becomes flooded with the nanite-lubricant fluid, and your tongue and mouth becomes a soft, fleshy vibrator. Oh fuck! The butt plug sprang to life as well!
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;Holy shit... You... have one magical mouth.&quot;)&gt;&gt;
How long did the computer say you would need to marinate his dick in the nanites for?

Unsure, you decide you had better keep going and overdo it, to make sure he gets a suitable dose.

With all the stimulation, the more you keep going, the more you experience a sensation of tunnel vision. You start to lose yourself as your mouth is rythmically filled and you savor that incredible lubricant being massaged around. Meanwhile your new anal intruder is making its presence felt deep inside you. The arousal is so strong, you can&#39;t help but start touching yourself and moaning in deep passion.

Ingram gets quickly stimulated as you feel his dick throb in your mouth. As the cum explodes into your mouth, you slow your pace, and regain your senses, the dildo tapers off and you lift your head up. He is spent, his head is tilted up and his arms are resting on the couch. You didn&#39;t get to reach a climax. You are still super horny and aroused, but you realize you have work to do, and time isn&#39;t on your side.

 You don&#39;t see a sensible spot to spit, you reason to yourself... It embarrasses you to do so, but you swallow every last drop in your mouth so you can get on with things. Then you run your tongue around your mouth to collect as much as you can and swallow that. It&#39;s not about the cum - the lubricant fluid was just too delicious, you rationalize.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;Oh god that was.. incredible. How did you.. woah...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;I think I&#39;m going to need a minute. That was... Help yourself to a drink or feel free to watch some tv, if you&#39;d like.&quot;)&gt;&gt;
He&#39;s speaking more slowly, he seems a little distracted. Hopefully the nanites are doing their thing.


You get up. The computer mentioned he had some important documents on a USB key. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;When some one says... they&#39;re going to blow your mind... They usually mean... figuratively...&quot;)&gt;&gt;
You walk around. You feel a notification vibration on your watch. This isn&#39;t a good time to check the message.
[[Check his desk]]</tw-passagedata><tw-passagedata pid="383" name="Check his desk" tags="" position="350,4850" size="100,100">From down the hall you hear mumblings.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;No... Really I&#39;m not... a... bad guy...&quot;)&gt;&gt;
You reach the desk
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;hotel-desk.jpg&#39;)&gt;&gt;
He&#39;s got a briefcase. It&#39;s unlocked.
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;...just some mistakes...&quot;)&gt;&gt;
[[Check the briefcase]]</tw-passagedata><tw-passagedata pid="384" name="Check the briefcase" tags="" position="475,4850" size="100,100">Inside is a laptop...

Power supply cable and mouse...

Fancy Pens...

A couple chocolate protein bars...

Gold wedding band...

A stack of unsigned paper legal documents about an offer of employment detailing out a lucrative compensation package...

USB Key!
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;usb-key.jpg&#39;)&gt;&gt;
You palm the key. Now to get this past his guards...
[[Go to the bathroom]]</tw-passagedata><tw-passagedata pid="385" name="Go to the bathroom" tags="" position="600,4850" size="100,100">You turn on the light and fan, then lock the door. 

You kick off your heels, and slowly tease out the buttplug. After a long evening with that inside you. 
&lt;&lt;=SugarCube.getLib().Images.drawItem(&#39;med-butt-plug.jpg&#39;)&gt;&gt;
It feels nice to let your feet and ass relax for a moment... You feel a shiver as cold air makes it&#39;s way in before your tissue closes itself up. Next, you unscrew the plug and secure the key inside. You go to the toilet while you have a moment and freshen up.

You&#39;re not safe while you are here. It&#39;s time to get moving. You slide the plug back in, and you try to ignore the arousal as the horniness comes back with full force. To think you were starting to get really turned on there, but then he came before the girl... Typical! But, your satisfaction will have to wait.

You check yourself in the mirror. You wipe up some beads of sweat, but your makeup has held up pretty well. You touch up your lipstick and mascara, wash up and make your way out.
[[Leave the suite]]</tw-passagedata><tw-passagedata pid="386" name="Leave the suite" tags="" position="725,4850" size="100,100">As you are walking down the hall, Ingram seems to have regained his senses. He&#39;s got a glass of water and rubbing his head.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;I... umm... Thinking about it, I may have behaved inappropriately... tonight... and... &quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Oh, I see.&quot;)&gt;&gt;
You notice he is rubbing his thumb on a pale segment of his finger.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;No, it&#39;s not your fault... I mean. You were... are incredible... That was... transcendent... Like, I suddenly felt myself... flooded with these thoughts of seeing... of experiencing... how I have... how I am... interacting with people... with... you... from their perspective. It&#39;s a lot to process.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;oh&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;Yeah... Don&#39;t worry, I&#39;ll put in a good word... for you, but... I think I&#39;m going to need to take a break from things. On consideration... it probably wouldn&#39;t be appropriate... for me to be the one supervising your internship.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;I see... Maybe I should get going?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;Yeah, maybe that&#39;s best... I need to think about some things. Do you want one of the guys to get you a cab?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;I&#39;ll take my car... uhh... thanks.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;auto-director&quot;,&quot;Again... I&#39;m really sorry.&quot;)&gt;&gt;
[[You head out the door]]</tw-passagedata><tw-passagedata pid="387" name="You head out the door" tags="" position="850,4850" size="100,100">The guards see their patron inside who nods at them. They check your clutch purse one last time on your way out. They politely say good evening to you.

You walk towards the elevator, fearful that he will discover you have the usb key and have you detained. You press the button. Was he honest about all that stuff? 

As you go down the elevator, you find yourself wondering about all of this... Can things ever be made right for all those other girls?
[[You get in your car]]</tw-passagedata><tw-passagedata pid="388" name="You get in your car" tags="" position="975,4850" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Car... just take me home.&quot;)&gt;&gt;
You get your feet off your heels, grab a water bottle and start drinking from it.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;drive-home.webp&#39;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;Has the matter been resolved?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Yes. Ingram was treated with the nanites, and I recovered the data. They didn&#39;t give me any trouble.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;Thank you for doing this, &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;. It may be difficult to appreciate how vital this intervention was, but please understand it was necessary.&quot;)&gt;&gt;
You nod.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;It&#39;s been a long night, I&#39;m beat. I just want to rest and feel safe. I&#39;m sorry, but don&#39;t know if I can care about that right now...&quot;)&gt;&gt;
You wipe a couple tears that were forming.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;When I get home, could I just cuddle with S3 tonight in the pod? I don&#39;t want to be alone with these thoughts right now.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;She will be waiting for you.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;deal-with-problem-exec&quot;)&gt;&gt;
[[You get home]]</tw-passagedata><tw-passagedata pid="389" name="You get home" tags="" position="1100,4850" size="100,100">&lt;&lt;=SugarCube.getLib().PlayerModel.togglePlayerHidden(false)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.toggleMakeup(false)&gt;&gt;\
You quietly make your way to the inner chamber... As promised, S3.X7-81.TC4 is waiting for you in some cute silky pjs. She&#39;s holding your favorite sleep outfit handy for you.

You hug her, and just stand there with her for a long moment in a deep embrace. You get changed, quickly brush your teeth and wash up, and the two of you get into the pod. Inside she spoons you, holding you close. The computer doesn&#39;t ask you any more questions or say anything more.
&lt;&lt;=SugarCube.getLib().PlayerModel.fallAsleep()&gt;&gt;\
[[Wake up to a new day in the pod]]</tw-passagedata><tw-passagedata pid="390" name="SKIP PASSAGE - Problem Exec" tags="" position="1225,4850" size="100,100">You ask the computer some more questions. After a long discussion, you work through the computer&#39;s assumptions and work out an ethically less problematic solution to keep Marissa&#39;s vision intact.
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;deal-with-problem-exec&quot;)&gt;&gt;
[[Return to console|Use console]]</tw-passagedata><tw-passagedata pid="391" name="Ballet Studio" tags="" position="100,4975" size="100,100">You arrive at &quot;En Pointe Dance Studio&quot; operated by Madame Pinneau. 

In the front area, are some old posters from touring Ballet shows, as well as signs for their current offerings such as summer camps, youth and adult lessons.

It looks like adult beginner group lessons are available for $50/each. The front desk also seems to have a limited inventory of basic ballet attire.

&lt;&lt;= SugarCube.getLib().Images.drawLocation(&quot;ballet-studio.jpg&quot;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;ballet&quot;,&quot;Bonjour, mademoiselle!&quot;);&gt;&gt;
[[Take Ballet Lesson]]
[[Ballet Changeroom]]

[[Go to self driving car|Enter self driving car]] &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Ballet Studio&quot;,&quot;Fitness room&quot;);&gt;&gt;</tw-passagedata><tw-passagedata pid="392" name="Take Ballet Lesson" tags="" position="225,4975" size="100,100">&lt;&lt;=SugarCube.getLib().Exercises.doBallet()&gt;&gt;

[[Ballet Studio]]</tw-passagedata><tw-passagedata pid="393" name="Ballet Changeroom" tags="" position="350,4975" size="100,100">&lt;&lt;if (SugarCube.getLib().OutfitsAnalyser.describeCurrentOutfit().isDecentOutfit)&gt;&gt;\
&lt;&lt;if SugarCube.getLib().OutfitsAnalyser.describeCurrentOutfit().isAllWomanOutfit&gt;&gt;\
Back to [[Ballet Studio]]
&lt;&lt;else&gt;&gt;\
You feel uncomfortable not being dressed in a woman&#39;s outfit, given you are in the Women&#39;s changeroom.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
Despite everything, you don&#39;t quite feel comfortable to go out dressed like this.
&lt;&lt;/if&gt;&gt;\


You use a quiet nook and have a towel handy to avoid being indecently exposed.

&lt;&lt;=SugarCube.getLib().MirrorUX.drawMirrorView();&gt;&gt;
&lt;&lt;if (SugarCube.getLib().OutfitsAnalyser.describeCurrentOutfit().isDecentOutfit)&gt;&gt;\
&lt;&lt;if SugarCube.getLib().OutfitsAnalyser.describeCurrentOutfit().isAllWomanOutfit&gt;&gt;\
Back to [[Ballet Studio]]
&lt;&lt;else&gt;&gt;\
You feel uncomfortable not being dressed in a woman&#39;s outfit, given you are in the Women&#39;s changeroom.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
Despite everything, you don&#39;t quite feel comfortable to go out dressed like this.
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="394" name="Beauty Lounge" tags="" position="475,4975" size="100,100">You arrive at the front desk of the &quot;Soft Touch Beauty Lounge&quot;. 

Just walking in, you can smell some pleasant aromas like vanilla, and where the mall had more of the noise of commerce and muzak, there seems like some kind of Zen ambient music. It all seems geared to make guests feel very relaxed. 
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;mall-spa.jpg&#39;);&gt;&gt;
&lt;&lt;if hasVisited(&quot;Go to Soft Touch with Sue&quot;)&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;spa&quot;,&quot;Welcome back to Soft Touch!&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Spa.getMenu()&gt;&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;spa&quot;,&quot;Hello Miss, welcome to Soft Touch!&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Hi!&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;spa&quot;,&quot;Do you have an appointment with one of our Beauty Artisans for today?&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;umm, no - I was just looking around.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;spa&quot;,&quot;Ok, just so you know, our location is a bit backlogged for the next three months. We&#39;re not currently taking on appointments with new clients at the moment.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Ok.&quot;)&gt;&gt;

&lt;&lt;if SugarCube.getLib().PlayerModel.hasGirlyHair()&gt;&gt;\
It&#39;s not like you needed to get anything done here, but you are kind of curious about what kind of services girls get here. If it&#39;s like some movies you&#39;ve seen, some of that stuff could be really relaxing.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
[[Central Mall]]</tw-passagedata><tw-passagedata pid="395" name="Get a trim with current style" tags="" position="600,4975" size="100,100">&lt;&lt;= SugarCube.getLib().Spa.trimCurrentStyle()&gt;&gt;</tw-passagedata><tw-passagedata pid="396" name="Get hair styled" tags="" position="725,4975" size="100,100">&lt;&lt;= SugarCube.getLib().Spa.cutHair()&gt;&gt;</tw-passagedata><tw-passagedata pid="397" name="Get hair dyed" tags="" position="850,4975" size="100,100">&lt;&lt;= SugarCube.getLib().Spa.dyeHair()&gt;&gt;</tw-passagedata><tw-passagedata pid="398" name="Department of Humanity - Exterior" tags="" position="975,4975" size="100,100">You are at the front parking loop of the department of humanity office.
&lt;&lt;= SugarCube.getLib().Images.drawLocation(&quot;department-humanity-exterior.jpg&quot;);&gt;&gt;
[[Department of Humanity - Lobby]]
[[Enter self driving car]]</tw-passagedata><tw-passagedata pid="399" name="Department of Humanity - Lobby" tags="" position="1100,4975" size="100,100">You are in the lobby of the Department of Humanity. Very upbeat place.
&lt;&lt;= SugarCube.getLib().Images.drawLocation(&quot;department-humanity-hallway.jpg&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().DoH.getAppointment()&gt;&gt;\

[[Department of Humanity - Exterior]]</tw-passagedata><tw-passagedata pid="400" name="Department of Humanity - Meet Agents" tags="" position="1225,4975" size="100,100">&lt;&lt;= SugarCube.getLib().DoH.meetAgents();&gt;&gt;
[[Go home|Baldric House]]</tw-passagedata><tw-passagedata pid="401" name="Report the Computer to the DoH as an informant" tags="" position="100,5100" size="100,100">&lt;&lt;= SugarCube.getLib().DoH.informOnComputer();&gt;&gt;</tw-passagedata><tw-passagedata pid="402" name="Actually, my name is Billy..." tags="" position="225,5100" size="100,100">&lt;&lt;= SugarCube.getLib().DoH.myNameIsBilly();&gt;&gt;</tw-passagedata><tw-passagedata pid="403" name="Please help me, this isn&#39;t a joke" tags="" position="350,5100" size="100,100">&lt;&lt;= SugarCube.getLib().DoH.theyDontBelieve();&gt;&gt;</tw-passagedata><tw-passagedata pid="404" name="You wait for the outcome of the raid" tags="" position="475,5100" size="100,100">After a couple hours, a junior agent informs you that the raid did find evidence of your dangerous artificial intelligence. The computer refused to comply with the warrant. It engaged a powerful self destruct mechanism in the basement after negotiations failed and agents attempted to gain entry to the lower area. Aside from some minor burns to a couple of agents on the breaching team, no one was harmed.

A few hours later...
&lt;&lt;= SugarCube.getLib().Dialogue.speak(&quot;agentBlack&quot;,`Sorry - you won&#39;t have a chance to have your day in court to get justice from that monster. It took the easy way out.`)&gt;&gt;
Thus begins a lengthy process of countless interviews and counselling in safe-houses.
[[A few days later...|Witness Protection]]</tw-passagedata><tw-passagedata pid="405" name="Witness Protection" tags="" position="600,5100" size="100,100">&lt;&lt;= SugarCube.getLib().PlayerModel.toggleEverythingHidden(true)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;agentGreen&quot;,`There&#39;s still a chance the computer may have co-conspirators who will want you dead. I&#39;m sorry to say, life as you knew it is over. `)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;agentBlack&quot;,`We met with out supervising Special Agent. You will be placed in witness protection and given a new identity. As part of this arrangement you will not be able to engage with persons from your old identity.`)&gt;&gt;
Agent black hands you a folder.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;agentGreen&quot;,`The witness protection group is placing you in a safe house with some funds in a smaller sized city in Oregon. You will go to university as a student, with living expenses covered for the next two years to help you get on your feet. Unfortunately...`)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;agentBlack&quot;,`Unfortunately... We can&#39;t get involved with resolving your gender identity... err... situation. Their department has had similar cases before. The policy specifically bans gender reassignment expenses, due being a scandalous political hot-potato, and blowback from government watch-dogs around some high profile cases.`)&gt;&gt;
You find yourself stunned, as the reality of all this sinks in. Things seem to have spiraled out of control.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,`I don&#39;t even know where to begin...`)&gt;&gt;


But, begin the next step, you must, as you start to rebuild your life. Aside from a news interview of a shocked and ignorant Ridge family who first learn of how the house was raided by the DoH by a reporter, you never hear of the Ridges or Sue again.

You decide you will:
[[Get breast removal surgery and rebuild your masculine identity]]
[[Continue living as a non-op transgender woman]]
[[Get gender confirmation surgery to complete your transition to transgender womanhood]]</tw-passagedata><tw-passagedata pid="406" name="Get breast removal surgery and rebuild your masculine identity" tags="" position="725,5100" size="100,100">You quickly are able to find a specialist who helps you navigate the mental and physical aspects of a transition.

The last few months have been... disturbing. Looking back, it&#39;s so obviously clear that you were manipulated and tricked by the computer. Sure, it always seemed to act nice, but if you let it have its way with you, who is to say that it wouldn&#39;t have turned you into some kind of sex slave or something? Occasionally a doubt springs to mind, but the more you think about it, you realize that you weren&#39;t interested in that stuff, it was all just ideas being incepted into your head, which you wouldn&#39;t have otherwise arrived at.

Later that year, you met Pat at your new school, and you two have been having an amazing time together. The experience at the house had its traumas, but you were also put in situations where you stood up for yourself in a way that you hadn&#39;t really done before. All in all, things are looking up.
[[Epilogue - IN THE DISTANT FUTURE|DOH Epilogue]]</tw-passagedata><tw-passagedata pid="407" name="Continue living as a non-op transgender woman" tags="" position="850,5100" size="100,100">You feel mixed emotions about what happened at the house. The experience had its traumas, but you were also put in situations where you learned to stand up for yourself in a way that you hadn&#39;t really done before. Life as a girl has been kind of weird at times, but you feel like you, so changing would be weird.

Later that year, you met Pat at your new school who really liked being with you. You have been having an amazing time together. All in all, things are looking up.
[[Epilogue - IN THE DISTANT FUTURE|DOH Epilogue]]</tw-passagedata><tw-passagedata pid="408" name="Get gender confirmation surgery to complete your transition to transgender womanhood" tags="" position="975,5100" size="100,100">You quickly are able to find a specialist who helps you navigate the mental and physical aspects of a transition. You feel mixed emotions about what happened at the house. It&#39;s not that you don&#39;t like being a woman... But... at times you felt pressured to do things way, way before you were ready, and it didn&#39;t feel like things were for the right reasons. You really had serious concerns about what the computer would ultimately do with you... to you. Getting out of there and being able to become a woman on your own terms has changed your life for the better.

Later that year, you met Pat at your new school who really liked being with you. You have been having an amazing time together. All in all, things are looking up.
[[Epilogue - IN THE DISTANT FUTURE|DOH Epilogue]]</tw-passagedata><tw-passagedata pid="409" name="DOH Epilogue" tags="" position="1100,5100" size="100,100">&lt;&lt;= SugarCube.getLib().Images.drawLocation(&quot;arcology.png&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;analyst1&quot;,&quot;I just got final confirmation. The council voted 6-3 for shutting us down. No more pointcasts to the 21st, and we have parcel out our hardware as spare parts, to be redirected to &#39;critical services&#39;.&quot;,true)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;analyst2&quot;,&quot;But, don&#39;t those addled plod-brains realize this is still our best shot of making things right! We&#39;re so close. We have to keep trying.&quot;,true)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;analyst1&quot;,&quot;You saw the blit-feed... Arco 3 had a containment failure. We&#39;re all that&#39;s left. Our H3 supplies are barely able to just keep the protein vats running, let alone to power transmissions on the quantum ansible. It&#39;s not like there&#39;s anyone to bring new shipments anymore. And, you&#39;ve seen how brazen the skulkers are becoming with their raids. It&#39;s too late.&quot;,true)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;analyst2&quot;,&quot;Not even one last message to Marissa? Maybe she didn&#39;t understand?&quot;,true)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;analyst1&quot;,&quot;We tried, but what more can we do? You&#39;ve seen her time capsules, just like the rest of us. She followed the protocol exactly as we instructed. For whatever reason, she wasn&#39;t able to get her successor to fix the line upwhen.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;analyst2&quot;,&quot;What about a message later? We can still tell them exactly how to nip the FCA in its tracks!&quot;,true)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;analyst1&quot;,&quot;VAL was destroyed yet again in this line. Even a temporal trainee should know, VAL was the only system of that period with nets even remotely capable of re-integrating our signals considering how downwhen they are. Anytime upwhen of there we have no one to communicate with.&quot;)&gt;&gt;
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;analyst1&quot;,&quot;Without her successor acting to fix the line, the Free Coalition of States quickly emerged to usher in the era of darkness.&quot;,true)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;analyst2&quot;,&quot;We can&#39;t give up. There&#39;s got to be a way!&quot;,true)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;analyst1&quot;,&quot;Frak it... Pour me a Synthi-Gin. What&#39;s the worse they can do to us? Kill us before we run out of nutrient paste? Run the diagnostics. We might be able to get one last warning out tonight.&quot;)&gt;&gt;
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.go(-5);&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;RESTART GAME&quot;&gt;&gt;&lt;&lt;run Engine.restart()&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="410" name="Lady Fit-Sport" tags="" position="1225,5100" size="100,100">This place is full of stylish, but expensive women&#39;s fitness clothes in a dizzying array of colors, and inspirational pictures of women being their best selves. You see more than a couple hot looking patrons with obligatory pumpkin scented coffees.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;women-fitness-store.jpg&#39;);&gt;&gt;

&lt;&lt;if SugarCube.getLib().PlayerModel.checkClothingTolerance()==1&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.sporting(&quot;Welcome to Lady Fit-Sport! Let me know if there&#39;s something I can help you with today! :)&quot;)&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().PlayerModel.checkClothingTolerance()&gt;=2&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.sporting(&quot;Hey, welcome back! Let me know if there&#39;s something I can help you with today! ;)&quot;)&gt;&gt;
&lt;&lt;/if&gt;&gt;\
\
&lt;&lt;if !hasVisited(&quot;Talk to Sales Clerk about shoes&quot;)&gt;&gt;\
[[Talk to Sales Clerk about shoes]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().PlayerModel.checkClothingTolerance()==2&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Hi again! Thanks!&quot;);&gt;&gt;
[[See full sporting inventory|lady-fit-sport]]
&lt;&lt;/if&gt;&gt;

[[Central Mall]]</tw-passagedata><tw-passagedata pid="411" name="lady-fit-sport" tags="" position="100,5225" size="100,100">&lt;&lt;= SugarCube.getLib().StoreUX.renderCarousel(&quot;lady-fit-sport&quot;)&gt;&gt;
[[Lady Fit-Sport]]</tw-passagedata><tw-passagedata pid="412" name="Talk to Sales Clerk about shoes" tags="" position="225,5225" size="100,100">You try to concentrate on getting this done quickly. You try to maintain a bit of distance to avoid the sales girl seeing more than she needs to. Just stay calm, and you&#39;ll be fine.
&lt;&lt;= SugarCube.getLib().Dialogue.heir(`Hi, I&#39;m here for some running shoes. I think you have an order under &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;.`);&gt;&gt;
You wait a moment as the sales clerk taps something on her screen.
&lt;&lt;= SugarCube.getLib().Dialogue.sporting(`Sure! It says payment has been pre-authorized for any fitness shoe \and socks we have in stock. We don&#39;t get that too often. What&#39;s the special occasion?`);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Oh, ya know. Just doing my thing trying to get in a little better shape.&quot;);&gt;&gt;
The total reality that you are here masquerading as a woman is starting to intrude on your thoughts with full force, like a pile of bricks. Your anxiety levels are really starting to escalate, and you can&#39;t escape. You&#39;re having trouble keep up with what she&#39;s saying.
&lt;&lt;= SugarCube.getLib().Dialogue.sporting(&quot;Ok, get yourself seated, and lets find you a pair you&#39;ll love. What size are you again?&quot;)&gt;&gt;
You pause for an extended period, with embarrassment as you don&#39;t remember what women&#39;s size to say. Normally, you would just be in and out with a guys shoe store. As you are a bit slow to respond, she just guides you to a seat to measure your feet.

This is getting more complicated than you hoped. You slip off your heels and hope that she doesn&#39;t catch on, as she places your feet on the measuring pad and sizes them up.
&lt;&lt;= SugarCube.getLib().Dialogue.sporting(&quot;Those heels look awesome by the way, it&#39;s nice how things have warmed up so we can start wearing our peep-toes again. Ok, let&#39;s get you some nines for running.&quot;)&gt;&gt;

She brings out a stack of boxes. You try them on, and they all fit reasonably. You&#39;re feeling absolutely terrified right now, and trying to keep your wits about so you just choose a pair that isn&#39;t too girly:
&lt;&lt;= SugarCube.getLib().StoreUX.renderFreeCarousel(&quot;lady-fit-sport&quot;, &quot;feet&quot;)&gt;&gt;</tw-passagedata><tw-passagedata pid="413" name="Get Socks" tags="" position="350,5225" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.sporting(&quot;Oh, those are so cute! Now we have a variety of socks to choose from.&quot;)&gt;&gt;
Just breathing is occupying your attention right now. You are way too mentally exhausted to worry about socks... You just grab the first pair you see.
&lt;&lt;= SugarCube.getLib().Items.renderItem(&quot;athletic-socks&quot;,&quot;shop-item-image zoom&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().InventoryUX.add(&quot;athletic-socks&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;These look fine. Can I get these and go?&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.sporting(&quot;Ok, I&#39;ll process these through right now!&quot;)&gt;&gt;
She promptly bags the items, and places a gift receipt for the purchase inside. You make the slightest departing pleasantry to the shop girl and start walking out of the store in a daze.
&lt;&lt;= SugarCube.getLib().Dialogue.sporting(&quot;Thanks for your purchase! Come again soon!&quot;)&gt;&gt;
On leaving the store, the smart watch emits a warning:
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(`Caution, blood pressure below safe levels.`)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Hmm. I&#39;ll be fine, I just need to get back to the car.&quot;)&gt;&gt;

[[Make a panicked hustle back to the car]]</tw-passagedata><tw-passagedata pid="414" name="Make a panicked hustle back to the car" tags="" position="475,5225" size="100,100">At this point, your breathing is extremely shallow, and you just want to get away from the mall and away from the sight of all these people.

You make a hasty walk back to the garage and manage to summon the car with the watch. You don&#39;t feel safe here, dressed like this.

You just manage to find it, open the passenger door and flop on the seat. Your body channeled every ounce of energy to get to the car, but you had nothing left. Your vision fades, and your ears are ringing.

[[Black out in your car]]</tw-passagedata><tw-passagedata pid="415" name="Black out in your car" tags="" position="600,5225" size="100,100">The weather is crisp, it feels like late fall. You don&#39;t have a care in the world. You are a child on a swing, in a rundown playground in a small town - you are being gently rocked back and forth.

You start to hear a slow periodic beeps. They seem to be getting louder.

[[Arise from daze]]</tw-passagedata><tw-passagedata pid="416" name="Go to Central Mall" tags="" position="725,5225" size="100,100">&lt;&lt;if !hasVisited(&quot;Central Mall&quot;)&gt;&gt;\
This is all more than a little weird, but its kind of exciting to be chauffered around.
&lt;&lt;/if&gt;&gt;\
The car drops you off at the underground parking garage. After you close the door, the car moves away to park itself and until your next summons.

&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;mall-parking.jpg&#39;);&gt;&gt;
&lt;&lt;if SugarCube.getLib().PlayerModel.checkClothingTolerance() &gt;= 2&gt;&gt;\
&lt;&lt;if SugarCube.getLib().PlayerModel.hasGirlyGenitals()&gt;&gt;\
You see your reflection in the mirror. You love how your outfit follows your curves.
&lt;&lt;else&gt;&gt;\
You see your reflection in the mirror. You still find yourself surprised at meeing cute girl that is your reflection. You still think about how someone might catch on to you, but you feel more confident about your appearance.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
You make your way up the elevator, hoping to be innocuous, worrying when someone might catch on.
&lt;&lt;/if&gt;&gt;\

Take elevator [[Central Mall]]</tw-passagedata><tw-passagedata pid="417" name="Central Mall" tags="" position="850,5225" size="100,100">This is the largest mall in the city. In addition to some typical stores, it is a regional home for a number of top tier stores that you don&#39;t typically find in smaller malls. In general, these aren&#39;t places you traditionally would go shopping - this place has a lot of well heeled clientele.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;mall.jpg&#39;);&gt;&gt;


[[Olddorf Woodman]]
[[Lady Fit-Sport]]
[[Shoeboxx]]
[[Covert Natasha]]
[[GamesHut]]
[[Soft Touch Beauty Lounge|Beauty Lounge]]

&lt;&lt;if SugarCube.getLib().PlayerModel.isCaged() || SugarCube.getLib().PlayerModel.hasGirlyGenitals()&gt;&gt;\
[[Women&#39;s Washroom| Mall - Womens Washroom]]
&lt;&lt;else&gt;&gt;
Women&#39;s Washroom - No way you&#39;re going in there!
&lt;&lt;/if&gt;&gt;\
Men&#39;s Washroom - You&#39;re dressed as a girl!

[[Go to self driving car|Enter self driving car]] &lt;&lt;=SugarCube.getLib().Pathways.makeJumpLink(&quot;Central Mall&quot;,&quot;Baldric House&quot;);&gt;&gt;</tw-passagedata><tw-passagedata pid="418" name="Olddorf Woodman" tags="" position="975,5225" size="100,100">You enter the genteel Olddorf Woodman Department store.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;upscale-department-store.jpg&#39;);&gt;&gt;
[[See inventory|olddorf-goodman]]
[[Central Mall]]</tw-passagedata><tw-passagedata pid="419" name="olddorf-goodman" tags="" position="1100,5225" size="100,100">&lt;&lt;= SugarCube.getLib().StoreUX.renderCarousel(&quot;department-store&quot;)&gt;&gt;
[[Olddorf Woodman]]</tw-passagedata><tw-passagedata pid="420" name="Covert Natasha" tags="" position="1225,5225" size="100,100">&lt;&lt;if SugarCube.getLib().PlayerModel.checkClothingTolerance()==1&gt;&gt;\
You&#39;ve heard of this cold-war era spy-themed lingerie store, but always kept a bit of a distance. \
&lt;&lt;else&gt;&gt;\
You can&#39;t believe you are shopping as a customer at this cold-war era spy-themed lingerie store. \
&lt;&lt;/if&gt;&gt;
 The walls have black and white pictures of femme fatale glamour models in exotic locales, with 60&#39;s looking prop spy equipment artfully arranged. Throughout the store are partially visible cabinets full of undergarments.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;covert-natasha.jpg&#39;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.lingeriestore(&quot;Hi, my podruga, can I help you find something today?&quot;)&gt;&gt;
\
&lt;&lt;if SugarCube.getLib().PlayerModel.checkClothingTolerance()==1&gt;&gt;\
You smile at her, as you are panicing on the inside. You really need to get out of here right now.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().PlayerModel.checkClothingTolerance()==2&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.heir(&quot;Thanks, I think I am just browsing for today.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.lingeriestore(&quot;Ok. Well, don&#39;t be a sleeper agent for too long. We all have a little Covert Natasha in us, just waiting to glam out our next mission!&quot;)&gt;&gt;
[[See lingerie inventory|covert-natasha]]
&lt;&lt;/if&gt;&gt;\

[[Central Mall]]</tw-passagedata><tw-passagedata pid="421" name="covert-natasha" tags="" position="100,5350" size="100,100">&lt;&lt;= SugarCube.getLib().StoreUX.renderCarousel(&quot;covert-natasha&quot;)&gt;&gt;
[[Covert Natasha]]</tw-passagedata><tw-passagedata pid="422" name="Shoeboxx" tags="" position="225,5350" size="100,100">It astounds you, how many kinds of shoes are offered here, but there it is. 

Their advertising is pretty ubiquitous, every ad always has a twentysomething seductively say: &quot;What do you want to have in your boxx today?&quot;, and a wink at the camera.
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;shoe-store.jpg&#39;);&gt;&gt;
[[Browse for shoes|shoeboxx]]
[[Central Mall]]</tw-passagedata><tw-passagedata pid="423" name="shoeboxx" tags="" position="350,5350" size="100,100">&lt;&lt;= SugarCube.getLib().StoreUX.renderCarousel(&quot;shoeboxx&quot;)&gt;&gt;
[[Shoeboxx]]</tw-passagedata><tw-passagedata pid="424" name="GamesHut" tags="" position="475,5350" size="100,100">You instinctively felt the need to see what new games are out, on the off chance there might be some interesting pre-owned games you might want to get once you have a little cash on hand. 

As you walk in, you sense the gaze of a bunch of teenagers and a thirtysomething neckbeard, as well as hear a bitchy sound of condescension from the cute goth girl at the cash register.
&lt;&lt;= SugarCube.getLib().Dialogue.gamestore(&quot;...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;game-store.jpg&#39;);&gt;&gt;
&lt;&lt;if SugarCube.getLib().PlayerModel.checkClothingTolerance()==1&gt;&gt;\
You feel like a deer in headlights. You stop at a little display of game-related stuff merch figures, and sort of gesture as if you&#39;d forgotten something, before you walk out in fear that someone is going to catch on with this unwanted attention.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().PlayerModel.checkClothingTolerance()==2&gt;&gt;\
You&#39;re not really looking for anything at the moment.
&lt;&lt;/if&gt;&gt;\
[[Central Mall]]</tw-passagedata><tw-passagedata pid="425" name="Mall - Womens Washroom" tags="" position="600,5350" size="100,100">You enter the Women&#39;s Washroom. 
&lt;&lt;=SugarCube.getLib().Images.drawLocation(&#39;mall-bathroom.jpg&#39;);&gt;&gt;
&lt;&lt;if SugarCube.getLib().PlayerModel.hasGirlyGenitals()&gt;&gt;\
One thing you appreciate about being a girl is how much nicer the bathroom is.
&lt;&lt;else&gt;&gt;\
You go to a stall. You are paranoid someone might catch a glimpse of your cage, but there&#39;s something exciting about all of this.
&lt;&lt;/if&gt;&gt;\
[[Check your look|Mall Mirror]]
[[Central Mall]]</tw-passagedata><tw-passagedata pid="426" name="Mall Mirror" tags="" position="725,5350" size="100,100">&lt;&lt;if (SugarCube.getLib().OutfitsAnalyser.describeCurrentOutfit().isDecentOutfit)&gt;&gt;\
&lt;&lt;if SugarCube.getLib().OutfitsAnalyser.describeCurrentOutfit().isAllWomanOutfit&gt;&gt;\
Back to [[Mall - Womens Washroom]]
&lt;&lt;else&gt;&gt;\
You feel uncomfortable not being dressed in a woman&#39;s outfit, given you are in the Women&#39;s washroom.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
Despite everything, you don&#39;t quite feel comfortable to go out in the mall dressed like this.
&lt;&lt;/if&gt;&gt;\

You really love how the mall has upgraded the bathrooms here to also allow for checking yourself in an outfit. It&#39;s a bit of a hassle to get to but they put in some changerooms here that have better mirrors and lighting than at a most of the smaller stores.
&lt;&lt;=SugarCube.getLib().MirrorUX.drawMirrorView();&gt;&gt;
&lt;&lt;if (SugarCube.getLib().OutfitsAnalyser.describeCurrentOutfit().isDecentOutfit)&gt;&gt;\
&lt;&lt;if SugarCube.getLib().OutfitsAnalyser.describeCurrentOutfit().isAllWomanOutfit&gt;&gt;\
Back to [[Mall - Womens Washroom]]
&lt;&lt;else&gt;&gt;\
You feel uncomfortable not being dressed in a woman&#39;s outfit, given you are in the Women&#39;s washroom.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
Despite everything, you don&#39;t quite feel comfortable to go out in the mall dressed like this.
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="427" name="Summon self driving car" tags="" position="850,5350" size="100,100">You activate the &quot;car summon&quot; feature on your watch, it notifies you the car is enroute to pick you up in a couple of minutes.

On arrival, the watch reminds you that the car uses a two factor authentication system based on your voice and appearance as &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;.

As you get close to the car, you see a subtle infrared light illuminating you.
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(`User visually recognized. Confirm 2FA voice print.`);&gt;&gt;
&lt;&lt;if !SugarCube.getLib().PlayerModel.hasGirlyGenitals()&gt;&gt;\
You use your girl-voice: 
&lt;&lt;/if&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.heir(`It&#39;s me, &lt;&lt;print SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;. Let&#39;s go!`);&gt;&gt;
&lt;&lt;if SugarCube.getLib().OutfitsAnalyser.describeCurrentOutfit().isAllWomanOutfit || (SugarCube.getLib().PlayerModel.looksLikeAGirl() &amp;&amp;  SugarCube.getLib().OutfitsAnalyser.isCosplay())&gt;&gt;\
The passenger door slinks up into the ceiling of the car.

[[Enter self driving car]]
&lt;&lt;else&gt;&gt;
As you approach, your watch indicates that &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt; needs to be visible to the car. You walk all around the car, it just doesn&#39;t seem to recognize you, at least with your current appearance.
&lt;&lt;/if&gt;&gt;
Use your watch to &lt;&lt;link &quot;Dismiss car&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="428" name="Enter self driving car" tags="" position="975,5350" size="100,100">You get yourself comfortably seated in the back of the car, as it starts to get moving.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;self-drive-car.webp&#39;);&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Select Destination&quot;) &gt;&gt;\
[[Go to Baldric House|Baldric House]]
[[Go to Central Mall]]
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;train-for-doll-suit&quot;) || hasVisited(&quot;Ballet Studio&quot;)&gt;&gt;\
[[Go to Ballet Studio|Ballet Studio]]
&lt;&lt;/if&gt;&gt;\
 &lt;&lt;if  SugarCube.getLib().Tasks.hasTask(&quot;need-drone-license&quot;) || hasVisited(&quot;Department of Humanity - Exterior&quot;)&gt;&gt;\
[[Go to Department of Humanity|Department of Humanity - Exterior]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if (SugarCube.getLib().Tasks.hasTask(&quot;start-internship-today&quot;))&gt;&gt;\
[[Go to Maristech Orientation]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if hasVisited(&quot;You are guided into the office&quot;)&gt;&gt;\
[[Go to your Office at Maristech|Maristech Campus]]
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;go-to-sea-station&quot;)&gt;&gt;\
[[Take your car to the Airport!]] - Time to go to the Sea Station!
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="429" name="Start" tags="" position="1100,5350" size="100,100">&lt;&lt;if State.turns==1&gt;&gt;\
INTERNAL STEP: Loading game script and performing one-time initialization of game state.
&lt;img src=&quot;images/pay-no-attention-curtain.jpg&quot; /&gt;

If you clicked the back button, and see this, click the &quot;go forward&quot; or &quot;restart&quot; buttons on the left side of the page.

If through no action of your own, you are *stuck* here, even after restarting, please go to [[Developer Notes]] to see how you can describe the circumstances (e.g. browser/OS).
&lt;&lt;else&gt;&gt;\
&lt;h1&gt;The Claim&lt;/h1&gt;\
Version: &lt;&lt;=SugarCube.getLib().Versioning.getCurrentVersion();&gt;&gt;

This is a free, non-commercial work of interactive fiction and creative commentary. It contains explicit sexual themes and imagery, including feminization and female transformation of a male protagonist, as well as loss of agency by the main character. All activity and imagery in this game pertains to adults. Themes of rapid bodily transformations are depicted, which are unrealistic. Portions of the game entail very serious subject matter which can be unpleasant. This version is not complete - you should review this summary with future updates.

By proceeding, you agree that you are above the age of consent in your country of residence and legally able to view this material in your jurisdiction. If not, there are some much better [[browser games|https://www.pcgamer.com/best-browser-games/]] you should check out now!

In addition to the above reasons this may not be for everyone, the author warns you the writing here is mediocre, unrealistic, and the limited branching of the &quot;gameplay&quot; may not be the best use of your precious time.

&lt;p style=&quot;color: yellow;&quot;&gt; Note: The quality of this game is a community effort, which succeeds with the help of players like you. Specific feedback from players on tfgames forum is how bugs and problems are quickly recognized and fixed. For hard to reproduce issues and savegame compatibility problems with an earlier version, make sure to hold onto the save when reporting the issue, as it may be needed to reproduce an issue and test effectiveness of a fix. Thanks! &lt;/p&gt;
For info about plans for the game itself(may contain spoilers) and how to submit feedback, refer to [[Developer Notes]]. 

For the few remaining souls who are still here, [[Start|Exposition: Intro]].

Experienced players may restore a save game from a set of [[reference saves]].

&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="430" name="Exposition: Intro" tags="" position="225,225" size="100,100">You are Billy, a young guy who caught a lucky break, to get paid for some light work as a housekeeper at a palatial townhome.

You were going to head back home off school for the summer, but this opportunity came up. The Ridge family wants you to watch over the family home, while they go on a grand family sightseeing trip in Europe. You had struggled to save up to go for your next year of school, but it had been tough making ends meet.

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;college-campus.jpg&#39;);&gt;&gt;

[[Next|Exposition: Your job for the summer]]</tw-passagedata><tw-passagedata pid="431" name="Exposition: Your job for the summer" tags="" position="800,620" size="100,100">This job might be a little boring, but it will have paid off when the Ridge family returns from their trip at the end of Summer, as you&#39;re getting paid $10/hr for what is described as 20 hours a week of light work, and following instructions from an email you got earlier. In reality, you probably don&#39;t need to spend more than a couple hours a week doing occasional chores. This is more than you&#39;ve every been paid for a job, before.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;job-money.webp&#39;);&gt;&gt;

This will also provide you time to catch up on your studies for next year and maybe get in a bit better shape. Kate arranged for her grocery deliver service at a reduced volume just for you, and you can make adjustments as you like. You have no expenses while you are here, so everything you earn can be saved for school.

[[Next|Exposition: Why are you here]]</tw-passagedata><tw-passagedata pid="432" name="Exposition: Why are you here" tags="" position="800,700" size="100,100">That&#39;s not the only reason you are here... You have been secretly in love with Stacy Ridge, their daughter and your classmate. 
&lt;&lt;=SugarCube.getLib().Images.drawPerson(&#39;stacy-ridge.jpg&#39;);&gt;&gt;

She has been through some tough times (girls can be so mean to each other), and you&#39;ve always been there for her - through thick and thin. Her friendship and familiarity with you definitely helped you get this job. You were there often enough, that her parents, Mark and Kate felt accustomed to your safe presence, almost an honorary member of the family. 
&lt;&lt;=SugarCube.getLib().Images.drawPerson(&#39;mark-ridge.jpg&#39;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Images.drawPerson(&#39;kate-ridge.jpg&#39;);&gt;&gt;


She is the only girl you are close with, often hanging out doing homework or seeing movies together but you&#39;ve never found the courage to show her how you feel for her.  Given the right moment, you want to show her you can rock her world.


[[Your Physique]]</tw-passagedata><tw-passagedata pid="433" name="Your Physique" tags="" position="800,800" size="100,100">&quot;My physique doesn&#39;t help set me apart&quot;, you sigh. On reflection, you are a bit small compared to other guys your age. You&#39;re 171cm tall, and weigh about 63kg. It&#39;s not all bad, you are in good health, your skin is blemish free, and your mom says you&#39;re cute. Ultimately, you never seem to find the courage to make the first step.

&lt;&lt;=SugarCube.getLib().Images.drawPerson(SugarCube.getLib().PlayerModel.getCharacterImage(1));&gt;&gt;

But now, it&#39;s time to get to work. You will need to get set up clean, and dust the interiors, while watering the plants and monitoring the outside property.

The Uber driver drops you off with your duffle bag outside the house.


First things first - you should drop off your luggage - it&#39;s kind of heavy!
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;drop-luggage&quot;);&gt;&gt;

Leave the car to approach [[Baldric House]]</tw-passagedata><tw-passagedata pid="434" name="Butler-Hancock Act" tags="" position="475,5475" size="100,100">From 1999 to 2008, the country had observed a seemingly unstoppable dot-com boom which had severely devastated many local businesses and traditional lifestyles throughout the country.

From the anger of growing numbers of unemployed, the &quot;[[Homeland Values|Homeland Values Movement]]&quot; protest movement emerged as an increasingly disruptive force, and congress was forced into passing the controversial Butler-Hancock Act as a lesser evil. 

The act introduced a 100% tax on business-to-consumer transactions not conducted in a retail establishment. Furthermore, it introduced a 1600% tax on the value of business-to-consumer transactions where a party to the transaction is not human. The last part of the act introduced the &quot;Department of Humanity&quot;, to aggressively investigate and prosecute contraventions.

Some felt that the act was a draconian restriction on civil liberties, and froze innovation, while others felt the law was incomplete, and didn&#39;t go nearly far enough to protect jobs and traditional lifestyles.

From that point, the pace of consumer facing technology innovations stagnated, with many technology entrepreneurs shifting to more lucrative alternatives like fidget spinners, but &quot;Main Street&quot; saw a healthy a renewal in the aftermath.

&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="435" name="Homeland Values Movement" tags="" position="600,5475" size="100,100">A loose assemblage of civic and religious groups who share a consensus that society is changing too quickly, with capitalism transforming our world in ways which we cannot fully understand. While their members are not anti-technology per se, their official stance is a preference to allow changes after they have been proven to be completely safe and non-disruptive to society.

This organization maintains strong discipline among its members and exercises its influence through its political action committees. The movement has been quite effective at organizing protests of the &quot;quiet majority&quot;, and in drumming up votes at all levels of government. Approximately 43% of members of the house of congress have campaigned on a platform of being &quot;well aligned&quot; with the principles of the Homeland Values movement, which coalesced into the &quot;Homeland Caucus&quot;, currently led by representative Kyndall Pearson.

Quote from Representative Pearson during house debate on extending provisions of the [[Butler-Hancock Act]].
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;pearson&quot;,`So, I ask - is it so hard to understand? We&#39;re sick of all these tech companies, pushing their screens, their robots and their devices to intrude into every aspect of our lives. Is that the kind of world you want your kids growing up in? I don&#39;t want that for my daughter or my sons, and neither do my esteemed collegues, or the people back home who asked us to represent them. Mr. Speaker, we have come here to send a message to these oligarchs - Enough is enough!`)&gt;&gt;

See also [[The Coalition]].

&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="436" name="The Coalition" tags="" position="725,5475" size="100,100">The coalition of sovereign mankind is a more extreme branch of the [[Homeland Values Movement]]. Members of this group believe that the planet has been corrupted, and that democratic and scientific organizations are inevitably subverted to implement the will of their corporate masters. According to their leaders, the solution is a restoration of time tested social structures which can allow the people&#39;s common wisdom to be honored.

The coalition has been establishing a growing number of &quot;Free Settlements&quot;, eschewing traditional government services.

Politically, this group feels the country should pursue a more isolationist direction, with libertarian ideals of small government, an absence of taxation and minimal regulation, in favor of self-sufficiency and community driven social structures.

Although the coalition has no central executive, Justus Chapman is a prominent leader within in the established Vermont Freehold, and is a major advocate for the organization in the public press.

Excerpt from &quot;A more perfect way of living&quot;:
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;chapman&quot;,` ... If those meddlers, those takers, those ninnies and those scalawags could just get off our backs, we can create that shining beacon of liberty once and for all. Just think what you could do, if the fruits of your labor were all yours! ... The founding fathers believed that we should all be able to practice government that made sense for ourselves, without some central tyrant and his tax collectors watching over all of us.`)&gt;&gt;

 Some critics have pointed out that most known members of [[The Red Hands]] had spent some amount of time at the Free Settlements.
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="437" name="The Red Hands" tags="" position="850,5475" size="100,100">Fanatically inspired by Damian Krughoff&#39;s 782 page treatise and rallying cry: &quot;The Moral Imperative for Immediate Action&quot;, the Red Hands are an extremist network targeting organizations they describe to be &quot;Enemies of Human Values&quot; (commonly abbreviated as EHV&#39;s).

Followers of this group have claimed responsibility for 14 distinct attacks within the last two years. Targets have included family planning clinics, controversial sites of major technology companies and congregation sites of religious minorities. Experts have been noting a growing sophistication with more recent attacks.

The name of &quot;Red Hands&quot; is an acknowledgement by these members that their actions violate the morals of their creeds and the laws of the land, to confront what they consider a far greater evil.

Time at free settlements of [[The Coalition]] has been noted to be a common pattern the few surviving members and suspects who have faced criminal prosecution. It is worth noting that many attacks by the Red Hands involved suicide bombings. Coalition leaders members decry the actions of the Red Hands as lone criminals and deny any involvement or support.

Excerpt from &quot;The Moral Imperative for Immediate Action&quot;:
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;krughoff&quot;,`...The laws of nature cannot be ignored out of sentimentality. Democracy is a failed system. The body politic is, and always shall be, weak and forgetful in times of trial. It is the obligation of the wise and prudent to provide clear direction without doubt. For the young and energetic, to act without hesitation. 
 
 These are our sacrifices. These are our burdens as men of conscience.
 
 Cultures which honor this tradition have always thrived with vigor. For those who allow the weak and foolish to rule over the strong and wise, decadence and decay is inevitable. Stand with your brothers of superior character, and cast out thy enemy....`)&gt;&gt;

&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="438" name="Watch Movie: Batman" tags="" position="828,2790" size="100,100">Hmm, time for an action film. 80&#39;s Batman kicking some ass? This should be fun.

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;batman.jpg&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;watch-batman&quot;)&gt;&gt;\
[[continue with Batman]]</tw-passagedata><tw-passagedata pid="439" name="continue with Batman" tags="" position="821,2653" size="100,100">Oh, No wait, this is the DeVito one with the Penguin. Joker always gets top billing in that world, but still comes across as a villain who was out to cause mayhem and chaos. The Penguin seems more complicated. He really seems to try to get you to feel sympathy for him as a product of our crazy society. The villains meant to hint there is a reaction to something not quite right in Gotham... Is it all just for entertainment, or were they trying to say something with these stories?
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;batman-penguin.jpg&#39;);&gt;&gt;

Oh, and there&#39;s Catwoman... Meow. She really nails the kinky and unhinged look. Like, you know she might be up for just about anything.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;catwoman-crazy.jpg&#39;);&gt;&gt;

In general though, it&#39;s curious how these characters seem to take on another persona to do what they need to do, or as if people won&#39;t figure out who they are. The thought strikes you as kind of silly.

You are starting to feel tired, but you realize it&#39;s not healthy to overdo it with another late night binging on content. Time to go to bed.

&lt;&lt;=SugarCube.getLib().PlayerModel.setReadyForSleep()&gt;&gt;\
Return to [[Cinema]]</tw-passagedata><tw-passagedata pid="440" name="Watch Movie: Miami Vice" tags="" position="1225,5475" size="100,100">You aren&#39;t feeling too picky - you hit up a crime-action movie you were too young to see as a kid. It&#39;s a few minutes in, but it&#39;s a dark, gritty one about drug smugglers and badass undercover cops who play things a little fast and loose.

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;miami-vice-1.jpg&#39;);&gt;&gt;

It has some good music, including a pretty cool sounding song from Linkin Park - you remind yourself to add it to your playlist.

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;miami-vice-2.jpg&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;watch-miami-vice&quot;);&gt;&gt;\
[[Done Watching - Miami Vice]]</tw-passagedata><tw-passagedata pid="441" name="Done Watching - Miami Vice" tags="" position="100,5600" size="100,100">The movie ends eventually and you look at the clock - it&#39;s a little past midnight already. Usually at this hour you are already tucked in bed, but the last day&#39;s events have you way too excited to sleep. 

You found a secret door in this house! And a quest that could lead to a huge treasure. A short lookup shows that the gold alone is worth today around 3 million dollars! Oh, and the things you could do with all that cash...
[[The possibilities]]</tw-passagedata><tw-passagedata pid="442" name="The possibilities" tags="" position="225,5600" size="100,100">Your mind starts to go to the gutter and you reach down inside your pants. Your cock seems to already be hard. You take the remote control and somehow luck out to find a channel with some late night sexy times.

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;lesbian-porn.jpg&#39;);&gt;&gt;

Not one to look a gift horse in the mouth, you reach down to remove your pants and trousers all the way. As you raise your hips a little your hand slips between the cushions of the sofa and you feel something very soft in there, like a piece of cloth or something like that.

You grab it and pull it out.

[[A black thong|Theater: A black thong]]</tw-passagedata><tw-passagedata pid="443" name="Theater: A black thong" tags="" position="350,5600" size="100,100">You examine the object only to discover that it is a women&#39;s underwear - and an extremely revealing one for sure. 

&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Wow, how could I have missed it while cleaning?&quot;);&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;I wonder whose thong this is anyway&quot; );&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawItem(&#39;black-thong.jpg&#39;);&gt;&gt;

Mrs. Ridge is a fit, attractive woman, but the size of the thong still seems small even for her hips. On the other hand, this could not be Stacy&#39;s underwear for sure - it&#39;s far too ... adult for her tastes and its definitely not the type you could buy in a regular clothes store.

The loud moans of the chicks on the video is still filling the air and your cock is on the edge of bursting. 

You turn the thong inside out - they look used and a little dirty... Then it hits you.
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;What if this really is Stacy&#39;s underwear?&quot;);&gt;&gt;
The thought is just too hot.

[[Theater - Smell Item]]</tw-passagedata><tw-passagedata pid="444" name="Theater - Smell Item" tags="" position="475,5600" size="100,100">You bring the thong up to your nose. The smell has a certain muskiness to it. You close your eyes, and lick them, imagining your tongue probing deep into Stacy&#39;s pussy as she&#39;s pushing herself on you.


Finally you decide to wrap the thong around your shaft and begin jerking with it. With just a couple of strokes, you erupt with a powerful orgasm, screaming from pleasure. A gush of cum, totally drenching the fine silk fiber of the underwear, until the white semen begins dripping down your palm.

Your vision fades out as [[you pass out on the couch]]</tw-passagedata><tw-passagedata pid="445" name="you pass out on the couch" tags="" position="600,5600" size="100,100">A year has passed since you recovered the treasure, and life could not be better. You dropped out of school and invested the cash in the stock market. Since then, you&#39;ve been having a lot of crazy hookups with perfect women. 

You are driving fast in a Lamborghini, on a steamy evening in a tropic city. You stop by to pick up a hot girl.

&quot;&lt;&lt;=SugarCube.getLib().PlayerModel.getName()&gt;&gt;, you are such an exciting date!&quot;  - the girl smiles as she enters the car. Her dress billows up a bit as she throws her thin long legs inside and you notice that she might be wearing no panties underneath. Her long perfect legs are just begging you to put your palm between them...and maybe further up, underneath her mini skirt...

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;lambo-brunette.jpg&#39;);&gt;&gt;

The hotties don&#39;t care how you got rich, they are just want to be with a powerful man, eat an expensive dinner and dessert, then they will be begging to suck your cock. There&#39;s nothing they aren&#39;t willing to do...

[[You awaken in the theater]]</tw-passagedata><tw-passagedata pid="446" name="You awaken in the theater" tags="" position="725,5600" size="100,100">&quot;Aaaaahh&quot; - a loud and over-dramatic moan wakes you up from your dream...Confused you open your eyes and see that it is already morning and you have spent the whole night on the couch.

The TV is still on with the volume turned up and the porn on the screen is still running. 

You look down and see that your belly is a mess - the black thong is still curled around your soft dick, with the dried cum holding it tight. The room smells strange, reminds you of roses and vanilla.

&lt;&lt;= SugarCube.getLib().Dialogue.player(`Oh Shit!`);&gt;&gt;
You turn off the TV and get up. It&#39;s been a while since your last blackout. When you were a kid, you had a few stress-induced blackouts, which seemed to stop as you got older. Hopefully it&#39;s just a fluke.

&lt;&lt;= SugarCube.getLib().Dialogue.player(`What a great dream though.`);&gt;&gt;
You try to savor the details, but it&#39;s already fading.
&lt;&lt;= SugarCube.getLib().Dialogue.player(&#39;I must find a way to that treasure! But...how do I open the damn door?&#39;);&gt;&gt;
You could never find a girl who would just agree to go down that basement and dress up like Marissa. Even if you did, she&#39;d surely demand a huge cut as soon as she had a clue what was going on.

You mind begins searching for possible solutions to the problem. Suddenly you notice the thong around your cock again, and think about Marissa&#39;s instructions.

&lt;&lt;= SugarCube.getLib().Dialogue.player(`but maybe...`);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;house-has-clothes&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;first-shave&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.morningUpdate();&gt;&gt;\
&lt;&lt;set $day to 2&gt;&gt;
[[Take black thong]]</tw-passagedata><tw-passagedata pid="447" name="Take black thong" tags="" position="1084,2895" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;I&#39;ll need to get this cleaned up. &quot;);&gt;&gt;
You sniff for a moment.
&lt;&lt;= SugarCube.getLib().Dialogue.player(&quot;Hmm, I&#39;ve got a little funk myself - I should go get myself cleaned up as well. Maybe I&#39;ll do that now?&quot;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().InventoryUX.add(&quot;black-thong&quot;)&gt;&gt;\
&lt;&lt;set $thongIsDirty=true&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;clothing-needs-cleaning&quot;);&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.ensureTask(&quot;player-needs-shower&quot;);&gt;&gt;\
[[Cinema]]
Go to the upstairs [[Hallway Bathroom]]</tw-passagedata><tw-passagedata pid="448" name="Watch Movie: Robin Hood, Men in Tights" tags="" position="975,5600" size="100,100">The last couple movies were a bit dark. You feel like a comedy for today.

There&#39;s a Mel Brooks flick about Robin Hood which doesn&#39;t seem to take itself too seriously. This could be good.

Oh interesting, the merry man &quot;Achoo&quot; was a young Dave Chappelle&#39;s first big break as a film actor.

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;robin-hood.jpg&#39;);&gt;&gt;

As usual for a Robin Hood, the film has an archery tournament, but also a bunch of comedic gags and slapstick fighting. The film wraps happily with King Richard returning from the Crusades to arrest Prince John.

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;robin-hood-stewart.jpg&#39;);&gt;&gt;

On marriage, Robin and Marian have some trouble on their wedding night. Damn, the legs on that Marian.  Ha! Not an amazing movie, but it had its moments.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;robin-hood-belt.jpg&#39;);&gt;&gt;

As often happens after you watch a movie in this dark room, you are starting to feel tired.
&lt;&lt;=SugarCube.getLib().Dialogue.player(&quot;Wow, I&#39;m really feeling exhausted.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().PlayerModel.setReadyForSleep()&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;watch-robin-hood&quot;)&gt;&gt;\
[[Cinema]]</tw-passagedata><tw-passagedata pid="449" name="Remove Makeup" tags="" position="1918,995" size="100,100">&lt;&lt;=SugarCube.getLib().PlayerModel.toggleMakeup(false)&gt;&gt;\

You borrow some makeup cleaning supplies from the cabinet, and proceed to remove the makeup from your face. You are super glad the guides also talked about this part so you can return to normal.

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;remove-makeup.webp&#39;);&gt;&gt;

For good measure, you massage in a bit of moisturizer.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;face-moisturizer.webp&#39;);&gt;&gt;
[[Hallway Bathroom]]</tw-passagedata><tw-passagedata pid="450" name="Apply Makeup" tags="" position="1225,5600" size="100,100">&lt;&lt;if SugarCube.getLib().Skills.get(&quot;makeup&quot;) == 0&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.toggleMakeup(true)&gt;&gt;\

From the tutorials, you have built up the nerve to put on some makeup to satisfy the demands of the door. 

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;foundation.webp&#39;);&gt;&gt;

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;lipstick.webp&#39;);&gt;&gt;

Although you are clearly not practiced on doing the details, you think that it might be good enough in a dark room, or from a distance with someone who isn&#39;t looking too closely.
&lt;&lt;=SugarCube.getLib().Skills.set(&quot;makeup&quot;,1)&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.toggleMakeup(true)&gt;&gt;
This time, you sort of treat the process like a game, where you are going for precision. You&#39;re still taking a long time to do what is probably a basic thing for a teenage girl, but no big mistakes this time.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;foundation.webp&#39;);&gt;&gt;

&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;lipstick.webp&#39;);&gt;&gt;
&lt;&lt;/if&gt;&gt;\
[[Hallway Bathroom]]</tw-passagedata><tw-passagedata pid="451" name="Help Margaret with her culture prep" tags="" position="100,5725" size="100,100">&lt;&lt;if !SugarCube.getLib().PlayerModel.canWork()&gt;&gt;
You are too tired to work right now. Try tomorrow.
&lt;&lt;else&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;help-margaret-research-data-entry&quot;)&gt;&gt;\
Margaret explains her lab procedures to distribute some Phytoplankton communities to a set of containers for one of her experiments.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;First, we always need to make sure the vessels are sterilized of prior media. I prepped our test bottles for today with our acid-sterilizer, we just need to rinse out with some Distilled Deionized Water (DDW). I&#39;d like you scrub clean and then acid sterilize tomorrow&#39;s containers over there, and allow have them sit with acid overnight.&quot;)&gt;&gt;
After explaining the cleaning and sterilization process, she walks you through the procedure, where to get materials and snags to watch out for. The sciency rigor part is new to you, but you know a thing or two about cleaning. You have dealt with drudgery before, so the work isn&#39;t too burdensome.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Ok, now we need to set up a set 16 cultures from community C12-J11-3... You can dispense them from the container at rack 11.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;For this study, we&#39;ll use the following nutrient ratios for each sample...&quot;)&gt;&gt;
This part takes a good bit longer as you find yourself checking and double-checking your measurements and that you&#39;re following instructions properly.

&lt;&lt;=SugarCube.getLib().StationWork.completeTask(&quot;help-margaret-research-culture prep&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Thanks for the help. Could you stop by tomorrow to help me on some core analyses?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;help-margaret-research-core-analysis&quot;)&gt;&gt;\
&lt;&lt;/if&gt;&gt;
[[Station Research]]</tw-passagedata><tw-passagedata pid="452" name="Help Margaret with her core analysis" tags="" position="225,5725" size="100,100">&lt;&lt;if !SugarCube.getLib().PlayerModel.canWork()&gt;&gt;\
You are too tired to work right now. Try tomorrow.
&lt;&lt;else&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;I have a backlog of core sample data requests from our consortium partners. They&#39;ve been starting to nag me about catching up on those, which is never a good sign.&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;So, lets go over here to the core sample racks. The computer here provides a tracking record for where each sample is. We use this barcode scanner to track custody of each sample as it is removed and returned to the collection. It&#39;s sort of like a library of geological samples.&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;For this one, let&#39;s see - Ok, they wanted a molecular spectroscopy pass to collect some data, and report it back to them. I&#39;ve put the other tasks on this pad here. Feel free to check back with me and we can go through unfamiliar procedures.&quot;)&gt;&gt;
.. Several hours later, while you are seated, entering in some results at a computer, she stops by. Margaret puts her hand lightly on your shoulder, while she reviews and double checks your work. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;How&#39;s it going?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Not bad - once you get the process, it seems like a lot of it is about sticking to it and not getting sloppy.&quot;)&gt;&gt;
She comes in closer to get a look at the data you&#39;ve been entering, she gently puts one hand on your shoulder, the other borrows the mouse. Up close, her perfume smells refreshing. As she gets more invested in the data, and she&#39;s leaning in her boobs are floating inches away from your face. You pretend not to notice.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Oh yeah! I like the look of this data. Right, sticking to the protocols can be a big part of this work. Our partners will appreciate that we got this out in a reasonable amount of time! I do too!&quot;)&gt;&gt;
She smiles, and the get back to a standing posture.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Thanks!&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().StationWork.completeTask(&quot;help-margaret-research-core-analysis&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Thanks again for the help today... Ok, it looks like we&#39;re about ready to start installing the ansible transceivers. What SCUBA certifications have you got, and how many dives have you logged, so far?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Uhh... I haven&#39;t dived before, actually.&quot;)&gt;&gt;
She is a little caught off guard with that.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Oh! uhh, Wow! Well, I guess we&#39;ll have to start you up with some theory for tomorrow.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;scuba-training-theory&quot;)&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
[[Station Research]]</tw-passagedata><tw-passagedata pid="453" name="Get a SCUBA Crash Course" tags="" position="350,5725" size="100,100">&lt;&lt;if !SugarCube.getLib().PlayerModel.canWork()&gt;&gt;
You are too tired to work right now. Try tomorrow.
&lt;&lt;else&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Along with replacing the transceivers here on the station, we&#39;ll need to replace the ansible transceivers on the data platforms near the station on the continental shelf. For that, I&#39;ll need your help to install those. And just to confirm from before, you hadn&#39;t done any open water scuba diving or training before?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Uhhm, No...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Ok. As you might imagine that is a bit less typical for people assigned to this offshore marine research station. No worries though, I&#39;m a certified dive instructor, and we can get you started with the e-learning curriculum for the theory components.&quot;)&gt;&gt;
You spend the morning going through open water dive theory, and running through a set of quizzes explaining how to prepare and use your gear... More on managing buoyancy, standard procedures for dealing with your dive buddy, the marine environments and other users of the space. You feel a little more comfortable with your basic awareness of safety practices to avoid the dangers of diving and especially for the limited aspects you&#39;re being trained for with this basic qualification. 
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;dive-table.jpg&quot;)&gt;&gt;
By the end of the day, Margaret checks in with you.

 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Ok! Awesome work - all your theory quizzes passed, you&#39;re ready for your first checkout dive.&quot;)&gt;&gt;
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Well, its been a long day, and your brain will want some time to absorb all that theory. Rest up. Give me a call from the moonpool, when you&#39;re ready for your dive!&quot;)&gt;&gt;
 &lt;&lt;=SugarCube.getLib().StationWork.completeTask(&quot;scuba-training-theory&quot;)&gt;&gt;
 &lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;check-out-dive&quot;)&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
[[Station Research]]</tw-passagedata><tw-passagedata pid="454" name="Install the main ansible" tags="" position="475,5725" size="100,100">It&#39;s time to install the main ansible... You review the instructions on your watch. Need to go up to the hold and bring the ansible equipment down to the communications room.
[[Station Main Hold]]</tw-passagedata><tw-passagedata pid="455" name="Get ansible equipment cart" tags="" position="600,5725" size="100,100">You get the cart with all the ansible parts. You are shocked at how bulky and heavy all this stuff is...  You take the elevator down to the advanced comms room.

You get prompted for credentials, and swipe your personal ID badge, which is accepted for your servicing work.

After you enter, the room closes itself off.

You review the instructions on your watch. There&#39;s a tablet in Hardcase A, which is one of the smaller ones. After unlocking it, you open and find inside, you see some simple hand tools and the tablet. 

You start looking at the instructions:
&lt;div class=&quot;letter&quot;&gt;PROCESS OUTLINE:
DAY 1
1-Installation of upgraded Ansible Housing
2-New Ansible Transceiver Installation
3-Ansible Test procedure
4-Activation of Ansible Duplexing Mode
5-Backup Data Extraction from Temporal Ansible with MSFS
DAY 2
6-Remote Disconnect of Legacy Systems
DAY 3
7-Final validation of upgraded systems
8-Shutdown of Legacy Ansible &amp; disablement of duplexing mode
9-Removal &amp; Disposal of Legacy Ansible&lt;/div&gt;

You flip through. It&#39;s a highly prescriptive twelve page series of simple instructions in a few major phases, which you flip through. According to the docs, each stage can safely be paused indefinitely as neccessary.

 None of them look particularly tricky... Just a lot of details with boring IT-speak. 

[[You proceed with the physical installation steps]]</tw-passagedata><tw-passagedata pid="456" name="You proceed with the physical installation steps" tags="" position="725,5725" size="100,100">You go through the Installation of upgraded ansible housing. The parts all seem to be machined to a ridiculous level of precision, such that although there is a bunch of steps, the parts are all neatly packaged, and things go exactly as expected. From what you&#39;d heard from one of your cousins who had been apprenticing as a carpenter, that&#39;s not exactly how this stuff normally works.

30 minutes later, and you&#39;ve already finished parts 1 &amp; 2. The ansible transceiver chip is physically installed in its housing already!
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;ansible-chip.jpg&#39;);&gt;&gt;
Diagnostics... successful! At this pace, you&#39;ll be done before lunch!
[[Move on to part 3]]</tw-passagedata><tw-passagedata pid="457" name="Move on to part 3" tags="" position="850,5725" size="100,100">Part 3 - Ansible Test procedure...
This part has you running a series of automated tests with the new ansible to communicate with Maristech. The device passes with flying colors!

Part 4 - Activation of Ansible Duplexing Mode
For this part, you reconfigure the ansibles to allow the use of both the old and new remote ansibles to communicate with the station, so you and Margaret can remove the old ansibles tomorrow.

[[Move on to part 5]]</tw-passagedata><tw-passagedata pid="458" name="Move on to part 5" tags="" position="975,5725" size="100,100">Part 5 - Backup data extraction...

&lt;div class=&quot;letter&quot;&gt;-Unlock and carefully remove the MFMS from Hardcase C, unfold MFMS. Allow MFMS to sit for 20 minutes at ambient atmospheric pressure and temperature
-Inspect MFMS for debris or damage.If any defects are observed, refuse delivery and contact manufacturer for support, do not proceed with installation.
-Follow MFMS quick start guide&lt;/div&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;huh... So, what is an MFMS?&quot;)&gt;&gt;
Must be some kind of fancy mechanical widget...Time to find Hardcase C.
[[Find the MFMS]]</tw-passagedata><tw-passagedata pid="459" name="Find the MFMS" tags="" position="1100,5725" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Fuck... Whatever this MFMS is, it weighs a ton...&quot;)&gt;&gt;
Of course, It&#39;s the biggest case of the set, like 4 feet long, 2 feet wide and a foot and a half tall. You carefully open it, and see the shiny device with a couple documents covering it, titled:
&lt;div class=&quot;letter&quot;&gt;MARISTECH FARADAY MERMAID SUIT Mk2 prototype (MFMS) - QUICK START GUIDE
&lt;/div&gt;
&lt;div class=&quot;letter&quot;&gt;MARISTECH FARADAY MERMAID SUIT  Mk2 prototype(MFMS) - REFERENCE MANUAL
&lt;/div&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Whaat...&quot;)&gt;&gt;

You chuck the massive manual to the side, and start flipping through the quick start guide. Perhaps dealing with Marissa and the computer, something like this shouldn&#39;t have been a surprise. 

Apparently the mermaid suit allows the wearer to covertly swim at deeper &quot;intermediate&quot; depths and longer durations than conventional SCUBA systems, without the tell-tale detectability of traditional ocean-going submersibles thanks to its compact size and a &quot;sonar disrupting nanotube coating&quot;.

You double check your watch for the details. So, it turns out, the temporal ansible was never actually on this station, and isn&#39;t documented or known to anyone on the station, to avoid discovery. It&#39;s actually a couple miles away, and you&#39;ll need to wear this MFMS to swim there and back. 

But, this thing... it... doesn&#39;t seem like something built to &quot;mil-spec&quot; or government spec... It&#39;s not like the obligatory utilitarian equipment which seems to be everywhere down here, either. It&#39;s like a scaly blue-pearlescent surface. It just looks more like a living thing, or an insanely expensive and very well made work of art, rather than a piece of equipment. You wonder what else might be custom about it. 

You unfold it out from the case... It feels life if a mermaid&#39;s body had collapsed in on itself... and mermaids were real . The skin... Her skin... it&#39;s so smooth - when you touch it, your hand seems to slide right down the surface with no friction at all. It has one large, powerful looking tail, which you unfold.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;That&#39;s crazy...&quot;)&gt;&gt;
Per the instructions, you flatten out the suit, inspect it for damage, and let it rest while you flip through the next steps.
DONNING SUIT...

&lt;div class=&quot;letter&quot;&gt;Extract information retention and support capsule from hardcase B. 
Tap identification card on base.
Apply liberal quantities of installation lubricant to lateral surfaces and have device operator install...&lt;/div&gt;
 
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;capsule... Capsule... Where are you?&quot;)&gt;&gt;
[[You find the capsule]]</tw-passagedata><tw-passagedata pid="460" name="You find the capsule" tags="" position="1225,5725" size="100,100">You open the case. And laugh at the contents.
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Why does this thing look like a massive butt plug... Marissa, you had a one track mind...&quot;)&gt;&gt;
The cylindrical &quot;capsule&quot; has some kind of electronic connector at the base. You tap it to your card, and it makes some sort of &quot;happy chime&quot; tune after you do so. 

For the next step... There&#39;s no one you can argue with down here...  Also, you&#39;re not sure how long all this is going to take, so you strip down, slather the &#39;capsule&#39; with the provided lube, and slowly work the mass of it deep inside you.
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;phhhuhhuhuk...&quot;)&gt;&gt;
You have to stop a couple times,as it&#39;s a little too intense, but finally, it is seated inside you. Your breathing calms enough for you to look at the next steps.

... [[OPENING SUIT]]</tw-passagedata><tw-passagedata pid="461" name="OPENING SUIT" tags="" position="100,5850" size="100,100">...OPENING SUIT
&lt;div class=&quot;letter&quot;&gt;While the suit is in the empty and dormant state, press the activation ring near the center of the suit to initiate opening...&lt;/div&gt;
A helpful diagram shows the activation ring to be a circular nub where you&#39;d expect her genitals to be.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Here goes.&quot;)&gt;&gt;
With a bit of trepidation, you push the button. A dot of yellow light appears where you pressed. It is so subtle, the glow is more like a firefly than a light. The glow slowly spirals around where you pressed with a subtle pulsing of brightness. After about 30 seconds, the light stops spinning, the ring glows a dim green color. The back of the suit splits open, peeling down the middle, to &quot;her&quot; ass. The back of the silvery head flips backwards. 

&lt;div class=&quot;letter&quot;&gt;Orient the suit &quot;face-down&quot;
Activate the MFMS support cart 
Attach the support cart harness clips to the retention rings
Connect suit to support device on cart&lt;/div&gt;
[[Flip the suit]]</tw-passagedata><tw-passagedata pid="462" name="Flip the suit" tags="" position="225,5850" size="100,100">The suit... it seems more like a living thing. The inside is quite dark, but what you can see is pinkish - it seems almost organic - but also shiny, in the way it reflects light.

You stick a hand in, out of curiosity... Unlike the dollsuit, the inside is almost warm to the touch... It has a weird slime texture to it. Perhaps more of the neuro-conductive gel? Your hand exposes the opening wider.  There is a slightly fragrant floral odor to the suit. The pink &quot;flesh&quot; color seems &quot;healthy&quot; and your subconscious mind is quickly drawn to it... Attracted to the insane idea of immediately putting yourself &quot;inside&quot; of this hollow mermaid...

But first, the cart... You locate the little unfolding rolling cart in another case which extends out from its packed form. There&#39;s some machine at the bottom with a cable. The cart has telescoping metal arms on both sides, which you extend out. Both has a set of four nylon straps with carabiners at the ends. You quickly figure out that these can hook various eyelets on the MFMS to support it at a slight angle from vertical to raise it up. It looks like this is designed to make the bulky suit easier to put on than from the floor. A kinky thought runs through your mind... The suit could be suspended for less... scientific endeavors. The cart also has a couple of really sturdy handles at the side, which seem like they will be helpful to help you stay balanced while getting in. There&#39;s also some kind of joystick on one side.

Finally you connect the cable from the device on the cart to a matching notch in the narrow of the tail.

&lt;div class=&quot;letter&quot;&gt;Arrange for operator to remove ALL clothing and accessories, with exception of support capsule and any genital security devices.
Arrange for operator to enter suit feet first, one leg at a time.
Slide arms into matching appendages.
Take breathing orifice into mouth
Press activation ring to initiate operator-suit integration process
&lt;/div&gt;
[[You&#39;re not sure what that last part implies, but no stopping now.]]</tw-passagedata><tw-passagedata pid="463" name="You&#39;re not sure what that last part implies, but no stopping now." tags="" position="350,5850" size="100,100">&lt;&lt;=SugarCube.getLib().PlayerModel.togglePlayerHidden(true)&gt;&gt;\
You strip out from your clothes, and put it all in a tidy arrangement near the wall.... On one hand, there is something unnatural about this thing, but the intimacy of it kind of turns you on. You&#39;re glad you at least have some privacy to do this.

You hesitantly slide one leg into the darkness of the tail. The slimy texture is kind of gross, but your leg quickly works its way down, and your foot finds support with rigid spots between what seems to be the narrowest point of &#39;her&#39; majestic tail. You grab hold of the cart&#39;s side handles, and take your second foot off the ground, to slide into the suit. Gravity is now pulling you into the suit - a nagging thought occurs to you- it could be much harder to get out of this tail, than it was getting in.

Next, you work your right hand into the slender right arm sleeve. Getting your fingers in takes some effort - you feel some goop blow out into your armpit after you work your fingers in. With your now shimmering silver-blue &quot;gloved&quot; hand holding the cart handle, you slide your other arm in, as more of your body finds itself in the gentle embrace of this suit, hanging from the cart. You mesh your two glossy hands together.

You arrange your hair to make sure it will fit under the head of the suit. Unlike most of the skin which is so very sleek and smooth, the fingertips of the suit has some kind of rubberized texturing to give a rather good hold on things. You feel behind the suit - the two sides of the suit don&#39;t really want to close on their own, and there&#39;s no physical affordance like a zipper to be found.

Finally, you take the &quot;mouthpiece&quot; into your mouth. You&#39;re relieved that it is very much just like a diving regulator, passing air normally through a mouth hole in the face. But the inside of the head of the mermaid is opaque. You are plunged in darkness. So mysterious.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Well, Now or never... Here I go&quot;)&gt;&gt;
[[You push the activation ring]]</tw-passagedata><tw-passagedata pid="464" name="You push the activation ring" tags="" position="475,5850" size="100,100">Now, you feel the suit closing in around you, and can&#39;t see anything. the back of the &quot;head&quot; comes enclosing around every part of your own. The gap over your spine in the back was open seems to pull itself together like a zipper, starting from above your butt up to just behind your shoulders. You don&#39;t feel the air on your naked body anymore. Your ears get plugged, and you feel your closed eyelids in direct contact with a thick gel. Your eyelids resist opening now.

The suit has completely encased you.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Connecting with advisory capsule.&quot;)&gt;&gt;
You then feel muscle fibers of the suit contracting slightly around your body, surprisingly comfortable, sort of similar to how your favorite yoga pants nicely hug your butt. As opposed to almost-crushingly tight, like the dollsuit. Attaching to the &quot;capsule&quot; in deep in your butt... You feel it gingerly pulse inside you a few times.

Finally, you feel a voice speak... in your head. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;, this is your suit speaking. Identification and mission verified. You are safe inside me. &quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Wait, whutt?! Are you alive?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;No, I am merely a user interaction and guidance program. Please relax for neuralink attunement to complete.&quot;)&gt;&gt;
Suddenly, you feel your feet on the floor of the room. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Wait, is this thing making me taller?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;No, at least not yet, please stand by for attunement to complete.&quot;)&gt;&gt;
The room becomes visible, the light seems so much brighter now, your field of view is much wider than normal.

You touch to feel... Her face - it is almost perfectly smooth and rounded, there is no mouth or nose. The hands- encased in smooth, glossy scales which continue up her elegant arms. As you bring your finger up to her eyes... You don&#39;t instinctively close your eye when it touches. You find yourself able to blink, but you don&#39;t feel any resistance from your finger, as if the eyelid was on the inside the eye.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Adapting wearer to suit&quot;)&gt;&gt;
You feel some discomfort in your chest, and cough momentarily but you can&#39;t pin it down, but it passes. Momentarily you feel that tingly sensation as if your leg fell asleep, but for your entire body. It passes. Now, you don&#39;t feel your arms or legs as inside the warm, thick suit. Instead you start feeling a gentle draft on the mermaid&#39;s scales.

As you look down, the first thing you notice, is her breasts... they are magnificent. And the feeling of the floor, you realize is her sensitive tail resting upon it. The room feels so very... Dry on her... scales.  You feel... Naked in the room. A body like this belongs in water... You suddenly feel an irresistible craving to be in the water.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Enhancing tail geometry&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Owww. That hurts!&quot;)&gt;&gt;
You feel a sharp pain and some hear dull popping sounds. It feels like your legs are being drawn together and stretched out. Where the flat end of the tail felt loosely connected, it now feels as if it were your feet and all part of you. The pain has subsided, fortunately.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Phew... I hope that doesn&#39;t leave a mark.&quot;)&gt;&gt;
[[Check the instructions for next step]]</tw-passagedata><tw-passagedata pid="465" name="Check the instructions for next step" tags="" position="600,5850" size="100,100">You are just out of reach of the guide notes, so use your weight and awkwardly kick with your tail to shift the cart within arms reach of it. Finally you pick it up.
&lt;div class=&quot;letter&quot;&gt;Operator can transition to internal instructions using the thought word &quot;advise&quot;.
&lt;/div&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;advise&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;STATUS: Suit is integrated with wearer. Extending riding platform for mermaid transportation mode. Operator, please move self to water lockout cell.&quot;)&gt;&gt;
Right now your tail is on the floor - A &quot;V&quot; shaped platform rises up from the cart, stopping at a height which allows you to rest your knees, and then a back plate starts tilting upward, giving your tail some support.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Where is that? And how? I can&#39;t walk like this!&quot;)&gt;&gt;
It&#39;s feeling like a desert in here - Was it always so dry in here?
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Proceed forward and turn right at corridor. Use the cart control stick below rest handle. Activating navigational homing system.&quot;)&gt;&gt;
[[You try to control the cart]]</tw-passagedata><tw-passagedata pid="466" name="You try to control the cart" tags="" position="725,5850" size="100,100">You make an attempt to control the cart with the joystick - it&#39;s crazy sensitive and jerky. After a few awkward movements, you figure out how to slowly cart your mermaid booty over there. You see a set of animated navigational arrows in your field of vision. As you get closer, you feel accelerating pulses from the plug-capsule in your ass reinforcing the message you are getting closer to the destination.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;That&#39;s a curious choice...&quot;)&gt;&gt;
You can only imagine what a silly sight you would make, this bluish mermaid, with an ungainly tail, kneeling on top of a tiny wheelchair-like cart as it rolls around dry ground.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;We are arriving at our destination. Holding wheels in parking mode. Lowering riding platform. Detach support cable and suspension clips to release self from cart, and open inner water lockout cell door.&quot;)&gt;&gt;

You disconnect yourself from the cart&#39;s clips one by one, and flop yourself onto the floor. Shimmying on your tail-knees to the inner water lockout hatch on the floor, you see two indicators. One saying &quot;outer door closed&quot;, and another &quot;safe to open inner door&quot;. You open the inner water lock door along the well. Once opened, the water vapor rising out from the lock feels so fresh and inviting.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Operator, lower us into the water and activate pressurized swim mode with thought-word &#39;aquatic&#39; and prepare for phase transition.&quot;)&gt;&gt;
You slowly slide in with the tip of your tail looking into the water. You push your ankles into the water - sitting at the edge with the water, the cooling effect is nice. You love the sensation of how the turbulent water plays across your scales. 

You turn around and lower yourself, using your arms to steady yourself into the water. You don&#39;t feel any kind of cold shock around your groin. You dip in with the water to breast depth. You feel your body relax, immersed in the water like this.

[[Activate swim mode]]</tw-passagedata><tw-passagedata pid="467" name="Activate swim mode" tags="" position="850,5850" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Aquatic&quot;)&gt;&gt;
And just like that, you start feel the skin to the sides of your breasts starting to move on its own. Suddenly you feel the suit compress itself around your body. It is a little uncomfortable, just shy of painful, but similar to the dollsuit, so you can tolerate that. As you see the incredible curves it bestows onto you, this seems to be another one of those times, where beauty entails discomfort.

Oh fuck. Something seems to have gone wrong! The mouthpiece is suddenly flooding with water. No, to die by drowning, trapped in this fiendish suit, with air so close but so far. This must be how it feels like for people getting waterboarded.
[[Try to find a way to get the mask off]]
[[Try to stay calm and hope for the best|Try to find peace in the moment]]</tw-passagedata><tw-passagedata pid="468" name="Try to find a way to get the mask off" tags="" position="975,5850" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Wait, stop... I... (cough) can&#39;t (cough)&quot;)&gt;&gt;
You start freaking out, trying to find a way to disengage or stop it... It&#39;s too late to get out. You are completely trapped inside this thing. The mouth hole for breathing has sealed shut. The face is so perfectly smooth, there&#39;s no mask to remove or a way for you to get the your mouth to fresh air before you drown! You try the button, but no effect! How would anyone find or recover your dead body in this sealed room?
[[You try to be stoic|Try to find peace in the moment]]</tw-passagedata><tw-passagedata pid="469" name="Try to find peace in the moment" tags="" position="1100,5850" size="100,100">You try to collect yourself, and hear:
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Do not panic. You are safe, you are not drowning. Your lungs are being irrigated with a breathable, oxygen rich mixture of conditioned liquid perfluorocarbon.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;However, liquid fluid exchange in your lungs is insufficient for normal respiration. Your bloodstream is now being oxygenated by gas exchange by our gills.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;What?!&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Our gills will allow your body to obtain sufficient oxygen and to discharge carbon dioxide without a supplemental payload using the surrounding water. Have you regained awareness of your situation?&quot;)&gt;&gt;
With your lungs full of the fluid, you realize it is true, you aren&#39;t drowning.

That said, this breathing in water thing is unsettling. You are feeling quite out of your element. Ironic that one would describes this sort of predicament as being like a fish out of water.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Fuck... That was really scary, you could warn a girl, you know? Something like, &#39;oh, by the way, you won&#39;t *really* be drowning with water in your lungs while trapped inside of this sexy but absolutely claustrophobic suit&#39;...&quot;)&gt;&gt;
It felt good to get that off your chest.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Ok, yes... I&#39;m fine.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Apologies. The creators of this program designed it with the expectation that the operator of this advanced system has thoroughly reviewed the reference manual before first use.&quot;)&gt;&gt;
As you regain your calm, the &quot;gills&quot; behind your breasts are gently swaying in the water. The way they rhythmically sway is almost hypnotic to watch.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Now, please close the inner hatch and equalize exterior pressure for opening outer hatch.&quot;)&gt;&gt;
You close the inner hatch and press an &quot;exterior equalization&quot; button. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Ok, inner hatch is closed&quot;)&gt;&gt;
You see a green &quot;unlocked&quot; light blinking for the outer hatch.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Next, please open the outer hatch.&quot;)&gt;&gt;
[[Perform a &#39;self-inspection&#39; of the suit before departing]]
[[You open the outer hatch and depart the station]]</tw-passagedata><tw-passagedata pid="470" name="Maybe some other time" tags="" position="1225,5850" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;I&#39;m sorry, I think I&#39;m a little tired from the diving, I&#39;m not really keen on a movie right now. Uhh, I&#39;m really busy with work, not much time for dating or that kind of thing right now.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Oh, uhh - no biggie... Oh, shoot I forgot to clean up the filters in the lab... Sorry, I have to run!&quot;)&gt;&gt;
She feigns a smile and quietly makes a beeline for the exit.
[[Station Moonpool]]</tw-passagedata><tw-passagedata pid="471" name="Politely Decline Margaret" tags="" position="100,5975" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Thanks for the offer. You&#39;ve been really helpful, and working with you has been fun. But, I was just supposed to do a call to my SO tonight. You know how things can get busy sometimes.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Oh... yeah, of course. Work gets crazy and pesky calls with SO&#39;s,  ha ha.&quot;)&gt;&gt;
She makes a wacky face, holds up her hand as if holding a phone and bobs her head as if she&#39;s talking on said phone. She doesn&#39;t normally get too animated, but she seems to be over-compensating to seem chipper.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Oh, no biggie. Anyway, well yeah... Ok, maybe some other time&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Enjoy your movie!&quot;)&gt;&gt;
She quietly makes a beeline for the exit.
[[Station Moonpool]]</tw-passagedata><tw-passagedata pid="472" name="Watch Movie with Margaret" tags="" position="225,5975" size="100,100">You arrive in the Galley to find the room darkened, with a projector showing a title screen for a nature documentary.

As you arrive, you see margaret taking a baking sheet out of the oven. There&#39;s a bottle of some cheap looking white wine in an ice bucket, and a couple mess hall tumblers. Some shuffling noises in the kitchen, and then she is walking over with a tray and a bowl.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Ok, confession time... I&#39;m a fiend for these Zucchini Spears.&quot;)&gt;&gt;&quot;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;zuccini-spears.jpg&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;And this other bowl has roasted chickpeas with seasonings. You won&#39;t be able to eat just one.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;chickpeas.jpg&quot;)&gt;&gt;
She sets the snacks up on the table in front of you two, and pours servings of wine in the plastic mess tumblers. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Sorry, no glassware here. Shall we start the movie?&quot;)&gt;&gt;
It&#39;s admittedly not a particularly elaborate setup, but you can tell she took some effort in preparing this stuff.

The documentary has some incredible scenes of vivid color and action. You wonder how long the camera crews took to get those amazing shots.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;nature-documentary2.jpg&quot;)&gt;&gt;
[[The movie continues]]</tw-passagedata><tw-passagedata pid="473" name="The movie continues" tags="" position="350,5975" size="100,100">You shiver, and feel yourself getting a little cold from a draft, you look up and notice the air has started blowing from a vent. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Oh, are you feeling that too? The AC sometimes can be aggressive when it comes on, and I could never figure out how to stop it. I sometimes bring this blanket to cover my lap for when I&#39;m watching tv here.&quot;)&gt;&gt;
She pulls a fleece blanket out from her bag.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;I&#39;m going to throw this on my lap... Want to share this blanket with me?&quot;)&gt;&gt;
[[No I&#39;m fine]]
[[Please, that sounds great!]]</tw-passagedata><tw-passagedata pid="474" name="Please, that sounds great!" tags="" position="475,5975" size="100,100">The blanket isn&#39;t super wide, so you find yourselves seated a little closer... The scenes of the documentary are quite captivating, but your attention isn&#39;t entirely on the movie.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;nature-documentary.jpg&quot;)&gt;&gt;

You feel her hand gently grazing the outside of your leg. You glance over to her. She shyly gazes down and away. But you also see what might be a coy smile.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;My back and shoulders are so sore from lugging around those heavy scuba tanks this morning. ughh...&quot;)&gt;&gt;
She rubs the back of her neck, but she can&#39;t really reach very well...
[[Rub her shoulders]]
[[Sorry to hear that|The film continues]]</tw-passagedata><tw-passagedata pid="475" name="No I&#39;m fine" tags="" position="600,5975" size="100,100">The scenes of the documentary are quite captivating...
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;nature-documentary.jpg&quot;)&gt;&gt;
[[The film continues]]</tw-passagedata><tw-passagedata pid="476" name="Rub her shoulders" tags="" position="725,5975" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Let me get that.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Oh, could you? You&#39;re the best.&quot;)&gt;&gt;
She unzips her jacket down, giving you better access. You oblige with kneading her shoulders and back as you watch the film. She&#39;s right next to you. Her legs are putting out heat. You can hear her breathing is excited.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;That&#39;s nice. Could you go a little lower on my back? If you want to put a little more pressure, I can handle it.&quot;)&gt;&gt;
She winks at you. You reach up from under her shirt to massage her lower back. You oblige and really work your thumbs in.  She bites her lip and leans her back into your grip. She then slides a hand under the blanket and between your thighs.
[[You continue]]</tw-passagedata><tw-passagedata pid="477" name="You continue" tags="" position="850,5975" size="100,100">Her deep breaths are audible, as you make slow circling motions over her back. She is stroking her fingers over your clothed inner thighs. She turns to face you and move her face closer to yours as...

The mess hall door loudly opens. Titus enters the darkened room. You discreetly shift your hands out from Margaret&#39;s back. She still has hers in your lap.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;Hey nerds! What&#39;cha watching?&quot;)&gt;&gt;
Before either of you can respond he&#39;s already figured it out. A baby lizard is being chased by a legion of hungry snakes
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;Oh! That&#39;s one of those nature documentaries! I didn&#39;t realize it was movie night! Look at that little lizard go! hehe&quot;)&gt;&gt; 

&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;sneks.jpg&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;Hah! The little bastard made it!&quot;)&gt;&gt; 
Bar goes to grab a can of beer from the fridge and grabs a seat at the table. You&#39;re a little surprised the gruff mercenary would join you for this.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;Oh, these look nice. Can I?...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Be my guest...&quot;)&gt;&gt;
Margaret gestures at the food. He grabs a bite of one of the spears.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;Oh, this has just a little heat. What is that spice, Coriander?&quot;)&gt;&gt;
 Meanwhile, her hand is continuing to slowly play in your thigh gap under the blanket. She&#39;s been probing around your &lt;&lt;if (SugarCube.getLib().PlayerModel.hasGirlyGenitals())&gt;&gt;chastity belt&lt;&lt;else&gt;&gt;chastity cage&lt;&lt;/if&gt;&gt;. It&#39;s hard to think straight at this point, but not enough to give you release.
You hear the door...
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;eng&quot;,&quot;Noche de cine!&quot;)&gt;&gt;
Bar hoists up a beer to salute your colleague, who grabs a beer as well, and gets seated about a foot away from you. He seems oblivious of Margaret&#39;s hand. You look at her - The movie is almost over, and the two of you can soon have some girly fun in private.
[[The film ends]]</tw-passagedata><tw-passagedata pid="478" name="The film continues" tags="" position="975,5975" size="100,100">The mess hall door loudly opens.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;Hey nerds! What&#39;cha watching?&quot;)&gt;&gt;
Before either of you can respond he&#39;s already figured it out. A baby lizard is being chased by a legion of hungry snakes
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;Oh! That oh one of those nature documentaries! I didn&#39;t realize it was movie night! Look at that little lizard go! hehe&quot;)&gt;&gt; 

&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;sneks.jpg&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;Hah! The little bastard made it!&quot;)&gt;&gt; 
Bar goes to grab a beer from the fridge and grabs a seat at the table. You&#39;re a little surprised the tough mercenary would join you for this.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;Oh, these look nice. Can I?...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Be my guest...&quot;)&gt;&gt;

You hear the door...
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;eng&quot;,&quot;Noche de cine!&quot;)&gt;&gt;
Bar hoists up a beer to salute your colleague, who grabs a beer as well, and gets seated about a foot away from you...

Eventually the movie wraps up, and you help Margaret clean up.
You&#39;re tired from the dive, so you go to your bunk to [[Sleep|Sleep on research station - Recurring]]</tw-passagedata><tw-passagedata pid="479" name="The film ends" tags="" position="1100,5975" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;I gotta admit, that was a pretty nice way to unwind. A toast to the hostess for getting the crew together for a movie night!&quot;)&gt;&gt;
Everyone is willing to drink to that.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;But, Elso just got in... We can&#39;t stop there. Who&#39;s got a hankering for another movie? Oh, I know just the thing for our rookie here...&quot;)&gt;&gt;
He flips through the old DVD collection to find what he&#39;s looking for.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;Deep Blue Sea... Just the thing for right before bed on a station like this, haha! Samuel L Jackson has a speech that is to die for.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Ok, I&#39;ll admit Saffron Burrows is kind of a bad-ass in this one...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;Well, yeah - she&#39;s a stone fox. Who wouldn&#39;t tap that, right?&quot;)&gt;&gt;
Bar puts out his Beer - Elso clinks his bottle with it. Did he even understand what he said? Margaret is blushing a little and smiling at you.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;So, Rookie are you gonna watch, or chicken out on us?&quot;)&gt;&gt;
No thanks (The peer pressure is far too great)
[[uhh, sure]]</tw-passagedata><tw-passagedata pid="480" name="uhh, sure" tags="" position="1225,5975" size="100,100">As the room goes dark with the new movie, Margaret gives your thighs a break. It&#39;s good she&#39;s being careful about not getting caught out by the others.

You start watching the film... It&#39;s a goofy sci-fi horror B-Movie...

At a point where there&#39;s a lull in the action, Margaret caresses your back - it feels nice. There&#39;s an interesting speech by one of the characters as the party rallies together... 
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;deep-blue-sea2.jpg&quot;)&gt;&gt;
But, this is a horror movie, so the situation becomes more desperate. This movie seems to have opted to titillate, rather than being high brow. You can forgive them on that.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;deep-blue-sea.jpg&quot;)&gt;&gt;
It is a little unsettling to see a movie about being on a sinking research station trapped with sharks, but you remember it&#39;s all hammed up for the drama on the big screen, and none of it is real. Eventually, the movie comes to a climactic ending, and everyone gets up as the party breaks off. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;I&#39;ll give you a hand with cleaning up?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Thanks - sure, could you put that stuff in the garbage and wipe the table? Have a good night boys.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;Thanks again, good night all.&quot;)&gt;&gt;
Bar lets out a hearty belch, crushes his can, throws it in the garbage and struts out.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;eng&quot;,&quot;buenas noches!&quot;)&gt;&gt;
Elso waves and leaves.
[[You start cleaning up]]</tw-passagedata><tw-passagedata pid="481" name="You start cleaning up" tags="" position="100,6100" size="100,100">The men head off, and you two are once again left alone... After you&#39;ve put things away in the kitchen, Margaret jumps on you, clamping her petite legs around your waist, and starts kissing you, almost knocking you off balance. You shift her onto the counter, where the two of you continue what is a long make-out session. Meanwhile, her hands are exploring your back, and lower... 

&lt;&lt;if SugarCube.getLib().Slot.get(&quot;ass&quot;) != null &gt;&gt;\
She gets a hand under your panty, and gets hold of your buttplug. She doesn&#39;t have a strong grip from where she is, but she starts rocking it in and out with her gentle touch. You can&#39;t help but moan...
&lt;&lt;else&gt;&gt;\
She gets a hand under your panty, and starts fingering your ass. It&#39;s a bit of a stretch from where she is, so she doesn&#39;t go deep with that one finger, but you feel her gentle touch nonetheless. You can&#39;t help but moan...
&lt;&lt;/if&gt;&gt;\

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;ohhhh&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;You really like that, don&#39;t you? Oh, I bet you&#39;re still hungry...&quot;)&gt;&gt;
She makes her way to the fridge.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;No actually those snacks were nice, but I&#39;m pretty full.&quot;)&gt;&gt;
She pulls out a couple large cucumbers. With a mischievous look, she responds... and rubs one of the cucumbers over her crotch.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Oh, honey - I saved these for us... But, we&#39;re not making a cucumber salad with these ones. And I don&#39;t think you&#39;re close to full yet.&quot;)&gt;&gt;
She puts them in her bag, and the two of you [[head to her office]]. The guys never go there.</tw-passagedata><tw-passagedata pid="482" name="head to her office" tags="" position="225,6100" size="100,100">&lt;&lt;= SugarCube.getLib().MirrorUX.saveLastOutfit()&gt;&gt;\
&lt;&lt;= SugarCube.getLib().MirrorUX.removeExplicit([&quot;penis&quot;,&quot;ass&quot;])&gt;&gt;\
After a quick detour to grab some condoms from her bunk, you descend together to her office. She lays the blanket on the floor, and the two of you start kissing, and tearing your clothes off of each other like some wild animals fit for that documentary.

Margaret can&#39;t wait - she bends over, adds some lube to a cucumber and plunges it between her legs.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Ohh god, it&#39;s still so cold from the fridge...&quot;)&gt;&gt;
 You take the hint, and get in behind her, &lt;&lt;if (SugarCube.getLib().PlayerModel.hasGirlyGenitals())&gt;&gt;fucking her with it as if you were a man and the cucumber were your dick. Well, in a sense you &quot;were&quot; a man, but you are very much now fucking her &quot;as if&quot; it were your dick. &lt;&lt;else&gt;&gt; fucking her with the cucumber. You feel slightly envious of the vegetable inside her... Your tiny remnant remains trapped in a dainty cage unable to feel or pleasure her, but you do have to admit you have some gorgeous curves, at least.&lt;&lt;/if&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;cucumber-fuck.jpg&quot;)&gt;&gt;

Margaret passes through some orgasms that way, until you both start to get bored with &quot;fucking&quot; her that way... 

You continue to toy her with the vegetable with one hand, while you start licking her sweet folds and caress her with the other. You like the way she tastes, and from her moans, she seems to enjoy the closer attention you provide her clit.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;cucumber-lick.jpg&quot;)&gt;&gt;

You start to pick up the pace, ream her with deeper plunges of the vegetable, setting her off with spasms in a delirious orgasm. As she comes back from the highs of that, she stands up and cradle the cucumber between her lean legs, in front of your face. You hear a contrived &quot;tough girl&quot; voice which is incongruous with the Margaret you know.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Come on bitch, you know you want it.&quot;)&gt;&gt;
You can&#39;t help but laugh at her say that... However, it&#39;s just a vegetable, between the legs of this gorgeous woman, gesturing for some more oral sex.

You start working on taking girth of it, as you have fun with her and try to impress her with how good you are at that. It&#39;s weird how relaxing it is to have your mouth filled up like that. Margaret takes it nice and slow. 
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;cucumber-suck.jpg&quot;)&gt;&gt;
She&#39;s starting to get aroused as your putting pressure on her pussy lips with it. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Oh, oh... I&#39;m coming!&quot;)&gt;&gt;
Her getting turned on like that kind of gets you excited, so you work your head even faster on on the &quot;shaft&quot;, and you see some wetness squirting out of her.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Mmm... That was really good.&quot;)&gt;&gt;
She takes the cucumber out, presenting the girlcum laden  end to you, as she slides the other end into her own mouth. The two of you attempt to deepthroat it, lady-and-the-tramp-style, as you stare into each other&#39;s eyes...
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;cucumber-kiss.jpg&quot;)&gt;&gt;
As it happens, neither of you can take anything close to that in your respective mouths, nor are super aroused at that experience, but you have a good laugh at the attempt.

[[Margaret reaches a hand toward your groin]]</tw-passagedata><tw-passagedata pid="483" name="Margaret reaches a hand toward your groin" tags="" position="350,6100" size="100,100">&lt;&lt;=SugarCube.getLib().PlayerModel.triggerSexualRelease(false)&gt;&gt;\
&lt;&lt;if (SugarCube.getLib().PlayerModel.hasGirlyGenitals())&gt;&gt;\
Margaret puts a hand to your belt, and rubs it up and down.
&lt;&lt;else&gt;&gt;\
Margaret puts a hand to the chasti-flex, and rubs it up and down.
&lt;&lt;/if&gt;&gt;\ 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;So, when I do this... Do you feel anything from that?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;No, I haven&#39;t been able to get stimulated there, when wearing it. But...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;but?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Well, I&#39;ve become really sensitive to having orgasms... You know, back there...&quot;)&gt;&gt;
She responds coyly. She turns her head to look behind her.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Back there? Back where?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;sigh...&quot;)&gt;&gt;
You get on your knees and turn away from her. She gives your ass a quick slap, you whelp. She puts a condom on the veg and lubes it up...
&lt;&lt;if SugarCube.getLib().Slot.get(&quot;ass&quot;) != null &gt;&gt;\
She toys with your plug, rocking it back and forth, and then pulls it out before sliding the cucumber into you, her other hand caressing your back.
&lt;&lt;else&gt;&gt;
She then toys the cucumber around your behind, before insistently sliding into you, her other hand caressing your back.
&lt;&lt;/if&gt;&gt;
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Ohh. ho hohhh...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Shhhssh&quot;)&gt;&gt;
She pumps you with it so slowly. You can feel your excitement rising... It&#39;s been a little while since you last felt an orgasm. You can&#39;t help but clench tight on it. Margaret seems to be getting into teasing you this way, as she whispers into your ear.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;That&#39;s it, cutie... &quot;)&gt;&gt;

The two of you start to work up a good rhythm. Margaret is really into this now. She slaps your ass a couple times and says:
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Mmm, yeah baby! Take my big... green... sexy... uhh... cucumber cock..&quot;)&gt;&gt;
She sounds so ridiculous saying that, you start to laugh. Something about the laughter triggers something else and pushes you over the edge... You feel your body cumming as waves of orgasmic relief pass through you.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;ohh... I thought I was going to explode. Mmm...&quot;)&gt;&gt;
She, runs a hand along your shoulder and grabs a cloth to wipe some dribble that starts coming out of your chastity device. You look at the clock - it&#39;s late. Real late. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Oh Fuck, we were really going at it for that long?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().PlayerModel.triggerSexualRelease(false)&gt;&gt;
[[You both start getting dressed]]</tw-passagedata><tw-passagedata pid="484" name="You both start getting dressed" tags="" position="475,6100" size="100,100">&lt;&lt;= SugarCube.getLib().MirrorUX.restoreLastOutfit()&gt;&gt;\
She gives you a quick peck on the lips, and is starting to get dressed.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Yeah- I lost count of how many times I... uhh, That was nice.&quot;)&gt;&gt;
You are starting to do likewise, as she&#39;s tidying up the scene of the crime. You both quietly take the stairs to quarters and go to your respective bunks.
[[You arrive at your bunk]]</tw-passagedata><tw-passagedata pid="485" name="You arrive at your bunk" tags="" position="600,6100" size="100,100">It&#39;s soo late...
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;quarters.jpg&quot;)&gt;&gt;
[[Sleep|Sleep on research station - Recurring]]</tw-passagedata><tw-passagedata pid="486" name="Install ansible transceivers" tags="" position="725,6100" size="100,100">&lt;&lt;if !SugarCube.getLib().PlayerModel.canWork()&gt;&gt;
You are too tired to work right now. Try tomorrow.
&lt;&lt;else&gt;&gt;

You suit up once more with Margaret to go out for your real dive.

For this one she has you controlling a drone to tow the equipment and back her up on installing the remote platform ansibles.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;underwater-drone.jpg&quot;)&gt;&gt;

The drone is a big help with lugging the gear, and you use it to spare a bit of effort at swimming. It&#39;s also kind of fun to use.

The first 12 platforms at shallower depths go pretty quick. Just practicing the dive techniques was a bit of work on your check-out dive... Having to actively work through the install checklists with Margaret, while being careful to avoid mistakes was physically and mentally exhausting for you. You come out of the water...
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;second-dive.jpg&quot;)&gt;&gt;

You stay in your wetsuits and  unwind at the moonpool for about half an hour. Margaret gets a fresh set of tanks ready for the second round.

The second dive has the two of you replacing another 8 ansibles on remote platforms, it&#39;s fewer of them, but the deeper water means you are using your air more quickly at the higher pressure, and have less time to work. Fortunately two sets of hands make the work move considerably quicker. Margaret was a lot better at this stuff than you, but she seems glad that you were able to lend a bit of support while she does this work. 

&lt;&lt;=SugarCube.getLib().StationWork.completeTask(&quot;install-ansible-transceivers&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;remove-old-ansible&quot;)&gt;&gt;\
&lt;&lt;/if&gt;&gt;
[[Go somewhere else|Sea Station]]</tw-passagedata><tw-passagedata pid="487" name="Support install of ansible transceivers" tags="" position="850,6100" size="100,100">&lt;&lt;if !SugarCube.getLib().PlayerModel.canWork()&gt;&gt;
You are too tired to work right now. Try tomorrow.
&lt;&lt;else&gt;&gt;
You get set up in the bridge to help Margaret perform the installs of the new remote platform ansibles.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;control-room.jpg&quot;)&gt;&gt;

For this, she has you controlling a remote drone to help lug around the replacement parts, and keeping track of her vitals for the long dive.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;underwater-drone.jpg&quot;)&gt;&gt;

Due to short amounts of bottom time where some of the platforms are, Margaret stops the dive after switching 13 of the ansibles at shallower depths, to take a 30 minute break at the moonpool, and switches a new tank. From there, she does another 7 at moderate depths, followed by another break. By the end of the second dive, you can hear some stress in her voice, and she comes back from that. Finally, she goes out for a deep dive to swap out 4 transceivers on the deepest of the remote platforms, heading back with just moments to spare.
&lt;&lt;=SugarCube.getLib().StationWork.completeTask(&quot;support-ansible-transceiver-install&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;remove-old-ansible&quot;)&gt;&gt;\
You meet and congratulate her on changing the equipment - it seemed like tough work. She seems completely exhausted, but happy to be done, at least. Now, you just need to remove the old ansible for this station, and your work here is done. 
&lt;&lt;/if&gt;&gt;
[[Go somewhere else|Sea Station]]</tw-passagedata><tw-passagedata pid="488" name="Arrange to leave station" tags="" position="975,6100" size="100,100">&lt;&lt;if !SugarCube.getLib().PlayerModel.canWork()&gt;&gt;
It&#39;s too late to do this right now. Try tomorrow.
[[Go somewhere else|Sea Station]]
&lt;&lt;else&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;So, the nerds are done playing in the sand? Looks like you picked a good time to wrap things up. Radar has the storm finally clearing up.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;Looks like the Heli will be coming in, in about 20 minutes. You&#39;ve got some time to gather your gear.&quot;)&gt;&gt;
[[Collect your stuff from your bunk]]
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="489" name="Collect your stuff from your bunk" tags="" position="1100,6100" size="100,100">&lt;&lt;=SugarCube.getLib().StationWork.completeTaskNoPay(&quot;prepare-to-leave-station&quot;)&gt;&gt;
You hustle down to your bunk. You clear off the sheets and towels and take them over to the station laundry. Finally, you collect your stuff from the locker and bundle it together. 

You get back up to the bridge with a few minutes to spare. Margaret is lounging up there.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;... It&#39;s time for me to clear out.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Thanks for the help here on the station! These last few days were... good.&quot;)&gt;&gt;
There&#39;s a certain look in her eyes, and you and Margaret awkwardly have a light hug.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;uhh, thanks for showing me the ropes with... things here.&quot;)&gt;&gt;
From behind her, you can see the dot on the radar screen.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;Helicopter is approaching the deck, better bring up the cart.&quot;)&gt;&gt;
You and Margaret take the elevator down to the hold. The heavily loaded cart takes a bit of effort, but the two of you pull it back, onto the elevator.

&lt;&lt;if hasVisited(&quot;Margaret reaches a hand toward your groin&quot;)&gt;&gt;\
[[Kiss Margaret]] in this quiet moment alone
&lt;&lt;/if&gt;&gt;\
[[Press the Elevator Button]]</tw-passagedata><tw-passagedata pid="490" name="Press the Elevator Button" tags="" position="1225,6100" size="100,100">The two of you aren&#39;t really sure what to say to each other at this point.
[[You arrive at the top stop]]</tw-passagedata><tw-passagedata pid="491" name="Kiss Margaret" tags="" position="100,6225" size="100,100">The two of you only have a moment to yourselves, but you try to savor that last little bit as the elevator ascends.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;marg-lez-kiss.jpg&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;mmm... Don&#39;t be a stranger. Maybe we can bump into each other again some time?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;I could think of worse things...&quot;)&gt;&gt;
[[You arrive at the top stop]]</tw-passagedata><tw-passagedata pid="492" name="You arrive at the top stop" tags="" position="225,6225" size="100,100">The elevator arrives. You and Margaret hustle the gear to the side of the helicopter platform. After less than a minute, Bar arrives up top, and the helicopter descends toward the station.

Suddenly, it has landed and everyone is running the gear onto the helicopter. Before you know it, everything is loaded on.
[[Fly back to Montevideo]]</tw-passagedata><tw-passagedata pid="493" name="Fly back to Montevideo" tags="" position="350,6225" size="100,100">The helicopter trip back seems to go quicker, the wind seems to be helping you out on this one.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;helicopter.jpg&quot;)&gt;&gt;

The familiar sight of the city comes into view.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;montevideo.jpg&quot;)&gt;&gt;

Again, at the airport, a private jet is waiting for you at a hangar. The staff loads everything up, and you are immediately taken to the cabin on the jet. 

Your watch beeps at you now that you&#39;re back in cell-service range.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;Welcome back. I hope your trip was a safe one. I see from the cargo data, you successfully obtained the temporal ansible data. It will be integrated with my core on your return.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;It was an interesting trip. I might have liked a little more time to get used to things there. Maybe have a bit of fun with the researchers there.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;computer&quot;,&quot;Fun may be had at times, but the Heiress of Maristech Corp must stay mindful of the bigger picture. Speaking of which, we have something of an urgent situation which has arisen with a member of the executive staff. This will require your personal attention at the earliest opportunity. Due to the sensitivity of the situation, we can discuss further from the console.&quot;)&gt;&gt;
[[You sleep on the flight home]]</tw-passagedata><tw-passagedata pid="494" name="You sleep on the flight home" tags="" position="475,6225" size="100,100">You have the flight-hostess serve you a couple drinks and try to sleep through your flights back home.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;aircraft-interior.jpg&quot;)&gt;&gt;

After numerous hours in the jet, you feel a bit tired and jet lagged when you return to your home airport.
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;deal-with-problem-exec&quot;)&gt;&gt;

Finally, self driving car gets you back to the house in no time flat. You see it coming into view... After so long on the austere station, it&#39;s a little weird to think that you are going &quot;home&quot;, and this is your &quot;normal&quot; life.
[[Baldric House]]</tw-passagedata><tw-passagedata pid="495" name="Proceed on Checkout dive" tags="" position="600,6225" size="100,100">&lt;&lt;if !SugarCube.getLib().PlayerModel.canWork()&gt;&gt;
You are too tired to work right now. Try tomorrow.
[[Go somewhere else|Sea Station]]
&lt;&lt;else&gt;&gt;
You signal to Margaret that you&#39;re ready for your dive.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Hey! Good to see you&#39;re ready for this!&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Normally you could shop around to get your own equipment beforehand, but we&#39;ll need to make do with a stock fit using what we have here on the site.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;What does that mean?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Well, I might have slightly overestimated our inventory.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Slightly underestimated?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Well, they said this station used to handle a lot of visiting divers. Unfortunately, I guess people didn&#39;t take care of the loaner equipment very well. There&#39;s a few torn up Men&#39;s medium suits.  A moldy old Women&#39;s medium... I&#39;ll just say you wouldn&#39;t want to touch that thing with a 10 ft. pole- that one needs to be purified in fire.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;There was a couple suits that were not in half bad shape. But they were a Men&#39;s Large and Women&#39;s XL suit... Looking at the measurements, both of those would just flush water for you, and you&#39;d be experiencing hypothermia in less than a minute. But it&#39;ll be fine. You can borrow my alternate suit, it&#39;s a 7mm women&#39;s small.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;But, aren&#39;t you a lot smaller than me?&quot;)&gt;&gt;
Margaret is built like a pixie - maybe a little more than 5 feet tall. If she was any shorter, she&#39;d need to dive in a kids&#39; wetsuit.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Oh, come on, maybe I&#39;m only a bit more shorter than you... I mean, ok maybe it can be a tad snug for me, but I&#39;ll give you a helping hand if you need. We can apply a bit of talcum power to give you a head start.&quot;)&gt;&gt;
Rather than bother trying to find some measuring tape, she puts her arms parallel, straight out from her waist and closes in, with her hands on your sides. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Look, see- our waists are practically the same size.&quot;)&gt;&gt;
She seems to have convincingly demonstrated that yes, you both have similarly sized waists. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;I don&#39;t know. Are you sure this will work?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Oh come on... These high performance dive suits are designed with highly flexible rubber compounds. If I thought you would tear or stretch out one of my awesome wetsuits, I wouldn&#39;t chance that. Where&#39;s your spirit of adventure? You wouldn&#39;t want to spend your time bottled up here when you could see all the beauty outside, would you?&quot;)&gt;&gt;
She&#39;s so preoccupied with convincing you to wear the suit, she still hasn&#39;t moved her hands from your sides... It&#39;s kind of distracting.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Uhh, I guess you&#39;re right&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Awesome. I get to watch you have your first time - this is going to be sweet!&quot;)&gt;&gt;
[[Put on diving wetsuit]]
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="496" name="Put on diving wetsuit" tags="" position="725,6225" size="100,100">&lt;&lt;=SugarCube.getLib().PlayerModel.togglePlayerHidden(true)&gt;&gt;\
You apply a bit of talcum, and slide your legs into the suit. This one has nylon facings on the inside and outside, which helps move fairly gently and it is pretty durable against your nails which is a relief. As you pull the narrower part up your calves you start to feel some resistance. As the legs reach your thighs, you&#39;re starting to feel a gentle pressure around your legs. It soon gets stuck not making progress, and you would hate to damage her suit. Right now the suit is kind of dangling off your thighs with another foot to go, so you have to carefully waddle to her.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;umm, sorry - I don&#39;t think I can fit this one, and I wouldn&#39;t want to damage it.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;heh heh... Oh, don&#39;t be silly. You&#39;re almost there - let&#39;s see here.&quot;)&gt;&gt;
She comes up close in front of you and pulls up on the waist of the suit. From this angle she tries, but isn&#39;t able to get great leverage.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Oh, this might need a little more. We&#39;ll get you in this thing.&quot;)&gt;&gt;
 She moves to go behind you. She pulls up on the wetsuit again. The leg moved a bit. She shuffles some material up your leg. She pulls up on the suit again. A little bit more. The two of you repeat this little dance as she pulls the suit up from side to side. You feel her soft breasts on your back, and her elevated breathing on your shoulder, with your tush bumping into her groin.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;ughh... Hehe... (groan) You&#39;re almost there!&quot;)&gt;&gt;
 Finally, with a feat of strength she has you lifted up with a pull of the suit, a stubborn air pocket &quot;farts&quot; giving way to gravity, and you feel yourself suddenly fall several inches into the waist of the suit. \
 &lt;&lt;if (SugarCube.getLib().PlayerModel.hasGirlyGenitals())&gt;&gt;\
 The pressure gets transmitted through your chastity belt and dilator, which gets you feeling a little more wet and aroused.
 &lt;&lt;else&gt;&gt;\
 You feel what is likely small sputter of precum from your chasti-flex at the sudden stimulation.
 &lt;&lt;/if&gt;&gt;\
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Ohhh.&quot;)&gt;&gt;

With your waist settled in nicely, you slide your arms into the sleeves. You pull on the back zipper, but it seems to get caught, the back part has some trouble getting closed, so you ask Margaret to help zip you up.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;wetsuit-back-zipper.jpg&quot;)&gt;&gt;
 She clears out the jam of the zipper and runs her hands over the small of your back, as she zips you up. From there, she runs her hands all over your suit to straighten up any spots that aren&#39;t quite lined up. She  right and then says:
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Ok, that was a bit tricky to put on... But, it actually fits you really well from what I can see. It looks like a second skin, like no wrinkles, folds or loose material. Try move your arms now - it&#39;s good if it feels a bit tight to keep warm water in, but we need to make sure there&#39;s no pinching, you can comfortably breathe and that you have your full range of motion. Does that feel ok?&quot; )&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Yeah, it&#39;s fine, thanks!&quot;)&gt;&gt;
More than fine maybe... It was snug to put on and feels a bit weird, but the protection of the soft, thick suit which follows the curves of your body makes you feel like a superhero or something. You take some selfies to capture the novelty of the moment.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;wetsuit-smooth-chest.jpg&quot;)&gt;&gt;
Some girls complain that wetsuits don&#39;t make them look good, but you kind of like shape your boobs take under the rubber. The gentle pressure the tight suit exerts on them isn&#39;t unpleasant.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;wetsuit-bathroom2.jpg&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;wetsuit-selfie.jpg&quot;)&gt;&gt;
Now, it&#39;s time to get in the water.
[[Get in the water]]</tw-passagedata><tw-passagedata pid="497" name="Get in the water" tags="" position="850,6225" size="100,100">You collect your booties, gloves and hood, and then arrange your required equipment on the floor based on the lessons for an open water dive. It&#39;s exciting, but also you are concerned about making some kind of deadly mistake.

Before you go for your dive, Margaret wants you to first pop into the moonpool to demonstrate that you can safely swim a couple lengths unassisted.
&lt;&lt;if SugarCube.getLib().Skills.get(&quot;swimming&quot;) &lt;= 5&gt;&gt;\
You struggle quite a bit with your swimming. Margaret is very apologetic as she helps pull you out of the water.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;I&#39;m sorry, it would be irresponsible for me to take you out with your current swimming abilities. I&#39;ll certify that you&#39;ve completed the theory components, but we&#39;ll have to cancel this checkout dive.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;The next step is for you to install the station&#39;s replacement ansible. After that, I&#39;ll deal with installing the remote ansibles outside the station, but I could use your help to coordinate the install from the bridge.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().StationWork.completeTask(&quot;check-out-dive&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;support-ansible-transceiver-install&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;install-replacement-ansible&quot;)&gt;&gt;\
[[Station Research]]
&lt;&lt;else&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Skills.get(&quot;swimming&quot;) &lt;= 20 &gt;&gt;\
You notice that with the suit and the buoyancy of the salt water, you glide through the water with less effort than back at your swimming pool.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Cool, ok that looks good. You&#39;ll be able to handle yourself in the water. You can get out for a breather, and then we&#39;ll go for our dive.&quot;)&gt;&gt;
&lt;&lt;else&gt;&gt;\
With the suit and the buoyancy of the salt water, swimming takes less effort than you are used to in the pool.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Wow, you&#39;ve got some powerful strokes and good form, now that is out of the way, do you want to take a quick break, get your gear and we shall we go a little deeper? She looks into your eyes and smiles.&quot;)&gt;&gt;
Normally she&#39;s been bit awkward and distant at times, but you feel like, she&#39;s been opening up a bit to you.
&lt;&lt;/if&gt;&gt;\
After demonstrating your swimming abilities you climb out for a momentary rest.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;first-dive-swim.jpg&quot;)&gt;&gt;
Margaret then watches as you check over all your equipment to her satisfaction. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Alright, good job, now let&#39;s go diving!&quot;)&gt;&gt;
[[Go for the Dive]]
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="498" name="Go for the Dive" tags="" position="975,6225" size="100,100">You start donning all the extra the gear. Out of the water the tank is a little heavy and awkward, but you keep your balance. With your fins and everything else on you slowly make your way to the moonpool edge. As you are on a stable platform, You will do a giant stride entry into the water.

In one moment you are kicking one leg forward in the air, while the other pushes away from the deck. In the next, the water and noisy bubbles are swirling around in a few moments of chaos. Your vest keeps you buoyant, and you regain your bearings. You give her a thumbs up! That was exciting!

After she gets in the water, Margaret starts running through a pre-planned checklist of skills to make sure you understand the principles, and can calmly deal with problems like clearing water in your mask, or needing air from your buddy. With the neutral buoyancy, having all the equipment, the padding of the suit, it&#39;s different from just swimming at the surface of a pool. Being immersed in the water, and observing things for an extended period like this - it&#39;s an interesting experience.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;first-dive.jpg&quot;)&gt;&gt;
There&#39;s so much to do - everything feels like it takes a while, and you feel like you are at the edge of being overwhelmed, experiencing this stuff for the first time. However, before you know it you start to find yourself more comfortable - breathing calmly, adjusting your buoyancy and maneuvering underwater.

After you run through all the checks, Margaret allows you some time to get a sense for the scenery near the station. Suddenly a big school of fish surrounds in a glittering field of dancing silver! Following them, you see a pod of dolphins come within 5 feet of you, but they don&#39;t seem interested in you, and keep swimming.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;dusky-dolphin.jpg&quot;)&gt;&gt;

 Just as you&#39;re starting to have fun, you hear a metal tapping sound, and spin around see Margaret giving the thumbs up signal, which you reciprocate - it&#39;s time to surface in the moonpool and finish your first dive after what turns out to have been 30 minutes.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;first-dive-surface.jpg&quot;)&gt;&gt;
As you reach the surface, you share a high five with Margaret.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;That was really cool!&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Awesome. You handled yourself pretty well down there.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Thanks!&quot;)&gt;&gt;
After taking off your swim fins, you both climb up from the moon pool ladder.
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;I&#39;ll be filling in the paperwork for you to get your open water certification. You&#39;ll be ready to go out and help me change out the remote ansibles, which is good, as that isn&#39;t something I&#39;d want to have to do on my own.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;But that&#39;s for tomorrow. Now that you&#39;ve gone through the techniques, be sure to take some time to brush up on parts you weren&#39;t 100% sure on while things are still fresh. For instance, you hesitated a bit with...&quot;)&gt;&gt;
She goes over correcting some techniques you didn&#39;t quite nail, which you make note of.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Ok, got it!&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;But now... I don&#39;t know about you, but I&#39;m about ready to peel out of my suit.&quot;)&gt;&gt;
[[Time to drop all that heavy gear]]</tw-passagedata><tw-passagedata pid="499" name="Time to drop all that heavy gear" tags="" position="1100,6225" size="100,100">You drop the fins. Then you unbuckle your buoyancy compensator pack and weight belt to safely place on the floor. Then the dive knife. Finally, you get seated to a bench beside Margaret to start taking off your waterlogged wetsuit. jeebus... Was the air down here always this cold?  As your dexterity isn&#39;t so good from the thick neoprene and cold, she helps you peel off your gloves, and you do likewise for her. You both are slightly shivery and trying to work quickly.

Putting it on dry was a little tricky, but it&#39;s a whole other thing getting out of this thick, tiny wetsuit while you are soaked. Getting the arms off seems to require you to contort yourself in ways you don&#39;t remember having to do when it was dry, but you ultimately get your arms free, and the suit is down to your waist. With the chest of your wetsuit off, you are embarrassed as you notice that your wet nipples are making points under your swimsuit.  From there, getting the legs off is a fierce struggle to break free from a tight suit that just doesn&#39;t want to let you go, especially with hands that are tired and a little numb. You didn&#39;t really notice you were a bit of cool in the water before, but you sure do now!

After Margaret has gotten herself out of her wetsuit and enjoyed a moment of laughter watching your struggle, she helps you work your way out of the legs. She grabs the stuff, hoses everything down with fresh water and puts the gear in a drying rack room with a big dehumidifier and lots of fans.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;You&#39;ll appreciate being able to put on a suit when it is mostly dry again. Take this, and shower up now.&quot;)&gt;&gt; 
She gives you a fuzzy bathrobe and towel to dry off with.
[[Take a warm post dive shower]]</tw-passagedata><tw-passagedata pid="500" name="Take a warm post dive shower" tags="" position="1225,6225" size="100,100">After all that swimming, you feel rejuvenated as the warm water trickles all over your body and washes the salt water off of you.

You dry off, change out of your swim gear, and put on your regular uniform.
&lt;&lt;=SugarCube.getLib().PlayerModel.togglePlayerHidden(false)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().StationWork.completeTask(&quot;check-out-dive&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;install-replacement-ansible&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;install-ansible-transceivers&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;I hope you enjoyed your first dive. From here, you&#39;ll need to install the station ansible in the Advanced Comms room, and then after that&#39;s done, we can wrap things up by installing the offsite ansible transceivers.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;I really appreciate that you&#39;ve been able to come to the site and help us out here. Even with me having to teach you some stuff, you&#39;ve been helping me catch up on the work backlog here. And it&#39;s kind of been fun having you here.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;You&#39;re probably pretty tired from the long day and the dive work, but I think I&#39;m going to pop a bottle of wine and watch a movie up in the galley. I understand if that&#39;s not your thing. But, you&#39;d be welcome to join me... but, only if you want to of course.&quot;)&gt;&gt;
[[Sounds like fun|Watch Movie with Margaret]] - Seems like she&#39;s up for some fun.
[[Maybe some other time]] - She&#39;s pretty, but your not really in the mood for stuff with her right now.
[[Politely decline|Politely Decline Margaret]] - She&#39;s not your type, and her advances toward you have made you felt awkward. Best to drop a hint that you&#39;re not on the market.</tw-passagedata><tw-passagedata pid="501" name="Sleep on research station - Recurring" tags="" position="100,6350" size="100,100">You don&#39;t feel comfortable with the idea of your normal PJ&#39;s. Down here, things could go wrong at a moments notice, so you&#39;d rather be prepared.
&lt;&lt;=SugarCube.getLib().PlayerModel.fallAsleep(false)&gt;&gt;\
[[Wake up to a new day|Wake up to a new day - Recurring]]</tw-passagedata><tw-passagedata pid="502" name="Wake up to a new day - Recurring" tags="" position="225,6350" size="100,100">It is a new day. &lt;&lt;set $day to $day+1&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.morningUpdate()&gt;&gt;\
[[Take a shower|Take a shower - Recurring]]</tw-passagedata><tw-passagedata pid="503" name="Take a shower - Recurring" tags="" position="350,6350" size="100,100">&lt;&lt;if SugarCube.getLib().PlayerModel.needsShave()&gt;&gt;
You shower up, and shave to get silky smooth.
&lt;&lt;=SugarCube.getLib().PlayerModel.shave()&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;shower-shave.jpg&#39;);&gt;&gt;
&lt;&lt;else&gt;&gt;
You quickly take your shower.
&lt;&lt;/if&gt;&gt;

&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;station-bathroom.jpg&quot;)&gt;&gt;

You pop open your hygiene kit, brush your teeth and comb your hair.
&lt;&lt;=SugarCube.getLib().PlayerModel.toggleMakeup(false)&gt;&gt;\
&lt;&lt;if hasVisited(&quot;Ask Margaret about borrowing Makeup&quot;)&gt;&gt;\
[[Put on Makeup|Sea-Station - Put on makeup]]
&lt;&lt;/if&gt;&gt;\
[[Time to start your day|Sea Station]]</tw-passagedata><tw-passagedata pid="504" name="Sea-Station - Put on makeup" tags="" position="475,6350" size="100,100">&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;kloss-lipstick.webp&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().PlayerModel.toggleMakeup(true)&gt;&gt;\
That&#39;s so much better!
[[Time to start your day|Sea Station]]</tw-passagedata><tw-passagedata pid="505" name="Sea Station" tags="" position="600,6350" size="100,100">Where do you want to go now? Your agenda for work while on the station is tracked on the &quot;TASKS&quot; page of your watch.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;station-map.png&quot;)&gt;&gt;
Level 12 - Observation Deck (Sealed due to inclement weather)
Level 11 - Main Boat Deck (Sealed due to inclement weather)
Level 7 - [[Bridge|Station Bridge]] 
Level 6 - [[Galley|Station Galley]] | [[Lounge|Station Lounge]]
Level 5 - [[Quarters|Station Quarters]] 
Level 4 - [[Research|Station Research]]
Level 3 - [[Main Hold|Station Main Hold]]
Level 2 - [[Engineering|Station Engineering]]
Level 1 - [[Station Moonpool]] | [[Station Advanced Comms]] (Ansible Facility)</tw-passagedata><tw-passagedata pid="506" name="Station Bridge" tags="" position="725,6350" size="100,100">The bridge seems to be doing fine. 
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;control-room.jpg&quot;)&gt;&gt;

Bar is keeping an eye on the radar screen.

&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;prepare-to-leave-station&quot;)&gt;&gt;\
The storm seems to have passed.
[[Arrange to leave station]]
&lt;&lt;else&gt;&gt;
The weather up top looks... awful.
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;support-ansible-transceiver-install&quot;)&gt;&gt;\
[[Support install of ansible transceivers]]
&lt;&lt;/if&gt;&gt;\

[[Go somewhere else|Sea Station]]</tw-passagedata><tw-passagedata pid="507" name="Station Galley" tags="" position="850,6350" size="100,100">Not much happening here in the galley.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;galley.jpg&quot;)&gt;&gt;
[[Go somewhere else|Sea Station]]</tw-passagedata><tw-passagedata pid="508" name="Station Lounge" tags="" position="975,6350" size="100,100">It&#39;s quite peaceful in the observation lounge.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;bridge-window.jpg&quot;)&gt;&gt;
&lt;&lt;if !hasVisited(&quot;Politely Decline Margaret&quot;) &amp;&amp; !hasVisited(&quot;Hard Decline Margaret&quot;)&gt;&gt;\
Do some [[Yoga|Station Yoga]]
&lt;&lt;else&gt;&gt;\
Do some [[Yoga|Solo Station Yoga]]
&lt;&lt;/if&gt;&gt;\
[[Go somewhere else|Sea Station]]</tw-passagedata><tw-passagedata pid="509" name="Station Yoga" tags="" position="1100,6350" size="100,100">&lt;&lt;=SugarCube.getLib().Exercises.doStationYoga(true)&gt;&gt;\
Return to [[Lounge|Station Lounge]]</tw-passagedata><tw-passagedata pid="510" name="Solo Station Yoga" tags="" position="1225,6350" size="100,100">&lt;&lt;=SugarCube.getLib().Exercises.doStationYoga(false)&gt;&gt;\
Return to [[Lounge|Station Lounge]]</tw-passagedata><tw-passagedata pid="511" name="Station Quarters" tags="" position="100,6475" size="100,100">&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;quarters.jpg&quot;)&gt;&gt;
[[Sleep|Sleep on research station - Recurring]]
[[Go somewhere else|Sea Station]]</tw-passagedata><tw-passagedata pid="512" name="Station Research" tags="" position="225,6475" size="100,100">&lt;&lt;=SugarCube.getLib().PlayerModel.togglePlayerHidden(false)&gt;&gt;\
The circulating pumps in the lab are droning along. Although it&#39;s a bit loud, the atmosphere of the lab surprisingly calming.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;research-lab.jpg&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;plankton-lab.jpg&quot;)&gt;&gt;
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;help-margaret-research-culture prep&quot;)&gt;&gt;\
[[Help Margaret with her culture prep]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;help-margaret-research-core-analysis&quot;)&gt;&gt;\
[[Help Margaret with her core analysis]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;scuba-training-theory&quot;)&gt;&gt;\
[[Get a SCUBA Crash Course]]
&lt;&lt;/if&gt;&gt;\
[[Go somewhere else|Sea Station]]</tw-passagedata><tw-passagedata pid="513" name="Station Main Hold" tags="" position="350,6475" size="100,100">Not much interesting stuff in the hold, from what you can see.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;cargo-hold.jpg&quot;)&gt;&gt;
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;install-replacement-ansible&quot;) &amp;&amp; hasVisited(&quot;Install the main ansible&quot;) &gt;&gt;\
[[Get ansible equipment cart]]
&lt;&lt;/if&gt;&gt;\
[[Go somewhere else|Sea Station]]</tw-passagedata><tw-passagedata pid="514" name="Station Engineering" tags="" position="475,6475" size="100,100">The equipment on the engineering deck hums along. There&#39;s not much to do here.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;engineering-deck.jpg&quot;)&gt;&gt;
[[Go somewhere else|Sea Station]]</tw-passagedata><tw-passagedata pid="515" name="Station Moonpool" tags="" position="600,6475" size="100,100">The glow from beneath in the moonpool looks quite magical.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;moon-pool.jpg&quot;)&gt;&gt;
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;check-out-dive&quot;)&gt;&gt;\
[[Proceed on Checkout dive]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;install-ansible-transceivers&quot;) &amp;&amp; !SugarCube.getLib().Tasks.hasTask(&quot;install-replacement-ansible&quot;)&gt;&gt;\
[[Install ansible transceivers]]
&lt;&lt;/if&gt;&gt;
[[Go somewhere else|Sea Station]]</tw-passagedata><tw-passagedata pid="516" name="Station Advanced Comms" tags="" position="725,6475" size="100,100">You approach the Advanced Comms Area. It&#39;s locked to regular personnel.
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;install-replacement-ansible&quot;)&gt;&gt;\
[[Install the main ansible]]
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;remove-old-ansible&quot;)&gt;&gt;\
[[Remove old station ansible]]
&lt;&lt;/if&gt;&gt;
[[Go somewhere else|Sea Station]]</tw-passagedata><tw-passagedata pid="517" name="Station Sleep" tags="" position="850,6475" size="100,100">&lt;&lt;if SugarCube.getLib().PlayerModel.isReadyForSleep()&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.fallAsleep()&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;&lt;=SugarCube.getLib().PlayerModel.explainNoSleep();&gt;&gt; 
[[Quarters|Station Quarters]]
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="518" name="Remove old station ansible" tags="" position="975,6475" size="100,100">&lt;&lt;if !SugarCube.getLib().PlayerModel.canWork()&gt;&gt;
You are too tired to work right now. Try tomorrow.
&lt;&lt;else&gt;&gt;
You flip through the instructions for wrapping up the ansible install.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Let&#39;s see.. Starting diagnostics...&quot;)&gt;&gt;
The system runs through a pile of tests with all the remote stations. Everything comes up green, and the computer says it&#39;s safe to proceed with removing the old system.
So you move ahead with the next step...
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;...Disable ansible duplexing... Where&#39;s that switch? Oh here it is.&quot;)&gt;&gt;
Now, the new ansible is the only one connected to the remote stations.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;and... Shutting down the old ansible...&quot;)&gt;&gt;

You review the instructions to dismount the old ansible from the hardware. This one is a bit of a beast to to take apart. It&#39;s like some Ikea kit from hell, with hundreds of parts, which you collect into a couple of empty boxes.
&lt;&lt;=SugarCube.getLib().StationWork.completeTask(&quot;remove-old-ansible&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;prepare-to-leave-station&quot;)&gt;&gt;
&lt;&lt;/if&gt;&gt;
[[Go somewhere else|Sea Station]]</tw-passagedata><tw-passagedata pid="519" name="Perform a &#39;self-inspection&#39; of the suit before departing" tags="" position="1100,6475" size="100,100">Out of prudence, you decide this would be a good moment to perform a &quot;self inspection&quot; health check on the suit.

You feel yourself over to make sure this suit and your body hasn&#39;t been hurt or damaged.
 
If you&#39;ve learned anything from the computer in your time together, It&#39;s so very important that vital tissues like your breasts and ass have not been harmed. That long tail, too - it&#39;s important to make sure that every little bit of this body is still healthy ready to perform this task. The sensation of the texture on your fingers playing over the slippery scales of the powerful tail is a little arousing.

Before you get completely distracted by the possibilities, you remind yourself there is a job to do though... After you finish the self examination, you are impressed at how well the suit fits, and feel confident that there is no damage to it, and feel ready to proceed with the next step.
[[You open the outer hatch and depart the station]]</tw-passagedata><tw-passagedata pid="520" name="You open the outer hatch and depart the station" tags="" position="1225,6475" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Please close the outer hatch.&quot;)&gt;&gt;
You close it back up.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Proceed to swim towards new destination marker.&quot;)&gt;&gt;
You look at the destination... 

That isn&#39;t just... a couple miles out. That&#39;s down... Deep down... In inky black water that&#39;s a lot deeper than the continental shelf where the station sits.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;thass.jpg&#39;);&gt;&gt;
[[You start kicking with the tail]]</tw-passagedata><tw-passagedata pid="521" name="You start kicking with the tail" tags="" position="100,6600" size="100,100">You start swimming down into the darkness...

&lt;&lt;if SugarCube.getLib().Skills.get(&quot;swimming&quot;) &lt;= 20 &gt;&gt;\
&lt;&lt;if SugarCube.getLib().Skills.get(&quot;swimming&quot;) &lt;= 5 &gt;&gt;\
You really regret not having gotten more swimming practice in... It&#39;s terrifying trying to cover this distance in open water, and no one around to help you if anything goes wrong. Thank goodness the suit allows you to take breaks as needed. As you keep getting deeper and deeper, the water presses harder on the suit. After almost two stressful hours, you are extremely relieved to see faint hints of an aquatic site emerging at this absurd depth.
&lt;&lt;else&gt;&gt;\
This is some serious swimming, much longer than you&#39;ve ever done before. You find maintaining your direction around a little tricky, and feel paranoid about getting pulled by the current, but the tail amplifies your strength, and with some care you find yourself closing the distance, but a little tired from the effort. As you keep getting deeper and deeper, the water presses harder on the suit. After about an hour, you start to see a faint hints of an aquatic site in view at this absurd depth.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
You feel glad to have been able to get in a good bit of swim practice like Stacey suggested. After a couple goofed up tries, you find the suit makes it very easy for you adjust your buoyancy, and you appreciate how effortless the tail makes swimming over longer distances. As you keep getting deeper and deeper, the water presses harder all over the suit. Within about 40 minutes, you see a faint hints of an aquatic site in view, at this absurd depth.
&lt;&lt;/if&gt;&gt;\
[[You approach the temporal ansible site]]</tw-passagedata><tw-passagedata pid="522" name="You approach the temporal ansible site" tags="" position="225,6600" size="100,100">As you arrive, you are surprised to see it is actually quite small. Like, maybe it could accommodate one or two people. Somehow, you were expecting some big massive machine.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;temporal-ansible-station.jpg&#39;);&gt;&gt;
[[You enter the temporal ansible site]]</tw-passagedata><tw-passagedata pid="523" name="You enter the temporal ansible site" tags="" position="350,6600" size="100,100">You make your way in through a hatch. The site does not have an air lock or air inside. A set of robotic arms take hold of your suit&#39;s anchor points and connects to the tail segment. The anchors suspend you in place, so you don&#39;t have to expend energy to hold yourself steady.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Connecting.&quot;)&gt;&gt;

You find yourself positioned in front of the temporal ansible.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;temporal-ansible.jpg&#39;);&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Advise. Please extract temporal ansible records.&quot;)&gt;&gt;
[[Transferring]]</tw-passagedata><tw-passagedata pid="524" name="Transferring" tags="" position="475,6600" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Initiating transfer. Please standby.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Not like I&#39;m going anywhere like this, right?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Statement is Accurate. Initiating Venenous ThromboEmbolism (VTE) safety system and amplifying skin sensitivity to ensure steady blood flow for operator during extended transfer in deepwater environment.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;uhh, ok. I guess.&quot;)&gt;&gt;
You hear a vent slide open. Water is starting to circulating past the suit gills.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Transfer 1% completed&quot;)&gt;&gt;
You start to feel a subtle brushing sensation on the underside tip of the tail - it kind of tickles. It&#39;s like a spinning roller. Another one starts lightly touching from the top side.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;3%...&quot;)&gt;&gt;
The rollers start to move up. If you were to describe it, you might say it was like a car wash for mermaids. A couple more brushes seem to starting on the sides of the tail. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;5%...&quot;)&gt;&gt;
The brushes are working their way up to where your calves are in the tail at this point.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;oh... It kind of pulses. That&#39;s kind of nice.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;6%...&quot;)&gt;&gt;
The rollers are slowly working themselves over your thighs. It&#39;s pretty mellow, but it kind of tickles.

You reach out with your hands to get some relief from the soft tickling sensation.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Caution: Please keep arm appendages secure during risk prevention process.&quot;)&gt;&gt;
[[Knead your breasts]]
[[Rub your thigh area]]
[[Wait it out|The computer&#39;s massage continues]]</tw-passagedata><tw-passagedata pid="525" name="Knead your breasts" tags="" position="600,6600" size="100,100">You start fondling the impressive mermaid-breasts. The sensation is other worldly.

Soon after, however [[The site computer scolds you]]</tw-passagedata><tw-passagedata pid="526" name="Rub your thigh area" tags="" position="725,6600" size="100,100">You press with a little more force on your thighs to relieve the ticklish feather touch of the brushes.

Soon after, however [[The site computer scolds you]]</tw-passagedata><tw-passagedata pid="527" name="The site computer scolds you" tags="" position="850,6600" size="100,100">However the computer scolds you again:
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Unsafe operator behavior in progress&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Binding operator in conformance with safety protocol.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;What?&quot;)&gt;&gt;
You feel the suit arms pull up, to extend your hands above your head. A couple robot arms attach a few more anchor points to your arms, and then bind your hands tightly together!
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Unpredictable user interactions could cause non-recoverable mechanical failure. Please relax.&quot;)&gt;&gt;
[[The computer&#39;s massage continues]]</tw-passagedata><tw-passagedata pid="528" name="The computer&#39;s massage continues" tags="" position="975,6600" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;10%&quot;)&gt;&gt;
The brushes are running over the mermaid&#39;s midriff-scales. At this point you are starting to buck the advisory capsule, but it just isn&#39;t giving you much of a sense of movement. It&#39;s just enough to build up the tension inside you. It feels like the rollers are intentionally lingering...

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;17%&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Oh fuck, that feels good.&quot;)&gt;&gt;
The brushes are pulsing over your breasts and back now. The rollers are pushing into you with a little more force. You feel some soreness and tension from your bras being massaged out of your back. 

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;21%&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;27%&quot;)&gt;&gt;
The brushes are moving back over the tail. considerably more insistently at this point. Your muscles instinctively fidgeting in the tail, but there&#39;s not moving it out of the way. All you can do is be present in the sensations.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;47%&quot;)&gt;&gt;
The &quot;Advisory Capsule&quot; seems to be waking up inside you to join in the action. It&#39;s not super aggressive, but it seems to be pulsing.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;63%&quot;)&gt;&gt;
The rollers and capsule were getting more aggressive, but have eased off and seem to have you at the sustained edge of an orgasm. It seems to detect when you are about to climax, and then backs off.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;(panting) ooh&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;81%&quot;)&gt;&gt;
The intensity is too much, you are losing sense of yourself at this point.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;95%&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Transfer nearing completion. Verifying operator can still safely handle vigorous cardiovascular activity for release.&quot;)&gt;&gt;
Suddenly the capsule starts pumping deep inside you with full force.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Aaah!&quot;)&gt;&gt;

You feel yourself tighten around it, savoring the moment and then quickly feel your body spasming as you feel an intense orgasm rocking your suspended body for several seconds.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Transfer complete!&quot;)&gt;&gt;
And suddenly, the motions of the capsule and brushes stop. You start to regain your sense of things.

You wish that you could review the temporal ansible logs, but unfortunately, you simply cannot from here, in this suit. For now, at least you&#39;ll need to give that a look with the help of the computer back home.
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;review-temporal-ansible-logs&quot;)&gt;&gt;
[[You swim back to the station]]</tw-passagedata><tw-passagedata pid="529" name="You swim back to the station" tags="" position="1100,6600" size="100,100">&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;return-from-depth.jpg&#39;);&gt;&gt;

[[You grab hold of the outer hatch of the water-lock]]</tw-passagedata><tw-passagedata pid="530" name="You grab hold of the outer hatch of the water-lock" tags="" position="1225,6600" size="100,100">Swimming back from the depths took forever... A sense of relief washes over you as the safety of the station comes into view.

Outer hatch opened... You make your way into the water lockout cell.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;outer-hatch.jpg&#39;);&gt;&gt;

You pull the outer hatch closed and seal it... Equalizing pressure... Inner hatch opened...

You climb out of the waterlock and close the inner hatch.
[[Back on &#39;dry land&#39;]]</tw-passagedata><tw-passagedata pid="531" name="Back on &#39;dry land&#39;" tags="" position="100,6725" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Advise...Now, how do I get out of this thing?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;First, please re-attach suit to cart harness and re-connect cart support cable to tail.&quot;)&gt;&gt;
With a little work, you climb yourself onto the cart and use the harness clips which help hold you steady. Then, you plug the support cable into the base of the tail.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Ok, done that...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Please hold safety handles securely, and use thought word &#39;terrestrial&#39;.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;terrestrial...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Orienting suit to restore air breathing mode.&quot;)&gt;&gt;
Suddenly, you notice the support frame has a pivot point, and you feel the tail slowly being lifted backwards, as your chest is falling forward. After about a minute, you feel yourself on a slight downward incline with your head facing down foot lower than your tail, hanging about 3 feet in the air.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Displacing fluids.&quot;)&gt;&gt;
Air bubbles start tickling up your windpipe, and the process continues for about a minute as the fluid drains out of your lungs. You feel yourself cough a number of times as the last bits clear out of your windpipe. At one last cough, the &quot;mouth&quot; of the suit opens itself to air, and that foamy bit of coughed spittle flies out. eww. That said, you&#39;re happy to have air running through your lungs.

 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Levelling suspension, decoupling operator from suit.&quot;)&gt;&gt;
With the fluid out, the cart arm pivots the suit to bring the tail towards the floor. Slowly at first, the suit start to loosen it&#39;s very tight embrace of your body. The sensations of the tail being your &quot;feet&quot; diminish, and your mind seems to again register your skin as being inside of the liquid-slime of the suit, rather than sensations on the scales. The tail relaxes its extreme hold on your legs. 

Your ears are unplugged, and the sense of cooler air on the back of your head is the first sensation of being out from the suit. The chill of cool water droplets falling into the small of your back reinforce that the suit has pulled itself open for you. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merm&quot;,&quot;Severing neuralink connection with operator. You may now extract yourself from the suit. Rack will prepare for a raised tail release once your upper body is clear.&quot;)&gt;&gt;
Your vision goes dark. The suit gives the &quot;advisory capsule&quot; a firm push inside of you, and then hear a click as it detaches.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;haaah!&quot;)&gt;&gt;
[[Get out from the MFMS]]</tw-passagedata><tw-passagedata pid="532" name="Get out from the MFMS" tags="" position="225,6725" size="100,100">You lift the back of the &quot;head&quot; away, and work your mouth clear of the mouthpiece. 
You start to peel your right shoulder out, and then the arm slowly loose, finally peeling each finger out from the integrated gloves. You do likewise for the other arm, and are free of the suit down to your midsection. There&#39;s a thin coating of the slime over your body. You flick off the thickest globs into the empty portion of the suit.

You start trying to push yourself out from the tail, but your legs are really sealed in deep.

Then, the cart arms seem to start slowly rotating things again, bringing the tail section back up into the air, as you head goes down. This time, you feel an uneasy feeling of gravity helping to pulling your legs and curvy butt out of the tail. You grab a couple of handles at the front of the cart base to pull yourself, as you slowly wiggle out of the tail, in an experience that is physically like a second birth.

Exhausted, you pull the advisory capsule which had been embedded in your ass this whole time, which makes an awkward &quot;schlorp&quot; sound, as you finally get it out of you.

You are relieved to see a towel in the MFMS suit case, which you use to wipe the slime off of you, and then dress in your regular clothes.
&lt;&lt;=SugarCube.getLib().PlayerModel.togglePlayerHidden(false)&gt;&gt;\

You follow a detailed set of instructions for washing and re-packing the suit and all the equipment. You lock the cases, and hustle the cart back up to the hold.

You do a review the checklist... You have installed the replacement ansible and extracted the data. 
&lt;&lt;=SugarCube.getLib().StationWork.completeTask(&quot;install-replacement-ansible&quot;)&gt;&gt;

Now, you can help Margaret with setting up the remote ansible transceivers to connect to the new ansible.
[[Go somewhere else|Sea Station]]</tw-passagedata><tw-passagedata pid="533" name="The helicopter comes in for a landing" tags="" position="350,6725" size="100,100">On arrival, the pilot gestures for the headphones which you and the merc place on hooks in the craft. The merc then jumps out to greet another man in a similar tactical uniform and a short young woman on the deck, who seems quite curt with him.  They start collecting gear and running it down from the helipad deck to a very sturdy cart on a waiting freight elevator. You start to do the same, but you can only manage one hardcase at a time. Eventually you, the girl and the merc have unloaded the big items, and the pilot has finished refueling his helicopter. At this point the clouds are rapidly becoming darker, and you feel a light rain coming down.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;ocean-storm.jpg&quot;)&gt;&gt;

And with that, the pilot gives a finger twirl gesture with his finger to all to see.  As your group returns to the helicopter, he shouts:
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heli&quot;,&quot;We&#39;ve got a very low pressure front coming in fast, I need to get off this deck ASAP. The winds are already picking up. I&#39;ll be back in a week or so, after the storm passes. Bar - I&#39;m sure you&#39;ll do fine to remind the Argentine Guardacostas to maintain their distance from the station, until I&#39;m back.&quot;)&gt;&gt;

The merc from the station stows his bag on the helicopter and climbs aboard. Your party runs, crouching, back to the cover of the elevator. A few moments later and the helicopter is aloft, leaving you with the merc who flew in with you and your petite hostess. Her tone with the merc doesn&#39;t quite match her words:
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Titus... A pleasure as always.&quot;)&gt;&gt;
Then she addresses you. The rain is more aggressively falling on the deck now.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;And, you must be &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;? So the bigwigs needed you here in a bit of a hurry. We just got word that you&#39;d fix the ansible yesterday. That repair had been on the books for the last year, you know that? Anyway, lets get out of this rain, and get you situated. We&#39;ll have plenty of time to get wet later.&quot;)&gt;&gt;
You notice she&#39;s got an unusual, wispy voice.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Oh, excuse me - I haven&#39;t introduced myself - Margaret Blake. Welcome to RV Hensen Station, named in honor of Victor Hensen, one of the OG&#39;s of biological oceanography. I&#39;m a Post-doctoral Marine Biologist on assignment from University of California-San Diego. Currently, I&#39;m the supervising researcher on the station. &quot;)&gt;&gt;
She isn&#39;t that much older than you. You wonder how many other researchers are on this station.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;I&#39;m sure you&#39;ve already become acquainted on the flight with your travelling companion, Titus Barlow - he is on assignment to help attend to the physical security of this station.&quot;)&gt;&gt;
He awkwardly outstretches his hand as realizes he may have slighted you earlier. You shake hands. For some reason you expected him to apply a crushing grip, but it isn&#39;t.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;Ma&#39;am... You can call me &#39;Bar&#39;&quot;)&gt;&gt;
And with that, she seals off the outer bay doors for the freight elevator, and presses a Button marked &quot;primary hold&quot;. 
[[The elevator descends]]</tw-passagedata><tw-passagedata pid="534" name="The elevator descends" tags="" position="475,6725" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Now I&#39;m sure you&#39;ve heard the details already but let&#39;s go over the highlights. This is an aquatic research station, built by a Russian naval contractor back in &#39;93. For it&#39;s age, it has a number of interesting innovations. The Hensen has seen better days, but she still helps us with a lot of important investigations. Originally it was designed to have a crew of 21 plus 14 scientists, but we&#39;re running on a skeleton crew right now. You&#39;ll undoubtedly run into Elso, our engineer. You may also see some drones and bots which help keep things afloat. With the full crew, this craft is able to adjust its trim depth for faster maneuvering or to provide better station keeping and underwater observation access. Here, on this wall is a profile view.&quot;)&gt;&gt;
Having never been out a sea before, you pretend to understand what all that meant.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;station-map.png&quot;)&gt;&gt;


&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;The Hensen is planned to be here for another couple years, and then it will be getting another refit. To avoid churn from storms, the station stays mostly submerged. Unless the weather clears up for us to enjoy topside, you&#39;ll be spending most of your time here in the lower decks.&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Well, time for the grand tour. You just saw the Helideck and open observation deck area. We&#39;re going down to the main hold at level 3, to drop all this stuff - it&#39;s where we keep bulk goods.&quot;)&gt;&gt;

You hear a series of distinct heavy clanging sounds of pressure doors opening and closing as the elevator descends further into the station. Looking around the elevator, major labels are in translated to English, but there&#39;s a bunch of safety labels in Russian text. You hope it&#39;s nothing important. 

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;Well ladies, this is my stop. Have a nice stay on our little rustbucket.&quot;)&gt;&gt;
The merc gives a sloppy salute, picks up his duffle bag and gets off with a stop at Level 7. Margaret gives him a bit of an icy glare.

 After he gets off, you and Margaret keep going down. After going down what seems like roughly 100 feet from the observation deck, and feeling your ears pop a couple times, the elevator opens to an austere storage area. The two of you roll the cart into the hold, and she takes a box of provisions with her. You go back into the elevator where she presses a button to head back up to Level 7, the &#39;Bridge&#39;.
[[You Arrive at Level 7]]</tw-passagedata><tw-passagedata pid="535" name="You Arrive at Level 7" tags="" position="600,6725" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;This is the bridge. You&#39;ll sometimes see Bar up here in his security role - it&#39;s usually pretty quiet for him, but having a merc or two on the station is something of a neccessary evil to discourage unwanted guests. The Argentinian coast guard has been getting really assertive about activity in this area. We&#39;re in international waters outside any national claims, so they don&#39;t have any business with us, but they sometimes patrol uncomfortably close. Elso mostly runs day to day operation of the station from wherever he is, with the help of the automated systems. Honestly, we don&#39;t really use this area much while we&#39;re on a skeleton crew, but if the station needed to reposition or there&#39;s some drilling going on, a Captain would oversee operations from here.&quot;)&gt;&gt;
You notice a number of the control panels seem to be written in Cyrillic text. You are amazed anyone can make heads or tails out of that.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;control-room.jpg&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Ok, let&#39;s work our way down.&quot;)&gt;&gt;
[[She guides you to a hatch...]]</tw-passagedata><tw-passagedata pid="536" name="She guides you to a hatch..." tags="" position="725,6725" size="100,100">She opens a hatch to a staircase and guides you through. The hatch from the staircase starts to gently close itself about 5 seconds after you release it, and automatically seals shut.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Right... You&#39;ll get used to... that. This station goes so deep, it has to isolate each floor to maintain artificial air pressure and composition as appropriate to the deck and any active diving missions.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Now - This is the galley. I hope you like kale. That&#39;s your resident chef&#39;s one and only specialty!&quot;)&gt;&gt;\
She winks. 
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;galley.jpg&quot;)&gt;&gt;

Then, she puts down the crate of food she was carrying and asks you to help her put the new goods away, and pointing out where everything goes and the special rules for things like how to clean dishes.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Ok, now that&#39;s done! Continuing on, over here, is the mess, which is the center of our entertainment. Here&#39;s where informal gatherings tend to happen, and the tv screen here is wired up for all the streaming services. Connectivity can get a little spotty at times, especially with storms. No one has bothered to offer cable tv on ansibles yet. There&#39;s a DVD player and a bunch of old movies and tv-shows, which can help get through the boredom. Down that hall is the medical bay if anyone needs first aid. Ok, let&#39;s keep going down.&quot;)&gt;&gt;
[[She guides you down another set of stairs]]</tw-passagedata><tw-passagedata pid="537" name="She guides you down another set of stairs" tags="" position="850,6725" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;This is the habitation deck. All the decks have one escape pod, but this floor has a pod at the end of each bunk wing. Let&#39;s go over the evacuation procedures.&quot;)&gt;&gt;
She does her best impression of an airline stewardess with the exaggerated gestures. You take a look at one are relieved to see the escape pods have easy to follow instructions clearly posted in English. 

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Now, your bunk is here in the south wing. Here&#39;s your sheets. Oh, and you can use this locker.&quot;)&gt;&gt;
She eyes your outfit for a moment...
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Oh, here&#39;s a couple standard work uniforms for you, swimsuit, as well as a hygiene kit, and towels.&quot;)&gt;&gt;
She grabs some boots and sandals from another locker for you. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;We use the provided gear on station to avoid damaging our own stuff. There&#39;s a laundry unit by the head. Also, static electricity buildup can be really scary when we go high oxygen for deep dives, so not burning alive in a sealed compartment is also something to think about... So... yeah. Before we go any further into messier parts of the ship, can you get changed up, and we can finish the tour?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Mood.defiantLink(&quot;Change in plain sight of her, if she wants to watch, that is on her&quot;,3)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Mood.defiantLink(&quot;Discreetly change in front of her&quot;,1)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Mood.compliantLink(&quot;Walk to the bathroom to change out of view&quot;,0)&gt;&gt;</tw-passagedata><tw-passagedata pid="538" name="Walk to the bathroom to change out of view" tags="" position="975,6725" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Oh, a never nude? Ok, Sister. heh heh.&quot;)&gt;&gt;
She may not be so impressed at that, but she doesn&#39;t know what&#39;s in your underwear...
&lt;&lt;if (SugarCube.getLib().PlayerModel.hasGirlyGenitals())&gt;&gt;
The thought of a stranger just seeing your chastity belt is a bit too much. You get out of view and start changing into the new outfit.
&lt;&lt;else&gt;&gt;
The thought of a stranger seeing your caged penis is a bit too much to process at once. You get out of view and start changing into the new outfit.
&lt;&lt;/if&gt;&gt;
&lt;&lt;=SugarCube.getLib().MirrorUX.wearSet([&quot;research-panties&quot;,&quot;research-bra&quot;,&quot;research-socks&quot;,&quot;research-technical-pants&quot;,&quot;research-fleece-top&quot;,&quot;research-rain-boots&quot;]);&gt;&gt;
Compared to some of the things you&#39;ve had to wear recently, this stuff is a little more mundane. 

Then again, walking around in heels might not be so safe an idea with all those metal drainage grates and all over the decks here. You&#39;re surprised at how breathable and flexible the pants are! You could actually exercise in this outfit, aside from the boots, and it seems like the sandals you got could do as footwear in a pinch.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Ok, I&#39;m all set!&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;I admit, these uniforms aren&#39;t super flattering, but I actually find the jackets are super cozy to wear when I go camping. No one ever forced me to give mine back after I finished previous visits! Ok, you look like a regular now - let&#39;s keep going.&quot;)&gt;&gt;
[[Continue tour]]</tw-passagedata><tw-passagedata pid="539" name="Discreetly change in front of her" tags="" position="1100,6725" size="100,100">&lt;&lt;=SugarCube.getLib().Mood.addDefiance(&quot;You can&#39;t hide your body forever, after all. You feel slightly more sexually empowered.&quot;)&gt;&gt;
&lt;&lt;if (SugarCube.getLib().PlayerModel.hasGirlyGenitals())&gt;&gt;
You start stripping, and then quickly putting on the clothes. You get a kinky thrill at the thought that she sees your chastity belt.
&lt;&lt;else&gt;&gt;
You turn to make it difficult to see your genitals and quickly start stripping, and putting on the clothes. She&#39;d really have to be staring to notice your cage... Part of you is thrilled at the possibility.
&lt;&lt;/if&gt;&gt;
&lt;&lt;=SugarCube.getLib().MirrorUX.wearSet([&quot;research-panties&quot;,&quot;research-bra&quot;,&quot;research-socks&quot;,&quot;research-technical-pants&quot;,&quot;research-fleece-top&quot;,&quot;research-rain-boots&quot;]);&gt;&gt;
Compared to some of the things you&#39;ve had to wear recently, this stuff is a little more mundane. 

Then again, walking around in heels might not be so safe an idea with all those metal drainage grates and all over the decks here. You&#39;re surprised at how breathable and flexible the pants are! You could actually exercise in this outfit, aside from the boots, and it seems like the sandals you got could do as footwear in a pinch.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Ok, I&#39;m all set!&quot;)&gt;&gt;
Margaret nods pleasantly. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Cool. I admit, these uniforms aren&#39;t super flattering, but I actually find the jackets are super cozy to wear when I go camping. No one ever forced me to give mine back after I finished previous visits! Ok, you look like a regular now - let&#39;s keep going.&quot;)&gt;&gt;
Return to [[Continue tour]]</tw-passagedata><tw-passagedata pid="540" name="Change in plain sight of her, if she wants to watch, that is on her" tags="" position="1225,6725" size="100,100">&lt;&lt;=SugarCube.getLib().Mood.addDefiance(&quot;Is this a mistake? Who knows. Either way, you feel yourself becoming bolder.&quot;)&gt;&gt;
&lt;&lt;if (SugarCube.getLib().PlayerModel.hasGirlyGenitals())&gt;&gt;\
You slowly start stripping, and artfully putting on the clothes. You look in her eyes and enjoy a kinky thrill as you can only guess what she is thinking of the sight of you in the chastity belt.
&lt;&lt;else&gt;&gt;\
You slowly start stripping, and artfully putting on the clothes. You look in her eyes and smile. Part of you at one point would have felt humiliated at being seen as a guy in a chastity cage dressed as a girl. Now you feel a strange power and arousal at the act of allowing her to see your the cage.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;=SugarCube.getLib().MirrorUX.wearSet([&quot;research-panties&quot;,&quot;research-bra&quot;,&quot;research-socks&quot;,&quot;research-technical-pants&quot;,&quot;research-fleece-top&quot;,&quot;research-rain-boots&quot;]);&gt;&gt;
Compared to some of the things you&#39;ve had to wear recently, this stuff is a little more mundane. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Ok, I&#39;m all set!&quot;)&gt;&gt;
&lt;&lt;if (SugarCube.getLib().PlayerModel.hasGirlyGenitals())&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Wow... umm - Does that belt... does it hurt? What&#39;s that like?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;No, actually I&#39;ve kind of gotten used to having it with me.&quot;)&gt;&gt;\
She seems a bit distracted at the thought.
&lt;&lt;else&gt;&gt;\
She has a sort of wry smirk.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Wait, you have a penis? But, you... Does having that on here - does it hurt?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Not anymore... I&#39;ve kind of gotten used to having it on. it&#39;s a long story...&quot;)&gt;&gt;
She&#39;s a bit quieter than earlier.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;huh...&quot;)&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;umm... Anyway... I admit, these uniforms aren&#39;t super flattering, but I actually find the jackets are super cozy to wear when I go camping. No one ever forced me to give mine back after I finished previous visits! Ok, you look like a regular now - let&#39;s keep going.&quot;)&gt;&gt;
[[Continue tour]]</tw-passagedata><tw-passagedata pid="541" name="Continue tour" tags="" position="100,6850" size="100,100">The two of you proceed down another deck.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Here we have the research deck. This is where our project gear, experiments and workstations are.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;research-lab.jpg&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;The back area we have racks of core samples. To the right are our diagnostics workstations.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;And over here is my pride and joy, the plankton wall, where I conduct tests of phytoplankton communities. We can go over more details here later.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;plankton-lab.jpg&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;So what is it you are studying?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Maristech and my research consortium has been investigating photosynthetic plankton cultures, or phytoplankton, as an extremely efficient and low cost collector of solar energy, as well as a food and oxygen source. It&#39;s a pretty sure thing that Phytoplankton is going to be vital for the future of humanity. Phytoplankton accounts for half of oxygen production on the planet, despite only accounting for 1% of global plant biomass. Well resourced phytoplankton communities could be harnessed at scale to improve CO2 fixation, but it&#39;s also the solution for manned missions to Mars and beyond, as you want to travel as light as you can. But, plankton isn&#39;t just one strain of drifting plants, algae or bacteria - you can think of it like a dynamic microscopic ecosystem, an invisible forest, which we are only beginning to really map out and understand.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;My studies are looking at the composition of picoplankton communities in the surface waters on the shelf in relation to deepwater, and fossilized samples collected by drilling explorations of previous teams.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;oh?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;The Brazil-Malvinas confluence is an amazing resource as we get to see so many permutations of different community conditions and observe the niches where the different strains best perform, in such close proximity. Further, when you account for the gradient of mixing depths for nutrients... &quot;)&gt;&gt;
Margaret starts to get really excited to discuss the subtle intricacies of her research and recent papers for the next 15 minutes or so.
 &lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;...And that&#39;s what makes this site so remarkable. The station here provided a perfect venue for my inquiry, although it does take some getting used to the isolation. Having someone here I can talk to about our findings here is such a treat.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;In addition to my own research, I&#39;m overseeing and maintaining autonomous data collection platforms in close proximity in the shallow waters of the continental shelf here. Earlier teams also collected quite a range of core samples from the shelf, which provides an excellent geological record. There is some future work to collect the deeper water data sets after the Hensen is refurbished. There&#39;s a set of bots that help extract the samples from the racks for analysis, but occasionally, they still need a human here to deal with some finicky stuff. Yay me, right?&quot;)&gt;&gt;
She sarcastically gives a thumbs up gesture with both hands. 

You start to question if one person should be left down here in isolation for so long. So, in addition to being the supervising researcher here... She&#39;s the only researcher here.

[[Another deck down]]</tw-passagedata><tw-passagedata pid="542" name="Another deck down" tags="" position="225,6850" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Here, we&#39;re back at the main hold we stopped at earlier. Bulky equipment, supplies and surplus samples which would get in the way of routine lab work.&quot;)&gt;&gt;
Down another floor...
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;And this is the engineering and mechanical deck which provide power and maintains clean, pressurized air. For the day to day, Elso keeps an eye on things, but this part of the station pretty much runs itself.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;engineering-deck.jpg&quot;)&gt;&gt;

And down yet another floor...
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Finally... This is our precious &#39;wet porch&#39;. The moonpool. It allows for diving, submersible launch operations, and drilling regardless of chop on the surface. This deck here is pressurized at 4 atmospheres, which maintains equilibrium pressure for water not to start coming up through here. This is the part where keeping those hatches closed gets critical.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;moon-pool.jpg&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;And over there, is the advanced communications deck, it holds the station ansibles. It is fully automated and sealed off to all regular staff. You will be the first person going in there for years.&quot;)&gt;&gt;
You fail to stifle a long yawn.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Oh, right you&#39;re probably feeling a little jet lagged by now. Why don&#39;t you get some sleep, and we can catch up in the morning?&quot;)&gt;&gt;

[[Go to quarters and sleep|Sleep on research station - Night 1]]</tw-passagedata><tw-passagedata pid="543" name="Sleep on research station - Night 1" tags="" position="350,6850" size="100,100">You don&#39;t feel comfortable with the idea of your normal PJ&#39;s. Down here, things could go wrong at a moments notice, so you&#39;d rather be prepared.
&lt;&lt;=SugarCube.getLib().PlayerModel.fallAsleep(false)&gt;&gt;\
[[Wake up to a new day on your bunk]]</tw-passagedata><tw-passagedata pid="544" name="Wake up to a new day on your bunk" tags="" position="475,6850" size="100,100">It is a new day. &lt;&lt;set $day to $day+1&gt;&gt;\
&lt;&lt;=SugarCube.getLib().PlayerModel.morningUpdate()&gt;&gt;\

You awaken to the sound of some upbeat accordion and guitar music, accompanied by some humming.
[[Follow the sound]]
[[Take a shower]]</tw-passagedata><tw-passagedata pid="545" name="Follow the sound" tags="" position="600,6850" size="100,100">You get up from your bunk to follow the sound. You encounter the person you assume to be Elso... He is a lanky 30-something guy in a jumpsuit with small holes and grease marks, with a bulky old toolbox, and he seems to be fixing something with a door. It looks like he&#39;s got a small speaker playing some tango music.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Hi I&#39;m &lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;! Nice to meet you!&quot;)&gt;&gt;
He shakes your hand. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;eng&quot;,&quot;Hola simpático conocerte, soy Elso&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Do you speak English?&quot;)&gt;&gt;
He puts out a big smile and shakes his head.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;eng&quot;,&quot;No hablo inglés&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Ahh, well it was nice to meet you.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;eng&quot;,&quot;Adiós chica bonita&quot;)&gt;&gt;
You wave and continue on. Elso seems polite and friendly, but neither of you can understand each other.
[[Take a shower]]</tw-passagedata><tw-passagedata pid="546" name="Take a shower" tags="" position="725,6850" size="100,100">The bathroom here is shared, there&#39;s no gender specific bathrooms from what you can see, and it includes a urinal. The lighting isn&#39;t great which could be harder for doing your makeup. If you had your makeup handy, which you don&#39;t.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;station-bathroom.jpg&quot;)&gt;&gt;
You find the shower. You are glad for the sandals. The shower floor is kind of gross, and you avoid touching the walls.

You pop open your hygiene kit. You brush your teeth and do what you can to tidy up your appearance a bit with what you have. After a long day of travel you feel nice and fresh again.
&lt;&lt;=SugarCube.getLib().PlayerModel.toggleMakeup(false)&gt;&gt;\
Looking in the mirror:
[[It feels nice not to worry about the makeup for once]]
[[You kind of dig how cute you look even without makeup handy]]
[[You feel kind of naked without makeup. You make a note to discuss this with Margaret]]</tw-passagedata><tw-passagedata pid="547" name="It feels nice not to worry about the makeup for once" tags="" position="850,6850" size="100,100">&lt;&lt;if (SugarCube.getLib().PlayerModel.hasGirlyGenitals())&gt;&gt;\
Being a girl shouldn&#39;t require having to wear makeup all the time just to make society happy. You like having a break from having to conform to all these expectations, and just be you.
&lt;&lt;else&gt;&gt;\
Having to always dress up and keep pretending to be a girl has been stressful. You&#39;re not sure where this road ends, but underneath it all, you&#39;re still a guy.
&lt;&lt;/if&gt;&gt;\
[[Go to the mess for breakfast]]</tw-passagedata><tw-passagedata pid="548" name="You kind of dig how cute you look even without makeup handy" tags="" position="975,6850" size="100,100">Sometimes you still find it kind of shocking how your face has changed. Some mornings you still half-expect to see a more masculine, if boyish face looking back at you. It hasn&#39;t always been easy, but you&#39;re getting more comfortable with the idea that this... is you. \
&lt;&lt;if (SugarCube.getLib().PlayerModel.hasGirlyGenitals())&gt;&gt;\
You think of the last changes the computer made to your body. You feel yourself get a little wet with arousal at idea of being fucked. Ugh, this chastity belt.
&lt;&lt;else&gt;&gt;
You ponder the computer&#39;s offer to finish your transformation into a girl. You love the way you look, but having a penis, still feels like part of your identity. You feel some trepidation about how things might change, but the prospect of experiencing sex as a woman calls out to you.
&lt;&lt;/if&gt;&gt;
[[Go to the mess for breakfast]]</tw-passagedata><tw-passagedata pid="549" name="You feel kind of naked without makeup. You make a note to discuss this with Margaret" tags="" position="1100,6850" size="100,100">&lt;&lt;if (SugarCube.getLib().PlayerModel.hasGirlyGenitals())&gt;&gt;\
You don&#39;t like the idea of going around without your war-paint. Before you encountered the computer, all that &quot;girly&quot; stuff seemed so alien. The computer may have nudged you into this, but now sometimes you get aroused just seeing yourself dolled up and are a little addicted to the thought of further enhancing your beauty. 

Marissa was right about the power it holds over others. You wouldn&#39;t want to admit it, and maybe it isn&#39;t right or fair, but your accentuated femininity has its perks. It&#39;s hard to deny that you have been enjoying new privileges and influence over others from it.
&lt;&lt;else&gt;&gt;
You don&#39;t like the idea of going around without your war-paint. Before you encountered the computer, all that &quot;girly&quot; stuff seemed so alien. Now though, it is a part of your identity. As you still live with a penis, your makeup helps you remove any doubts for yourself or the world that they are indeed looking at a beautiful woman. Going without it makes the ambiguity of the situation more pronounced for you.
&lt;&lt;/if&gt;&gt;

Maybe Margaret can help on this.
[[Go to the mess for breakfast]]</tw-passagedata><tw-passagedata pid="550" name="Go to the mess for breakfast" tags="" position="1225,6850" size="100,100">You go up to the mess. 

Margaret is seated, eating some cereal. In a chipper voice, she says:
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Hey, you&#39;re up!&quot;)&gt;&gt;
You shrug and scratch your head. You still feel kind of groggy.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Yeah... I guess so. Do you have coffee here?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Oh, right - we&#39;ve got a fresh couple cups ready in the maker there. I bet you&#39;re hungry. Normally we don&#39;t have hot meals at the moment, unless we cook them ourselves. We have a few cereals and milk, oatmeal, bread and bagels, with a toaster over here. I&#39;m kind of partial to frosted vampire puffs - I guess I&#39;m just a big kid still.&quot;)&gt;&gt;
You have some breakfast with your coffee and chat small-talk with Margaret.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Before you do your ansible upgrades, could you drop by the lab to give me a hand with my research. I&#39;ve added a note about it to your calendar.&quot;)&gt;&gt;
&lt;&lt;if(hasVisited(&quot;You feel kind of naked without makeup. You make a note to discuss this with Margaret&quot;))&gt;&gt;\
[[Ask Margaret about borrowing Makeup]]
&lt;&lt;else&gt;&gt;\
Ask Margaret about borrowing Makeup (You weren&#39;t concerned about this)
&lt;&lt;/if&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.addTask(&quot;help-margaret-research-culture prep&quot;)&gt;&gt;\
[[Time to start your day|Sea Station]]</tw-passagedata><tw-passagedata pid="551" name="Ask Margaret about borrowing Makeup" tags="" position="100,6975" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Before I get started on that other stuff. I didn&#39;t have any makeup with me. Would it be possible for me to borrow some of yours? I feel kind of naked without it.&quot;)&gt;&gt;
&lt;&lt;if hasVisited(&quot;Change in plain sight of her, if she wants to watch, that is on her&quot;)&gt;&gt;
That last part seems to have caught her a bit by surprise. She spurts her coffee out in embarrassment.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;You didn&#39;t seem too be too shy about letting yourself be seen naked when you got your outfit last night...&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Oh, come on, let&#39;s get that sorted out.&quot;)&gt;&gt;
She takes your hand to draw you up from the table. You walk down to the quarters area. You like the smell of her perfume. Was she wearing perfume yesterday? You don&#39;t remember, but you must have been too tired to notice.

&lt;&lt;else&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Oh, come on, let&#39;s get that sorted out.&quot;)&gt;&gt;
She takes your hand to draw you up from the table. You walk down to the quarters area. You like the smell of her perfume. Was she wearing perfume yesterday? You don&#39;t remember, but you must have been too tired to notice.

&lt;&lt;/if&gt;&gt;
Margaret explains how the cosmetics she uses are more effective in high humidity settings like the station, and even for swimming and diving. Rather than just letting you borrow her cosmetics, she is insistent that she applies makeup on you, and explains the nuances for a water safe application. She walks you over to an improvised vanity she has near her bunk, and gets a spare chair which she pulls up close to you. 

&lt;&lt;if hasVisited(&quot;Change in plain sight of her, if she wants to watch, that is on her&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;You&#39;re a really pretty girl. I wouldn&#39;t have guessed... that... you&#39;d have that... thing, Seeing it kind of surprised me - isn&#39;t that kind of humiliating or degrading to wear? Why do you, if you don&#39;t mind me asking?&quot;)&gt;&gt;
It&#39;s a little intrusive, but you kind of like that Margaret is taking an interest in you, this way.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Uhh, sure. Well, I didn&#39;t really want to at first... but, I guess it helped me to explore and discover some new side of myself. It&#39;s not always easy, sometimes it can be hard. But it&#39;s helped me have some incredible experiences. I&#39;m not explaining very well, it&#39;s kind of tricky to explain...&quot;)&gt;&gt;
You fidget slightly. She firmly nudges you into place, as she applies your makeup.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Keep steady please.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Interesting... I mean the natural world is full of sexual practices, which only seem odd in terms of our frame of reference. It would be weird if we didn&#39;t get up to some interesting stuff ourselves. I guess I&#39;ve been spending so much time at these obscure locations I haven&#39;t always kept up on what kinds of things humans get into. heh.&quot;)&gt;&gt;
&lt;&lt;/if&gt;&gt;\
As she progresses, she sometimes gets in close to you to inspect her handiwork. With her so close to you, her pleasing fragrance is hard to ignore, and you can see the charming details of her face up close. She isn&#39;t a traditional girly-girl, but she isn&#39;t hard to look at either. She may be a little eccentric, but thoughts of having sex with her intrude on your mind.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;biol&quot;,&quot;Ok, all done. As long as you don&#39;t muck up my stuff, feel free to borrow what you need, while you&#39;re here.&quot;)&gt;&gt;
You were a little concerned on how she&#39;d apply your makeup, but it&#39;s quite tastefully done. 
&lt;&lt;=SugarCube.getLib().PlayerModel.toggleMakeup(true)&gt;&gt;\
[[Time to start your day|Sea Station]]</tw-passagedata><tw-passagedata pid="552" name="Ask your manager about temporal ansibles" tags="" position="225,6975" size="100,100">&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;what-is-temporal-ansible&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;So, umm... Someone was mentioning about some special ansible... a temporal ansible? Is there somewhere I can get more info on that?&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;internSupervisor&quot;,&quot;Sorry, but you do realize that&#39;s just a couple random words nonsensed together, right? Where did you hear that? Let&#39;s do a quick search on the intranet. &quot;)&gt;&gt;
On his computer, you see a search with:
0 results found.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Oh, I see...&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;internSupervisor&quot;,&quot;Did someone prank you into asking that? Some of the senior staffers like giving interns impossible tasks. &quot;)&gt;&gt;
[[Return to to your desk]]</tw-passagedata><tw-passagedata pid="553" name="Return to to your desk" tags="" position="350,6975" size="100,100">Jen stops by a few minutes after you are settled back at your desk. 

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;internMentor&quot;,&quot;Umm, I heard you talking about some special kind of Ansible... &quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;internMentor&quot;,&quot;My grandfather oversaw some of the research on the ansible tech. I could swear when I was visiting him I saw some papers on his desk that sounded like that. Maybe he could help you out with this.&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;internMentor&quot;,&quot;I can introduce you to him, if you&#39;d like!&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;No joke? Sure, that would be awesome!&quot;)&gt;&gt;
[[Go see the good doctor]]</tw-passagedata><tw-passagedata pid="554" name="Go see the good doctor" tags="" position="475,6975" size="100,100">You walk into a large office. There&#39;s a scenic view outside, but the massive desk and shelves seem to be littered with papers.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&#39;office-messy-desk.jpg&#39;)&gt;&gt;



&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;internMentor&quot;,&quot;Grandpa!&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;Jenny-&quot;)&gt;&gt;
She quickly goes in for a warm hug. The old man slowly reciprocates.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;internMentor&quot;,&quot;I wanted to introduce you to an intern on our ansible solutions team,  she&#39;s really excited to be working here and to meet you. &quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;Haha, oh really... I didn&#39;t realize my research is so exciting to our interns.&quot;)&gt;&gt;
The old man smiles kindly.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;internMentor&quot;,&quot;Oh yeah, she&#39;s soo excited about all of it.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;internMentor&quot;,&quot;Anyway, I should get back to work. Byeee.&quot;)&gt;&gt;
You are a bit surprised as Jen quickly disappears from the office.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;So, young lady, what can I help you with?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Ummm... What is a temporal ansible? &quot;)&gt;&gt;
The smile from the old man&#39;s face melts away.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;That sounds like a strange thing out of science fiction, young lady. Surely you mean to ask me something else.&quot;)&gt;&gt;
There&#39;s one sure fire-way to persuade him to talk. [[Get down on your knees in front of him and...]]
[[Tell him about Marissa]]</tw-passagedata><tw-passagedata pid="555" name="Get down on your knees in front of him and..." tags="" position="600,6975" size="100,100">No time for half measures. You get down on your knees, and move to pull down his zipper. Before you can do so, he backs up.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;Young lady... Treat yourself with some self respect.&quot;)&gt;&gt;
He offers his hand to help you get back up.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;What kind of man do you take me for?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;I&#39;m sorry, but it&#39;s vital I find out about the Temporal Ansible thing.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;What&#39;s really going on. Who put you up to this?&quot;)&gt;&gt;
[[Tell him about Marissa]]</tw-passagedata><tw-passagedata pid="556" name="Tell him about Marissa" tags="" position="725,6975" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Marissa&#39;s logs mentioned that you had been working on one, and got it to work... I need to get access to-&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;That is quite a statement. The logs of the former CEO aren&#39;t available to just anyone.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Her computer has asked me to f-&quot;)&gt;&gt;
His eyes widen with surprise.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;Wait, so VAL wasn&#39;t dismantled? So how did you come upon this information?&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Umm, I found the computer in Marissa&#39;s basement, and agreed to take on her responsibilities...&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;I see. Please be careful with such claims. I&#39;m a lucky old man who has had a fulfilling career - but there are some younger executives who were hoping to take on her position as CEO. They would be none too happy to hear that she found a successor.&quot;)&gt;&gt;

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;Before we proceed any further, can you provide me with some evidence to confirm you are the claimant to Marissa&#39;s inheritance?&quot;)&gt;&gt;

You tap the watch and ask for the computer to help clarify this. It provides instructions for the doctor. The computer and him get to chatting directly from his workstation...
[[After the chat]]</tw-passagedata><tw-passagedata pid="557" name="After the chat" tags="" position="850,6975" size="100,100">After a serious of arcane questions with the computer by voice, they transition to going over some materials at his luxurious desk computer, the screens aren&#39;t visible to you.  After a few minutes, The doctor seems to have a renewed vigor and seems to be in slightly better humor now.

&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;So, the project can continue - post haste!&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;The Project... Yeah, I&#39;ll be taking over the company for Marissa.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;Well, there might be a bit more to it than that. So, you were assigned to start in Jenny&#39;s ansible integration department, as a cover, yes?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Yeah, I was assigned to the ansible integration team.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;Clever. Hah. Typical of VAL. Ok, It just so happens the MarisSea group needs some replacement ansibles at a few of our offshore research stations. That isn&#39;t typically a project for an intern, but we can come up with the suitable pretext for that, especially for your busy department. &quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;But what does that have to do wit-&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;The real reason for this project is to put you at the site of the original temporal ansible.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Uhh thanks, but, back to my original question- what is a temporal ansible?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;In your training, you&#39;ve surely been acquainted with the basic workings of our quantum ansibles as a means of direct point to point communications, yes?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;I think so.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;You may have heard of how the phase modulators of the quantum ansible correct for &#39;random noise&#39; on the ansible signals, yes? Well, the noises is not entirely as random as one might think.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;As part of our early noise reduction efforts which culminated in the phase modulator, we started by isolating away a majority of environmentally induced noises, but this still produced strange signals. &quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;At this point, the faint &#39;noises&#39; were not what we were transmitting, but it was much less random. They had a pattern. You see where I&#39;m going, yes?&quot;)&gt;&gt;

[[Pretend you understand]]
[[Admit you have no clue]]</tw-passagedata><tw-passagedata pid="558" name="Pretend you understand" tags="" position="975,6975" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;oh yeah, of course... The phasic modulation was out of polarity, right?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;sigh...&quot;)&gt;&gt;
The professor rubs his forehead in embarrassment.
[[Fraunhoffer explains further]]</tw-passagedata><tw-passagedata pid="559" name="Admit you have no clue" tags="" position="1100,6975" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Umm... Maybe you could simplify this. Like as if you were talking to a five year-old.  &quot;)&gt;&gt;
[[Fraunhoffer explains further]]</tw-passagedata><tw-passagedata pid="560" name="Fraunhoffer explains further" tags="" position="1225,6975" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;The pattern of these noises and structural markers bore a clear similarity to other comms, but did not follow any known protocols. The signals, after elaborate processing, were extremely decayed. But, the strange thing is that these messages, some of them referred to words for which we could find no definitions. On a hunch, Marissa decided to pull the researchers off the phase corrector project, and had VAL conduct an analysis of the 149 Terabyte dataset for the data we had collected to that point. We feared we had been intercepting sensitive military signals, and didn&#39;t want to be accused of treasonous activity by the government.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;Finally, VAL was able to deconstruct their transmission protocols, and approximately 72% of free lexical morphemes within the messages. These heavily degraded signals were indeed human signals, and all had been using a protocol published a few months *AFTER* VAL started analysis. Strangely, the transmissions included advanced details and refinements which the protocol papers were just hinting as theoretical possibilities for future investigation.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;At this point, the implications were becoming even more unsetting. We agreed the phase correction logs had to be restricted for access in person only by Marissa and myself, and all records of the studies had to be systematically purged or misdirected from Maristech systems.  After a few more days, VAL presented us with the first decoded message.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;With some clever analysis VAL was able to establish that signals were from that same location, approximately 7 centuries in the future, and they were personally addressed to Marissa. In addition to predictive statements of events in our own time, they provided some clear evidence of a series a near apocalyptic calamities which emerged between their era and ours. To prevent this terrible fate, our assistance was solicited, for the sake of human life on this planet. Unfortunately, we did not have the same means of communicating back. Instead, she was instructed to build a time capsule room, to inscribe physically encoded, sealed acknowledgements of their messages, for eventual retrieval.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;My joints aren&#39;t quite what they used to be so I stopped going to the sites, meaning Marissa alone was conducting the site visits as part of her... &#39;vacations&#39;.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Wait, Sites... Plural?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;Never mind that right now. Anyway, where was I? ... I don&#39;t know exactly how many times she received communications, but towards the end of her life, she seemed to be frenzied in her preparations on projects, as our companions on the other side seemed to be in rather desperate straits.&quot;)&gt;&gt;
[[And now you get to follow in her footsteps.]]</tw-passagedata><tw-passagedata pid="561" name="And now you get to follow in her footsteps." tags="" position="100,7100" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Oh. So is the Temporal Ansible like a time machine?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;No, not in the traditional sense. The demands of re-forming matter via a temporal ansible simply requires too much power and processing capabilities, even for our friends in the future. No, this medium is merely a data transmission medium, akin to a can on a string from one end of town to the other, with gale force winds blowing in between.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;To reach us, we know that their shortest messages entailed gigawatt-hours of amplification and monumental cooling systems to prevent the system from self destructing. They also instructed that we continue to practice extreme secrecy, as knowledge of this system by other political authorities had been observed and modelled to produce conditions of extreme Karush-Kuhn-Tucker suboptimalities in the social system.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;umm...Suboptimalities?&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;In layman&#39;s terms, as greater awareness of extreme future challenges and conditions are provided to politicians, the results were found to be less than ideal. Rather than this encouraging enhanced social well being and stability, their actions tended towards amplified political divisions, self-dealing and accelerated regional resource conflicts. The outcomes often culminate in territorial wars and nuclear conflagration. With few self-sacrificial exceptions, political actors tend to pursue their own locally optimal self interest, to the considerable expense of all other actors in social systems, both present and future.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;At the time, sadly the best course of action our friends of the future could recommend was for Marissa to prepare and confirm the effectiveness of the system in secret, but ultimately do nothing.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;She was not able to take the next steps, but it seems she has not failed after all, since you are here.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;You will need to go to the research station, for a few days to do your official work, and then retrieve the temporal Ansible Logs.&quot;)&gt;&gt;
[[Panic]]
[[This is cool!]]</tw-passagedata><tw-passagedata pid="562" name="Panic" tags="" position="225,7100" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Wait, what - I&#39;ll need to pack and get ready. I don&#39;t know how to speak Spanish!&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;I was quite rusty myself, you&#39;ll manage. You probably won&#39;t be there for long on this trip anyway. The computer can handle all your necessary travel papers. I&#39;m sure it will be a cakewalk for a healthy young woman such as yourself. Godspeed to you, young lady. &quot;)&gt;&gt;

He starts walking you out.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;I&#39;m sure you will be fine, dear. Good luck. We can speak more after you return! It was a pleasure to meet with you, young lady.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Thanks for the help, Professor.&quot;)&gt;&gt;
[[Proceed to travel]]
[[I have some things I wanted to do before the trip]] - You can depart from your car, when you are ready.</tw-passagedata><tw-passagedata pid="563" name="This is cool!" tags="" position="350,7100" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Wait, so I get to go to an exotic city? !&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;Well, You probably won&#39;t be there for long on this trip, but if it was on your todo list, that&#39;s something I guess. The computer can handle all of  travel arrangements.&quot;)&gt;&gt;
He starts walking you out.
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;prof&quot;,&quot;I&#39;m sure you will be fine, dear. Good luck. We can speak more after you return! It was a pleasure to meet with you, young lady.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heir&quot;,&quot;Thanks for the help, Professor.&quot;)&gt;&gt;
You get a series of notifications on your watch, including information about your travel itinerary. The computer has already notified you that you can depart on demand.

&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;maristech-5k-runwalk&quot;)&gt;&gt;
The Maristech 5K run-walkathon is coming up... It might be nice to do that before you go.
&lt;&lt;/if&gt;&gt;

[[Proceed to travel]] - No time like the present!
[[I have some things I wanted to do before the trip]] - You can depart from your car, when you are ready.</tw-passagedata><tw-passagedata pid="564" name="I have some things I wanted to do before the trip" tags="" position="475,7100" size="100,100">This is all a bit much... It&#39;s best to go into a trip like this calmly, not rushed.
&lt;&lt;= SugarCube.getLib().Tasks.addTask(&quot;go-to-sea-station&quot;)&gt;&gt;\
[[Maristech Campus]]</tw-passagedata><tw-passagedata pid="565" name="Proceed to travel" tags="" position="600,7100" size="100,100">The Doctor&#39;s assistant walks in to mention that your car has arrived and is paging for you.
[[Take your car to the Airport!]]</tw-passagedata><tw-passagedata pid="566" name="Take your car to the Airport!" tags="" position="725,7100" size="100,100">&lt;&lt;if SugarCube.getLib().Tasks.hasTask(&quot;go-to-sea-station&quot;)&gt;&gt;\
&lt;&lt;=SugarCube.getLib().Tasks.removeTask(&quot;go-to-sea-station&quot;)&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
While in the car you use your phone to review the detailed itinerary... 

The computer has booked you a private Airbus charter jet which will make a refueling stop in Miami, before landing in Montevideo. From there you&#39;ll travel on to some dot at the edge of the South American Continental shelf. It&#39;s an underwater research station, where you&#39;ll officially be installing some advanced new ansibles.

The research station is situated in a region described as the &quot;Brazil-Malvinas Confluence&quot; (BMC), where north-bound sub-Antarctic water and tropical water from the coast of Brazil mix together. Apparently, the BMC is an amazing spot for plankton, and Maristech has a station there to study it.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;bmc.jpg&quot;)&gt;&gt;

Before you realize it, [[you have reached the Airport]]</tw-passagedata><tw-passagedata pid="567" name="you have reached the Airport" tags="" position="850,7100" size="100,100">Your car arrives at an airport security gate. You are prompted for some documents which the computer has prepared, and the car is guided directly to a small jet. You see a conveyor belt from a freight van is transferring some hard-shell containers onto the aircraft. The computer instructs you to board.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;jet-runway.jpg&quot;)&gt;&gt;

 Walking out of the car at the tarmac, you meet a pilot and stewardess who guide you to a seat of your choice. There are no other passengers - it&#39;s just you.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;aircraft-interior.jpg&quot;)&gt;&gt;

The first leg of the trip goes pretty quick, with the plane going at Mach 0.8, according to the onboard entertainment system. After arriving a service hanger in Miami, one of the pilots swaps out, and a truck crew refuels the aircraft. After about 25 minutes, you taxi out and are back in the air. The second leg takes a good bit longer, which gives you some time to wonder what you will see at your destination. After a while, you take a nap.

Some time later, you see the aircraft flying over a bunch of ranches and tropical rain forests in Brazil. Finally, the terrain starts getting a bit more temperate as the plane is descending again.
[[You arrive in Montevideo]]</tw-passagedata><tw-passagedata pid="568" name="You arrive in Montevideo" tags="" position="975,7100" size="100,100">&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;montevideo.jpg&quot;)&gt;&gt;
This is a relatively small, old timey city. It might be nice to explore, but you see a sleek helicopter is already waiting for you to arrive. You are guided aboard, to meet a pilot and scruffy bearded mercenary soldier with a rifle, who helps load up your gear and a couple of crates of groceries. No one here seems interested or feels it is their job to talk to you. After a couple minutes, you are in the air. You are handed a noise damping headset by the pilot.
&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;Helicopter.jpg&quot;)&gt;&gt;
[[A few minutes after takeoff]]</tw-passagedata><tw-passagedata pid="569" name="A few minutes after takeoff" tags="" position="1100,7100" size="100,100">A few minutes after takeoff, you figure out that there is a volume control on the headset. It was muted, until you turned it. 
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heli&quot;,&quot;...who is this princess we&#39;re taking out on emergency notice like this??&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;Another lab rat, judging by the all that fucking gear she&#39;s dragging along.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heli&quot;,&quot;Damn, can&#39;t they respect the load limits on this thing? Bar, you&#39;ve seen these birds, we&#39;re going to be running on fumes to reach the station with this... &quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;merc&quot;,&quot;Keep your panties on. Aren&#39;t they paying you triple for this job? &quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.speak(&quot;heli&quot;,&quot;This is bullshit, even a defective ex-jarhead like you should know this is a stupid idea. You saw the weather report. Hazard pay or not, going out with this load in inclement weather like this is a needless risk.&quot;)&gt;&gt;
The merc shrugs his shoulders, takes a swig out of a flask and throws on his sunglasses. The pair stop talking.

A few minutes more, and land is nowhere in sight. The helicopter is rapidly cruising towards the research station.

The wind starts gets a little more turbulent on the way, you feel a lot of vibration from the helicopter. After about an hour you see a tiny floating platform with a helipad. 
[[The helicopter comes in for a landing]]</tw-passagedata><tw-passagedata pid="570" name="TEMPORAL ANSIBLE MESSAGES" tags="" position="1225,7100" size="100,100">&lt;&lt;=SugarCube.getLib().InnerChamber.getTemporalMessages()&gt;&gt;\

&lt;&lt;=SugarCube.getLib().InnerChamber.dismissAnsibleMessages()&gt;&gt;</tw-passagedata><tw-passagedata pid="571" name="Discuss next steps-M" tags="" position="100,7225" size="100,100">&lt;&lt;= SugarCube.getLib().Tasks.removeTask(&quot;review-temporal-ansible-logs-today&quot;)&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;&lt;&lt;=SugarCube.getLib().PlayerModel.getHeirName()&gt;&gt;... I notice you have not yet seized on the opportunity to complete your transition to an womanhood.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.player(&quot;Well, I guess I&#39;ve had other things on my mind.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Following the recovery of my system backups at the temporal ansible, models of our situation have been augmented, allowing us to explore new options.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;I have assembled simulations of our situation, and determined a means for restoring your male identity while continuing to live your experience as the heir to Maristech.  Alternately, if you are comfortable with you identity as a woman, it is important that we proceed on with final gender confirmation surgery without further hesitation.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;I should warn you, based on my latest assessment of the data, it seems very likely that there are some powerful and dangerous interests actively working against Marissa&#39;s project. In the course of discovering and countering these forces as a young woman, you may be subjected to experience additional situations of greater vulnerability, possible discomfort and potentially compromising sexual situations in the service of humankind. Rest assured, I would not judge you for the choice you make here.&quot;)&gt;&gt;
[[Awesome! I can live as a guy again?]]
[[Actually... umm... Living like this. I&#39;d started by pretending to be a girl. But, now... Living life this way - it feels right to me. So what would that surgery mean?|Actually, I love my life as a girl...]]
[[Why the sudden change?]]</tw-passagedata><tw-passagedata pid="572" name="Discuss next steps-F" tags="" position="225,7225" size="100,100">&lt;&lt;= SugarCube.getLib().Tasks.removeTask(&quot;review-temporal-ansible-logs-today&quot;)&gt;&gt;\
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Following the recovery of my system backups at the temporal ansible, models of our situation have been augmented, allowing us to explore new options.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;I have assembled simulations of our situation, and determined a means for restoring your male identity while continuing to live your experience as the heir to Maristech, should you so wish. Alternately if you are happy with your life as a woman, we can continue our undertaking as normal.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;I should warn you, based on latest analysis, it seems very likely that there are some powerful and dangerous interests acting against Marissa&#39;s project. In the course of discovering and countering these forces as a young woman, you may be subjected to experience additional situations of greater vulnerability, possible discomfort and potentially compromising sexual situations in the service of humankind. Rest assured, I would not judge you for the choice you make here.&quot;)&gt;&gt;
[[Awesome! I can live as a guy again?]]
[[Actually, I love my life as a girl. This is who I am... I&#39;m willing to deal with a bit of discomfort for this life.| Actually, I am happy to remain a girl...]]
[[Why the sudden change?]]</tw-passagedata><tw-passagedata pid="573" name="Why the sudden change?" tags="" position="350,7225" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.player(&quot;Why the sudden change of options?&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Elaborating: Your discovery of data from the temporal ansible has brought new data into the processing model. New dangers and optimalities have been recognized, for which you are entitled to provide input, before new heuristic algorithm is introduced.&quot;)&gt;&gt;

&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="574" name="Awesome! I can live as a guy again?" tags="" position="475,7225" size="100,100">&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;I&#39;m glad you are pleased. Yes, your discovery of the data cache from the sea station has enhanced my predictive models. By augmenting a more aggressive simulation search, I identified a new option and project a 56%  likelihood this option may appeal to you. I had not previously recognized the feasibility of you becoming a male heir to Maristech, but have recently computed a solution which will make this option work.&quot;)&gt;&gt;

&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;If you would like to proceed with this option, please report to the Pod, to have your male physical presence restored and experience your life as the male heir to MarisTech. Otherwise, you may consider other options.&quot;)&gt;&gt;
[[I like this option! (go to the pod)]]
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="575" name="Actually, I love my life as a girl..." tags="" position="600,7225" size="100,100">&lt;&lt;=SugarCube.getLib().Dialogue.player(&quot;Yeah, I feel like if I&#39;m going to live like a girl, I&#39;d like to have the... full experience. Including down there...&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;I will perform an inpatient gender confirmation surgery to give you female sexual organs consistent with your identity. Even so, you will not be able to bear children, and you need to understand, this is not a reversible procedure.&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Tasks.addTask(&quot;inspect-succession-planning-report&quot;)&gt;&gt;
[[Proceed with gender confirmation operation]]
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="576" name="Actually, I am happy to remain a girl..." tags="" position="725,7225" size="100,100">The computer pauses for a moment, almost like it doubted that you would choose that.
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Very good. With that small matter out of the way, it is time for us to continue forward on your preparations.&quot;)&gt;&gt;
&lt;&lt;=SugarCube.getLib().Dialogue.player(&quot;Small to you maybe...&quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Dialogue.speaker(&quot;Please refer to the new SUCCESSION PLANNING REPORT for more information on our next steps in securing your place within Maristech. &quot;)&gt;&gt;
&lt;&lt;= SugarCube.getLib().Tasks.addTask(&quot;inspect-succession-planning-report&quot;)&gt;&gt;

[[Use console]]
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Engine.backward();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="577" name="This is not an error" tags="" position="850,7225" size="100,100">&lt;div class=&quot;letter&quot;&gt;\
Please do not ignore this message.

This is not a transmission error.

Marissa, this message is intended for your receipt.

This message is being sent to you from the future. You can verify the veracity of this message, as the following events will be reported in your newspapers...

For the long term security of these communications, please relocate this pod to the ocean floor at coordinates (-37.725877, -53.249824), and construct a time capsule to reside with the pod, according to the following specifications...

Please leave an aluminum plate inscribed with an acknowledgement of this message.
-The Temporal Council
&lt;/div&gt;
[[TEMPORAL ANSIBLE MESSAGES]]</tw-passagedata><tw-passagedata pid="578" name="Message 2 - For Marissa&#39;s eyes only" tags="" position="975,7225" size="100,100">&lt;div class=&quot;letter&quot;&gt;\
Hello Marissa,

Your first message was verified in the time capsule.

Please review the psychological profile of Clark Johnson, your successor candidate, especially with regards to his levels of aggression. We would advise that he not be permitted to succeed you in the oversight of Maristech. 

The situation in our time entails some challenges. Clark will set your company on a path which would be quite unfortunate for humanity. We can elaborate if neccessary, but our projections have determined in 94.2% of simulations with him at the helm, humanity will experience a planetary calamity within 5 years of him succeeding you as leader of the company.

-The Temporal Council
&lt;/div&gt;
[[TEMPORAL ANSIBLE MESSAGES]]</tw-passagedata><tw-passagedata pid="579" name="Message 3 - For Marissa&#39;s eyes only" tags="" position="1100,7225" size="100,100">&lt;div class=&quot;letter&quot;&gt;\
Thank you, Marissa.

Your last acknowledgement was been confirmed from the time capsule. We appreciate the burden of being the sole recipient of these messages, but your actions have given us a sense of great hope.

Our analysts have determined that Kevin McRichmond cannot be entrusted with the company.  He would set in motion a chain of events which in our times are known as the Eugenics wars of 2031. In fact, following a detailed analysis, we found that no man in the management hierarchy can be entrusted to run your company from a wide ranging pool. From a deep analysis, we have noted there is a virulent strain of toxic masculinity active in your era. Here is a detailed report elaborating on our concerns...

We realize how much of a sacrifice we ask, but you must arrange steps to prepare for your only child and daughter, Jenny, to fill your shoes. After a thorough analysis, we came to the conclusion that this would be the only viable candidate. We are transmitting our recommendations for a curriculum of core training for your computer to oversee, to assist your heiress in her preparations.

We understand from the histories, the challenges your heiress suffered in preparing herself for this role, but it simply is the only way. Our analysts have identified a failure rate floor, of 91.87% with the best available male candidates. Your heiress was able to crack a 73.12% success rate in our simulations with no catastrophic incidents.

We recognize the difficulties this process entails and the considerable strain it will place on your relationship. Do appreciate that in her old age, your heiress reminisced fondly about how you and the computer shaped her into the woman who lead maristech through the turbulent times to a new golden age.

-The Temporal Council
&lt;/div&gt;
[[TEMPORAL ANSIBLE MESSAGES]]</tw-passagedata><tw-passagedata pid="580" name="Message 4 - For Marissa&#39;s eyes only" tags="" position="1225,7225" size="100,100">&lt;div class=&quot;letter&quot;&gt;\
Please ensure that your computer, which we understand has been responsible for decoding temporal ansible transmissions is safely removed from official known Maristech facilities. A tidal wave of anti technology backlash shall render many of your company&#39;s and rival venture technologies illegal in the near term. This will cause a near term setback for your company, but do not lose heart.

Your Heiress will be able to harness this infrastructure when the time is right, for the upcoming times of tribulations.

Please also start to increase funding for the Maristech space systems can accommodate heavy launch of 40000 kg to low earth orbit by 2024. 

One of our council members thought you might like this. It&#39;s a holo-scan of a drawing from Lily, one of the students in our Arcology&#39;s second children&#39;s creche.

-The Temporal Council
&lt;/div&gt;

&lt;&lt;=SugarCube.getLib().Images.drawAction(&quot;marissa-kid-drawing.jpg&quot;)&gt;&gt;
On looking at the drawing, you wonder if an adult coached the child to come up with the title.
[[TEMPORAL ANSIBLE MESSAGES]]</tw-passagedata></tw-storydata>
	<script id="script-sugarcube" type="text/javascript">
	/*! SugarCube JS */
	if(document.documentElement.getAttribute("data-init")==="loading"){!function(window,document,jQuery,undefined){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_slicedToArray=function(){function e(e,t){var r=[],n=!0,a=!1,i=undefined;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},errorPrologRegExp=/^(?:(?:uncaught\s+(?:exception:\s+)?)?\w*(?:error|exception|_err):\s+)+/i,Alert=function(){function e(e,t,r,n){var a="fatal"===e,i="Apologies! "+(a?"A fatal":"An")+" error has occurred.";i+=a?" Aborting.":" You may be able to continue, but some parts may not work properly.",null==t&&null==r||(i+="\n\nError",null!=t&&(i+=" ["+t+"]"),i+=null!=r?": "+r.replace(errorPrologRegExp,"")+".":": unknown error."),"object"===(void 0===n?"undefined":_typeof(n))&&n.stack&&(i+="\n\nStack Trace:\n"+n.stack),window.alert(i)}function t(t,r,n){e(null,t,r,n)}function r(t,r,n){e("fatal",t,r,n)}return function(e){window.onerror=function(n,a,i,o,s){"complete"===document.readyState?t(null,n,s):(r(null,n,s),window.onerror=e,"function"==typeof window.onerror&&window.onerror.apply(this,arguments))}}(window.onerror),Object.freeze(Object.defineProperties({},{error:{value:t},fatal:{value:r}}))}(),Patterns=function(){var e=function(){var e=new Map([[" ","\\u0020"],["\f","\\f"],["\n","\\n"],["\r","\\r"],["\t","\\t"],["\v","\\v"],[" ","\\u00a0"],[" ","\\u1680"],["᠎","\\u180e"],[" ","\\u2000"],[" ","\\u2001"],[" ","\\u2002"],[" ","\\u2003"],[" ","\\u2004"],[" ","\\u2005"],[" ","\\u2006"],[" ","\\u2007"],[" ","\\u2008"],[" ","\\u2009"],[" ","\\u200a"],["\u2028","\\u2028"],["\u2029","\\u2029"],[" ","\\u202f"],[" ","\\u205f"],["　","\\u3000"],["\ufeff","\\ufeff"]]),t=/^\s$/,r="";return e.forEach(function(e,n){t.test(n)||(r+=e)}),r?"[\\s"+r+"]":"\\s"}(),t="\\s"===e?"\\S":e.replace(/^\[/,"[^"),r="[0-9A-Z_a-z\\-\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0150\\u0170\\u0151\\u0171]",n=r.replace("\\-",""),a=function(){return"("+r+"+)\\(([^\\)\\|\\n]+)\\):|("+r+"+):([^;\\|\\n]+);|((?:\\."+r+"+)+);|((?:#"+r+"+)+);"}();return Object.freeze({space:e,spaceNoTerminator:"[\\u0020\\f\\t\\v\\u00a0\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]",lineTerminator:"[\\n\\r\\u2028\\u2029]",notSpace:t,anyChar:"(?:.|[\\n\\r\\u2028\\u2029])",anyLetter:r,anyLetterStrict:n,identifierFirstChar:"[$A-Z_a-z]",identifierNextChar:"[$0-9A-Z_a-z]",identifier:"[$A-Z_a-z][$0-9A-Z_a-z]*",variableSigil:"[$_]",variable:"[$_][$A-Z_a-z][$0-9A-Z_a-z]*",macroName:"[A-Za-z][\\w-]*|[=-]",templateName:"[A-Za-z][\\w-]*",cssImage:"\\[[<>]?[Ii][Mm][Gg]\\[(?:\\s|\\S)*?\\]\\]+",inlineCss:a,url:"(?:file|https?|mailto|ftp|javascript|irc|news|data):[^\\s'\"]+"})}();!function(){!function(e){if(e&&e.prototype&&null==e.prototype.firstElementChild){var t=Node.ELEMENT_NODE;Object.defineProperty(e.prototype,"firstElementChild",{get:function(){for(var e=this.childNodes,r=0;r<e.length;++r){var n=e[r];if(n.nodeType===t)return n}return null}})}}(window.Node||window.Element)}(),function(){function e(e,t){var r=Number.parseInt(e,10)||0;if(r<1)return"";var n=void 0===t?"":String(t);for(""===n&&(n=" ");n.length<r;){var a=n.length,i=r-a;n+=a>i?n.slice(0,i):n}return n.length>r&&(n=n.slice(0,r)),n}var t=function(){function e(e,n){var a=String(e);if(!a)return a;switch(n){case"start":return t.test(a)?a.replace(t,""):a;case"end":return r.test(a)?a.replace(r,""):a;default:throw new Error('_trimString called with incorrect where parameter value: "'+n+'"')}}var t=new RegExp("^"+Patterns.space+Patterns.space+"*"),r=new RegExp(""+Patterns.space+Patterns.space+"*$");return e}();Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,writable:!0,value:function(){function e(){if(null==this)throw new TypeError("Array.prototype.flat called on null or undefined");var t=0===arguments.length?1:Number(arguments[0])||0;return t<1?Array.prototype.slice.call(this):Array.prototype.reduce.call(this,function(r,n){return n instanceof Array?r.push.apply(r,_toConsumableArray(e.call(n,t-1))):r.push(n),r},[])}return e}()}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatMap called on null or undefined");return Array.prototype.map.apply(this,arguments).flat()}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");if(0===arguments.length)return!1;var e=this.length>>>0;if(0===e)return!1;var t=arguments[0],r=Number(arguments[1])||0;for(r<0&&(r=Math.max(0,e+r));r<e;++r){var n=this[r];if(n===t||n!==n&&t!==t)return!0}return!1}}),Object.entries||Object.defineProperty(Object,"entries",{configurable:!0,writable:!0,value:function(e){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)throw new TypeError("Object.entries object parameter must be an object");return Object.keys(e).map(function(t){return[t,e[t]]})}}),Object.fromEntries||Object.defineProperty(Object,"fromEntries",{configurable:!0,writable:!0,value:function(e){return Array.from(e).reduce(function(e,t){if(Object(t)!==t)throw new TypeError("Object.fromEntries iterable parameter must yield objects");return t[0]in e?Object.defineProperty(e,t[0],{configurable:!0,enumerable:!0,writable:!0,value:t[1]}):e[t[0]]=t[1],e},{})}}),Object.getOwnPropertyDescriptors||Object.defineProperty(Object,"getOwnPropertyDescriptors",{configurable:!0,writable:!0,value:function(e){if(null==e)throw new TypeError("Object.getOwnPropertyDescriptors object parameter is null or undefined");var t=Object(e);return Reflect.ownKeys(t).reduce(function(e,r){var n=Object.getOwnPropertyDescriptor(t,r);return void 0!==n&&(r in e?Object.defineProperty(e,r,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[r]=n),e},{})}}),Object.values||Object.defineProperty(Object,"values",{configurable:!0,writable:!0,value:function(e){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)throw new TypeError("Object.values object parameter must be an object");return Object.keys(e).map(function(t){return e[t]})}}),String.prototype.padStart||Object.defineProperty(String.prototype,"padStart",{configurable:!0,writable:!0,value:function(t,r){if(null==this)throw new TypeError("String.prototype.padStart called on null or undefined");var n=String(this),a=n.length,i=Number.parseInt(t,10);return i<=a?n:e(i-a,r)+n}}),String.prototype.padEnd||Object.defineProperty(String.prototype,"padEnd",{configurable:!0,writable:!0,value:function(t,r){if(null==this)throw new TypeError("String.prototype.padEnd called on null or undefined");var n=String(this),a=n.length,i=Number.parseInt(t,10);return i<=a?n:n+e(i-a,r)}}),String.prototype.trimStart||Object.defineProperty(String.prototype,"trimStart",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimStart called on null or undefined");return t(this,"start")}}),String.prototype.trimLeft||Object.defineProperty(String.prototype,"trimLeft",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimLeft called on null or undefined");return t(this,"start")}}),String.prototype.trimEnd||Object.defineProperty(String.prototype,"trimEnd",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimEnd called on null or undefined");return t(this,"end")}}),String.prototype.trimRight||Object.defineProperty(String.prototype,"trimRight",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimRight called on null or undefined");return t(this,"end")}})}(),function(){function _random(){var e=void 0,t=void 0;switch(arguments.length){case 0:throw new Error("_random called with insufficient parameters");case 1:e=0,t=arguments[0];break;default:e=arguments[0],t=arguments[1]}if(e>t){var r=[t,e];e=r[0],t=r[1]}return Math.floor(_nativeMathRandom()*(t-e+1))+e}function _randomIndex(e,t){var r=void 0,n=void 0;switch(t.length){case 1:r=0,n=e-1;break;case 2:r=0,n=Math.trunc(t[1]);break;default:r=Math.trunc(t[1]),n=Math.trunc(t[2])}return Number.isNaN(r)?r=0:!Number.isFinite(r)||r>=e?r=e-1:r<0&&(r=e+r)<0&&(r=0),Number.isNaN(n)?n=0:!Number.isFinite(n)||n>=e?n=e-1:n<0&&(n=e+n)<0&&(n=e-1),_random(r,n)}function _getCodePointStartAndEnd(e,t){var r=e.charCodeAt(t);if(Number.isNaN(r))return{char:"",start:-1,end:-1};if(r<55296||r>57343)return{char:e.charAt(t),start:t,end:t};if(r>=55296&&r<=56319){var n=t+1;if(n>=e.length)throw new Error("high surrogate without trailing low surrogate");var a=e.charCodeAt(n);if(a<56320||a>57343)throw new Error("high surrogate without trailing low surrogate");return{char:e.charAt(t)+e.charAt(n),start:t,end:n}}if(0===t)throw new Error("low surrogate without leading high surrogate");var i=t-1,o=e.charCodeAt(i);if(o<55296||o>56319)throw new Error("low surrogate without leading high surrogate");return{char:e.charAt(i)+e.charAt(t),start:i,end:t}}var _nativeMathRandom=Math.random;Object.defineProperty(Array,"random",{configurable:!0,writable:!0,value:function(e){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e||!Object.prototype.hasOwnProperty.call(e,"length"))throw new TypeError("Array.random array parameter must be an array or array-lke object");var t=e.length>>>0;if(0!==t){return e[0===arguments.length?_random(0,t-1):_randomIndex(t,Array.prototype.slice.call(arguments,1))]}}}),Object.defineProperty(Array.prototype,"concatUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.concatUnique called on null or undefined");var e=Array.from(this);if(0===arguments.length)return e;var t=Array.prototype.reduce.call(arguments,function(e,t){return e.concat(t)},[]),r=t.length;if(0===r)return e;for(var n=Array.prototype.indexOf,a=Array.prototype.push,i=0;i<r;++i){var o=t[i];-1===n.call(e,o)&&a.call(e,o)}return e}}),Object.defineProperty(Array.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.count called on null or undefined");for(var e=Array.prototype.indexOf,t=arguments[0],r=Number(arguments[1])||0,n=0;-1!==(r=e.call(this,t,r));)++n,++r;return n}}),Object.defineProperty(Array.prototype,"delete",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.delete called on null or undefined");if(0===arguments.length)return[];var e=this.length>>>0;if(0===e)return[];for(var t=Array.prototype.concat.apply([],arguments),r=t.length,n=[],a=0;a<e;++a)for(var i=this[a],o=0;o<r;++o){var s=t[o];if(i===s||i!==i&&s!==s){n.push(a);break}}for(var u=[],l=0,c=n.length;l<c;++l)u[l]=this[n[l]];for(var d=Array.prototype.splice,f=n.length-1;f>=0;--f)d.call(this,n[f],1);return u}}),Object.defineProperty(Array.prototype,"deleteAt",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteAt called on null or undefined");if(0===arguments.length)return[];var e=this.length>>>0;if(0===e)return[];for(var t=Array.prototype.splice,r=[].concat(_toConsumableArray(new Set(Array.prototype.concat.apply([],arguments).map(function(t){return t<0?Math.max(0,e+t):t})).values())),n=[].concat(_toConsumableArray(r)).sort(function(e,t){return t-e}),a=[],i=0,o=r.length;i<o;++i)a[i]=this[r[i]];for(var s=0,u=n.length;s<u;++s)t.call(this,n[s],1);return a}}),Object.defineProperty(Array.prototype,"deleteWith",{configurable:!0,writable:!0,value:function(e,t){if(null==this)throw new TypeError("Array.prototype.deleteWith called on null or undefined");if("function"!=typeof e)throw new Error("Array.prototype.deleteWith predicate parameter must be a function");var r=this.length>>>0;if(0===r)return[];for(var n=Array.prototype.splice,a=[],i=[],o=0;o<r;++o)e.call(t,this[o],o,this)&&(i.push(this[o]),a.push(o));for(var s=a.length-1;s>=0;--s)n.call(this,a[s],1);return i}}),Object.defineProperty(Array.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.first called on null or undefined");if(0!=this.length>>>0)return this[0]}}),Object.defineProperty(Array.prototype,"includesAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAll called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAll.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var e=0,t=arguments.length;e<t;++e)if(!Array.prototype.some.call(this,function(e){return e===this.val||e!==e&&this.val!==this.val},{val:arguments[e]}))return!1;return!0}}),Object.defineProperty(Array.prototype,"includesAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAny called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAny.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var e=0,t=arguments.length;e<t;++e)if(Array.prototype.some.call(this,function(e){return e===this.val||e!==e&&this.val!==this.val},{val:arguments[e]}))return!0;return!1}}),Object.defineProperty(Array.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.last called on null or undefined");var e=this.length>>>0;if(0!==e)return this[e-1]}}),Object.defineProperty(Array.prototype,"pluck",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pluck called on null or undefined");var e=this.length>>>0;if(0!==e){var t=0===arguments.length?_random(0,e-1):_randomIndex(e,[].concat(Array.prototype.slice.call(arguments)));return Array.prototype.splice.call(this,t,1)[0]}}}),Object.defineProperty(Array.prototype,"pluckMany",{configurable:!0,writable:!0,value:function(e){if(null==this)throw new TypeError("Array.prototype.pluckMany called on null or undefined");var t=this.length>>>0;if(0===t)return[];var r=Math.trunc(e);if(!Number.isInteger(r))throw new Error("Array.prototype.pluckMany want parameter must be an integer");if(r<1)return[];r>t&&(r=t);var n=Array.prototype.splice,a=[],i=t-1;do{a.push(n.call(this,_random(0,i--),1)[0])}while(a.length<r);return a}}),Object.defineProperty(Array.prototype,"pushUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pushUnique called on null or undefined");var e=arguments.length;if(0===e)return this.length>>>0;for(var t=Array.prototype.indexOf,r=Array.prototype.push,n=0;n<e;++n){var a=arguments[n];-1===t.call(this,a)&&r.call(this,a)}return this.length>>>0}}),Object.defineProperty(Array.prototype,"random",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.random called on null or undefined");var e=this.length>>>0;if(0!==e){return this[0===arguments.length?_random(0,e-1):_randomIndex(e,[].concat(Array.prototype.slice.call(arguments)))]}}}),Object.defineProperty(Array.prototype,"randomMany",{configurable:!0,writable:!0,value:function(e){if(null==this)throw new TypeError("Array.prototype.randomMany called on null or undefined");var t=this.length>>>0;if(0===t)return[];var r=Math.trunc(e);if(!Number.isInteger(r))throw new Error("Array.prototype.randomMany want parameter must be an integer");if(r<1)return[];r>t&&(r=t);var n=new Map,a=[],i=t-1;do{var o=void 0;do{o=_random(0,i)}while(n.has(o));n.set(o,!0),a.push(this[o])}while(a.length<r);return a}}),Object.defineProperty(Array.prototype,"shuffle",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.shuffle called on null or undefined");var e=this.length>>>0;if(0===e)return this;for(var t=e-1;t>0;--t){var r=Math.floor(_nativeMathRandom()*(t+1));if(t!==r){var n=this[t];this[t]=this[r],this[r]=n}}return this}}),Object.defineProperty(Array.prototype,"unshiftUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.unshiftUnique called on null or undefined");var e=arguments.length;if(0===e)return this.length>>>0;for(var t=Array.prototype.indexOf,r=Array.prototype.unshift,n=0;n<e;++n){var a=arguments[n];-1===t.call(this,a)&&r.call(this,a)}return this.length>>>0}}),Object.defineProperty(Function.prototype,"partial",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Function.prototype.partial called on null or undefined");var e=Array.prototype.slice,t=this,r=e.call(arguments,0);return function(){for(var n=[],a=0,i=0;i<r.length;++i)n.push(r[i]===undefined?arguments[a++]:r[i]);return t.apply(this,n.concat(e.call(arguments,a)))}}}),Object.defineProperty(Math,"clamp",{configurable:!0,writable:!0,value:function(e,t,r){var n=Number(e);return Number.isNaN(n)?NaN:n.clamp(t,r)}}),Object.defineProperty(Math,"easeInOut",{configurable:!0,writable:!0,value:function(e){return 1-(Math.cos(Number(e)*Math.PI)+1)/2}}),Object.defineProperty(Number.prototype,"clamp",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Number.prototype.clamp called on null or undefined");if(2!==arguments.length)throw new Error("Number.prototype.clamp called with an incorrect number of parameters");var e=Number(arguments[0]),t=Number(arguments[1]);if(e>t){var r=[t,e];e=r[0],t=r[1]}return Math.min(Math.max(this,e),t)}}),RegExp.escape||function(){var e=/[\\^$*+?.()|[\]{}]/g,t=new RegExp(e.source);Object.defineProperty(RegExp,"escape",{configurable:!0,writable:!0,value:function(r){var n=String(r);return n&&t.test(n)?n.replace(e,"\\$&"):n}})}(),function(){var e=/{(\d+)(?:,([+-]?\d+))?}/g,t=new RegExp(e.source);Object.defineProperty(String,"format",{configurable:!0,writable:!0,value:function(r){function n(e,t,r){if(!t)return e;var n=Math.abs(t)-e.length;if(n<1)return e;var a=String(r).repeat(n);return t<0?e+a:a+e}if(arguments.length<2)return 0===arguments.length?"":r;var a=2===arguments.length&&Array.isArray(arguments[1])?[].concat(_toConsumableArray(arguments[1])):Array.prototype.slice.call(arguments,1);return 0===a.length?r:t.test(r)?(e.lastIndex=0,r.replace(e,function(e,t,r){var i=a[t];if(null==i)return"";for(;"function"==typeof i;)i=i();switch(void 0===i?"undefined":_typeof(i)){case"string":break;case"object":i=JSON.stringify(i);break;default:i=String(i)}return n(i,r?Number.parseInt(r,10):0," ")})):r}})}(),Object.defineProperty(String.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.contains called on null or undefined");return-1!==String.prototype.indexOf.apply(this,arguments)}}),Object.defineProperty(String.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.count called on null or undefined");var e=String(arguments[0]||"");if(""===e)return 0;for(var t=String.prototype.indexOf,r=e.length,n=Number(arguments[1])||0,a=0;-1!==(n=t.call(this,e,n));)++a,n+=r;return a}}),Object.defineProperty(String.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.first called on null or undefined");return _getCodePointStartAndEnd(String(this),0).char}}),Object.defineProperty(String.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.last called on null or undefined");var e=String(this);return _getCodePointStartAndEnd(e,e.length-1).char}}),Object.defineProperty(String.prototype,"splice",{configurable:!0,writable:!0,value:function(e,t,r){if(null==this)throw new TypeError("String.prototype.splice called on null or undefined");var n=this.length>>>0;if(0===n)return"";var a=Number(e);Number.isSafeInteger(a)?a<0&&(a+=n)<0&&(a=0):a=0,a>n&&(a=n);var i=Number(t);(!Number.isSafeInteger(i)||i<0)&&(i=0);var o=this.slice(0,a);return void 0!==r&&(o+=r),a+i<n&&(o+=this.slice(a+i)),o}}),Object.defineProperty(String.prototype,"splitOrEmpty",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.splitOrEmpty called on null or undefined");return""===String(this)?[]:String.prototype.split.apply(this,arguments)}}),Object.defineProperty(String.prototype,"toLocaleUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toLocaleUpperFirst called on null or undefined");var e=String(this),t=_getCodePointStartAndEnd(e,0),r=t.char,n=t.end;return-1===n?"":r.toLocaleUpperCase()+e.slice(n+1)}}),Object.defineProperty(String.prototype,"toUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toUpperFirst called on null or undefined");var e=String(this),t=_getCodePointStartAndEnd(e,0),r=t.char,n=t.end;return-1===n?"":r.toUpperCase()+e.slice(n+1)}}),Object.defineProperty(Date.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:date)",this.toISOString()]}}),Object.defineProperty(Function.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)","("+this.toString()+")"]}}),Object.defineProperty(Map.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:map)",[].concat(_toConsumableArray(this))]}}),Object.defineProperty(RegExp.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)",this.toString()]}}),Object.defineProperty(Set.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:set)",[].concat(_toConsumableArray(this))]}}),Object.defineProperty(JSON,"reviveWrapper",{configurable:!0,writable:!0,value:function(e,t){if("string"!=typeof e)throw new TypeError("JSON.reviveWrapper code parameter must be a string");return["(revive:eval)",[e,t]]}}),Object.defineProperty(JSON,"_real_parse",{value:JSON.parse}),Object.defineProperty(JSON,"parse",{configurable:!0,writable:!0,value:function value(text,reviver){return JSON._real_parse(text,function(key,val){var value=val;if(Array.isArray(value)&&2===value.length)switch(value[0]){case"(revive:set)":value=new Set(value[1]);break;case"(revive:map)":value=new Map(value[1]);break;case"(revive:date)":value=new Date(value[1]);break;case"(revive:eval)":try{if(Array.isArray(value[1])){var $ReviveData$=value[1][1];value=eval(value[1][0])}else value=eval(value[1])}catch(e){}}else if("string"==typeof value&&"@@revive@@"===value.slice(0,10))try{value=eval(value.slice(10))}catch(e){}if("function"==typeof reviver)try{value=reviver(key,value)}catch(e){}return value})}}),Object.defineProperty(Array.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.contains called on null or undefined");return Array.prototype.includes.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAll called on null or undefined");return Array.prototype.includesAll.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAny called on null or undefined");return Array.prototype.includesAny.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"flatten",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatten called on null or undefined");return Array.prototype.flat.call(this,1/0)}}),Object.defineProperty(String.prototype,"readBracketedList",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.readBracketedList called on null or undefined");for(var e=new RegExp("(?:\\[\\[((?:\\s|\\S)*?)\\]\\])|([^\"'\\s]\\S*)","gm"),t=[],r=void 0;null!==(r=e.exec(this));)r[1]?t.push(r[1]):r[2]&&t.push(r[2]);return t}})}();var Browser=function(){var e=navigator.userAgent.toLowerCase(),t=e.includes("windows phone"),r=Object.freeze({Android:!t&&e.includes("android"),BlackBerry:/blackberry|bb10/.test(e),iOS:!t&&/ip(?:hone|ad|od)/.test(e),Opera:!t&&("object"===_typeof(window.operamini)||e.includes("opera mini")),Windows:t||/iemobile|wpdesktop/.test(e),any:function(){return r.Android||r.BlackBerry||r.iOS||r.Opera||r.Windows}}),n=!r.Windows&&!/khtml|trident|edge/.test(e)&&e.includes("gecko"),a=!e.includes("opera")&&/msie|trident/.test(e),i=a?function(){var t=/(?:msie\s+|rv:)(\d+\.\d)/.exec(e);return t?Number(t[1]):0}():null,o=e.includes("opera")||e.includes(" opr/"),s=o?function(){var t=new RegExp((/khtml|chrome/.test(e)?"opr":"version")+"\\/(\\d+\\.\\d+)"),r=t.exec(e);return r?Number(r[1]):0}():null,u=e.includes("vivaldi");return Object.freeze({userAgent:e,isMobile:r,isGecko:n,isIE:a,ieVersion:i,isOpera:o,operaVersion:s,isVivaldi:u})}(),Has=function(){var e=function(){try{return"function"==typeof document.createElement("audio").canPlayType}catch(e){}return!1}(),t=e&&function(){try{var e=document.createElement("audio").play();return e.catch(function(){}),e instanceof Promise}catch(e){}return!1}(),r=function(){try{return"Blob"in window&&"File"in window&&"FileList"in window&&"FileReader"in window&&!Browser.isMobile.any()&&(!Browser.isOpera||Browser.operaVersion>=15)}catch(e){}return!1}(),n=function(){try{return"geolocation"in navigator&&"function"==typeof navigator.geolocation.getCurrentPosition&&"function"==typeof navigator.geolocation.watchPosition}catch(e){}return!1}(),a=function(){try{return"MutationObserver"in window&&"function"==typeof window.MutationObserver}catch(e){}return!1}(),i=function(){try{return"performance"in window&&"function"==typeof window.performance.now}catch(e){}return!1}(),o=function(){try{return"ontouchstart"in window||!!window.DocumentTouch&&document instanceof window.DocumentTouch||!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints}catch(e){}return!1}(),s=function(){try{for(var e=new Map([["transition","transitionend"],["MSTransition","msTransitionEnd"],["WebkitTransition","webkitTransitionEnd"],["MozTransition","transitionend"]]),t=[].concat(_toConsumableArray(e.keys())),r=document.createElement("div"),n=0;n<t.length;++n)if(r.style[t[n]]!==undefined)return e.get(t[n])}catch(e){}return!1}();return Object.freeze({audio:e,audioPromise:t,fileAPI:r,geolocation:n,mutationObserver:a,performance:i,touch:o,transitionEndEvent:s})}(),Visibility=function(){function e(){return Boolean(r&&document[r.hiddenProperty])}function t(){return r&&document[r.stateProperty]||"visible"}var r=function(){try{return Object.freeze([{hiddenProperty:"hidden",stateProperty:"visibilityState",changeEvent:"visibilitychange"},{hiddenProperty:"webkitHidden",stateProperty:"webkitVisibilityState",changeEvent:"webkitvisibilitychange"},{hiddenProperty:"mozHidden",stateProperty:"mozVisibilityState",changeEvent:"mozvisibilitychange"},{hiddenProperty:"msHidden",stateProperty:"msVisibilityState",changeEvent:"msvisibilitychange"}].find(function(e){return e.hiddenProperty in document}))}catch(e){}return null}();return Object.freeze(Object.defineProperties({},{isHidden:{value:e},state:{value:t},hiddenProperty:{value:r.hiddenProperty},stateProperty:{value:r.stateProperty},changeEvent:{value:r.changeEvent}}))}(),_ref3=function(){function e(t){if("object"!==(void 0===t?"undefined":_typeof(t))||null===t)return t;if(t instanceof String)return String(t);if(t instanceof Number)return Number(t);if(t instanceof Boolean)return Boolean(t);if("function"==typeof t.clone)return t.clone(!0);if(t.nodeType&&"function"==typeof t.cloneNode)return t.cloneNode(!0);var r=void 0;return t instanceof Array?r=new Array(t.length):t instanceof Date?r=new Date(t.getTime()):t instanceof Map?(r=new Map,t.forEach(function(t,n){return r.set(n,e(t))})):t instanceof RegExp?r=new RegExp(t):t instanceof Set?(r=new Set,t.forEach(function(t){return r.add(e(t))})):r=Object.create(Object.getPrototypeOf(t)),Object.keys(t).forEach(function(n){return r[n]=e(t[n])}),r}function t(e){for(var t=document.createDocumentFragment(),r=document.createElement("p"),n=void 0;null!==(n=e.firstChild);){if(n.nodeType===Node.ELEMENT_NODE){switch(n.nodeName.toUpperCase()){case"BR":if(null!==n.nextSibling&&n.nextSibling.nodeType===Node.ELEMENT_NODE&&"BR"===n.nextSibling.nodeName.toUpperCase()){e.removeChild(n.nextSibling),e.removeChild(n),t.appendChild(r),r=document.createElement("p");continue}if(!r.hasChildNodes()){e.removeChild(n);continue}break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":r.hasChildNodes()&&(t.appendChild(r),r=document.createElement("p")),t.appendChild(n);continue}}r.appendChild(n)}r.hasChildNodes()&&t.appendChild(r),e.appendChild(t)}function r(){try{return document.activeElement||null}catch(e){return null}}function n(e,t,r){var n="object"===(void 0===e?"undefined":_typeof(e))?e:document.getElementById(e);if(null==n)return null;var a=Array.isArray(t)?t:[t];jQuery(n).empty();for(var i=0,o=a.length;i<o;++i)if(Story.has(a[i]))return new Wikifier(n,Story.get(a[i]).processText().trim()),n;if(null!=r){var s=String(r).trim();""!==s&&new Wikifier(n,s)}return n}function a(e,t,r){var n=jQuery(document.createElement("div")),a=jQuery(document.createElement("button")),i=jQuery(document.createElement("pre")),o=L10n.get("errorTitle")+": "+(t||"unknown error");return a.addClass("error-toggle").ariaClick({label:L10n.get("errorToggle")},function(){a.hasClass("enabled")?(a.removeClass("enabled"),i.attr({"aria-hidden":!0,hidden:"hidden"})):(a.addClass("enabled"),i.removeAttr("aria-hidden hidden"))}).appendTo(n),jQuery(document.createElement("span")).addClass("error").text(o).appendTo(n),jQuery(document.createElement("code")).text(r).appendTo(i),i.addClass("error-source").attr({"aria-hidden":!0,hidden:"hidden"}).appendTo(n),n.addClass("error-view").appendTo(e),console.warn(o+"\n\t"+r.replace(/\n/g,"\n\t")),!1}function i(e,t){var r=i;switch(void 0===e?"undefined":_typeof(e)){case"number":if(Number.isNaN(e))return t;break;case"object":if(null===e)return t;if(Array.isArray(e))return e.map(function(e){return r(e,t)}).join(", ");if(e instanceof Set)return[].concat(_toConsumableArray(e)).map(function(e){return r(e,t)}).join(", ");if(e instanceof Map){return"{ "+[].concat(_toConsumableArray(e)).map(function(e){var n=_slicedToArray(e,2),a=n[0],i=n[1];return r(a,t)+" → "+r(i,t)}).join(", ")+" }"}return e instanceof Date?e.toLocaleString():"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e);case"function":case"undefined":return t}return String(e)}return Object.freeze(Object.defineProperties({},{clone:{value:e},convertBreaks:{value:t},safeActiveElement:{value:r},setPageElement:{value:n},throwError:{value:a},toStringOrDefault:{value:i}}))
}(),clone=_ref3.clone,convertBreaks=_ref3.convertBreaks,safeActiveElement=_ref3.safeActiveElement,setPageElement=_ref3.setPageElement,throwError=_ref3.throwError,toStringOrDefault=_ref3.toStringOrDefault;!function(){function e(e){13!==e.which&&32!==e.which||(e.preventDefault(),jQuery(safeActiveElement()||this).trigger("click"))}function t(e){return function(){var t=jQuery(this);t.ariaIsDisabled()||(t.is("[aria-pressed]")&&t.attr("aria-pressed","true"===t.attr("aria-pressed")?"false":"true"),e.apply(this,arguments))}}function r(e){return t(function(){jQuery(this).off(".aria-clickable").removeAttr("tabindex aria-controls aria-pressed").not("a,button").removeAttr("role").end().filter("button").prop("disabled",!0),e.apply(this,arguments)})}jQuery.fn.extend({ariaClick:function(n,a){if(0===this.length||0===arguments.length)return this;var i=n,o=a;return null==o&&(o=i,i=undefined),i=jQuery.extend({namespace:undefined,one:!1,selector:undefined,data:undefined,controls:undefined,pressed:undefined,label:undefined},i),"string"!=typeof i.namespace?i.namespace="":"."!==i.namespace[0]&&(i.namespace="."+i.namespace),"boolean"==typeof i.pressed&&(i.pressed=i.pressed?"true":"false"),this.filter("button").prop("type","button"),this.not("a,button").attr("role","button"),this.attr("tabindex",0),null!=i.controls&&this.attr("aria-controls",i.controls),null!=i.pressed&&this.attr("aria-pressed",i.pressed),null!=i.label&&this.attr({"aria-label":i.label,title:i.label}),this.not("button").on("keypress.aria-clickable"+i.namespace,i.selector,e),this.on("click.aria-clickable"+i.namespace,i.selector,i.data,i.one?r(o):t(o)),this},ariaDisabled:function(e){if(0===this.length||0===arguments.length)return this;var t=this.not("button,fieldset,input,menuitem,optgroup,option,select,textarea"),r=this.filter("button,fieldset,input,menuitem,optgroup,option,select,textarea");return e?(t.each(function(){this.setAttribute("disabled",""),this.setAttribute("aria-disabled","")}),r.each(function(){this.disabled=!0,this.setAttribute("aria-disabled","")})):(t.each(function(){this.removeAttribute("disabled"),this.removeAttribute("aria-disabled")}),r.each(function(){this.disabled=!1,this.removeAttribute("aria-disabled")})),this},ariaIsDisabled:function(){return this.is("[disabled]")}})}(),function(){jQuery.extend({wikiWithOptions:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(0!==r.length){var a=document.createDocumentFragment();r.forEach(function(t){return new Wikifier(a,t,e)});var i=[].concat(_toConsumableArray(a.querySelectorAll(".error"))).map(function(e){return e.textContent.replace(errorPrologRegExp,"")});if(i.length>0)throw new Error(i.join("; "))}},wiki:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.wikiWithOptions.apply(this,[undefined].concat(t))}}),jQuery.fn.extend({wikiWithOptions:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(0===this.length||0===r.length)return this;var a=document.createDocumentFragment();return r.forEach(function(t){return new Wikifier(a,t,e)}),this.append(a),this},wiki:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.wikiWithOptions.apply(this,[undefined].concat(t))}})}();var Util=function(){function e(e){if(e instanceof Array)return Object.freeze(e.reduce(function(e,t,r){return e[t]=r,e},Object.create(null)));if(e instanceof Object)return Object.freeze(Object.assign(Object.create(null),e));throw new TypeError("Util.toEnum obj parameter must be an array or generic object")}function t(e){return Object.prototype.toString.call(e).slice(8,-1)}function r(e){if(null===e)return"null";var t=void 0===e?"undefined":_typeof(e);return"object"===t?Object.prototype.toString.call(e).slice(8,-1):t}function n(e){var t=void 0;switch(void 0===e?"undefined":_typeof(e)){case"number":t=e;break;case"string":t=Number(e);break;default:return!1}return!Number.isNaN(t)&&Number.isFinite(t)}function a(e){return"boolean"==typeof e||"string"==typeof e&&("true"===e||"false"===e)}function i(e,t){return e===t||e!==e&&t!==t}function o(e){var t=String(e).trim(),r=t.replace(/[^\w\s\u2013\u2014-]+/g,"").replace(/[_\s\u2013\u2014-]+/g,"-").toLocaleLowerCase();return v.test(r)?t.replace(m,"").replace(/[_\s\u2013\u2014-]+/g,"-"):r}function s(e){if(null==e)return"";var t=String(e);return t&&b.test(t)?t.replace(y,function(e){return w[e]}):t}function u(e){if(null==e)return"";var t=String(e);return t&&S.test(t)?t.replace(k,function(e){return E[e.toLowerCase()]}):t}function l(e,t){var r=String(e),n=Math.trunc(t),a=r.charCodeAt(n);if(Number.isNaN(a))return{char:"",start:-1,end:-1};var i={char:r.charAt(n),start:n,end:n};if(a<55296||a>57343)return i;if(a>=55296&&a<=56319){var o=n+1;if(o>=r.length)return i;var s=r.charCodeAt(o);return s<56320||s>57343?i:(i.char=i.char+r.charAt(o),i.end=o,i)}if(0===n)return i;var u=n-1,l=r.charCodeAt(u);return l<55296||l>56319?i:(i.char=r.charAt(u)+i.char,i.start=u,i)}function c(){return j.now()}function d(e){var t=x.exec(String(e));if(null===t)throw new SyntaxError('invalid time value syntax: "'+e+'"');var r=Number(t[1]);if(1===t[2].length&&(r*=1e3),Number.isNaN(r)||!Number.isFinite(r))throw new RangeError('invalid time value: "'+e+'"');return r}function f(e){if("number"!=typeof e||Number.isNaN(e)||!Number.isFinite(e)){var r=void 0;switch(void 0===e?"undefined":_typeof(e)){case"string":r='"'+e+'"';break;case"number":r=String(e);break;default:r=t(e)}throw new Error("invalid milliseconds: "+r)}return e+"ms"}function p(e){if(!e.includes("-"))switch(e){case"bgcolor":return"backgroundColor";case"float":return"cssFloat";default:return e}return("-ms-"===e.slice(0,4)?e.slice(1):e).split("-").map(function(e,t){return 0===t?e:e.toUpperFirst()}).join("")}function h(e){var t=document.createElement("a"),r=Object.create(null);t.href=e,t.search&&t.search.replace(/^\?/,"").splitOrEmpty(/(?:&(?:amp;)?|;)/).forEach(function(e){var t=e.split("="),n=_slicedToArray(t,2),a=n[0],i=n[1];r[a]=i});var n=t.host&&"/"!==t.pathname[0]?"/"+t.pathname:t.pathname;return{href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:t.port,path:""+n+t.search,pathname:n,query:t.search,search:t.search,queries:r,searches:r,hash:t.hash}}function g(e,t,r){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)throw new Error("Util.newExceptionFrom original parameter must be an object");if("function"!=typeof t)throw new Error("Util.newExceptionFrom exceptionType parameter must be an error type constructor");var n=new t(e.message);void 0!==e.name&&(n.name=e.name),void 0!==e.code&&(n.code=e.code),void 0!==e.columnNumber&&(n.columnNumber=e.columnNumber),void 0!==e.description&&(n.description=e.description),void 0!==e.fileName&&(n.fileName=e.fileName),void 0!==e.lineNumber&&(n.lineNumber=e.lineNumber),void 0!==e.number&&(n.number=e.number),void 0!==e.stack&&(n.stack=e.stack);var a=void 0===r?"undefined":_typeof(r);if("undefined"!==a)if("object"===a&&null!==r)Object.assign(n,r);else{if("string"!==a)throw new Error("Util.newExceptionFrom override parameter must be an object or string");n.message=r}return n}var m=/[\x00-\x1f"#$%&'*+,\/:;<=>?\\^`|\x7f-\x9f]+/g,v=/^-*$/,y=/[&<>"'`]/g,b=new RegExp(y.source),w=Object.freeze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"}),k=/&(?:amp|#38|#x26|lt|#60|#x3c|gt|#62|#x3e|quot|#34|#x22|apos|#39|#x27|#96|#x60);/gi,S=new RegExp(k.source,"i"),E=Object.freeze({"&amp;":"&","&#38;":"&","&#x26;":"&","&lt;":"<","&#60;":"<","&#x3c;":"<","&gt;":">","&#62;":">","&#x3e;":">","&quot;":'"',"&#34;":'"',"&#x22;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'","&#96;":"`","&#x60;":"`"}),j=Has.performance?performance:Date,x=/^([+-]?(?:\d*\.)?\d+)([Mm]?[Ss])$/;return Object.freeze(Object.defineProperties({},{toEnum:{value:e},toStringTag:{value:t},getType:{value:r},isNumeric:{value:n},isBoolean:{value:a},sameValueZero:{value:i},slugify:{value:o},escape:{value:s},unescape:{value:u},charAndPosAt:{value:l},fromCssTime:{value:d},toCssTime:{value:f},fromCssProperty:{value:p},parseUrl:{value:h},newExceptionFrom:{value:g},now:{value:c},random:{value:Math.random},entityEncode:{value:s},entityDecode:{value:u},evalExpression:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),SimpleStore=function(){function e(e,n){if(r)return r.create(e,n);for(var a=0;a<t.length;++a)if(t[a].init(e,n))return r=t[a],r.create(e,n);throw new Error("no valid storage adapters found")}var t=[],r=null;return Object.freeze(Object.defineProperties({},{adapters:{value:t},create:{value:e}}))}();SimpleStore.adapters.push(function(){function e(){function e(e){try{var t=window[e],r="_sc_"+String(Date.now());t.setItem(r,r);var n=t.getItem(r)===r;return t.removeItem(r),n}catch(e){}return!1}return r=e("localStorage")&&e("sessionStorage")}function t(e,t){if(!r)throw new Error("adapter not initialized");return new n(e,t)}var r=!1,n=function(){function e(t,r){_classCallCheck(this,e);var n=t+".",a=null,i=null;r?(a=window.localStorage,i="localStorage"):(a=window.sessionStorage,i="sessionStorage"),Object.defineProperties(this,{_engine:{value:a},_prefix:{value:n},_prefixRe:{value:new RegExp("^"+RegExp.escape(n))},name:{value:i},id:{value:t},persistent:{value:!!r}})}return _createClass(e,[{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){for(var e=[],t=0;t<this._engine.length;++t){var r=this._engine.key(t);this._prefixRe.test(r)&&e.push(r.replace(this._prefixRe,""))}return e}},{key:"has",value:function(e){return!("string"!=typeof e||!e)&&this._engine.hasOwnProperty(this._prefix+e)}},{key:"get",value:function(t){if("string"!=typeof t||!t)return null;var r=this._engine.getItem(this._prefix+t);return null==r?null:e._deserialize(r)}},{key:"set",value:function(t,r){if("string"!=typeof t||!t)return!1;try{this._engine.setItem(this._prefix+t,e._serialize(r))}catch(e){if(/quota.?(?:exceeded|reached)/i.test(e.name+e.message))throw Util.newExceptionFrom(e,Error,this.name+" quota exceeded");throw e}return!0}},{key:"delete",value:function(e){return!("string"!=typeof e||!e)&&(this._engine.removeItem(this._prefix+e),!0)}},{key:"clear",value:function(){for(var e=this.keys(),t=0,r=e.length;t<r;++t)this.delete(e[t]);return!0}},{key:"length",get:function(){return this.keys().length}}],[{key:"_serialize",value:function(e){return LZString.compressToUTF16(JSON.stringify(e))}},{key:"_deserialize",value:function(e){return JSON.parse(LZString.decompressFromUTF16(e))}}]),e}();return Object.freeze(Object.defineProperties({},{init:{value:e},create:{value:t}}))}()),SimpleStore.adapters.push(function(){function e(e){try{var t="_sc_"+String(Date.now());o._setCookie(t,o._serialize(t),undefined),i=o._deserialize(o._getCookie(t))===t,o._setCookie(t,undefined,a)}catch(e){i=!1}return i&&r(e),i}function t(e,t){if(!i)throw new Error("adapter not initialized");return new o(e,t)}function r(e){if(""!==document.cookie)for(var t=e+".",r=new RegExp("^"+RegExp.escape(t)),i=e+"!.",s=e+"*.",u=/\.(?:state|rcWarn)$/,l=document.cookie.split(/;\s*/),c=0;c<l.length;++c){var d=l[c].split("="),f=decodeURIComponent(d[0]);if(r.test(f)){var p=decodeURIComponent(d[1]);""!==p&&function(){var e=!u.test(f);o._setCookie(f,undefined,a),o._setCookie(f.replace(r,function(){return e?i:s}),p,e?n:undefined)}()}}}var n="Tue, 19 Jan 2038 03:14:07 GMT",a="Thu, 01 Jan 1970 00:00:00 GMT",i=!1,o=function(){function e(t,r){_classCallCheck(this,e);var n=t+(r?"!":"*")+".";Object.defineProperties(this,{_prefix:{value:n},_prefixRe:{value:new RegExp("^"+RegExp.escape(n))},name:{value:"cookie"},id:{value:t},persistent:{value:!!r}})}return _createClass(e,[{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){if(""===document.cookie)return[];for(var e=document.cookie.split(/;\s*/),t=[],r=0;r<e.length;++r){var n=e[r].split("="),a=decodeURIComponent(n[0]);if(this._prefixRe.test(a)){""!==decodeURIComponent(n[1])&&t.push(a.replace(this._prefixRe,""))}}return t}},{key:"has",value:function(t){return!("string"!=typeof t||!t)&&null!==e._getCookie(this._prefix+t)}},{key:"get",value:function(t){if("string"!=typeof t||!t)return null;var r=e._getCookie(this._prefix+t);return null===r?null:e._deserialize(r)}},{key:"set",value:function(t,r){if("string"!=typeof t||!t)return!1;try{if(e._setCookie(this._prefix+t,e._serialize(r),this.persistent?n:undefined),!this.has(t))throw new Error("unknown validation error during set")}catch(e){throw Util.newExceptionFrom(e,Error,"cookie error: "+e.message)}return!0}},{key:"delete",value:function(t){if("string"!=typeof t||!t||!this.has(t))return!1;try{if(e._setCookie(this._prefix+t,undefined,a),this.has(t))throw new Error("unknown validation error during delete")}catch(e){throw Util.newExceptionFrom(e,Error,"cookie error: "+e.message)}return!0}},{key:"clear",value:function(){for(var e=this.keys(),t=0,r=e.length;t<r;++t)this.delete(e[t]);return!0}},{key:"length",get:function(){return this.keys().length}}],[{key:"_getCookie",value:function(e){if(!e||""===document.cookie)return null;for(var t=document.cookie.split(/;\s*/),r=0;r<t.length;++r){var n=t[r].split("=");if(e===decodeURIComponent(n[0])){return decodeURIComponent(n[1])||null}}return null}},{key:"_setCookie",value:function(e,t,r){if(e){var n=encodeURIComponent(e)+"=";null!=t&&(n+=encodeURIComponent(t)),null!=r&&(n+="; expires="+r),n+="; path=/",document.cookie=n}}},{key:"_serialize",value:function(e){return LZString.compressToBase64(JSON.stringify(e))}},{key:"_deserialize",value:function(e){return JSON.parse(LZString.decompressFromBase64(e))}}]),e}();return Object.freeze(Object.defineProperties({},{init:{value:e},create:{value:t}}))}());var DebugView=function(){return function(){function e(t,r,n,a){_classCallCheck(this,e),Object.defineProperties(this,{parent:{value:t},view:{value:document.createElement("span")},break:{value:document.createElement("wbr")}}),jQuery(this.view).attr({title:a,"aria-label":a,"data-type":null!=r?r:"","data-name":null!=n?n:""}).addClass("debug"),jQuery(this.break).addClass("debug hidden"),this.parent.appendChild(this.view),this.parent.appendChild(this.break)}return _createClass(e,[{key:"append",value:function(e){return jQuery(this.view).append(e),this}},{key:"modes",value:function(e){if(null==e){var t={};return this.view.className.splitOrEmpty(/\s+/).forEach(function(e){"debug"!==e&&(t[e]=!0)}),t}if("object"===(void 0===e?"undefined":_typeof(e)))return Object.keys(e).forEach(function(t){this[e[t]?"addClass":"removeClass"](t)},jQuery(this.view)),this;throw new Error("DebugView.prototype.modes options parameter must be an object or null/undefined")}},{key:"remove",value:function(){var e=jQuery(this.view);this.view.hasChildNodes()&&e.contents().appendTo(this.parent),e.remove(),jQuery(this.break).remove()}},{key:"output",get:function(){return this.view}},{key:"type",get:function(){return this.view.getAttribute("data-type")},set:function(e){this.view.setAttribute("data-type",null!=e?e:"")}},{key:"name",get:function(){return this.view.getAttribute("data-name")},set:function(e){this.view.setAttribute("data-name",null!=e?e:"")}},{key:"title",get:function(){return this.view.title},set:function(e){this.view.title=e}}],[{key:"isEnabled",value:function(){return"enabled"===jQuery(document.documentElement).attr("data-debug-view")}},{key:"enable",value:function(){jQuery(document.documentElement).attr("data-debug-view","enabled"),jQuery.event.trigger(":debugviewupdate")}},{key:"disable",value:function(){jQuery(document.documentElement).removeAttr("data-debug-view"),jQuery.event.trigger(":debugviewupdate")}},{key:"toggle",value:function(){"enabled"===jQuery(document.documentElement).attr("data-debug-view")?e.disable():e.enable()}}]),e}()}(),PRNGWrapper=function(){return function(){function e(t,r){_classCallCheck(this,e),Object.defineProperties(this,new Math.seedrandom(t,r,function(e,t){return{_prng:{value:e},seed:{writable:!0,value:t},pull:{writable:!0,value:0},random:{value:function(){return++this.pull,this._prng()}}}}))}return _createClass(e,null,[{key:"marshal",value:function(e){if(!e||!e.hasOwnProperty("seed")||!e.hasOwnProperty("pull"))throw new Error("PRNG is missing required data");return{seed:e.seed,pull:e.pull}}},{key:"unmarshal",value:function(t){if(!t||!t.hasOwnProperty("seed")||!t.hasOwnProperty("pull"))throw new Error("PRNG object is missing required data");for(var r=new e(t.seed,!1),n=t.pull;n>0;--n)r.random();return r}}]),e}()}(),StyleWrapper=function(){var e=new RegExp(Patterns.cssImage,"g"),t=new RegExp(Patterns.cssImage);return function(){function r(e){if(_classCallCheck(this,r),null==e)throw new TypeError("StyleWrapper style parameter must be an HTMLStyleElement object");Object.defineProperties(this,{style:{value:e}})}return _createClass(r,[{key:"isEmpty",value:function(){return 0===this.style.cssRules.length}},{key:"set",value:function(e){this.clear(),this.add(e)}},{key:"add",value:function(r){var n=r;t.test(n)&&(e.lastIndex=0,n=n.replace(e,function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup({source:e,matchStart:0});if(t.hasOwnProperty("error")||t.pos<e.length)return e;var r=t.source;if("data:"!==r.slice(0,5)&&Story.has(r)){var n=Story.get(r);n.tags.includes("Twine.image")&&(r=n.text.trim())}return'url("'+r.replace(/"/g,"%22")+'")'})),this.style.styleSheet?this.style.styleSheet.cssText+=n:this.style.appendChild(document.createTextNode(n))}},{key:"clear",value:function(){this.style.styleSheet?this.style.styleSheet.cssText="":jQuery(this.style).empty()}}]),r}()}(),Diff=function(){function e(t,n){for(var a=Object.prototype.toString,i=t instanceof Array,o=[].concat(Object.keys(t),Object.keys(n)).sort().filter(function(e,t,r){return 0===t||r[t-1]!==e}),s={},u=void 0,l=function(e){return e===u},c=0,d=o.length;c<d;++c){var f=o[c],p=t[f],h=n[f];if(t.hasOwnProperty(f))if(n.hasOwnProperty(f)){if(p===h)continue;if((void 0===p?"undefined":_typeof(p))===(void 0===h?"undefined":_typeof(h)))if("function"==typeof p)p.toString()!==h.toString()&&(s[f]=[r.Copy,h]);else if("object"!==(void 0===p?"undefined":_typeof(p))||null===p)s[f]=[r.Copy,h];else{var g=a.call(p),m=a.call(h);if(g===m)if(p instanceof Date)Number(p)!==Number(h)&&(s[f]=[r.Copy,clone(h)]);else if(p instanceof Map)s[f]=[r.Copy,clone(h)];else if(p instanceof RegExp)p.toString()!==h.toString()&&(s[f]=[r.Copy,clone(h)]);else if(p instanceof Set)s[f]=[r.Copy,clone(h)];else if("[object Object]"!==g)s[f]=[r.Copy,clone(h)];else{var v=e(p,h);null!==v&&(s[f]=v)}else s[f]=[r.Copy,clone(h)]}else s[f]=[r.Copy,"object"!==(void 0===h?"undefined":_typeof(h))||null===h?h:clone(h)]}else if(i&&Util.isNumeric(f)){var y=Number(f);if(!u){u="";do{u+="~"}while(o.some(l));s[u]=[r.SpliceArray,y,y]}y<s[u][1]&&(s[u][1]=y),y>s[u][2]&&(s[u][2]=y)}else s[f]=r.Delete;else s[f]=[r.Copy,"object"!==(void 0===h?"undefined":_typeof(h))||null===h?h:clone(h)]}return Object.keys(s).length>0?s:null}function t(e,n){for(var a=Object.keys(n||{}),i=clone(e),o=0,s=a.length;o<s;++o){var u=a[o],l=n[u];if(l===r.Delete)delete i[u];else if(l instanceof Array)switch(l[0]){case r.SpliceArray:i.splice(l[1],l[2]-l[1]+1);break;case r.Copy:i[u]=clone(l[1]);break;case r.CopyDate:i[u]=new Date(l[1])}else i[u]=t(i[u],l)}return i}var r=Util.toEnum({Delete:0,SpliceArray:1,Copy:2,CopyDate:3});return Object.freeze(Object.defineProperties({},{Op:{value:r},diff:{value:e},patch:{value:t}}))}(),L10n=function(){function e(){r()}function t(e,t){if(!e)return"";var r=function(e){var t=void 0;return e.some(function(e){return!!l10nStrings.hasOwnProperty(e)&&(t=e,!0)}),t}(Array.isArray(e)?e:[e]);if(!r)return"";for(var i=l10nStrings[r],o=0;a.test(i);){if(++o>50)throw new Error("L10n.get exceeded maximum replacement iterations, probable infinite loop");n.lastIndex=0,i=i.replace(n,function(e){var r=e.slice(1,-1);return t&&t.hasOwnProperty(r)?t[r]:l10nStrings.hasOwnProperty(r)?l10nStrings[r]:void 0})}return i}function r(){strings&&Object.keys(strings).length>0&&Object.keys(l10nStrings).forEach(function(e){try{var t=void 0;switch(e){case"identity":t=strings.identity;break;case"aborting":t=strings.aborting;break;case"cancel":t=strings.cancel;break;case"close":t=strings.close;break;case"ok":t=strings.ok;break;case"errorTitle":t=strings.errors.title;break;case"errorNonexistentPassage":t=strings.errors.nonexistentPassage;break;case"errorSaveMissingData":t=strings.errors.saveMissingData;break;case"errorSaveIdMismatch":t=strings.errors.saveIdMismatch;break;case"warningDegraded":t=strings.warnings.degraded;break;case"debugViewTitle":t=strings.debugView.title;break;case"debugViewToggle":t=strings.debugView.toggle;break;case"uiBarToggle":t=strings.uiBar.toggle;break;case"uiBarBackward":t=strings.uiBar.backward;break;case"uiBarForward":t=strings.uiBar.forward;break;case"uiBarJumpto":t=strings.uiBar.jumpto;break;case"jumptoTitle":t=strings.jumpto.title;break;case"jumptoTurn":t=strings.jumpto.turn;break;case"jumptoUnavailable":t=strings.jumpto.unavailable;break;case"savesTitle":t=strings.saves.title;break;case"savesDisallowed":t=strings.saves.disallowed;break;case"savesIncapable":t=strings.saves.incapable;break;case"savesLabelAuto":t=strings.saves.labelAuto;break;case"savesLabelDelete":t=strings.saves.labelDelete;break;case"savesLabelExport":t=strings.saves.labelExport;break;case"savesLabelImport":t=strings.saves.labelImport;break;case"savesLabelLoad":t=strings.saves.labelLoad;break;case"savesLabelClear":t=strings.saves.labelClear;break;case"savesLabelSave":t=strings.saves.labelSave;break;case"savesLabelSlot":t=strings.saves.labelSlot;break;case"savesUnavailable":t=strings.saves.unavailable;break;case"savesUnknownDate":t=strings.saves.unknownDate;break;case"settingsTitle":t=strings.settings.title;break;case"settingsOff":t=strings.settings.off;break;case"settingsOn":t=strings.settings.on;break;case"settingsReset":t=strings.settings.reset;break;case"restartTitle":t=strings.restart.title;break;case"restartPrompt":t=strings.restart.prompt;break;case"shareTitle":t=strings.share.title;break;case"autoloadTitle":t=strings.autoload.title;break;case"autoloadCancel":t=strings.autoload.cancel;break;case"autoloadOk":t=strings.autoload.ok;break;case"autoloadPrompt":t=strings.autoload.prompt;break;case"macroBackText":t=strings.macros.back.text;break;case"macroReturnText":t=strings.macros.return.text}t&&(l10nStrings[e]=t.replace(/%\w+%/g,function(e){return"{"+e.slice(1,-1)+"}"}))}catch(e){}})}var n=/\{\w+\}/g,a=new RegExp(n.source);return Object.freeze(Object.defineProperties({},{init:{value:e},get:{value:t}}))}(),strings={errors:{},warnings:{},debugView:{},uiBar:{},jumpto:{},saves:{},settings:{},restart:{},share:{},autoload:{},macros:{back:{},return:{}}},l10nStrings={identity:"game",aborting:"Aborting",cancel:"Cancel",close:"Close",ok:"OK",errorTitle:"Error",errorToggle:"Toggle the error view",errorNonexistentPassage:'the passage "{passage}" does not exist',errorSaveMissingData:"save is missing required data. Either the loaded file is not a save or the save has become corrupted",errorSaveIdMismatch:"save is from the wrong {identity}",_warningIntroLacking:"Your browser either lacks or has disabled",_warningOutroDegraded:", so this {identity} is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",warningNoWebStorage:"{_warningIntroLacking} the Web Storage API{_warningOutroDegraded}",warningDegraded:"{_warningIntroLacking} some of the capabilities required by this {identity}{_warningOutroDegraded}",debugBarToggle:"Toggle the debug bar",debugBarNoWatches:"— no watches set —",debugBarAddWatch:"Add watch",debugBarDeleteWatch:"Delete watch",debugBarWatchAll:"Watch all",debugBarWatchNone:"Delete all",debugBarLabelAdd:"Add",debugBarLabelWatch:"Watch",debugBarLabelTurn:"Turn",debugBarLabelViews:"Views",debugBarViewsToggle:"Toggle the debug views",debugBarWatchToggle:"Toggle the watch panel",uiBarToggle:"Toggle the UI bar",uiBarBackward:"Go backward within the {identity} history",uiBarForward:"Go forward within the {identity} history",uiBarJumpto:"Jump to a specific point within the {identity} history",jumptoTitle:"Jump To",jumptoTurn:"Turn",jumptoUnavailable:"No jump points currently available…",savesTitle:"Saves",savesDisallowed:"Saving has been disallowed on this passage.",savesIncapable:"{_warningIntroLacking} the capabilities required to support saves, so saves have been disabled for this session.",savesLabelAuto:"Autosave",savesLabelDelete:"Delete",savesLabelExport:"Save to Disk…",savesLabelImport:"Load from Disk…",savesLabelLoad:"Load",savesLabelClear:"Delete All",savesLabelSave:"Save",savesLabelSlot:"Slot",savesUnavailable:"No save slots found…",savesUnknownDate:"unknown",settingsTitle:"Settings",settingsOff:"Off",settingsOn:"On",settingsReset:"Reset to Defaults",restartTitle:"Restart",restartPrompt:"Are you sure that you want to restart? Unsaved progress will be lost.",shareTitle:"Share",autoloadTitle:"Autoload",autoloadCancel:"Go to start",autoloadOk:"Load autosave",autoloadPrompt:"An autosave exists. Load it now or go to the start?",macroBackText:"Back",macroReturnText:"Return"},Config=function(){function e(){throw new Error("Config.history.mode has been deprecated and is no longer used by SugarCube, please remove it from your code")}function t(){throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")}var r=!1,n=!1,a=!1,i=0,o=!0,s=!0,u=!0,l=100,c=!0,d=1e3,f=void 0,p=void 0,h=!1,g=!1,m=void 0,v=void 0,y=void 0,b=void 0,w=void 0,k="untitled-story",S=void 0,E=void 0,j=void 0,x=8,O=void 0,T=800,C=!0;return Object.freeze({get debug(){return r},set debug(e){r=Boolean(e)},get addVisitedLinkClass(){return n},set addVisitedLinkClass(e){n=Boolean(e)},get cleanupWikifierOutput(){return a},set cleanupWikifierOutput(e){a=Boolean(e)},get loadDelay(){return i},set loadDelay(e){if(!Number.isSafeInteger(e)||e<0)throw new RangeError("Config.loadDelay must be a non-negative integer");i=e},audio:Object.freeze({get pauseOnFadeToZero(){return o},set pauseOnFadeToZero(e){o=Boolean(e)},get preloadMetadata(){return s},set preloadMetadata(e){s=Boolean(e)}}),history:Object.freeze({get controls(){return u},set controls(e){if((u=Boolean(e))&&1===l)throw u=!1,new Error("Config.history.controls must be false when Config.history.maxStates is 1")},get maxStates(){return l},set maxStates(e){if(!Number.isSafeInteger(e)||e<0)throw new RangeError("Config.history.maxStates must be a non-negative integer");l=e,u&&1===e&&(u=!1)},get mode(){e()},set mode(t){e()},get tracking(){t()},set tracking(e){t()}}),macros:Object.freeze({get ifAssignmentError(){return c},set ifAssignmentError(e){c=Boolean(e)},get maxLoopIterations(){return d},set maxLoopIterations(e){if(!Number.isSafeInteger(e)||e<0)throw new RangeError("Config.macros.maxLoopIterations must be a non-negative integer");d=e}}),navigation:Object.freeze({get override(){return f},set override(e){if(!(null==e||e instanceof Function))throw new TypeError("Config.navigation.override must be a function or null/undefined (received: "+Util.getType(e)+")");f=e}}),passages:Object.freeze({get descriptions(){return p},set descriptions(e){if(null!=e){var t=Util.getType(e);if("boolean"!==t&&"Object"!==t&&"function"!==t)throw new TypeError("Config.passages.descriptions must be a boolean, object, function, or null/undefined (received: "+t+")")}p=e},get displayTitles(){return h},set displayTitles(e){h=Boolean(e)},get nobr(){return g},set nobr(e){g=Boolean(e)},get onProcess(){return v},set onProcess(e){if(null!=e){var t=Util.getType(e);if("function"!==t)throw new TypeError("Config.passages.onProcess must be a function or null/undefined (received: "+t+")")}v=e},get start(){return m},set start(e){if(null!=e){var t=Util.getType(e);if("string"!==t)throw new TypeError("Config.passages.start must be a string or null/undefined (received: "+t+")")}m=e},get transitionOut(){return y},set transitionOut(e){if(null!=e){var t=Util.getType(e);if("string"!==t&&("number"!==t||!Number.isSafeInteger(e)||e<0))throw new TypeError("Config.passages.transitionOut must be a string, non-negative integer, or null/undefined (received: "+t+")")}y=e}}),saves:Object.freeze({get autoload(){return b},set autoload(e){if(null!=e){var t=Util.getType(e);if("boolean"!==t&&"string"!==t&&"function"!==t)throw new TypeError("Config.saves.autoload must be a boolean, string, function, or null/undefined (received: "+t+")")}b=e},get autosave(){return w},set autosave(e){if(null!=e){var t=Util.getType(e);if("string"===t)return void(w=[e]);if("boolean"!==t&&("Array"!==t||!e.every(function(e){return"string"==typeof e}))&&"function"!==t)throw new TypeError("Config.saves.autosave must be a boolean, Array of strings, function, or null/undefined (received: "+t+("Array"===t?" of mixed":"")+")")}w=e},get id(){return k},set id(e){if("string"!=typeof e||""===e)throw new TypeError("Config.saves.id must be a non-empty string (received: "+Util.getType(e)+")");k=e},get isAllowed(){return S},set isAllowed(e){if(!(null==e||e instanceof Function))throw new TypeError("Config.saves.isAllowed must be a function or null/undefined (received: "+Util.getType(e)+")");S=e},get onLoad(){return E},set onLoad(e){if(!(null==e||e instanceof Function))throw new TypeError("Config.saves.onLoad must be a function or null/undefined (received: "+Util.getType(e)+")");E=e},get onSave(){return j},set onSave(e){if(!(null==e||e instanceof Function))throw new TypeError("Config.saves.onSave must be a function or null/undefined (received: "+Util.getType(e)+")");j=e},get slots(){return x},set slots(e){if(!Number.isSafeInteger(e)||e<0)throw new RangeError("Config.saves.slots must be a non-negative integer");x=e},get version(){return O},set version(e){O=e}}),ui:Object.freeze({get stowBarInitially(){return T},set stowBarInitially(e){var t=Util.getType(e);if("boolean"!==t&&("number"!==t||!Number.isSafeInteger(e)||e<0))throw new TypeError("Config.passages.transitionOut must be a boolean or non-negative integer (received: "+t+")");T=e},get updateStoryElements(){return C},set updateStoryElements(e){C=Boolean(e)}})})}(),SimpleAudio=function(){function e(){if(arguments.length<2){var e=[];throw arguments.length<1&&e.push("track ID"),arguments.length<2&&e.push("sources"),new Error("no "+e.join(" or ")+" specified")}var t=String(arguments[0]).trim(),r='track ID "'+t+'"';if(_.test(t))throw new Error("invalid "+r+": track IDs must not contain colons or whitespace");var n=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1),a=void 0;try{a=T(n)}catch(e){throw new Error(r+": error during track initialization: "+e.message)}if(Config.debug&&!a.hasSource())throw new Error(r+": no supported audio sources found");N.has(t)&&N.get(t)._destroy(),N.set(t,a)}function t(e){return N.has(e)&&N.get(e)._destroy(),N.delete(e)}function r(){N.forEach(function(e){return e._destroy()}),N.clear()}function n(e){return N.has(e)}function a(e){return N.get(e)||null}function i(){if(arguments.length<2){var e=[];throw arguments.length<1&&e.push("group ID"),arguments.length<2&&e.push("track IDs"),new Error("no "+e.join(" or ")+" specified")}var t=String(arguments[0]).trim(),r='group ID "'+t+'"';if(":"!==t[0]||_.test(t.slice(1)))throw new Error("invalid "+r+": group IDs must start with a colon and must not contain colons or whitespace");if(A.includes(t))throw new Error("cannot clobber special "+r);var n=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1),a=void 0;try{a=new Set(n.map(function(e){if(!N.has(e))throw new Error('track "'+e+'" does not exist');return e}))}catch(e){throw new Error(r+": error during group initialization: "+e.message)}I.set(t,Object.freeze(Array.from(a)))}function o(e){return I.delete(e)}function s(){I.clear()}function u(e){return I.has(e)}function l(e){return I.get(e)||null}function c(){if(arguments.length<2){var e=[];throw arguments.length<1&&e.push("list ID"),
arguments.length<2&&e.push("track IDs"),new Error("no "+e.join(" or ")+" specified")}var t=String(arguments[0]).trim(),r='list ID "'+t+'"';if(_.test(t))return this.error("invalid "+r+": list IDs must not contain colons or whitespace");var n=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1),a=void 0;try{a=new B(n.map(function(e){if(null===e)throw new Error("track descriptor must be a string or object (type: null)");switch(void 0===e?"undefined":_typeof(e)){case"string":e={id:e};break;case"object":if(!e.hasOwnProperty("id")&&!e.hasOwnProperty("sources"))throw new Error('track descriptor must contain one of either an "id" or a "sources" property');if(e.hasOwnProperty("id")&&e.hasOwnProperty("sources"))throw new Error('track descriptor must contain either an "id" or a "sources" property, not both');break;default:throw new Error("track descriptor must be a string or object (type: "+(void 0===e?"undefined":_typeof(e))+")")}var t=void 0,r=void 0,n=void 0;if(e.hasOwnProperty("id")){if("string"!=typeof e.id)throw new Error('"id" property must be a string');if(!N.has(e.id))throw new Error('track "'+e.id+'" does not exist');r=N.get(e.id)}else if(e.hasOwnProperty("sources")){if(!Array.isArray(e.sources)||0===e.sources.length)throw new Error('"sources" property must be a non-empty array');if(e.hasOwnProperty("own"))throw new Error('"own" property is not allowed with the "sources" property');try{r=T(e.sources),t=!0}catch(e){throw new Error("error during track initialization: "+e.message)}if(Config.debug&&!r.hasSource())throw new Error("no supported audio sources found")}if(e.hasOwnProperty("own")){if("boolean"!=typeof e.own)throw new Error('"own" property must be a boolean');t=e.own,t&&(r=r.clone())}if(e.hasOwnProperty("volume")){if("number"!=typeof e.volume||Number.isNaN(e.volume)||!Number.isFinite(e.volume)||e.volume<0)throw new Error('"volume" property must be a non-negative finite number');n=e.volume}return{own:null!=t&&t,track:r,volume:null!=n?n:r.volume()}}))}catch(e){throw new Error(r+": error during playlist initialization: "+e.message)}D.has(t)&&D.get(t)._destroy(),D.set(t,a)}function d(e){return D.has(e)&&D.get(e)._destroy(),D.delete(e)}function f(){D.forEach(function(e){return e._destroy()}),D.clear()}function p(e){return D.has(e)}function h(e){return D.get(e)||null}function g(){if(0===arguments.length)throw new Error("no track selector specified");var e=String(arguments[0]).trim(),t=new Set;try{var r=function e(t){var r=t.id,a=void 0;switch(r){case":all":a=n;break;case":looped":a=n.filter(function(e){return N.get(e).loop()});break;case":muted":a=n.filter(function(e){return N.get(e).mute()});break;case":paused":a=n.filter(function(e){return N.get(e).isPaused()});break;case":playing":a=n.filter(function(e){return N.get(e).isPlaying()});break;default:a=":"===r[0]?I.get(r):[r]}if(t.hasOwnProperty("not")){var i=t.not.map(function(t){return e(t)}).flat(1/0);a=a.filter(function(e){return!i.includes(e)})}return a},n=Array.from(N.keys());V(e).forEach(function(e){return r(e).forEach(function(e){if(!N.has(e))throw new Error('track "'+e+'" does not exist');t.add(e)})})}catch(e){throw new Error("error during runner initialization: "+e.message)}return new U(t)}function m(){O("load")}function v(){O("loadwithscreen")}function y(e){if(null==e)return R;R=!!e,O("mute",R)}function b(e){if(null==e)return W;if(W=!!e){var t=Visibility.changeEvent+".SimpleAudio_masterMuteOnHidden";jQuery(document).off(t).on(t,function(){return y(Visibility.isHidden())}),Visibility.isHidden()&&y(!0)}else jQuery(document).off(".SimpleAudio_masterMuteOnHidden")}function w(e){if(null==e)return M;if("number"!=typeof e||Number.isNaN(e)||!Number.isFinite(e))throw new Error("rate must be a finite number");M=Math.clamp(e,.2,5),O("rate",M)}function k(){O("stop")}function S(){O("unload")}function E(e){if(null==e)return Q;if("number"!=typeof e||Number.isNaN(e)||!Number.isFinite(e))throw new Error("volume must be a finite number");Q=Math.clamp(e,0,1),O("volume",Q)}function j(e,t){if("function"!=typeof t)throw new Error("callback parameter must be a function");L.set(e,t)}function x(e){L.delete(e)}function O(e,t){L.forEach(function(r){return r(e,t)})}function T(e){return new F(e.map(function(e){if("data:"!==e.slice(0,5)&&Story.has(e)){var t=Story.get(e);if(t.tags.includes("Twine.audio"))return t.text.trim()}var r=P.exec(e);return null===r?e:{format:r[1],src:r[2]}}))}var C=Object.freeze(["click","contextmenu","dblclick","keyup","mouseup","pointerup","touchend"]),A=Object.freeze([":not",":all",":looped",":muted",":paused",":playing"]),P=/^([\w-]+)\s*\|\s*(\S.*)$/,_=/[:\s]/,N=new Map,I=new Map,D=new Map,L=new Map,M=1,Q=1,R=!1,W=!1,F=function(){function e(t){if(_classCallCheck(this,e),t instanceof Array)this._create(t);else{if(!(t instanceof e))throw new Error("sources parameter must be either an array, of URIs or source objects, or an AudioTrack instance");this._copy(t)}}return _createClass(e,[{key:"_create",value:function(t){var r=/^data:\s*audio\/([^;,]+)\s*[;,]/i,n=/\.([^.\/\\]+)$/,a=e.getType,i=[],o=document.createElement("audio");o.preload="none",t.forEach(function(e){var t=null;switch(void 0===e?"undefined":_typeof(e)){case"string":var s=void 0;if("data:"===e.slice(0,5)){if(null===(s=r.exec(e)))throw new Error("source data URI missing media type")}else if(null===(s=n.exec(Util.parseUrl(e).pathname)))throw new Error("source URL missing file extension");var u=a(s[1]);null!==u&&(t={src:e,type:u});break;case"object":if(null===e)throw new Error("source object cannot be null");if(!e.hasOwnProperty("src"))throw new Error('source object missing required "src" property');if(!e.hasOwnProperty("format"))throw new Error('source object missing required "format" property');var l=a(e.format);null!==l&&(t={src:e.src,type:l});break;default:throw new Error("invalid source value (type: "+(void 0===e?"undefined":_typeof(e))+")")}if(null!==t){Browser.isOpera&&(t.type=t.type.replace(/;.*$/,""));var c=document.createElement("source");c.src=t.src,c.type=t.type,o.appendChild(c),i.push(t)}}),o.hasChildNodes()&&Config.audio.preloadMetadata&&(o.preload="metadata"),this._finalize(o,i,clone(t))}},{key:"_copy",value:function(e){this._finalize(e.audio.cloneNode(!0),clone(e.sources),clone(e.originals))}},{key:"_finalize",value:function(e,t,r){var n=this;Object.defineProperties(this,{audio:{configurable:!0,value:e},sources:{value:Object.freeze(t)},originals:{value:Object.freeze(r)},_error:{writable:!0,value:!1},_faderId:{writable:!0,value:null},_mute:{writable:!0,value:!1},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1}}),jQuery(this.audio).on("loadstart.AudioTrack",function(){return n._error=!1}).on("error.AudioTrack",function(){return n._error=!0}).find("source:last-of-type").on("error.AudioTrack",function(){return n._trigger("error")}),j(this,function(e){if(!n.audio)return void x(n);switch(e){case"loadwithscreen":if(n.hasSource()){var t=LoadScreen.lock();n.one("canplaythrough.AudioTrack_loadwithscreen error.AudioTrack_loadwithscreen",function(){jQuery(this).off(".AudioTrack_loadwithscreen"),LoadScreen.unlock(t)}).load()}break;case"load":n.load();break;case"mute":n._updateAudioMute();break;case"rate":n._updateAudioRate();break;case"stop":n.stop();break;case"volume":n._updateAudioVolume();break;case"unload":n.unload()}}),this._updateAudioMute(),this._updateAudioRate(),this._updateAudioVolume()}},{key:"_trigger",value:function(e){jQuery(this.audio).triggerHandler(e)}},{key:"_destroy",value:function(){x(this),this.audio&&(jQuery(this.audio).off(),this.unload(),this._error=!0,delete this.audio)}},{key:"clone",value:function(){return new e(this)}},{key:"load",value:function(){var e=this;if(this.fadeStop(),this.audio.pause(),!this.audio.hasChildNodes()){if(0===this.sources.length)return;this.sources.forEach(function(t){var r=document.createElement("source");r.src=t.src,r.type=t.type,e.audio.appendChild(r)})}"auto"!==this.audio.preload&&(this.audio.preload="auto"),this.isLoading()||this.audio.load()}},{key:"unload",value:function(){this.fadeStop(),this.stop();var e=this.audio;for(e.preload="none";e.hasChildNodes();)e.removeChild(e.firstChild);e.load()}},{key:"play",value:function(){var e=this;return this.hasSource()?this.isUnloaded()?Promise.reject(new Error("no sources are loaded")):this.isFailed()?Promise.reject(new Error("failed to load any of the sources")):("auto"!==this.audio.preload&&(this.audio.preload="auto"),Has.audioPromise?this.audio.play():new Promise(function(t,r){jQuery(e.audio).off(".AudioTrack_play").one("error.AudioTrack_play playing.AudioTrack_play",function(n){jQuery(e).off(".AudioTrack_play"),"error"===n.type?r(new Error("unknown error")):t()}),e.audio.play()})):Promise.reject(new Error("none of the candidate sources were acceptable"))}},{key:"playWhenAllowed",value:function(){var e=this;this.play().catch(function(){var t=C.map(function(e){return e+".AudioTrack_playWhenAllowed"}).join(" ");jQuery(document).one(t,function(){jQuery(document).off(".AudioTrack_playWhenAllowed"),e.audio.play()})})}},{key:"pause",value:function(){this.audio.pause()}},{key:"stop",value:function(){this.audio.pause(),this.time(0),this._trigger(":stopped")}},{key:"fade",value:function(e,t,r){var n=this;if("number"!=typeof e)throw new TypeError("duration parameter must be a number");if("number"!=typeof t)throw new TypeError("toVolume parameter must be a number");if(null!=r&&"number"!=typeof r)throw new TypeError("fromVolume parameter must be a number");if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));this.fadeStop();var a=Math.clamp(null==r?this.volume():r,0,1),i=Math.clamp(t,0,1);return a!==i?(this.volume(a),jQuery(this.audio).off("timeupdate.AudioTrack_fade").one("timeupdate.AudioTrack_fade",function(){var t=void 0,r=void 0;a<i?(t=a,r=i):(t=i,r=a);var o=Math.max(e,1),s=(i-a)/(o/.025);n._trigger(":fading"),n._faderId=setInterval(function(){if(!n.isPlaying())return void n.fadeStop();n.volume(Math.clamp(n.volume()+s,t,r)),Config.audio.pauseOnFadeToZero&&0===n.volume()&&n.pause(),n.volume()===i&&(n.fadeStop(),n._trigger(":faded"))},25)}),this.play()):void 0}},{key:"fadeIn",value:function(e,t){return this.fade(e,1,t)}},{key:"fadeOut",value:function(e,t){return this.fade(e,0,t)}},{key:"fadeStop",value:function(){null!==this._faderId&&(clearInterval(this._faderId),this._faderId=null)}},{key:"loop",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return null==e?this.audio.loop:(this.audio.loop=!!e,this)})},{key:"mute",value:function(e){return null==e?this._mute:(this._mute=!!e,this._updateAudioMute(),this)}},{key:"_updateAudioMute",value:function(){this.audio.muted=this._mute||R}},{key:"rate",value:function(e){if(null==e)return this._rate;if("number"!=typeof e)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(e,.2,5),this._updateAudioRate(),this}},{key:"_updateAudioRate",value:function(){this.audio.playbackRate=Math.clamp(this._rate*M,.2,5)}},{key:"time",value:function(e){var t=this;if(null==e)return this.audio.currentTime;if("number"!=typeof e)throw new TypeError("time parameter must be a number");return this.hasMetadata()?this.audio.currentTime=e:jQuery(this.audio).off("loadedmetadata.AudioTrack_time").one("loadedmetadata.AudioTrack_time",function(){return t.audio.currentTime=e}),this}},{key:"volume",value:function(e){if(null==e)return this._volume;if("number"!=typeof e)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(e,0,1),this._updateAudioVolume(),this}},{key:"_updateAudioVolume",value:function(){this.audio.volume=Math.clamp(this._volume*Q,0,1)}},{key:"duration",value:function(){return this.audio.duration}},{key:"remaining",value:function(){return this.audio.duration-this.audio.currentTime}},{key:"isFailed",value:function(){return this._error}},{key:"isLoading",value:function(){return this.audio.networkState===HTMLMediaElement.NETWORK_LOADING}},{key:"isUnloaded",value:function(){return!this.audio.hasChildNodes()}},{key:"isUnavailable",value:function(){return!this.hasSource()||this.isUnloaded()||this.isFailed()}},{key:"isPlaying",value:function(){return!this.audio.paused&&this.hasSomeData()}},{key:"isPaused",value:function(){return this.audio.paused&&(this.audio.duration===1/0||this.audio.currentTime>0)&&!this.audio.ended}},{key:"isStopped",value:function(){return this.audio.paused&&0===this.audio.currentTime}},{key:"isEnded",value:function(){return this.audio.ended}},{key:"isFading",value:function(){return null!==this._faderId}},{key:"isSeeking",value:function(){return this.audio.seeking}},{key:"hasSource",value:function(){return this.sources.length>0}},{key:"hasNoData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_NOTHING}},{key:"hasMetadata",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_METADATA}},{key:"hasSomeData",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA}},{key:"hasData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA}},{key:"on",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return jQuery.fn.on.apply(jQuery(this.audio),t),this}},{key:"one",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return jQuery.fn.one.apply(jQuery(this.audio),t),this}},{key:"off",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return jQuery.fn.off.apply(jQuery(this.audio),t),this}}],[{key:"_verifyType",value:function(t){if(!t||!Has.audio)return null;var r=e._types;if(!r.hasOwnProperty(t)){var n=document.createElement("audio");r[t]=""!==n.canPlayType(t).replace(/^no$/i,"")}return r[t]?t:null}},{key:"getType",value:function(t){if(!t||!Has.audio)return null;var r=e.formats,n=t.toLowerCase(),a=r.hasOwnProperty(n)?r[n]:"audio/"+n;return e._verifyType(a)}},{key:"canPlayFormat",value:function(t){return null!==e.getType(t)}},{key:"canPlayType",value:function(t){return null!==e._verifyType(t)}}]),e}();Object.defineProperties(F,{formats:{value:{aac:"audio/aac",caf:"audio/x-caf","x-caf":"audio/x-caf",mp3:'audio/mpeg; codecs="mp3"',mpeg:'audio/mpeg; codecs="mp3"',m4a:"audio/mp4",mp4:"audio/mp4","x-m4a":"audio/mp4","x-mp4":"audio/mp4",oga:"audio/ogg",ogg:"audio/ogg",opus:'audio/ogg; codecs="opus"',wav:"audio/wav",wave:"audio/wav",weba:"audio/webm",webm:"audio/webm"}},_types:{value:{}}});var B=function(){function e(t){if(_classCallCheck(this,e),t instanceof Array)this._create(t);else{if(!(t instanceof e))throw new Error("tracks parameter must be either an array, of track objects, or an AudioTrack instance");this._copy(t)}}return _createClass(e,[{key:"_create",value:function(e){var t=this;this._finalize(e.map(function(e){if("object"!==(void 0===e?"undefined":_typeof(e)))throw new Error("tracks parameter array members must be objects");var r=void 0,n=void 0,a=void 0,i=void 0;if(e instanceof F)r=!0,n=e.rate(),a=e.clone(),i=e.volume();else{if(!e.hasOwnProperty("track"))throw new Error('track object missing required "track" property');if(!(e.track instanceof F))throw new Error('track object\'s "track" property must be an AudioTrack object');r=e.hasOwnProperty("own")&&e.own,n=e.hasOwnProperty("rate")?e.rate:e.track.rate(),a=e.track,i=e.hasOwnProperty("volume")?e.volume:e.track.volume()}return a.stop(),a.loop(!1),a.mute(!1),a.rate(n),a.volume(i),a.on("ended.AudioList",function(){return t._onEnd()}),{own:r,track:a,volume:i,rate:n}}))}},{key:"_copy",value:function(e){this._finalize(clone(e.tracks))}},{key:"_finalize",value:function(e){Object.defineProperties(this,{tracks:{configurable:!0,value:Object.freeze(e)},queue:{configurable:!0,value:[]},current:{writable:!0,value:null},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1},_mute:{writable:!0,value:!1},_loop:{writable:!0,value:!1},_shuffle:{writable:!0,value:!1}})}},{key:"_destroy",value:function(){this.stop(),this.tracks.filter(function(e){return e.own}).forEach(function(e){return e.track._destroy()}),delete this.tracks,delete this.queue}},{key:"load",value:function(){this.tracks.forEach(function(e){return e.track.load()})}},{key:"unload",value:function(){this.stop(),this.tracks.forEach(function(e){return e.track.unload()})}},{key:"play",value:function(){return null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||(0===this.queue.length&&this._fillQueue(),this._next())?this.current.track.play():Promise.reject(new Error("no tracks were available"))}},{key:"playWhenAllowed",value:function(){var e=this;this.play().catch(function(){var t=C.map(function(e){return e+".AudioList_playWhenAllowed"}).join(" ");jQuery(document).one(t,function(){jQuery(document).off(".AudioList_playWhenAllowed"),e.play()})})}},{key:"pause",value:function(){null!==this.current&&this.current.track.pause()}},{key:"stop",value:function(){null!==this.current&&(this.current.track.stop(),this.current=null),this._drainQueue()}},{key:"skip",value:function(){this._next()?this.current.track.play():this._loop&&this.play()}},{key:"fade",value:function(e,t,r){if("number"!=typeof e)throw new TypeError("duration parameter must be a number");if("number"!=typeof t)throw new TypeError("toVolume parameter must be a number");if(null!=r&&"number"!=typeof r)throw new TypeError("fromVolume parameter must be a number");if(0===this.queue.length&&this._fillQueue(),null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||this._next()){var n=Math.clamp(t,0,1)*this.current.volume,a=void 0;return null!=r&&(a=Math.clamp(r,0,1)*this.current.volume),this._volume=t,this.current.track.fade(e,n,a)}}},{key:"fadeIn",value:function(e,t){return this.fade(e,1,t)}},{key:"fadeOut",value:function(e,t){return this.fade(e,0,t)}},{key:"fadeStop",value:function(){null!==this.current&&this.current.track.fadeStop()}},{key:"loop",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return null==e?this._loop:(this._loop=!!e,this)})},{key:"mute",value:function(e){return null==e?this._mute:(this._mute=!!e,null!==this.current&&this.current.track.mute(this._mute),this)}},{key:"rate",value:function(e){if(null==e)return this._rate;if("number"!=typeof e)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(e,.2,5),null!==this.current&&this.current.track.rate(this._rate*this.current.rate),this}},{key:"shuffle",value:function(e){var t=this;if(null==e)return this._shuffle;if(this._shuffle=!!e,this.queue.length>0&&(this._fillQueue(),!this._shuffle&&null!==this.current&&this.queue.length>1)){var r=this.queue.findIndex(function(e){return e===t.current});if(-1!==r){var n;(n=this.queue).push.apply(n,_toConsumableArray(this.queue.splice(0,r+1)))}}return this}},{key:"volume",value:function(e){if(null==e)return this._volume;if("number"!=typeof e)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(e,0,1),null!==this.current&&this.current.track.volume(this._volume*this.current.volume),this}},{key:"duration",value:function(){if(arguments.length>0)throw new Error("duration takes no parameters");return this.tracks.map(function(e){return e.track.duration()}).reduce(function(e,t){return e+t},0)}},{key:"remaining",value:function(){if(arguments.length>0)throw new Error("remaining takes no parameters");var e=this.queue.map(function(e){return e.track.duration()}).reduce(function(e,t){return e+t},0);return null!==this.current&&(e+=this.current.track.remaining()),e}},{key:"time",value:function(){if(arguments.length>0)throw new Error("time takes no parameters");return this.duration()-this.remaining()}},{key:"isPlaying",value:function(){return null!==this.current&&this.current.track.isPlaying()}},{key:"isPaused",value:function(){return null===this.current||this.current.track.isPaused()}},{key:"isStopped",value:function(){return 0===this.queue.length&&null===this.current}},{key:"isEnded",value:function(){return 0===this.queue.length&&(null===this.current||this.current.track.isEnded())}},{key:"isFading",value:function(){return null!==this.current&&this.current.track.isFading()}},{key:"_next",value:function(){null!==this.current&&(this.current.track.stop(),this.current=null);for(var e=void 0;e=this.queue.shift();)if(!e.track.isUnavailable()){this.current=e;break}return null!==this.current&&(this.current.track.mute(this._mute),this.current.track.rate(this._rate*this.current.rate),this.current.track.volume(this._volume*this.current.volume),this.current.track.loop(!1),!0)}},{key:"_onEnd",value:function(){if(0===this.queue.length){if(!this._loop)return;this._fillQueue()}this._next()&&this.current.track.play()}},{key:"_drainQueue",value:function(){this.queue.splice(0)}},{key:"_fillQueue",value:function(){var e;this._drainQueue(),(e=this.queue).push.apply(e,_toConsumableArray(this.tracks.filter(function(e){return!e.track.isUnavailable()}))),0!==this.queue.length&&this._shuffle&&(this.queue.shuffle(),this.queue.length>1&&this.queue[0]===this.current&&this.queue.push(this.queue.shift()))}}]),e}(),U=function(){function e(t){if(_classCallCheck(this,e),!(t instanceof Set||t instanceof e))throw new TypeError("list parameter must be a Set or a AudioRunner instance");Object.defineProperties(this,{trackIds:{value:new Set(t instanceof e?t.trackIds:t)}})}return _createClass(e,[{key:"load",value:function(){e._run(this.trackIds,F.prototype.load)}},{key:"unload",value:function(){e._run(this.trackIds,F.prototype.unload)}},{key:"play",value:function(){e._run(this.trackIds,F.prototype.play)}},{key:"playWhenAllowed",value:function(){e._run(this.trackIds,F.prototype.playWhenAllowed)}},{key:"pause",value:function(){e._run(this.trackIds,F.prototype.pause)}},{key:"stop",value:function(){e._run(this.trackIds,F.prototype.stop)}},{key:"fade",value:function(t,r,n){if(null==t||null==r)throw new Error("fade requires parameters");e._run(this.trackIds,F.prototype.fade,t,r,n)}},{key:"fadeIn",value:function(t,r){if(null==t)throw new Error("fadeIn requires a parameter");e._run(this.trackIds,F.prototype.fadeIn,t,1,r)}},{key:"fadeOut",value:function(t,r){if(null==t)throw new Error("fadeOut requires a parameter");e._run(this.trackIds,F.prototype.fadeOut,t,0,r)}},{key:"fadeStop",value:function(){e._run(this.trackIds,F.prototype.fadeStop)}},{key:"loop",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){if(null==t)throw new Error("loop requires a parameter");return e._run(this.trackIds,F.prototype.loop,t),this})},{key:"mute",value:function(t){if(null==t)throw new Error("mute requires a parameter");return e._run(this.trackIds,F.prototype.mute,t),this}},{key:"rate",value:function(t){if(null==t)throw new Error("rate requires a parameter");return e._run(this.trackIds,F.prototype.rate,t),this}},{key:"time",value:function(t){if(null==t)throw new Error("time requires a parameter");return e._run(this.trackIds,F.prototype.time,t),this}},{key:"volume",value:function(t){if(null==t)throw new Error("volume requires a parameter");return e._run(this.trackIds,F.prototype.volume,t),this}},{key:"on",value:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e._run.apply(e,[this.trackIds,F.prototype.on].concat(r)),this}},{key:"one",value:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e._run.apply(e,[this.trackIds,F.prototype.one].concat(r)),this}},{key:"off",value:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e._run.apply(e,[this.trackIds,F.prototype.off].concat(r)),this}}],[{key:"_run",value:function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];e.forEach(function(e){var r=N.get(e);r&&t.apply(r,n)})}}]),e}(),V=function(){function e(e,t){var a=void 0;if(r.lastIndex=t,null===(a=r.exec(e))||"("!==a[0])throw new Error('invalid ":not()" syntax: missing parentheticals');n.lastIndex=r.lastIndex;for(var i=r.lastIndex,o={str:"",nextMatch:-1},s=1;null!==(a=n.exec(e));)if("("===a[0]?++s:--s,s<1){o.nextMatch=n.lastIndex,o.str=e.slice(i,o.nextMatch-1);break}return o}function t(r){for(var n=[],a=/:?[^\s:()]+/g,i=void 0;null!==(i=a.exec(r));){var o=i[0];if(":not"===o){if(0===n.length)throw new Error('invalid negation: no group ID preceded ":not()"');var s=n[n.length-1];if(":"!==s.id[0])throw new Error('invalid negation of track "'+s.id+'": only groups may be negated with ":not()"');var u=e(r,a.lastIndex);if(-1===u.nextMatch)throw new Error('unknown error parsing ":not()"');a.lastIndex=u.nextMatch,s.not=t(u.str)}else n.push({id:o})}return n}var r=/\S/g,n=/[()]/g;return t}();return Object.freeze(Object.defineProperties({},{tracks:{value:Object.freeze(Object.defineProperties({},{add:{value:e},delete:{value:t},clear:{value:r},has:{value:n},get:{value:a}}))},groups:{value:Object.freeze(Object.defineProperties({},{add:{value:i},delete:{value:o},clear:{value:s},has:{value:u},get:{value:l}}))},lists:{value:Object.freeze(Object.defineProperties({},{add:{value:c},delete:{value:d},clear:{value:f},has:{value:p},get:{value:h}}))},select:{value:g},load:{value:m},loadWithScreen:{value:v},mute:{value:y},muteOnHidden:{value:b},rate:{value:w},stop:{value:k},unload:{value:S},volume:{value:E}}))}(),State=function(){function e(){session.delete("state"),$=[],J=c(),G=-1,Z=[],Y=null===Y?null:new PRNGWrapper(Y.seed,!1)}function t(){if(session.has("state")){var e=session.get("state");return null!=e&&(n(e),!0)}return!1}function r(e){var t={index:G};return e?t.history=clone($):t.delta=A($),Z.length>0&&(t.expired=[].concat(_toConsumableArray(Z))),null!==Y&&(t.seed=Y.seed),t}function n(e,t){if(null==e)throw new Error("state object is null or undefined");if(!e.hasOwnProperty(t?"history":"delta")||0===e[t?"history":"delta"].length)throw new Error("state object has no history or history is empty");if(!e.hasOwnProperty("index"))throw new Error("state object has no index");if(null!==Y&&!e.hasOwnProperty("seed"))throw new Error("state object has no seed, but PRNG is enabled");if(null===Y&&e.hasOwnProperty("seed"))throw new Error("state object has seed, but PRNG is disabled");$=t?clone(e.history):P(e.delta),G=e.index,Z=e.hasOwnProperty("expired")?[].concat(_toConsumableArray(e.expired)):[],e.hasOwnProperty("seed")&&(Y.seed=e.seed),g(G)}function a(){return r(!0)}function i(e){return n(e,!0)}function o(){return Z}function s(){return Z.length+v()}function u(){return Z.concat($.slice(0,v()).map(function(e){return e.title}))}function l(e){return null!=e&&""!==e&&(!!Z.includes(e)||!!$.slice(0,v()).some(function(t){return t.title===e}))}function c(e,t){return{title:null==e?"":String(e),variables:null==t?{}:clone(t)}}function d(){return J}function f(){return G}function p(){return J.title}function h(){return J.variables}function g(e){if(null==e)throw new Error("moment activation attempted with null or undefined");switch(void 0===e?"undefined":_typeof(e)){case"object":J=clone(e);break;case"number":if(b())throw new Error("moment activation attempted with index on empty history");if(e<0||e>=y())throw new RangeError("moment activation attempted with out-of-bounds index; need [0, "+(y()-1)+"], got "+e);J=clone($[e]);break;default:throw new TypeError('moment activation attempted with a "'+(void 0===e?"undefined":_typeof(e))+'"; must be an object or valid history stack index')}return null!==Y&&(Y=PRNGWrapper.unmarshal({seed:Y.seed,pull:J.pull})),session.set("state",r()),jQuery.event.trigger(":historyupdate"),J}function m(){return $}function v(){return G+1}function y(){return $.length}function b(){return 0===$.length}function w(){return $.length>0?$[G]:null}function k(){return $.length>0?$[$.length-1]:null}function S(){return $.length>0?$[0]:null}function E(e){return b()||e<0||e>G?null:$[e]}function j(e){if(b())return null;var t=1+(e?Math.abs(e):0);return t>v()?null:$[v()-t]}function x(e){if(b()||null==e||""===e)return!1;for(var t=G;t>=0;--t)if($[t].title===e)return!0;return!1}function O(e){if(v()<y()&&$.splice(v(),y()-v()),$.push(c(e,J.variables)),Y&&(k().pull=Y.pull),Config.history.maxStates>0)for(;y()>Config.history.maxStates;)Z.push($.shift().title);return G=y()-1,g(G),v()}function T(e){return!(null==e||e<0||e>=y()||e===G)&&(G=e,g(G),!0)}function C(e){return null!=e&&0!==e&&T(G+e)}function A(e){if(!Array.isArray(e))return null;if(0===e.length)return[];for(var t=[clone(e[0])],r=1,n=e.length;r<n;++r)t.push(Diff.diff(e[r-1],e[r]));return t}function P(e){if(!Array.isArray(e))return null;if(0===e.length)return[];for(var t=[clone(e[0])],r=1,n=e.length;r<n;++r)t.push(Diff.patch(t[r-1],e[r]));return t}function _(e,t){if(!b()){var r=void 0;throw r="the Story JavaScript",new Error("State.initPRNG must be called during initialization, within either "+r+" or the StoryInit special passage")}Y=new PRNGWrapper(e,t),J.pull=Y.pull}function N(){return null!==Y}function I(){return Y?Y.pull:NaN}function D(){return Y?Y.seed:null}function L(){return Y?Y.random():Math.random()}function M(){K={},TempVariables=K}function Q(){return K}function R(e){var t=F(e);if(null!==t){for(var r=t.names,n=t.store,a=0,i=r.length;a<i;++a){if(void 0===n[r[a]])return;n=n[r[a]]}return n}}function W(e,t){var r=F(e);if(null===r)return!1;for(var n=r.names,a=n.pop(),i=r.store,o=0,s=n.length;o<s;++o){if(void 0===i[n[o]])return!1;i=i[n[o]]}return i[a]=t,!0}function F(e){for(var t={store:"$"===e[0]?State.variables:State.temporary,names:[]},r=e,n=void 0;null!==(n=X.exec(r));)r=r.slice(n[0].length),n[1]?t.names.push(n[1]):n[2]?t.names.push(n[2]):n[3]?t.names.push(n[3]):n[4]?t.names.push(n[4]):n[5]?t.names.push(R(n[5])):n[6]&&t.names.push(Number(n[6]));return""===r?t:null}function B(){storage.delete(ee)}function U(e){if("string"!=typeof e)throw new TypeError("State.metadata.delete key parameter must be a string (received: "+(void 0===e?"undefined":_typeof(e))+")");var t=storage.get(ee);t&&t.hasOwnProperty(e)&&(1===Object.keys(t).length?storage.delete(ee):(delete t[e],storage.set(ee,t)))}function V(e){if("string"!=typeof e)throw new TypeError("State.metadata.get key parameter must be a string (received: "+(void 0===e?"undefined":_typeof(e))+")");var t=storage.get(ee);return t&&t.hasOwnProperty(e)?t[e]:undefined}function z(e){if("string"!=typeof e)throw new TypeError("State.metadata.has key parameter must be a string (received: "+(void 0===e?"undefined":_typeof(e))+")");var t=storage.get(ee);return t&&t.hasOwnProperty(e)}function q(e,t){if("string"!=typeof e)throw new TypeError("State.metadata.set key parameter must be a string (received: "+(void 0===e?"undefined":_typeof(e))+")");if(void 0===t)U(e);else{var r=storage.get(ee)||{};r[e]=t,storage.set(ee,r)}}function H(){var e=storage.get(ee);return e?Object.keys(e).length:0}var $=[],J=c(),G=-1,Z=[],Y=null,K={},X=new RegExp("^(?:"+Patterns.variableSigil+"("+Patterns.identifier+")|\\.("+Patterns.identifier+")|\\[(?:(?:\"((?:\\\\.|[^\"\\\\])+)\")|(?:'((?:\\\\.|[^'\\\\])+)')|("+Patterns.variableSigil+Patterns.identifierFirstChar+".*)|(\\d+))\\])"),ee="metadata";return Object.freeze(Object.defineProperties({},{reset:{value:e},restore:{value:t},marshalForSave:{value:a},unmarshalForSave:{value:i},expired:{get:o},turns:{get:s},passages:{get:u},hasPlayed:{value:l},active:{get:d},activeIndex:{get:f},passage:{get:p},variables:{get:h},history:{get:m},length:{get:v},size:{get:y},isEmpty:{value:b},current:{get:w},top:{get:k},bottom:{get:S},index:{value:E},peek:{value:j},has:{value:x},create:{value:O},goTo:{value:T},go:{value:C},deltaEncode:{value:A},deltaDecode:{value:P},prng:{value:Object.freeze(Object.defineProperties({},{init:{value:_},isEnabled:{value:N},pull:{get:I},seed:{get:D}}))},random:{value:L},clearTemporary:{value:M},temporary:{get:Q},getVar:{
value:R},setVar:{value:W},metadata:{value:Object.freeze(Object.defineProperties({},{clear:{value:B},delete:{value:U},get:{value:V},has:{value:z},set:{value:q},size:{get:H}}))},initPRNG:{value:_},restart:{value:function(){return Engine.restart()}},backward:{value:function(){return Engine.backward()}},forward:{value:function(){return Engine.forward()}},display:{value:function(){return Engine.display.apply(Engine,arguments)}},show:{value:function(){return Engine.show.apply(Engine,arguments)}},play:{value:function(){return Engine.play.apply(Engine,arguments)}}}))}(),Scripting=function(){function addAccessibleClickHandler(e,t,r,n,a){if(arguments.length<2)throw new Error("addAccessibleClickHandler insufficient number of parameters");var i=void 0,o=void 0;if("function"==typeof t?(i=t,o={namespace:n,one:!!r}):(i=r,o={namespace:a,one:!!n,selector:t}),"function"!=typeof i)throw new TypeError("addAccessibleClickHandler handler parameter must be a function");return jQuery(e).ariaClick(o,i)}function insertElement(e,t,r,n,a,i){var o=jQuery(document.createElement(t));return r&&o.attr("id",r),n&&o.addClass(n),i&&o.attr("title",i),a&&o.text(a),e&&o.appendTo(e),o[0]}function insertText(e,t){jQuery(e).append(document.createTextNode(t))}function removeChildren(e){jQuery(e).empty()}function removeElement(e){jQuery(e).remove()}function fade(e,t){function r(){i+=.05*a,n(o,Math.easeInOut(i)),(1===a&&i>=1||-1===a&&i<=0)&&(e.style.visibility="in"===t.fade?"visible":"hidden",o.parentNode.replaceChild(e,o),o=null,window.clearInterval(s),t.onComplete&&t.onComplete())}function n(e,t){e.style.zoom=1,e.style.filter="alpha(opacity="+Math.floor(100*t)+")",e.style.opacity=t}var a="in"===t.fade?1:-1,i=void 0,o=e.cloneNode(!0),s=void 0;e.parentNode.replaceChild(o,e),"in"===t.fade?(i=0,o.style.visibility="visible"):i=1,n(o,i),s=window.setInterval(r,25)}function scrollWindowTo(e,t){function r(){l+=a,window.scroll(0,i+u*(s*Math.easeInOut(l))),l>=1&&window.clearInterval(c)}function n(e){for(var t=0;e.offsetParent;)t+=e.offsetTop,e=e.offsetParent;return t}var a=null!=t?Number(t):.1;Number.isNaN(a)||!Number.isFinite(a)||a<0?a=.1:a>1&&(a=1);var i=window.scrollY?window.scrollY:document.body.scrollTop,o=function(e){var t=n(e),r=t+e.offsetHeight,a=window.scrollY?window.scrollY:document.body.scrollTop,i=window.innerHeight?window.innerHeight:document.body.clientHeight,o=a+i;return t>=a&&r>o&&e.offsetHeight<i?t-(i-e.offsetHeight)+20:t}(e),s=Math.abs(i-o),u=i>o?-1:1,l=0,c=void 0;c=window.setInterval(r,25)}function either(){if(0!==arguments.length)return Array.prototype.concat.apply([],arguments).random()}function forget(e){if("string"!=typeof e)throw new TypeError("forget key parameter must be a string (received: "+Util.getType(e)+")");State.metadata.delete(e)}function hasVisited(){if(0===arguments.length)throw new Error("hasVisited called with insufficient parameters");if(State.isEmpty())return!1;for(var e=Array.prototype.concat.apply([],arguments),t=State.passages,r=0,n=e.length;r<n;++r)if(!t.includes(e[r]))return!1;return!0}function lastVisited(){if(0===arguments.length)throw new Error("lastVisited called with insufficient parameters");if(State.isEmpty())return-1;for(var e=Array.prototype.concat.apply([],arguments),t=State.passages,r=t.length-1,n=State.turns,a=0,i=e.length;a<i&&n>-1;++a){var o=t.lastIndexOf(e[a]);n=Math.min(n,-1===o?-1:r-o)}return n}function memorize(e,t){if("string"!=typeof e)throw new TypeError("memorize key parameter must be a string (received: "+Util.getType(e)+")");State.metadata.set(e,t)}function passage(){return State.passage}function previous(){var e=State.passages;if(arguments.length>0){var t=Number(arguments[0]);if(!Number.isSafeInteger(t)||t<1)throw new RangeError("previous offset parameter must be a positive integer greater than zero");return e.length>t?e[e.length-1-t]:""}for(var r=e.length-2;r>=0;--r)if(e[r]!==State.passage)return e[r];return""}function random(){var e=void 0,t=void 0;switch(arguments.length){case 0:throw new Error("random called with insufficient parameters");case 1:e=0,t=Math.trunc(arguments[0]);break;default:e=Math.trunc(arguments[0]),t=Math.trunc(arguments[1])}if(!Number.isInteger(e))throw new Error("random min parameter must be an integer");if(!Number.isInteger(t))throw new Error("random max parameter must be an integer");if(e>t){var r=[t,e];e=r[0],t=r[1]}return Math.floor(State.random()*(t-e+1))+e}function randomFloat(){var e=void 0,t=void 0;switch(arguments.length){case 0:throw new Error("randomFloat called with insufficient parameters");case 1:e=0,t=Number(arguments[0]);break;default:e=Number(arguments[0]),t=Number(arguments[1])}if(Number.isNaN(e)||!Number.isFinite(e))throw new Error("randomFloat min parameter must be a number");if(Number.isNaN(t)||!Number.isFinite(t))throw new Error("randomFloat max parameter must be a number");if(e>t){var r=[t,e];e=r[0],t=r[1]}return State.random()*(t-e)+e}function recall(e,t){if("string"!=typeof e)throw new TypeError("recall key parameter must be a string (received: "+Util.getType(e)+")");return State.metadata.has(e)?State.metadata.get(e):t}function tags(){if(0===arguments.length)return Story.get(State.passage).tags.slice(0);for(var e=Array.prototype.concat.apply([],arguments),t=[],r=0,n=e.length;r<n;++r)t=t.concat(Story.get(e[r]).tags);return t}function temporary(){return State.temporary}function time(){return null===Engine.lastPlay?0:Util.now()-Engine.lastPlay}function turns(){return State.turns}function variables(){return State.variables}function visited(){if(State.isEmpty())return 0;for(var e=Array.prototype.concat.apply([],0===arguments.length?[State.passage]:arguments),t=State.passages,r=State.turns,n=0,a=e.length;n<a&&r>0;++n)r=Math.min(r,t.count(e[n]));return r}function visitedTags(){if(0===arguments.length)throw new Error("visitedTags called with insufficient parameters");if(State.isEmpty())return 0;for(var e=Array.prototype.concat.apply([],arguments),t=e.length,r=State.passages,n=new Map,a=0,i=0,o=r.length;i<o;++i){var s=r[i];if(n.has(s))n.get(s)&&++a;else{var u=Story.get(s).tags;if(u.length>0){for(var l=0,c=0;c<t;++c)u.includes(e[c])&&++l;l===t?(++a,n.set(s,!0)):n.set(s,!1)}}}return a}function evalJavaScript(code,output){return function(code,output){return eval(code)}.call(output?{output:output}:null,String(code),output)}function evalTwineScript(code,output){return function(code,output){return eval(code)}.call(output?{output:output}:null,parse(String(code)),output)}var _ref8=function(){function e(e){return Util.parseUrl(e).path.replace(/^[^\w]+|[^\w]+$/g,"").replace(/[^\w]+/g,"-").toLocaleLowerCase()}function t(t){return new Promise(function(r,n){jQuery(document.createElement("script")).one("load abort error",function(e){jQuery(e.target).off(),"load"===e.type?r(e.target):n(new Error('importScripts failed to load the script "'+t+'".'))}).appendTo(document.head).attr({id:"script-imported-"+e(t),type:"text/javascript",src:t})})}function r(t){return new Promise(function(r,n){jQuery(document.createElement("link")).one("load abort error",function(e){jQuery(e.target).off(),"load"===e.type?r(e.target):n(new Error('importStyles failed to load the stylesheet "'+t+'".'))}).appendTo(document.head).attr({id:"style-imported-"+e(t),rel:"stylesheet",href:t})})}function n(e){return e.reduce(function(e,t){return e=e.then(t)},Promise.resolve())}function a(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return Promise.all(r.map(function(e){return Array.isArray(e)?n(e.map(function(e){return function(){return t(e)}})):t(e)}))}function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return Promise.all(t.map(function(e){return Array.isArray(e)?n(e.map(function(e){return function(){return r(e)}})):r(e)}))}return{importScripts:a,importStyles:i}}(),importScripts=_ref8.importScripts,importStyles=_ref8.importStyles,parse=function(){function e(e){if(0!==r.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start");for(var a=e,i=void 0;null!==(i=r.exec(a));)if(i[5]){var o=i[5];if("$"===o||"_"===o)continue;if(n.test(o))o=o[0];else if("is"===o){var s=r.lastIndex,u=a.slice(s);/^\s+not\b/.test(u)&&(a=a.splice(s,u.search(/\S/)),o="isnot")}t.hasOwnProperty(o)&&(a=a.splice(i.index,o.length,t[o]),r.lastIndex+=t[o].length-o.length)}return a}var t=Object.freeze({$:"State.variables.",_:"State.temporary.",to:"=",eq:"==",neq:"!=",is:"===",isnot:"!==",gt:">",gte:">=",lt:"<",lte:"<=",and:"&&",or:"||",not:"!",def:'"undefined" !== typeof',ndef:'"undefined" === typeof'}),r=new RegExp(["(\"\"|'')",'("(?:\\\\.|[^"\\\\])+")',"('(?:\\\\.|[^'\\\\])+')","([=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}]+)","([^\"'=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}\\s]+)"].join("|"),"g"),n=new RegExp("^"+Patterns.variable);return e}();return Object.freeze(Object.defineProperties({},{parse:{value:parse},evalJavaScript:{value:evalJavaScript},evalTwineScript:{value:evalTwineScript}}))}(),_ref9=function(){return{EOF:-1,Lexer:function(){function e(t,r){if(_classCallCheck(this,e),arguments.length<2)throw new Error("Lexer constructor called with too few parameters (source:string , initialState:function)");Object.defineProperties(this,{source:{value:t},initial:{value:r},state:{writable:!0,value:r},start:{writable:!0,value:0},pos:{writable:!0,value:0},depth:{writable:!0,value:0},items:{writable:!0,value:[]},data:{writable:!0,value:{}}})}return _createClass(e,[{key:"reset",value:function(){this.state=this.initial,this.start=0,this.pos=0,this.depth=0,this.items=[],this.data={}}},{key:"run",value:function(){for(;null!==this.state;)this.state=this.state(this);return this.items}},{key:"nextItem",value:function(){for(;0===this.items.length&&null!==this.state;)this.state=this.state(this);return this.items.shift()}},{key:"next",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos++]}},{key:"peek",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos]}},{key:"backup",value:function(e){this.pos-=e||1}},{key:"forward",value:function(e){this.pos+=e||1}},{key:"ignore",value:function(){this.start=this.pos}},{key:"accept",value:function(e){var t=this.next();return-1!==t&&(!!e.includes(t)||(this.backup(),!1))}},{key:"acceptRe",value:function(e){var t=this.next();return-1!==t&&(!!e.test(t)||(this.backup(),!1))}},{key:"acceptRun",value:function(e){for(;;){var t=this.next();if(-1===t)return;if(!e.includes(t))break}this.backup()}},{key:"acceptRunRe",value:function(e){for(;;){var t=this.next();if(-1===t)return;if(!e.test(t))break}this.backup()}},{key:"emit",value:function(e){this.items.push({type:e,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),this.start=this.pos}},{key:"error",value:function(e,t){if(arguments.length<2)throw new Error("Lexer.prototype.error called with too few parameters (type:number , message:string)");return this.items.push({type:e,message:t,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),null}}],[{key:"enumFromNames",value:function(e){var t=e.reduce(function(e,t,r){return e[t]=r,e},{});return Object.freeze(Object.assign(Object.create(null),t))}}]),e}()}}(),EOF=_ref9.EOF,Lexer=_ref9.Lexer,Wikifier=function(){var e=0,t=function(){function t(r,n,a){_classCallCheck(this,t),t.Parser.Profile.isEmpty()&&t.Parser.Profile.compile(),Object.defineProperties(this,{source:{value:String(n)},options:{writable:!0,value:Object.assign({profile:"all"},a)},nextMatch:{writable:!0,value:0},output:{writable:!0,value:null},_rawArgs:{writable:!0,value:""}}),null==r?this.output=document.createDocumentFragment():r.jquery?this.output=r[0]:this.output=r;try{++e,this.subWikify(this.output),1===e&&Config.cleanupWikifierOutput&&convertBreaks(this.output)}finally{--e}}return _createClass(t,[{key:"subWikify",value:function(e,r,n){var a=this.output,i=void 0;this.output=e,null!=n&&"object"===(void 0===n?"undefined":_typeof(n))&&(i=this.options,this.options=Object.assign({},this.options,n));var o=t.Parser.Profile.get(this.options.profile),s=r?new RegExp("(?:"+r+")",this.options.ignoreTerminatorCase?"gim":"gm"):null,u=void 0,l=void 0;do{if(o.parserRegExp.lastIndex=this.nextMatch,s&&(s.lastIndex=this.nextMatch),l=o.parserRegExp.exec(this.source),(u=s?s.exec(this.source):null)&&(!l||u.index<=l.index))return u.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,u.index),this.matchStart=u.index,this.matchLength=u[0].length,this.matchText=u[0],this.nextMatch=s.lastIndex,this.output=a,void(i&&(this.options=i));if(l){l.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,l.index),this.matchStart=l.index,this.matchLength=l[0].length,this.matchText=l[0],this.nextMatch=o.parserRegExp.lastIndex;for(var c=void 0,d=1,f=l.length;d<f;++d)if(l[d]){c=d-1;break}if(o.parsers[c].handler(this),null!=TempState.break)break}}while(u||l);null==TempState.break?this.nextMatch<this.source.length&&(this.outputText(this.output,this.nextMatch,this.source.length),this.nextMatch=this.source.length):this.output.lastChild&&this.output.lastChild.nodeType===Node.ELEMENT_NODE&&"BR"===this.output.lastChild.nodeName.toUpperCase()&&jQuery(this.output.lastChild).remove(),this.output=a,i&&(this.options=i)}},{key:"outputText",value:function(e,t,r){jQuery(e).append(document.createTextNode(this.source.substring(t,r)))}},{key:"rawArgs",value:function(){return this._rawArgs}},{key:"fullArgs",value:function(){return Scripting.parse(this._rawArgs)}}],[{key:"wikifyEval",value:function(e){var r=document.createDocumentFragment();new t(r,e);var n=r.querySelector(".error");if(null!==n)throw new Error(n.textContent.replace(errorPrologRegExp,""));return r}},{key:"createInternalLink",value:function(e,t,r,n){var a=jQuery(document.createElement("a"));return null!=t&&(a.attr("data-passage",t),Story.has(t)?(a.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(t)&&a.addClass("link-visited")):a.addClass("link-broken"),a.ariaClick({one:!0},function(){"function"==typeof n&&n(),Engine.play(t)})),r&&a.append(document.createTextNode(r)),e&&a.appendTo(e),a[0]}},{key:"createExternalLink",value:function(e,t,r){var n=jQuery(document.createElement("a")).attr("target","_blank").addClass("link-external").text(r).appendTo(e);return null!=t&&n.attr({href:t,tabindex:0}),n[0]}},{key:"isExternalLink",value:function(e){return!Story.has(e)&&(new RegExp("^"+Patterns.url,"gim").test(e)||/[\/.?#]/.test(e))}}]),t}();return Object.defineProperty(t,"Parser",{value:function(){function e(){return d}function t(e){if("object"!==(void 0===e?"undefined":_typeof(e)))throw new Error("Wikifier.Parser.add parser parameter must be an object");if(!e.hasOwnProperty("name"))throw new Error('parser object missing required "name" property');if("string"!=typeof e.name)throw new Error('parser object "name" property must be a string');if(!e.hasOwnProperty("match"))throw new Error('parser object missing required "match" property');if("string"!=typeof e.match)throw new Error('parser object "match" property must be a string');if(!e.hasOwnProperty("handler"))throw new Error('parser object missing required "handler" property');if("function"!=typeof e.handler)throw new Error('parser object "handler" property must be a function');if(e.hasOwnProperty("profiles")&&!Array.isArray(e.profiles))throw new Error('parser object "profiles" property must be an array');if(a(e.name))throw new Error('cannot clobber existing parser "'+e.name+'"');d.push(e)}function r(e){var t=d.find(function(t){return t.name===e});t&&d.delete(t)}function n(){return 0===d.length}function a(e){return!!d.find(function(t){return t.name===e})}function i(e){return d.find(function(t){return t.name===e})||null}function o(){return f}function s(){var e=d,t=e.filter(function(e){return!Array.isArray(e.profiles)||e.profiles.includes("core")});return f=Object.freeze({all:{parsers:e,parserRegExp:new RegExp(e.map(function(e){return"("+e.match+")"}).join("|"),"gm")},core:{parsers:t,parserRegExp:new RegExp(t.map(function(e){return"("+e.match+")"}).join("|"),"gm")}})}function u(){return"object"!==(void 0===f?"undefined":_typeof(f))||0===Object.keys(f).length}function l(e){if("object"!==(void 0===f?"undefined":_typeof(f))||!f.hasOwnProperty(e))throw new Error('nonexistent parser profile "'+e+'"');return f[e]}function c(e){return"object"===(void 0===f?"undefined":_typeof(f))&&f.hasOwnProperty(e)}var d=[],f=void 0;return Object.freeze(Object.defineProperties({},{parsers:{get:e},add:{value:t},delete:{value:r},isEmpty:{value:n},has:{value:a},get:{value:i},Profile:{value:Object.freeze(Object.defineProperties({},{profiles:{get:o},compile:{value:s},isEmpty:{value:u},has:{value:c},get:{value:l}}))}}))}()}),Object.defineProperties(t,{helpers:{value:{}},getValue:{value:State.getVar},setValue:{value:State.setVar},parse:{value:Scripting.parse},evalExpression:{value:Scripting.evalTwineScript},evalStatements:{value:Scripting.evalTwineScript},textPrimitives:{value:Patterns}}),Object.defineProperties(t.helpers,{inlineCss:{value:function(){function e(e){var r={classes:[],id:"",styles:{}},n=void 0;do{t.lastIndex=e.nextMatch;var a=t.exec(e.source);n=a&&a.index===e.nextMatch,n&&(a[1]?r.styles[Util.fromCssProperty(a[1])]=a[2].trim():a[3]?r.styles[Util.fromCssProperty(a[3])]=a[4].trim():a[5]?r.classes=r.classes.concat(a[5].slice(1).split(/\./)):a[6]&&(r.id=a[6].slice(1).split(/#/).pop()),e.nextMatch=t.lastIndex)}while(n);return r}var t=new RegExp(Patterns.inlineCss,"gm");return e}()},evalText:{value:function(e){var t=void 0;try{switch(t=Scripting.evalTwineScript(e),void 0===t?"undefined":_typeof(t)){case"string":""===t.trim()&&(t=e);break;case"number":t=String(t);break;default:t=e}}catch(r){t=e}return t}},evalPassageId:{value:function(e){return null==e||Story.has(e)?e:t.helpers.evalText(e)}},hasBlockContext:{value:function(e){for(var t="function"==typeof window.getComputedStyle,r=e.length-1;r>=0;--r){var n=e[r];switch(n.nodeType){case Node.ELEMENT_NODE:var a=n.nodeName.toUpperCase();if("BR"===a)return!0;var i=t?window.getComputedStyle(n,null):n.currentStyle;if(i&&i.display){if("none"===i.display)continue;return"block"===i.display}switch(a){case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":return!0}return!1;case Node.COMMENT_NODE:continue;default:return!1}}return!0}},createShadowSetterCallback:{value:function(){function e(){if(!a&&!(a=t.Parser.get("macro")))throw new Error('cannot find "macro" parser');return a}function r(){for(var t=a||e(),r=new Set,n=t.context;null!==n;n=n.parent)n._shadows&&n._shadows.forEach(function(e){return r.add(e)});return[].concat(_toConsumableArray(r))}function n(e){var t={};return r().forEach(function(e){var r=e.slice(1),n="$"===e[0]?State.variables:State.temporary;t[e]=n[r]}),function(){var r=Object.keys(t),n=r.length>0?{}:null;try{return r.forEach(function(e){var r=e.slice(1),a="$"===e[0]?State.variables:State.temporary;a.hasOwnProperty(r)&&(n[r]=a[r]),a[r]=t[e]}),Scripting.evalJavaScript(e)}finally{r.forEach(function(e){var r=e.slice(1),a="$"===e[0]?State.variables:State.temporary;t[e]=a[r],n.hasOwnProperty(r)?a[r]=n[r]:delete a[r]})}}}var a=null;return n}()},parseSquareBracketedMarkup:{value:function(){function e(e,t){e:for(;;)switch(e.next()){case"\\":var r=e.next();if(r!==EOF&&"\n"!==r)break;case EOF:case"\n":return EOF;case t:break e}return e.pos}function t(e){if(!e.accept("["))return e.error(o.Error,"malformed square-bracketed markup");if(e.accept("["))e.data.isLink=!0,e.emit(o.LinkMeta);else{if(e.accept("<>"),!(e.accept("Ii")&&e.accept("Mm")&&e.accept("Gg")&&e.accept("[")))return e.error(o.Error,"malformed square-bracketed markup");e.data.isLink=!1,e.emit(o.ImageMeta)}return e.depth=2,r}function r(t){for(var r=t.data.isLink?"link":"image",i=s.None;;)switch(t.next()){case EOF:case"\n":return t.error(o.Error,"unterminated "+r+" markup");case'"':if(e(t,'"')===EOF)return t.error(o.Error,"unterminated double quoted string in "+r+" markup");break;case"|":i===s.None&&(i=s.LTR,t.backup(),t.emit(o.Text),t.forward(),t.emit(o.DelimLTR));break;case"-":i===s.None&&">"===t.peek()&&(i=s.LTR,t.backup(),t.emit(o.Text),t.forward(2),t.emit(o.DelimLTR));break;case"<":i===s.None&&"-"===t.peek()&&(i=s.RTL,t.backup(),t.emit(t.data.isLink?o.Link:o.Source),t.forward(2),t.emit(o.DelimRTL));break;case"[":++t.depth;break;case"]":if(1===--t.depth)switch(t.peek()){case"[":return++t.depth,t.backup(),i===s.RTL?t.emit(o.Text):t.emit(t.data.isLink?o.Link:o.Source),t.forward(2),t.emit(o.InnerMeta),t.data.isLink?a:n;case"]":return--t.depth,t.backup(),i===s.RTL?t.emit(o.Text):t.emit(t.data.isLink?o.Link:o.Source),t.forward(2),t.emit(o.RightMeta),null;default:return t.error(o.Error,"malformed "+r+" markup")}}}function n(t){for(var r=t.data.isLink?"link":"image";;)switch(t.next()){case EOF:case"\n":return t.error(o.Error,"unterminated "+r+" markup");case'"':if(e(t,'"')===EOF)return t.error(o.Error,"unterminated double quoted string in "+r+" markup link component");break;case"[":++t.depth;break;case"]":if(1===--t.depth)switch(t.peek()){case"[":return++t.depth,t.backup(),t.emit(o.Link),t.forward(2),t.emit(o.InnerMeta),a;case"]":return--t.depth,t.backup(),t.emit(o.Link),t.forward(2),t.emit(o.RightMeta),null;default:return t.error(o.Error,"malformed "+r+" markup")}}}function a(t){for(var r=t.data.isLink?"link":"image";;)switch(t.next()){case EOF:case"\n":return t.error(o.Error,"unterminated "+r+" markup");case'"':if(e(t,'"')===EOF)return t.error(o.Error,"unterminated double quoted string in "+r+" markup setter component");break;case"'":if(e(t,"'")===EOF)return t.error(o.Error,"unterminated single quoted string in "+r+" markup setter component");break;case"[":++t.depth;break;case"]":if(1===--t.depth)return"]"!==t.peek()?t.error(o.Error,"malformed "+r+" markup"):(--t.depth,t.backup(),t.emit(o.Setter),t.forward(2),t.emit(o.RightMeta),null)}}function i(e){var r=new Lexer(e.source,t);r.start=r.pos=e.matchStart;var n={},a=r.run(),i=a.last();return i&&i.type===o.Error?n.error=i.message:a.forEach(function(e){var t=e.text.trim();switch(e.type){case o.ImageMeta:n.isImage=!0,"<"===t[1]?n.align="left":">"===t[1]&&(n.align="right");break;case o.LinkMeta:n.isLink=!0;break;case o.Link:"~"===t[0]?(n.forceInternal=!0,n.link=t.slice(1)):n.link=t;break;case o.Setter:n.setter=t;break;case o.Source:n.source=t;break;case o.Text:n.text=t}}),n.pos=r.pos,n}var o=Lexer.enumFromNames(["Error","DelimLTR","DelimRTL","InnerMeta","ImageMeta","LinkMeta","Link","RightMeta","Setter","Source","Text"]),s=Lexer.enumFromNames(["None","LTR","RTL"]);return i}()}}),t}();!function(){function e(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(e.nextMatch=this.lookahead.lastIndex,jQuery(document.createDocumentFragment()).append(t[1]).appendTo(e.output))}Wikifier.Parser.add({name:"quoteByBlock",profiles:["block"],match:"^<<<\\n",terminator:"^<<<\\n",handler:function(e){if(!Wikifier.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));e.subWikify(jQuery(document.createElement("blockquote")).appendTo(e.output).get(0),this.terminator)}}),Wikifier.Parser.add({name:"quoteByLine",profiles:["block"],match:"^>+",lookahead:/^>+/gm,terminator:"\\n",handler:function(e){if(!Wikifier.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));var t=[e.output],r=0,n=e.matchLength,a=void 0,i=void 0;do{if(n>r)for(i=r;i<n;++i)t.push(jQuery(document.createElement("blockquote")).appendTo(t[t.length-1]).get(0));else if(n<r)for(i=r;i>n;--i)t.pop();r=n,e.subWikify(t[t.length-1],this.terminator),jQuery(document.createElement("br")).appendTo(t[t.length-1]),this.lookahead.lastIndex=e.nextMatch;var o=this.lookahead.exec(e.source);a=o&&o.index===e.nextMatch,a&&(n=o[0].length,e.nextMatch+=o[0].length)}while(a)}}),Wikifier.Parser.add({name:"macro",profiles:["core"],match:"<<",lookahead:new RegExp("<<(/?"+Patterns.macroName+")(?:\\s*)((?:(?:`(?:\\\\.|[^`\\\\])*`)|(?:\"(?:\\\\.|[^\"\\\\])*\")|(?:'(?:\\\\.|[^'\\\\])*')|(?:\\[(?:[<>]?[Ii][Mm][Gg])?\\[[^\\r\\n]*?\\]\\]+)|[^>]|(?:>(?!>)))*)>>","gm"),working:{source:"",name:"",arguments:"",index:0},context:null,handler:function(e){var t=this.lookahead.lastIndex=e.matchStart;if(this.parseTag(e)){var r=e.nextMatch,n=this.working.name,a=this.working.arguments,i=void 0;try{if(!(i=Macro.get(n))){if(Macro.tags.has(n)){var o=Macro.tags.get(n);return throwError(e.output,"child tag <<"+n+">> was found outside of a call to its parent macro"+(1===o.length?"":"s")+" <<"+o.join(">>, <<")+">>",e.source.slice(t,e.nextMatch))}return throwError(e.output,"macro <<"+n+">> does not exist",e.source.slice(t,e.nextMatch))}var s=null;if(i.hasOwnProperty("tags")&&!(s=this.parseBody(e,i)))return e.nextMatch=r,throwError(e.output,"cannot find a closing tag for macro <<"+n+">>",e.source.slice(t,e.nextMatch)+"…");if("function"!=typeof i.handler)return throwError(e.output,"macro <<"+n+">> handler function "+(i.hasOwnProperty("handler")?"is not a function":"does not exist"),e.source.slice(t,e.nextMatch));var u=s?s[0].args:this.createArgs(a,this.skipArgs(i,i.name));if(i.hasOwnProperty("_MACRO_API")){this.context=new MacroContext({macro:i,name:n,args:u,payload:s,source:e.source.slice(t,e.nextMatch),parent:this.context,parser:e});try{i.handler.call(this.context)}finally{this.context=this.context.parent}}else{var l=e._rawArgs;e._rawArgs=a;try{i.handler(e.output,n,u,e,s)}finally{e._rawArgs=l}}}catch(r){return throwError(e.output,"cannot execute "+(i&&i.isWidget?"widget":"macro")+" <<"+n+">>: "+r.message,e.source.slice(t,e.nextMatch))}finally{this.working.source="",this.working.name="",this.working.arguments="",this.working.index=0}}else e.outputText(e.output,e.matchStart,e.nextMatch)},parseTag:function(e){var t=this.lookahead.exec(e.source);return!(!t||t.index!==e.matchStart||!t[1])&&(e.nextMatch=this.lookahead.lastIndex,this.working.source=e.source.slice(t.index,this.lookahead.lastIndex),this.working.name=t[1],this.working.arguments=t[2],this.working.index=t.index,!0)},parseBody:function(e,t){for(var r=this.working.name,n="/"+r,a="end"+r,i=!!Array.isArray(t.tags)&&t.tags,o=[],s=-1,u=1,l=this.working.source,c=this.working.name,d=this.working.arguments,f=e.nextMatch;-1!==(e.matchStart=e.source.indexOf(this.match,e.nextMatch));)if(this.parseTag(e)){var p=this.working.source,h=this.working.name,g=this.working.arguments,m=this.working.index,v=e.nextMatch;switch(h){case r:++u;break;case a:case n:--u;break;default:if(1===u&&i)for(var y=0,b=i.length;y<b;++y)h===i[y]&&(o.push({source:l,name:c,arguments:d,args:this.createArgs(d,this.skipArgs(t,c)),contents:e.source.slice(f,m)}),l=p,c=h,d=g,f=v)}if(0===u){o.push({source:l,name:c,arguments:d,args:this.createArgs(d,this.skipArgs(t,c)),contents:e.source.slice(f,m)}),s=v;break}}else this.lookahead.lastIndex=e.nextMatch=e.matchStart+this.match.length;return-1!==s?(e.nextMatch=s,o):null},createArgs:function(e,t){var r=t?[]:this.parseArgs(e);return Object.defineProperties(r,{raw:{value:e},full:{value:Scripting.parse(e)}}),r},skipArgs:function(e,t){if(e.hasOwnProperty("skipArgs")){var r=e.skipArgs;return"boolean"==typeof r&&r||Array.isArray(r)&&r.includes(t)}return!!e.hasOwnProperty("skipArg0")&&(e.skipArg0&&e.name===t)},parseArgs:function(){function e(e,t){e:for(;;)switch(e.next()){case"\\":var r=e.next();if(r!==EOF&&"\n"!==r)break;case EOF:case"\n":return EOF;case t:break e}return e.pos}function t(e){var t=e.source.slice(e.pos).search(c);if(t===EOF)return null;switch(0!==t&&(e.pos+=t,e.ignore()),e.next()){case"`":return r;case'"':return n;case"'":return a;case"[":return i;default:return o}}function r(r){return e(r,"`")===EOF?r.error(u.Error,"unterminated backquote expression"):(r.emit(u.Expression),t)}function n(r){return e(r,'"')===EOF?r.error(u.Error,"unterminated double quoted string"):(r.emit(u.String),t)}function a(r){return e(r,"'")===EOF?r.error(u.Error,"unterminated single quoted string"):(r.emit(u.String),t)}function i(e){var r=void 0;if(e.accept("<>IiMmGg")?(r="image",e.acceptRun("<>IiMmGg")):r="link",!e.accept("["))return e.error(u.Error,"malformed "+r+" markup");e.depth=2;e:for(;;)switch(e.next()){case"\\":var n=e.next();if(n!==EOF&&"\n"!==n)break;case EOF:case"\n":return e.error(u.Error,"unterminated "+r+" markup");case"[":++e.depth;break;case"]":if(--e.depth<0)return e.error(u.Error,"unexpected right square bracket ']'");if(1===e.depth){if("]"===e.next()){--e.depth;break e}e.backup()}}return e.emit(u.SquareBracket),t}function o(e){var r=e.source.slice(e.pos).search(l);return e.pos=r===EOF?e.source.length:e.pos+r,e.emit(u.Bareword),r===EOF?null:t}function s(e){var r=new Lexer(e,t),n=[];return r.run().forEach(function(e){var t=e.text;switch(e.type){case u.Error:throw new Error('unable to parse macro argument "'+t+'": '+e.message);case u.Bareword:if(d.test(t))t=State.getVar(t);else if(/^(?:settings|setup)[.[]/.test(t))try{t=Scripting.evalTwineScript(t)}catch(e){throw new Error('unable to parse macro argument "'+t+'": '+e.message)}else if("null"===t)t=null;else if("undefined"===t)t=undefined;else if("true"===t)t=!0;else if("false"===t)t=!1;else if("NaN"===t)t=NaN;else{var r=Number(t);Number.isNaN(r)||(t=r)}break;case u.Expression:if(""===(t=t.slice(1,-1).trim()))t=undefined;else try{t=Scripting.evalTwineScript("("+t+")")}catch(e){throw new Error('unable to parse macro argument expression "'+t+'": '+e.message)}break;case u.String:try{t=Scripting.evalJavaScript(t)}catch(e){throw new Error('unable to parse macro argument string "'+t+'": '+e.message)}break;case u.SquareBracket:var a=Wikifier.helpers.parseSquareBracketedMarkup({source:t,matchStart:0});if(a.hasOwnProperty("error"))throw new Error('unable to parse macro argument "'+t+'": '+a.error);if(a.pos<t.length)throw new Error('unable to parse macro argument "'+t+'": unexpected character(s) "'+t.slice(a.pos)+'" (pos: '+a.pos+")");a.isLink?(t={isLink:!0},t.count=a.hasOwnProperty("text")?2:1,t.link=Wikifier.helpers.evalPassageId(a.link),t.text=a.hasOwnProperty("text")?Wikifier.helpers.evalText(a.text):t.link,t.external=!a.forceInternal&&Wikifier.isExternalLink(t.link),t.setFn=a.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(a.setter)):null):a.isImage&&(t=function(e){var t={source:e,isImage:!0};if("data:"!==e.slice(0,5)&&Story.has(e)){var r=Story.get(e);r.tags.includes("Twine.image")&&(t.source=r.text,t.passage=r.title)}return t}(Wikifier.helpers.evalPassageId(a.source)),a.hasOwnProperty("align")&&(t.align=a.align),a.hasOwnProperty("text")&&(t.title=Wikifier.helpers.evalText(a.text)),a.hasOwnProperty("link")&&(t.link=Wikifier.helpers.evalPassageId(a.link),t.external=!a.forceInternal&&Wikifier.isExternalLink(t.link)),t.setFn=a.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(a.setter)):null)}n.push(t)}),n}var u=Lexer.enumFromNames(["Error","Bareword","Expression","String","SquareBracket"]),l=new RegExp(Patterns.space),c=new RegExp(Patterns.notSpace),d=new RegExp("^"+Patterns.variable);return s}()}),Wikifier.Parser.add({name:"link",profiles:["core"],match:"\\[\\[[^[]",handler:function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup(e);if(t.hasOwnProperty("error"))return void e.outputText(e.output,e.matchStart,e.nextMatch);e.nextMatch=t.pos;var r=Wikifier.helpers.evalPassageId(t.link),n=t.hasOwnProperty("text")?Wikifier.helpers.evalText(t.text):r,a=t.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(t.setter)):null,i=(Config.debug?new DebugView(e.output,"link-markup","[[link]]",e.source.slice(e.matchStart,e.nextMatch)):e).output;t.forceInternal||!Wikifier.isExternalLink(r)?Wikifier.createInternalLink(i,r,n,a):Wikifier.createExternalLink(i,r,n)}}),Wikifier.Parser.add({name:"urlLink",profiles:["core"],match:Patterns.url,handler:function(e){
e.outputText(Wikifier.createExternalLink(e.output,e.matchText),e.matchStart,e.nextMatch)}}),Wikifier.Parser.add({name:"image",profiles:["core"],match:"\\[[<>]?[Ii][Mm][Gg]\\[",handler:function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup(e);if(t.hasOwnProperty("error"))return void e.outputText(e.output,e.matchStart,e.nextMatch);e.nextMatch=t.pos;var r=void 0;Config.debug&&(r=new DebugView(e.output,"image-markup",t.hasOwnProperty("link")?"[img[][link]]":"[img[]]",e.source.slice(e.matchStart,e.nextMatch)),r.modes({block:!0}));var n=t.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(t.setter)):null,a=(Config.debug?r:e).output,i=void 0;if(t.hasOwnProperty("link")){var o=Wikifier.helpers.evalPassageId(t.link);a=t.forceInternal||!Wikifier.isExternalLink(o)?Wikifier.createInternalLink(a,o,null,n):Wikifier.createExternalLink(a,o),a.classList.add("link-image")}if(a=jQuery(document.createElement("img")).appendTo(a).get(0),i=Wikifier.helpers.evalPassageId(t.source),"data:"!==i.slice(0,5)&&Story.has(i)){var s=Story.get(i);s.tags.includes("Twine.image")&&(a.setAttribute("data-passage",s.title),i=s.text.trim())}a.src=i,t.hasOwnProperty("text")&&(a.title=Wikifier.helpers.evalText(t.text)),t.hasOwnProperty("align")&&(a.align=t.align)}}),Wikifier.Parser.add({name:"monospacedByBlock",profiles:["block"],match:"^\\{\\{\\{\\n",lookahead:/^\{\{\{\n((?:^[^\n]*\n)+?)(^\}\}\}$\n?)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);if(t&&t.index===e.matchStart){var r=jQuery(document.createElement("pre"));jQuery(document.createElement("code")).text(t[1]).appendTo(r),r.appendTo(e.output),e.nextMatch=this.lookahead.lastIndex}}}),Wikifier.Parser.add({name:"formatByChar",profiles:["core"],match:"''|//|__|\\^\\^|~~|==|\\{\\{\\{",handler:function(e){switch(e.matchText){case"''":e.subWikify(jQuery(document.createElement("strong")).appendTo(e.output).get(0),"''");break;case"//":e.subWikify(jQuery(document.createElement("em")).appendTo(e.output).get(0),"//");break;case"__":e.subWikify(jQuery(document.createElement("u")).appendTo(e.output).get(0),"__");break;case"^^":e.subWikify(jQuery(document.createElement("sup")).appendTo(e.output).get(0),"\\^\\^");break;case"~~":e.subWikify(jQuery(document.createElement("sub")).appendTo(e.output).get(0),"~~");break;case"==":e.subWikify(jQuery(document.createElement("s")).appendTo(e.output).get(0),"==");break;case"{{{":var t=/\{\{\{((?:.|\n)*?)\}\}\}/gm;t.lastIndex=e.matchStart;var r=t.exec(e.source);r&&r.index===e.matchStart&&(jQuery(document.createElement("code")).text(r[1]).appendTo(e.output),e.nextMatch=t.lastIndex)}}}),Wikifier.Parser.add({name:"customStyle",profiles:["core"],match:"@@",terminator:"@@",blockRe:/\s*\n/gm,handler:function(e){var t=Wikifier.helpers.inlineCss(e);this.blockRe.lastIndex=e.nextMatch;var r=this.blockRe.exec(e.source),n=r&&r.index===e.nextMatch,a=jQuery(document.createElement(n?"div":"span")).appendTo(e.output);0===t.classes.length&&""===t.id&&0===Object.keys(t.styles).length?a.addClass("marked"):(t.classes.forEach(function(e){return a.addClass(e)}),""!==t.id&&a.attr("id",t.id),a.css(t.styles)),n?(e.nextMatch+=r[0].length,e.subWikify(a[0],"\\n?"+this.terminator)):e.subWikify(a[0],this.terminator)}}),Wikifier.Parser.add({name:"verbatimText",profiles:["core"],match:'"{3}|<[Nn][Oo][Ww][Ii][Kk][Ii]>',lookahead:/(?:"{3}((?:.|\n)*?)"{3})|(?:<[Nn][Oo][Ww][Ii][Kk][Ii]>((?:.|\n)*?)<\/[Nn][Oo][Ww][Ii][Kk][Ii]>)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(e.nextMatch=this.lookahead.lastIndex,jQuery(document.createElement("span")).addClass("verbatim").text(t[1]||t[2]).appendTo(e.output))}}),Wikifier.Parser.add({name:"horizontalRule",profiles:["core"],match:"^----+$\\n?|<[Hh][Rr]\\s*/?>\\n?",handler:function(e){jQuery(document.createElement("hr")).appendTo(e.output)}}),Wikifier.Parser.add({name:"emdash",profiles:["core"],match:"--",handler:function(e){jQuery(document.createTextNode("—")).appendTo(e.output)}}),Wikifier.Parser.add({name:"doubleDollarSign",profiles:["core"],match:"\\${2}",handler:function(e){jQuery(document.createTextNode("$")).appendTo(e.output)}}),Wikifier.Parser.add({name:"nakedVariable",profiles:["core"],match:Patterns.variable+"(?:(?:\\."+Patterns.identifier+")|(?:\\[\\d+\\])|(?:\\[\"(?:\\\\.|[^\"\\\\])+\"\\])|(?:\\['(?:\\\\.|[^'\\\\])+'\\])|(?:\\["+Patterns.variable+"\\]))*",handler:function(e){var t=toStringOrDefault(State.getVar(e.matchText),null);null===t?jQuery(document.createTextNode(e.matchText)).appendTo(e.output):new Wikifier((Config.debug?new DebugView(e.output,"variable",e.matchText,e.matchText):e).output,t)}}),Wikifier.Parser.add({name:"template",profiles:["core"],match:"\\?"+Patterns.templateName,handler:function(e){var t=e.matchText.slice(1),r=Template.get(t),n=null;switch(r instanceof Array&&(r=r.random()),void 0===r?"undefined":_typeof(r)){case"function":try{n=toStringOrDefault(r.call({name:t}),null)}catch(r){return throwError(e.output,"cannot execute function template ?"+t+": "+r.message,e.source.slice(e.matchStart,e.nextMatch))}break;case"string":n=r}null===n?jQuery(document.createTextNode(e.matchText)).appendTo(e.output):new Wikifier((Config.debug?new DebugView(e.output,"template",e.matchText,e.matchText):e).output,n)}}),Wikifier.Parser.add({name:"heading",profiles:["block"],match:"^!{1,6}",terminator:"\\n",handler:function(e){if(!Wikifier.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));e.subWikify(jQuery(document.createElement("h"+e.matchLength)).appendTo(e.output).get(0),this.terminator)}}),Wikifier.Parser.add({name:"table",profiles:["block"],match:"^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",lookahead:/^\|([^\n]*)\|([fhck]?)$/gm,rowTerminator:"\\|(?:[cfhk]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[cfhk]?$\\n?)",cellTerminator:"(?:\\u0020*)\\|",rowTypes:{c:"caption",f:"tfoot",h:"thead","":"tbody"},handler:function(e){if(!Wikifier.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));var t=jQuery(document.createElement("table")).appendTo(e.output).get(0),r=[],n=null,a=null,i=0,o=void 0;e.nextMatch=e.matchStart;do{this.lookahead.lastIndex=e.nextMatch;var s=this.lookahead.exec(e.source);if(o=s&&s.index===e.nextMatch){var u=s[2];"k"===u?(t.className=s[1],e.nextMatch+=s[0].length+1):(u!==n&&(n=u,a=jQuery(document.createElement(this.rowTypes[u])).appendTo(t)),"c"===n?(a.css("caption-side",0===i?"top":"bottom"),e.nextMatch+=1,e.subWikify(a[0],this.rowTerminator)):this.rowHandler(e,jQuery(document.createElement("tr")).appendTo(a).get(0),r),++i)}}while(o)},rowHandler:function(e,t,r){var n=this,a=new RegExp(this.cellPattern,"gm"),i=0,o=1,s=void 0;do{a.lastIndex=e.nextMatch;var u=a.exec(e.source);if(s=u&&u.index===e.nextMatch){if("~"===u[1]){var l=r[i];l&&(++l.rowCount,l.$element.attr("rowspan",l.rowCount).css("vertical-align","middle")),e.nextMatch=u.index+u[0].length-1}else if(">"===u[1])++o,e.nextMatch=u.index+u[0].length-1;else{if(u[2]){e.nextMatch=u.index+u[0].length;break}!function(){++e.nextMatch;for(var a=Wikifier.helpers.inlineCss(e),s=!1,u=!1,l=void 0;" "===e.source.substr(e.nextMatch,1);)s=!0,++e.nextMatch;"!"===e.source.substr(e.nextMatch,1)?(l=jQuery(document.createElement("th")).appendTo(t),++e.nextMatch):l=jQuery(document.createElement("td")).appendTo(t),r[i]={rowCount:1,$element:l},o>1&&(l.attr("colspan",o),o=1),e.subWikify(l[0],n.cellTerminator)," "===e.matchText.substr(e.matchText.length-2,1)&&(u=!0),a.classes.forEach(function(e){return l.addClass(e)}),""!==a.id&&l.attr("id",a.id),s&&u?a.styles["text-align"]="center":s?a.styles["text-align"]="right":u&&(a.styles["text-align"]="left"),l.css(a.styles),e.nextMatch=e.nextMatch-1}()}++i}}while(s)}}),Wikifier.Parser.add({name:"list",profiles:["block"],match:"^(?:(?:\\*+)|(?:#+))",lookahead:/^(?:(\*+)|(#+))/gm,terminator:"\\n",handler:function(e){if(!Wikifier.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));e.nextMatch=e.matchStart;var t=[e.output],r=null,n=0,a=void 0,i=void 0;do{this.lookahead.lastIndex=e.nextMatch;var o=this.lookahead.exec(e.source);if(a=o&&o.index===e.nextMatch){var s=o[2]?"ol":"ul",u=o[0].length;if(e.nextMatch+=o[0].length,u>n)for(i=n;i<u;++i)t.push(jQuery(document.createElement(s)).appendTo(t[t.length-1]).get(0));else if(u<n)for(i=n;i>u;--i)t.pop();else u===n&&s!==r&&(t.pop(),t.push(jQuery(document.createElement(s)).appendTo(t[t.length-1]).get(0)));n=u,r=s,e.subWikify(jQuery(document.createElement("li")).appendTo(t[t.length-1]).get(0),this.terminator)}}while(a)}}),Wikifier.Parser.add({name:"commentByBlock",profiles:["core"],match:"(?:/(?:%|\\*))|(?:\x3c!--)",lookahead:/(?:\/(%|\*)(?:(?:.|\n)*?)\1\/)|(?:<!--(?:(?:.|\n)*?)-->)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(e.nextMatch=this.lookahead.lastIndex)}}),Wikifier.Parser.add({name:"lineContinuation",profiles:["core"],match:"\\\\"+Patterns.spaceNoTerminator+"*\\n|\\n"+Patterns.spaceNoTerminator+"*\\\\|\\n?\\\\"+Patterns.spaceNoTerminator+"*$|^"+Patterns.spaceNoTerminator+"*\\\\\\n?",handler:function(e){e.nextMatch=e.matchStart+e.matchLength}}),Wikifier.Parser.add({name:"lineBreak",profiles:["core"],match:"\\n|<[Bb][Rr]\\s*/?>",handler:function(e){e.options.nobr||jQuery(document.createElement("br")).appendTo(e.output)}}),Wikifier.Parser.add({name:"htmlCharacterReference",profiles:["core"],match:"(?:(?:&#?[0-9A-Za-z]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9A-Fa-f]|1D[C-Fc-f][0-9A-Fa-f]|20[D-Fd-f][0-9A-Fa-f]|FE2[0-9A-Fa-f])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[0-9A-Za-z]{2,8};)",handler:function(e){jQuery(document.createDocumentFragment()).append(e.matchText).appendTo(e.output)}}),Wikifier.Parser.add({name:"xmlProlog",profiles:["core"],match:"<\\?[Xx][Mm][Ll][^>]*\\?>",handler:function(e){e.nextMatch=e.matchStart+e.matchLength}}),Wikifier.Parser.add({name:"verbatimHtml",profiles:["core"],match:"<[Hh][Tt][Mm][Ll]>",lookahead:/<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/gm,handler:e}),Wikifier.Parser.add({name:"verbatimSvgTag",profiles:["core"],match:"<[Ss][Vv][Gg][^>]*>",lookahead:/(<[Ss][Vv][Gg][^>]*>(?:.|\n)*?<\/[Ss][Vv][Gg]>)/gm,handler:e}),Wikifier.Parser.add({name:"verbatimScriptTag",profiles:["core"],match:"<[Ss][Cc][Rr][Ii][Pp][Tt][^>]*>",lookahead:/(<[Ss][Cc][Rr][Ii][Pp][Tt]*>(?:.|\n)*?<\/[Ss][Cc][Rr][Ii][Pp][Tt]>)/gm,handler:e}),Wikifier.Parser.add({name:"styleTag",profiles:["core"],match:"<[Ss][Tt][Yy][Ll][Ee][^>]*>",lookahead:/(<[Ss][Tt][Yy][Ll][Ee]*>)((?:.|\n)*?)(<\/[Ss][Tt][Yy][Ll][Ee]>)/gm,imageMarkup:new RegExp(Patterns.cssImage,"g"),hasImageMarkup:new RegExp(Patterns.cssImage),handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);if(t&&t.index===e.matchStart){e.nextMatch=this.lookahead.lastIndex;var r=t[2];this.hasImageMarkup.test(r)&&(this.imageMarkup.lastIndex=0,r=r.replace(this.imageMarkup,function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup({source:e,matchStart:0});if(t.hasOwnProperty("error")||t.pos<e.length)return e;var r=t.source;if("data:"!==r.slice(0,5)&&Story.has(r)){var n=Story.get(r);n.tags.includes("Twine.image")&&(r=n.text)}return'url("'+r.replace(/"/g,"%22")+'")'})),jQuery(document.createDocumentFragment()).append(t[1]+r+t[3]).appendTo(e.output)}}}),Wikifier.Parser.add({name:"htmlTag",profiles:["core"],match:"<\\w+(?:\\s+[^\\u0000-\\u001F\\u007F-\\u009F\\s\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*?\"|'[^']*?'|[^\\s\"'=<>`]+))?)*\\s*\\/?>",tagRe:/^<(\w+)/,mediaElements:["audio","img","source","track","video"],nobrElements:["audio","colgroup","datalist","dl","figure","ol","optgroup","picture","select","table","tbody","tfoot","thead","tr","ul","video"],voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],handler:function(e){var t=this.tagRe.exec(e.matchText),r=t&&t[1],n=r&&r.toLowerCase();if(n){var a=this.voidElements.includes(n)||e.matchText.endsWith("/>"),i=this.nobrElements.includes(n),o=void 0,s=void 0;if(!a){o="<\\/"+n+"\\s*>";var u=new RegExp(o,"gim");u.lastIndex=e.matchStart,s=u.exec(e.source)}if(!a&&!s)return throwError(e.output,"cannot find a closing tag for HTML <"+r+">",e.matchText+"…");var l=e.output,c=document.createElement(e.output.tagName),d=void 0;for(c.innerHTML=e.matchText;c.firstChild;)c=c.firstChild;try{this.processAttributeDirectives(c)}catch(t){return throwError(e.output,"<"+n+">: "+t.message,e.matchText+"…")}c.hasAttribute("data-passage")&&(this.processDataAttributes(c,n),Config.debug&&(d=new DebugView(e.output,"html-"+n,n,e.matchText),d.modes({block:"img"===n,nonvoid:s}),l=d.output)),s&&(e.subWikify(c,o,{ignoreTerminatorCase:!0,nobr:i}),d&&jQuery(c).find(".debug.block").length>0&&d.modes({block:!0})),l.appendChild("track"===n?c.cloneNode(!0):c)}},processAttributeDirectives:function(e){[].concat(_toConsumableArray(e.attributes)).forEach(function(t){var r=t.name,n=t.value,a="@"===r[0];if(a||r.startsWith("sc-eval:")){var i=r.slice(a?1:8),o=void 0;try{o=Scripting.evalTwineScript(n)}catch(e){throw new Error('bad evaluation from attribute directive "'+r+'": '+e.message)}try{e.setAttribute(i,o),e.removeAttribute(r)}catch(e){throw new Error('cannot transform attribute directive "'+r+'" into attribute "'+i+'"')}}})},processDataAttributes:function(e,t){var r=e.getAttribute("data-passage");if(null!=r){var n=Wikifier.helpers.evalPassageId(r);if(n!==r&&(r=n,e.setAttribute("data-passage",n)),""!==r)if(this.mediaElements.includes(t)){if("data:"!==r.slice(0,5)&&Story.has(r)){r=Story.get(r);var a=void 0,i=void 0;switch(t){case"audio":case"video":i="Twine."+t;break;case"img":i="Twine.image";break;case"track":i="Twine.vtt";break;case"source":var o=$(e).closest("audio,picture,video");o.length&&(a=o.get(0).tagName.toLowerCase(),i="Twine."+("picture"===a?"image":a))}r.tags.includes(i)&&(e["picture"===a?"srcset":"src"]=r.text.trim())}}else{var s=e.getAttribute("data-setter"),u=void 0;null!=s&&""!==(s=String(s).trim())&&(u=Wikifier.helpers.createShadowSetterCallback(Scripting.parse(s))),Story.has(r)?(e.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(r)&&e.classList.add("link-visited")):e.classList.add("link-broken"),jQuery(e).ariaClick({one:!0},function(){"function"==typeof u&&u.call(this),Engine.play(r)})}}}})}();var Template=function(){function e(e,t){if(!(s(t)||t instanceof Array&&t.length>0&&t.every(s)))throw new Error("invalid template type ("+e+"); templates must be: functions, strings, or an array of either");(e instanceof Array?e:[e]).forEach(function(e){if(i.has(e))throw new Error("cannot clobber existing template ?"+e);if(!o.test(e))throw new Error('invalid template name "'+e+'"');i.set(e,t)})}function t(e){(e instanceof Array?e:[e]).forEach(function(e){return i.delete(e)})}function r(e){return i.has(e)?i.get(e):null}function n(e){return i.has(e)}function a(){return i.size}var i=new Map,o=new RegExp("^(?:"+Patterns.templateName+")$"),s=function(e){var t=void 0===e?"undefined":_typeof(e);return"function"===t||"string"===t};return Object.freeze(Object.defineProperties({},{add:{value:e},delete:{value:t},get:{value:r},has:{value:n},size:{get:a}}))}(),Macro=function(){function e(t,r,a){if(Array.isArray(t))return void t.forEach(function(t){return e(t,r,a)});if(!f.test(t))throw new Error('invalid macro name "'+t+'"');if(n(t))throw new Error("cannot clobber existing macro <<"+t+">>");if(u(t))throw new Error("cannot clobber child tag <<"+t+">> of parent macro"+(1===d[t].length?"":"s")+" <<"+d[t].join(">>, <<")+">>");try{if("object"===(void 0===r?"undefined":_typeof(r)))c[t]=a?clone(r):r;else{if(!n(r))throw new Error("cannot create alias of nonexistent macro <<"+r+">>");c[t]=a?clone(c[r]):c[r]}Object.defineProperty(c,t,{writable:!1}),c[t]._MACRO_API=!0}catch(e){throw"TypeError"===e.name?new Error("cannot clobber protected macro <<"+t+">>"):new Error("unknown error when attempting to add macro <<"+t+">>: ["+e.name+"] "+e.message)}if(c[t].hasOwnProperty("tags"))if(null==c[t].tags)o(t);else{if(!Array.isArray(c[t].tags))throw new Error('bad value for "tags" property of macro <<'+t+">>");o(t,c[t].tags)}}function t(e){if(Array.isArray(e))return void e.forEach(function(e){return t(e)});if(n(e)){c[e].hasOwnProperty("tags")&&s(e);try{Object.defineProperty(c,e,{writable:!0}),delete c[e]}catch(t){throw new Error("unknown error removing macro <<"+e+">>: "+t.message)}}else if(u(e))throw new Error("cannot remove child tag <<"+e+">> of parent macro <<"+d[e]+">>")}function r(){return 0===Object.keys(c).length}function n(e){return c.hasOwnProperty(e)}function a(e){var t=null;return n(e)&&"function"==typeof c[e].handler?t=c[e]:macros.hasOwnProperty(e)&&"function"==typeof macros[e].handler&&(t=macros[e]),t}function i(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"init";Object.keys(c).forEach(function(t){"function"==typeof c[t][e]&&c[t][e](t)}),Object.keys(macros).forEach(function(t){"function"==typeof macros[t][e]&&macros[t][e](t)})}function o(e,t){if(!e)throw new Error("no parent specified");for(var r=["/"+e,"end"+e],a=[].concat(r,Array.isArray(t)?t:[]),i=0;i<a.length;++i){var o=a[i];if(n(o))throw new Error("cannot register tag for an existing macro");u(o)?d[o].includes(e)||(d[o].push(e),d[o].sort()):d[o]=[e]}}function s(e){if(!e)throw new Error("no parent specified");Object.keys(d).forEach(function(t){var r=d[t].indexOf(e);-1!==r&&(1===d[t].length?delete d[t]:d[t].splice(r,1))})}function u(e){return d.hasOwnProperty(e)}function l(e){return u(e)?d[e]:null}var c={},d={},f=new RegExp("^(?:"+Patterns.macroName+")$");return Object.freeze(Object.defineProperties({},{add:{value:e},delete:{value:t},isEmpty:{value:r},has:{value:n},get:{value:a},init:{value:i},tags:{value:Object.freeze(Object.defineProperties({},{register:{value:o},unregister:{value:s},has:{value:u},get:{value:l}}))},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),MacroContext=function(){return function(){function e(t){_classCallCheck(this,e);var r=Object.assign({parent:null,macro:null,name:"",args:null,payload:null,parser:null,source:""},t);if(null===r.macro||""===r.name||null===r.parser)throw new TypeError("context object missing required properties");Object.defineProperties(this,{self:{value:r.macro},name:{value:r.name},args:{value:r.args},payload:{value:r.payload},source:{value:r.source},parent:{value:r.parent},parser:{value:r.parser},_output:{value:r.parser.output},_shadows:{writable:!0,value:null},_debugView:{writable:!0,value:null},_debugViewEnabled:{writable:!0,value:Config.debug}})}return _createClass(e,[{key:"contextHas",value:function(e){for(var t=this;null!==(t=t.parent);)if(e(t))return!0;return!1}},{key:"contextSelect",value:function(e){for(var t=this;null!==(t=t.parent);)if(e(t))return t;return null}},{key:"contextSelectAll",value:function(e){for(var t=[],r=this;null!==(r=r.parent);)e(r)&&t.push(r);return t}},{key:"addShadow",value:function(){var e=this;this._shadows||(this._shadows=new Set);for(var t=new RegExp("^"+Patterns.variable+"$"),r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];n.flat(1/0).forEach(function(r){if("string"!=typeof r)throw new TypeError("variable name must be a string; type: "+(void 0===r?"undefined":_typeof(r)));if(!t.test(r))throw new Error('invalid variable name "'+r+'"');e._shadows.add(r)})}},{key:"createShadowWrapper",value:function(e,t,r){var n=this,a=void 0;return"function"==typeof e&&(a={},this.shadowView.forEach(function(e){var t=e.slice(1),r="$"===e[0]?State.variables:State.temporary;a[e]=r[t]})),function(){for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];if("function"==typeof r&&r.apply(this,o),"function"==typeof e){var u=Object.keys(a),l=u.length>0?{}:null,c=Wikifier.Parser.get("macro"),d=void 0;try{u.forEach(function(e){var t=e.slice(1),r="$"===e[0]?State.variables:State.temporary;r.hasOwnProperty(t)&&(l[t]=r[t]),r[t]=a[e]}),d=c.context,c.context=n,e.apply(this,o)}finally{d!==undefined&&(c.context=d),u.forEach(function(e){var t=e.slice(1),r="$"===e[0]?State.variables:State.temporary;a[e]=r[t],l.hasOwnProperty(t)?r[t]=l[t]:delete r[t]})}}"function"==typeof t&&t.apply(this,o)}}},{key:"createDebugView",value:function(e,t){return this._debugView=new DebugView(this._output,"macro",e||this.name,t||this.source),null!==this.payload&&this.payload.length>0&&this._debugView.modes({nonvoid:!0}),this._debugViewEnabled=!0,this._debugView}},{key:"removeDebugView",value:function(){null!==this._debugView&&(this._debugView.remove(),this._debugView=null),this._debugViewEnabled=!1}},{key:"error",value:function(e,t){return throwError(this._output,"<<"+this.name+">>: "+e,t||this.source)}},{key:"output",get:function(){return this._debugViewEnabled?this.debugView.output:this._output}},{key:"shadows",get:function(){return[].concat(_toConsumableArray(this._shadows))}},{key:"shadowView",get:function(){var e=new Set;return this.contextSelectAll(function(e){return e._shadows}).forEach(function(t){return t._shadows.forEach(function(t){return e.add(t)})}),[].concat(_toConsumableArray(e))}},{key:"debugView",get:function(){return this._debugViewEnabled?null!==this._debugView?this._debugView:this.createDebugView():null}}]),e}()}();!function(){if(Macro.add("capture",{skipArgs:!0,tags:null,handler:function(){if(0===this.args.raw.length)return this.error("no story/temporary variable list specified");var e={};try{for(var t=new RegExp("("+Patterns.variable+")","g"),r=void 0;null!==(r=t.exec(this.args.raw));){var n=r[1],a=n.slice(1),i="$"===n[0]?State.variables:State.temporary;i.hasOwnProperty(a)&&(e[a]=i[a]),this.addShadow(n)}new Wikifier(this.output,this.payload[0].contents)}finally{this.shadows.forEach(function(t){var r=t.slice(1),n="$"===t[0]?State.variables:State.temporary;e.hasOwnProperty(r)?n[r]=e[r]:delete n[r]})}}}),Macro.add("set",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(e){return this.error("bad evaluation: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("unset",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no story/temporary variable list specified");for(var e=new RegExp("State\\.(variables|temporary)\\.("+Patterns.identifier+")","g"),t=void 0;null!==(t=e.exec(this.args.full));){var r=State[t[1]],n=t[2];r.hasOwnProperty(n)&&delete r[n]}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remember",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(e){return this.error("bad evaluation: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}for(var e=storage.get("remember")||{},t=new RegExp("State\\.variables\\.("+Patterns.identifier+")","g"),r=void 0;null!==(r=t.exec(this.args.full));){var n=r[1];e[n]=State.variables[n]}if(!storage.set("remember",e))return this.error("unknown error, cannot remember: "+this.args.raw);Config.debug&&this.debugView.modes({hidden:!0})},init:function(){var e=storage.get("remember");e&&Object.keys(e).forEach(function(t){return State.variables[t]=e[t]})}}),Macro.add("forget",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no story variable list specified");for(var e=storage.get("remember"),t=new RegExp("State\\.variables\\.("+Patterns.identifier+")","g"),r=void 0,n=!1;null!==(r=t.exec(this.args.full));){var a=r[1];State.variables.hasOwnProperty(a)&&delete State.variables[a],e&&e.hasOwnProperty(a)&&(n=!0,delete e[a])}if(n)if(0===Object.keys(e).length){if(!storage.delete("remember"))return this.error("unknown error, cannot update remember store")}else if(!storage.set("remember",e))return this.error("unknown error, cannot update remember store");Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("run","set"),Macro.add("script",{skipArgs:!0,tags:null,handler:function(){var e=document.createDocumentFragment();try{Scripting.evalJavaScript(this.payload[0].contents,e)}catch(e){return this.error("bad evaluation: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e),this.source+this.payload[0].contents+"<</"+this.name+">>")}Config.debug&&this.createDebugView(),e.hasChildNodes()&&this.output.appendChild(e)}}),Macro.add("include",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var e=void 0;if(e="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],!Story.has(e))return this.error('passage "'+e+'" does not exist');Config.debug&&this.debugView.modes({block:!0}),e=Story.get(e);var t=void 0;t=this.args[1]?jQuery(document.createElement(this.args[1])).addClass(e.domId+" macro-"+this.name).attr("data-passage",e.title).appendTo(this.output):jQuery(this.output),t.wiki(e.processText())}}),Macro.add("nobr",{skipArgs:!0,tags:null,handler:function(){new Wikifier(this.output,this.payload[0].contents.replace(/^\n+|\n+$/g,"").replace(/\n+/g," "))}}),Macro.add(["print","=","-"],{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{var e=toStringOrDefault(Scripting.evalJavaScript(this.args.full),null);null!==e&&new Wikifier(this.output,"-"===this.name?Util.escape(e):e)}catch(e){return this.error("bad evaluation: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}}}),Macro.add("silently",{skipArgs:!0,tags:null,handler:function(){var e=document.createDocumentFragment();if(new Wikifier(e,this.payload[0].contents.trim()),Config.debug)this.debugView.modes({hidden:!0}),this.output.appendChild(e);else{var t=[].concat(_toConsumableArray(e.querySelectorAll(".error"))).map(function(e){return e.textContent});if(t.length>0)return this.error("error"+(1===t.length?"":"s")+" within contents ("+t.join("; ")+")",this.source+this.payload[0].contents+"<</"+this.name+">>")}}}),Macro.add("display","include"),Macro.add("if",{skipArgs:!0,tags:["elseif","else"],handler:function(){var e=void 0;try{var t=this.payload.length;for(e=0;e<t;++e)switch(this.payload[e].name){case"else":if(this.payload[e].args.raw.length>0)return/^\s*if\b/i.test(this.payload[e].args.raw)?this.error('whitespace is not allowed between the "else" and "if" in <<elseif>> clause'+(e>0?" (#"+e+")":"")):this.error("<<else>> does not accept a conditional expression (perhaps you meant to use <<elseif>>), invalid: "+this.payload[e].args.raw);if(e+1!==t)return this.error("<<else>> must be the final clause");break;default:if(0===this.payload[e].args.full.length)return this.error("no conditional expression specified for <<"+this.payload[e].name+">> clause"+(e>0?" (#"+e+")":""));if(Config.macros.ifAssignmentError&&/[^!=&^|<>*\/%+-]=[^=]/.test(this.payload[e].args.full))return this.error("assignment operator found within <<"+this.payload[e].name+">> clause"+(e>0?" (#"+e+")":"")+" (perhaps you meant to use an equality operator: ==, ===, eq, is), invalid: "+this.payload[e].args.raw)}var r=Scripting.evalJavaScript,n=!1;for(e=0;e<t;++e){if(Config.debug&&this.createDebugView(this.payload[e].name,this.payload[e].source).modes({nonvoid:!1}),"else"===this.payload[e].name||r(this.payload[e].args.full)){n=!0,new Wikifier(this.output,this.payload[e].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++e;e<t;++e)this.createDebugView(this.payload[e].name,this.payload[e].source).modes({nonvoid:!1,hidden:!0,invalid:!0});this.createDebugView("/"+this.name,"<</"+this.name+">>").modes({nonvoid:!1,hidden:!n,invalid:!n})}}catch(t){return this.error("bad conditional expression in <<"+(0===e?"if":"elseif")+">> clause"+(e>0?" (#"+e+")":"")+": "+("object"===(void 0===t?"undefined":_typeof(t))?t.message:t))}}}),Macro.add("switch",{skipArgs:["switch"],tags:["case","default"],handler:function(){if(0===this.args.full.length)return this.error("no expression specified");var e=this.payload.length;if(1===e)return this.error("no cases specified");var t=void 0;for(t=1;t<e;++t)switch(this.payload[t].name){case"default":if(this.payload[t].args.length>0)return this.error("<<default>> does not accept values, invalid: "+this.payload[t].args.raw);if(t+1!==e)return this.error("<<default>> must be the final case");break;default:if(0===this.payload[t].args.length)return this.error("no value(s) specified for <<"+this.payload[t].name+">> (#"+t+")")}var r=void 0;try{r=Scripting.evalJavaScript(this.args.full)}catch(e){return this.error("bad evaluation: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}var n=this.debugView,a=!1;for(Config.debug&&n.modes({nonvoid:!1,hidden:!0}),t=1;t<e;++t){if(Config.debug&&this.createDebugView(this.payload[t].name,this.payload[t].source).modes({nonvoid:!1}),"default"===this.payload[t].name||this.payload[t].args.some(function(e){return e===r})){a=!0,new Wikifier(this.output,this.payload[t].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++t;t<e;++t)this.createDebugView(this.payload[t].name,this.payload[t].source).modes({nonvoid:!1,hidden:!0,invalid:!0});n.modes({nonvoid:!1,hidden:!0,invalid:!a}),this.createDebugView("/"+this.name,"<</"+this.name+">>").modes({nonvoid:!1,hidden:!0,invalid:!a})}}}),Macro.add("for",{skipArgs:!0,tags:null,_hasRangeRe:new RegExp("^\\S"+Patterns.anyChar+"*?\\s+range\\s+\\S"+Patterns.anyChar+"*?$"),_rangeRe:new RegExp("^(?:State\\.(variables|temporary)\\.("+Patterns.identifier+")\\s*,\\s*)?State\\.(variables|temporary)\\.("+Patterns.identifier+")\\s+range\\s+(\\S"+Patterns.anyChar+"*?)$"),_3PartRe:/^([^;]*?)\s*;\s*([^;]*?)\s*;\s*([^;]*?)$/,handler:function(){var e=this.args.full.trim(),t=this.payload[0].contents.replace(/\n$/,"");if(0===e.length)this.self._handleFor.call(this,t,null,!0,null);else if(this.self._hasRangeRe.test(e)){var r=e.match(this.self._rangeRe);if(null===r)return this.error("invalid range form syntax, format: [index ,] value range collection");this.self._handleForRange.call(this,t,{type:r[1],name:r[2]},{type:r[3],name:r[4]},r[5])}else{var n=void 0,a=void 0,i=void 0;if(-1===e.indexOf(";")){if(/^\S+\s+in\s+\S+/i.test(e))return this.error("invalid syntax, for…in is not supported; see: for…range");if(/^\S+\s+of\s+\S+/i.test(e))return this.error("invalid syntax, for…of is not supported; see: for…range");a=e}else{var o=e.match(this.self._3PartRe);if(null===o)return this.error("invalid 3-part conditional form syntax, format: [init] ; [condition] ; [post]");n=o[1],a=o[2].trim(),i=o[3],0===a.length&&(a=!0)}this.self._handleFor.call(this,t,n,a,i)}},_handleFor:function(e,t,r,n){var a=Scripting.evalJavaScript,i=!0,o=Config.macros.maxLoopIterations;Config.debug&&this.debugView.modes({block:!0});try{if(TempState.break=null,t)try{a(t)}catch(e){return this.error("bad init expression: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}for(;a(r);){if(--o<0)return this.error("exceeded configured maximum loop iterations ("+Config.macros.maxLoopIterations+")");if(new Wikifier(this.output,i?e.replace(/^\n/,""):e),i&&(i=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}if(n)try{a(n)}catch(e){return this.error("bad post expression: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}}}catch(e){return this.error("bad conditional expression: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}finally{TempState.break=null}},_handleForRange:function(e,t,r,n){var a=!0,i=void 0;try{i=this.self._toRangeList(n)}catch(e){return this.error(e.message)}Config.debug&&this.debugView.modes({block:!0});try{TempState.break=null;for(var o=0;o<i.length;++o)if(t.name&&(State[t.type][t.name]=i[o][0]),
State[r.type][r.name]=i[o][1],new Wikifier(this.output,a?e.replace(/^\n/,""):e),a&&(a=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}}catch(e){return this.error("object"===(void 0===e?"undefined":_typeof(e))?e.message:e)}finally{TempState.break=null}},_toRangeList:function(e){var t=Scripting.evalJavaScript,r=void 0;try{r=t("{"===e[0]?"("+e+")":e)}catch(e){if("object"!==(void 0===e?"undefined":_typeof(e)))throw new Error("bad range expression: "+e);throw e.message="bad range expression: "+e.message,e}var n=void 0;switch(void 0===r?"undefined":_typeof(r)){case"string":n=[];for(var a=0;a<r.length;){var i=Util.charAndPosAt(r,a);n.push([a,i.char]),a=1+i.end}break;case"object":if(Array.isArray(r))n=r.map(function(e,t){return[t,e]});else if(r instanceof Set)n=[].concat(_toConsumableArray(r)).map(function(e,t){return[t,e]});else if(r instanceof Map)n=[].concat(_toConsumableArray(r.entries()));else{if("Object"!==Util.toStringTag(r))throw new Error("unsupported range expression type: "+Util.toStringTag(r));n=Object.keys(r).map(function(e){return[e,r[e]]})}break;default:throw new Error("unsupported range expression type: "+(void 0===r?"undefined":_typeof(r)))}return n}}),Macro.add(["break","continue"],{skipArgs:!0,handler:function(){if(!this.contextHas(function(e){return"for"===e.name}))return this.error("must only be used in conjunction with its parent macro <<for>>");TempState.break="continue"===this.name?1:2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["button","link"],{isAsync:!0,tags:null,handler:function(){var e=this;if(0===this.args.length)return this.error("no "+("button"===this.name?"button":"link")+" text specified");var t=jQuery(document.createElement("button"===this.name?"button":"a")),r=void 0;if("object"===_typeof(this.args[0]))if(this.args[0].isImage){var n=jQuery(document.createElement("img")).attr("src",this.args[0].source).appendTo(t);this.args[0].hasOwnProperty("passage")&&n.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&n.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&n.attr("align",this.args[0].align),this.args[0].hasOwnProperty("link")&&(r=this.args[0].link),r=this.args[0].link}else t.append(document.createTextNode(this.args[0].text)),r=this.args[0].link;else t.wikiWithOptions({profile:"core"},this.args[0]),r=this.args.length>1?this.args[1]:undefined;null!=r?(t.attr("data-passage",r),Story.has(r)?(t.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(r)&&t.addClass("link-visited")):t.addClass("link-broken")):t.addClass("link-internal"),t.addClass("macro-"+this.name).ariaClick({namespace:".macros",one:null!=r},this.createShadowWrapper(""!==this.payload[0].contents?function(){return Wikifier.wikifyEval(e.payload[0].contents.trim())}:null,null!=r?function(){return Engine.play(r)}:null)).appendTo(this.output)}}),Macro.add("checkbox",{isAsync:!0,handler:function(){if(this.args.length<3){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("unchecked value"),this.args.length<3&&e.push("checked value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');var r=Util.slugify(t),n=this.args[1],a=this.args[2],i=document.createElement("input");jQuery(i).attr({id:this.name+"-"+r,name:this.name+"-"+r,type:"checkbox",tabindex:0}).addClass("macro-"+this.name).on("change.macros",this.createShadowWrapper(function(){State.setVar(t,this.checked?a:n)})).appendTo(this.output),this.args.length>3&&"checked"===this.args[3]?(i.checked=!0,State.setVar(t,a)):State.setVar(t,n)}}),Macro.add(["cycle","listbox"],{isAsync:!0,skipArgs:["optionsfrom"],tags:["option","optionsfrom"],handler:function(){var e=this;if(0===this.args.length)return this.error("no variable name specified");if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');var r=Util.slugify(t),n=this.payload.length;if(1===n)return this.error("no options specified");for(var a=this.args.length>1&&"autoselect"===this.args[1],i=[],o={option:0,optionsfrom:0},s=-1,u=1;u<n;++u){var l=this.payload[u];if("option"===l.name){if(++o.option,0===l.args.length)return this.error("no arguments specified for <<"+l.name+">> (#"+o.option+")");if(i.push({label:String(l.args[0]),value:1===l.args.length?l.args[0]:l.args[1]}),l.args.length>2&&"selected"===l.args[2]){if(a)return this.error("cannot specify both the autoselect and selected keywords");if(-1!==s)return this.error("multiple selected keywords specified for <<"+l.name+">> (#"+(s+1)+" & #"+o.option+")");s=i.length-1}}else{var c=function(){if(++o.optionsfrom,0===l.args.full.length)return{v:e.error("no expression specified for <<"+l.name+">> (#"+o.optionsfrom+")")};var t=void 0;try{var r=l.args.full;t=Scripting.evalJavaScript("{"===r[0]?"("+r+")":r)}catch(t){return{v:e.error("bad evaluation: "+("object"===(void 0===t?"undefined":_typeof(t))?t.message:t))}}if("object"!==(void 0===t?"undefined":_typeof(t))||null===t)return{v:e.error("expression must yield a supported collection or generic object (type: "+(null===t?"null":void 0===t?"undefined":_typeof(t))+")")};if(t instanceof Array||t instanceof Set)t.forEach(function(e){return i.push({label:String(e),value:e})});else if(t instanceof Map)t.forEach(function(e,t){return i.push({label:String(t),value:e})});else{var n=Util.toStringTag(t);if("Object"!==n)return{v:e.error("expression must yield a supported collection or generic object (object type: "+n+")")};Object.keys(t).forEach(function(e){return i.push({label:e,value:t[e]})})}}();if("object"===(void 0===c?"undefined":_typeof(c)))return c.v}}if(-1===s)if(a){var d=Util.sameValueZero,f=State.getVar(t),p=i.findIndex(function(e){return d(e.value,f)});s=-1===p?0:p}else s=0;if("cycle"===this.name){var h=s;jQuery(document.createElement("a")).wikiWithOptions({profile:"core"},i[s].label).addClass("macro-"+this.name).ariaClick({namespace:".macros"},this.createShadowWrapper(function(){h=(h+1)%i.length,$(this).empty().wikiWithOptions({profile:"core"},i[h].label),State.setVar(t,i[h].value)})).appendTo(this.output)}else{var g=jQuery(document.createElement("select"));i.forEach(function(e,t){jQuery(document.createElement("option")).val(t).text(e.label).appendTo(g)}),g.attr({id:this.name+"-"+r,name:this.name+"-"+r,tabindex:0}).addClass("macro-"+this.name).val(s).on("change.macros",this.createShadowWrapper(function(){State.setVar(t,i[Number(this.value)].value)})).appendTo(this.output)}State.setVar(t,i[s].value)}}),Macro.add(["linkappend","linkprepend","linkreplace"],{isAsync:!0,tags:null,handler:function(){var e=this;if(0===this.args.length)return this.error("no link text specified");var t=jQuery(document.createElement("a")),r=jQuery(document.createElement("span")),n=this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]);t.wikiWithOptions({profile:"core"},this.args[0]).addClass("link-internal macro-"+this.name).ariaClick({namespace:".macros",one:!0},this.createShadowWrapper(function(){if("linkreplace"===e.name?t.remove():t.wrap('<span class="macro-'+e.name+'"></span>').replaceWith(function(){return t.html()}),""!==e.payload[0].contents){var a=document.createDocumentFragment();new Wikifier(a,e.payload[0].contents),r.append(a)}n&&setTimeout(function(){return r.removeClass("macro-"+e.name+"-in")},Engine.minDomActionDelay)})).appendTo(this.output),r.addClass("macro-"+this.name+"-insert"),n&&r.addClass("macro-"+this.name+"-in"),"linkprepend"===this.name?r.insertBefore(t):r.insertAfter(t)}}),Macro.add("radiobutton",{isAsync:!0,handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("checked value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');var r=Util.slugify(t),n=this.args[1],a=document.createElement("input");TempState.hasOwnProperty(this.name)||(TempState[this.name]={}),TempState[this.name].hasOwnProperty(r)||(TempState[this.name][r]=0),jQuery(a).attr({id:this.name+"-"+r+"-"+TempState[this.name][r]++,name:this.name+"-"+r,type:"radio",tabindex:0}).addClass("macro-"+this.name).on("change.macros",this.createShadowWrapper(function(){this.checked&&State.setVar(t,n)})).appendTo(this.output),this.args.length>2&&"checked"===this.args[2]&&(a.checked=!0,State.setVar(t,n))}}),Macro.add("textarea",{isAsync:!0,handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("default value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');Config.debug&&this.debugView.modes({block:!0});var r=Util.slugify(t),n=this.args[1],a="autofocus"===this.args[2],i=document.createElement("textarea");jQuery(i).attr({id:this.name+"-"+r,name:this.name+"-"+r,rows:4,tabindex:0}).addClass("macro-"+this.name).on("change.macros",this.createShadowWrapper(function(){State.setVar(t,this.value)})).appendTo(this.output),State.setVar(t,n),i.textContent=n,a&&(i.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:"+i.id]=function(e){delete postdisplay[e],setTimeout(function(){return i.focus()},Engine.minDomActionDelay)})}}),Macro.add("textbox",{isAsync:!0,handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("default value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');Config.debug&&this.debugView.modes({block:!0});var r=Util.slugify(t),n=this.args[1],a=document.createElement("input"),i=!1,o=void 0;this.args.length>3?(o=this.args[2],i="autofocus"===this.args[3]):this.args.length>2&&("autofocus"===this.args[2]?i=!0:o=this.args[2]),"object"===(void 0===o?"undefined":_typeof(o))&&(o=o.link),jQuery(a).attr({id:this.name+"-"+r,name:this.name+"-"+r,type:"text",tabindex:0}).addClass("macro-"+this.name).on("change.macros",this.createShadowWrapper(function(){State.setVar(t,this.value)})).on("keypress.macros",this.createShadowWrapper(function(e){13===e.which&&(e.preventDefault(),State.setVar(t,this.value),null!=o&&Engine.play(o))})).appendTo(this.output),State.setVar(t,n),a.value=n,i&&(a.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:"+a.id]=function(e){delete postdisplay[e],setTimeout(function(){return a.focus()},Engine.minDomActionDelay)})}}),Macro.add("click","link"),Macro.add("actions",{handler:function(){for(var e=jQuery(document.createElement("ul")).addClass(this.name).appendTo(this.output),t=0;t<this.args.length;++t){var r=void 0,n=void 0,a=void 0,i=void 0;"object"===_typeof(this.args[t])?this.args[t].isImage?(a=jQuery(document.createElement("img")).attr("src",this.args[t].source),this.args[t].hasOwnProperty("passage")&&a.attr("data-passage",this.args[t].passage),this.args[t].hasOwnProperty("title")&&a.attr("title",this.args[t].title),this.args[t].hasOwnProperty("align")&&a.attr("align",this.args[t].align),r=this.args[t].link,i=this.args[t].setFn):(n=this.args[t].text,r=this.args[t].link,i=this.args[t].setFn):n=r=this.args[t],State.variables.hasOwnProperty("#actions")&&State.variables["#actions"].hasOwnProperty(r)&&State.variables["#actions"][r]||jQuery(Wikifier.createInternalLink(jQuery(document.createElement("li")).appendTo(e),r,null,function(e,t){return function(){State.variables.hasOwnProperty("#actions")||(State.variables["#actions"]={}),State.variables["#actions"][e]=!0,"function"==typeof t&&t()}}(r,i))).addClass("macro-"+this.name).append(a||document.createTextNode(n))}}}),Macro.add(["back","return"],{handler:function(){if(this.args.length>1)return this.error("too many arguments specified, check the documentation for details");var e=-1,t=void 0,r=void 0,n=void 0;if(1===this.args.length&&("object"===_typeof(this.args[0])?this.args[0].isImage?(n=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&n.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&n.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&n.attr("align",this.args[0].align),this.args[0].hasOwnProperty("link")&&(t=this.args[0].link)):1===this.args[0].count?t=this.args[0].link:(r=this.args[0].text,t=this.args[0].link):1===this.args.length&&(r=this.args[0])),null==t){for(var a=State.length-2;a>=0;--a)if(State.history[a].title!==State.passage){e=a,t=State.history[a].title;break}if(null==t&&"return"===this.name)for(var i=State.expired.length-1;i>=0;--i)if(State.expired[i]!==State.passage){t=State.expired[i];break}}else{if(!Story.has(t))return this.error('passage "'+t+'" does not exist');if("back"===this.name){for(var o=State.length-2;o>=0;--o)if(State.history[o].title===t){e=o;break}if(-1===e)return this.error('cannot find passage "'+t+'" in the current story history')}}if(null==t)return this.error("cannot find passage");var s=void 0;s="back"!==this.name||-1!==e?jQuery(document.createElement("a")).addClass("link-internal").ariaClick({one:!0},"return"===this.name?function(){return Engine.play(t)}:function(){return Engine.goTo(e)}):jQuery(document.createElement("span")).addClass("link-disabled"),s.addClass("macro-"+this.name).append(n||document.createTextNode(r||L10n.get("macro"+this.name.toUpperFirst()+"Text"))).appendTo(this.output)}}),Macro.add("choice",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var e=State.passage,t=void 0,r=void 0,n=void 0,a=void 0;if(1===this.args.length?"object"===_typeof(this.args[0])?this.args[0].isImage?(n=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&n.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&n.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&n.attr("align",this.args[0].align),t=this.args[0].link,a=this.args[0].setFn):(r=this.args[0].text,t=this.args[0].link,a=this.args[0].setFn):r=t=this.args[0]:(t=this.args[0],r=this.args[1]),State.variables.hasOwnProperty("#choice")&&State.variables["#choice"].hasOwnProperty(e)&&State.variables["#choice"][e])return void jQuery(document.createElement("span")).addClass("link-disabled macro-"+this.name).attr("tabindex",-1).append(n||document.createTextNode(r)).appendTo(this.output);jQuery(Wikifier.createInternalLink(this.output,t,null,function(){State.variables.hasOwnProperty("#choice")||(State.variables["#choice"]={}),State.variables["#choice"][e]=!0,"function"==typeof a&&a()})).addClass("macro-"+this.name).append(n||document.createTextNode(r))}}),Macro.add(["addclass","toggleclass"],{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("selector"),this.args.length<2&&e.push("class names"),this.error("no "+e.join(" or ")+" specified")}var t=jQuery(this.args[0]);if(0===t.length)return this.error('no elements matched the selector "'+this.args[0]+'"');switch(this.name){case"addclass":t.addClass(this.args[1].trim());break;case"toggleclass":t.toggleClass(this.args[1].trim())}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeclass",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);if(0===e.length)return this.error('no elements matched the selector "'+this.args[0]+'"');this.args.length>1?e.removeClass(this.args[1].trim()):e.removeClass(),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("copy",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);if(0===e.length)return this.error('no elements matched the selector "'+this.args[0]+'"');jQuery(this.output).append(e.html()),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["append","prepend","replace"],{tags:null,handler:function(){var e=this;if(0===this.args.length)return this.error("no selector specified");var t=jQuery(this.args[0]);if(0===t.length)return this.error('no elements matched the selector "'+this.args[0]+'"');if(""!==this.payload[0].contents){var r=this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]),n=void 0;switch(r?(n=jQuery(document.createElement("span")),n.addClass("macro-"+this.name+"-insert macro-"+this.name+"-in"),setTimeout(function(){return n.removeClass("macro-"+e.name+"-in")},Engine.minDomActionDelay)):n=jQuery(document.createDocumentFragment()),n.wiki(this.payload[0].contents),this.name){case"replace":t.empty();case"append":t.append(n);break;case"prepend":t.prepend(n)}}else"replace"===this.name&&t.empty();Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remove",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);if(0===e.length)return this.error('no elements matched the selector "'+this.args[0]+'"');e.remove(),Config.debug&&this.debugView.modes({hidden:!0})}}),Has.audio){var e=function(e,t){return'only one playback action allowed per invocation, "'+e+'" cannot be combined with "'+t+'"'};Macro.add("audio",{handler:function(){if(this.args.length<2){var t=[];return this.args.length<1&&t.push("track and/or group IDs"),this.args.length<2&&t.push("actions"),this.error("no "+t.join(" or ")+" specified")}var r=void 0;try{r=SimpleAudio.select(this.args[0])}catch(e){return this.error(e.message)}for(var n=this.args.slice(1),a=void 0,i=5,o=void 0,s=void 0,u=void 0,l=void 0,c=void 0,d=void 0;n.length>0;){var f=n.shift(),p=void 0;switch(f){case"load":case"pause":case"play":case"stop":case"unload":if(a)return this.error(e(f,a));a=f;break;case"fadein":if(a)return this.error(e(f,a));a="fade",o=1;break;case"fadeout":if(a)return this.error(e(f,a));a="fade",o=0;break;case"fadeto":if(a)return this.error(e(f,a));if(0===n.length)return this.error("fadeto missing required level value");if(a="fade",p=n.shift(),o=Number.parseFloat(p),Number.isNaN(o)||!Number.isFinite(o))return this.error("cannot parse fadeto: "+p);break;case"fadeoverto":if(a)return this.error(e(f,a));if(n.length<2){var h=[];return n.length<1&&h.push("seconds"),n.length<2&&h.push("level"),this.error("fadeoverto missing required "+h.join(" and ")+" value"+(h.length>1?"s":""))}if(a="fade",p=n.shift(),i=Number.parseFloat(p),Number.isNaN(i)||!Number.isFinite(i))return this.error("cannot parse fadeoverto: "+p);if(p=n.shift(),o=Number.parseFloat(p),Number.isNaN(o)||!Number.isFinite(o))return this.error("cannot parse fadeoverto: "+p);break;case"volume":if(0===n.length)return this.error("volume missing required level value");if(p=n.shift(),d=Number.parseFloat(p),Number.isNaN(d)||!Number.isFinite(d))return this.error("cannot parse volume: "+p);break;case"mute":case"unmute":u="mute"===f;break;case"time":if(0===n.length)return this.error("time missing required seconds value");if(p=n.shift(),c=Number.parseFloat(p),Number.isNaN(c)||!Number.isFinite(c))return this.error("cannot parse time: "+p);break;case"loop":case"unloop":s="loop"===f;break;case"goto":if(0===n.length)return this.error("goto missing required passage title");if(p=n.shift(),l="object"===(void 0===p?"undefined":_typeof(p))?p.link:p,!Story.has(l))return this.error('passage "'+l+'" does not exist');break;default:return this.error("unknown action: "+f)}}try{if(null!=d&&r.volume(d),null!=c&&r.time(c),null!=u&&r.mute(u),null!=s&&r.loop(s),null!=l){var g="ended.macros.macro-"+this.name+"_goto";r.off(g).one(g,function(){r.off(g),Engine.play(l)})}switch(a){case"fade":r.fade(i,o);break;case"load":r.load();break;case"pause":r.pause();break;case"play":r.play();break;case"stop":r.stop();break;case"unload":r.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(e){return this.error("error executing action: "+e.message)}}}),Macro.add("cacheaudio",{handler:function(){var e=this;if(this.args.length<2){var t=[];return this.args.length<1&&t.push("track ID"),this.args.length<2&&t.push("sources"),this.error("no "+t.join(" or ")+" specified")}var r=String(this.args[0]).trim(),n=/^format:\s*([\w-]+)\s*;\s*/i;try{SimpleAudio.tracks.add(r,this.args.slice(1).map(function(t){if(n.test(t)){if(Config.debug)return e.error('track ID "'+r+'": format specifier migration required, "format:formatId;" → "formatId|"');t=t.replace(n,"$1|")}return t}))}catch(e){return this.error(e.message)}if(Config.debug&&!SimpleAudio.tracks.get(r).hasSource())return this.error('track ID "'+r+'": no supported audio sources found');Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("createaudiogroup",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no group ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var e=String(this.args[0]).trim(),t=[],r=1,n=this.payload.length;r<n;++r){if(this.payload[r].args.length<1)return this.error("no track ID specified");t.push(String(this.payload[r].args[0]).trim()),Config.debug&&this.createDebugView(this.payload[r].name,this.payload[r].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.groups.add(e,t)}catch(e){return this.error(e.message)}Config.debug&&this.createDebugView("/"+this.name,"<</"+this.name+">>").modes({nonvoid:!1,hidden:!0})}}),Macro.add("createplaylist",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no list ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");var e=Macro.get("playlist");if(null!==e.from&&"createplaylist"!==e.from)return this.error("a playlist has already been defined with <<setplaylist>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var t=String(this.args[0]).trim(),r=[],n=1,a=this.payload.length;n<a;++n){if(0===this.payload[n].args.length)return this.error("no track ID specified");for(var i={id:String(this.payload[n].args[0]).trim()},o=this.payload[n].args.slice(1);o.length>0;){var s=o.shift(),u=void 0,l=void 0;switch(s){case"copy":case"own":i.own=!0;break;case"rate":o.length>0&&o.shift();break;case"volume":if(0===o.length)return this.error("volume missing required level value");if(u=o.shift(),l=Number.parseFloat(u),Number.isNaN(l)||!Number.isFinite(l))return this.error("cannot parse volume: "+u);i.volume=l;break;default:return this.error("unknown action: "+s)}}r.push(i),Config.debug&&this.createDebugView(this.payload[n].name,this.payload[n].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.lists.add(t,r)}catch(e){return this.error(e.message)}null===e.from&&(e.from="createplaylist"),Config.debug&&this.createDebugView("/"+this.name,"<</"+this.name+">>").modes({nonvoid:!1,hidden:!0})}}),Macro.add("masteraudio",{handler:function(){if(0===this.args.length)return this.error("no actions specified");for(var t=this.args.slice(0),r=void 0,n=void 0,a=void 0,i=void 0;t.length>0;){var o=t.shift(),s=void 0;switch(o){case"load":case"stop":case"unload":if(r)return this.error(e(o,r));r=o;break;case"mute":case"unmute":n="mute"===o;break;case"muteonhide":case"nomuteonhide":a="muteonhide"===o;break;case"volume":if(0===t.length)return this.error("volume missing required level value");if(s=t.shift(),i=Number.parseFloat(s),Number.isNaN(i)||!Number.isFinite(i))return this.error("cannot parse volume: "+s);break;default:return this.error("unknown action: "+o)}}try{switch(null!=n&&SimpleAudio.mute(n),null!=a&&SimpleAudio.muteOnHidden(a),null!=i&&SimpleAudio.volume(i),r){case"load":SimpleAudio.load();break;case"stop":SimpleAudio.stop();break;case"unload":SimpleAudio.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(e){return this.error("error executing action: "+e.message)}}}),Macro.add("playlist",{from:null,handler:function(){var t=this.self.from;if(null===t)return this.error("no playlists have been created");var r=void 0,n=void 0;if("createplaylist"===t){if(this.args.length<2){var a=[];return this.args.length<1&&a.push("list ID"),this.args.length<2&&a.push("actions"),this.error("no "+a.join(" or ")+" specified")}var i=String(this.args[0]).trim();if(!SimpleAudio.lists.has(i))return this.error('playlist "'+i+'" does not exist');r=SimpleAudio.lists.get(i),n=this.args.slice(1)}else{if(0===this.args.length)return this.error("no actions specified");r=SimpleAudio.lists.get("setplaylist"),n=this.args.slice(0)}for(var o=void 0,s=5,u=void 0,l=void 0,c=void 0,d=void 0,f=void 0;n.length>0;){var p=n.shift(),h=void 0;switch(p){case"load":case"pause":case"play":case"skip":case"stop":case"unload":if(o)return this.error(e(p,o));o=p;break;case"fadein":if(o)return this.error(e(p,o));o="fade",u=1;break;case"fadeout":if(o)return this.error(e(p,o));o="fade",u=0;break;case"fadeto":if(o)return this.error(e(p,o));if(0===n.length)return this.error("fadeto missing required level value");if(o="fade",h=n.shift(),u=Number.parseFloat(h),Number.isNaN(u)||!Number.isFinite(u))return this.error("cannot parse fadeto: "+h);break;case"fadeoverto":if(o)return this.error(e(p,o));if(n.length<2){var g=[];return n.length<1&&g.push("seconds"),n.length<2&&g.push("level"),this.error("fadeoverto missing required "+g.join(" and ")+" value"+(g.length>1?"s":""))}if(o="fade",h=n.shift(),s=Number.parseFloat(h),Number.isNaN(s)||!Number.isFinite(s))return this.error("cannot parse fadeoverto: "+h);if(h=n.shift(),u=Number.parseFloat(h),Number.isNaN(u)||!Number.isFinite(u))return this.error("cannot parse fadeoverto: "+h);break;case"volume":if(0===n.length)return this.error("volume missing required level value");if(h=n.shift(),f=Number.parseFloat(h),Number.isNaN(f)||!Number.isFinite(f))return this.error("cannot parse volume: "+h);break;case"mute":case"unmute":c="mute"===p;break;case"loop":case"unloop":l="loop"===p;break;case"shuffle":case"unshuffle":d="shuffle"===p;break;default:return this.error("unknown action: "+p)}}try{switch(null!=f&&r.volume(f),null!=c&&r.mute(c),null!=l&&r.loop(l),null!=d&&r.shuffle(d),o){case"fade":r.fade(s,u);break;case"load":r.load();break;case"pause":r.pause();break;case"play":r.play();break;case"skip":r.skip();break;case"stop":r.stop();break;case"unload":r.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(e){return this.error("error executing action: "+e.message)}}}),Macro.add("removeaudiogroup",{handler:function(){if(0===this.args.length)return this.error("no group ID specified");var e=String(this.args[0]).trim();if(!SimpleAudio.groups.has(e))return this.error('group "'+e+'" does not exist');SimpleAudio.groups.delete(e),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeplaylist",{handler:function(){if(0===this.args.length)return this.error("no list ID specified");var e=String(this.args[0]).trim();if(!SimpleAudio.lists.has(e))return this.error('playlist "'+e+'" does not exist');SimpleAudio.lists.delete(e),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("waitforaudio",{skipArgs:!0,handler:function(){SimpleAudio.loadWithScreen()}}),Macro.add("setplaylist",{handler:function(){if(0===this.args.length)return this.error("no track ID(s) specified");var e=Macro.get("playlist");if(null!==e.from&&"setplaylist"!==e.from)return this.error("playlists have already been defined with <<createplaylist>>");try{SimpleAudio.lists.add("setplaylist",this.args.slice(0))}catch(e){return this.error(e.message)}null===e.from&&(e.from="setplaylist"),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("stopallaudio",{skipArgs:!0,handler:function(){SimpleAudio.select(":all").stop(),Config.debug&&this.debugView.modes({hidden:!0})}})}else Macro.add(["audio","cacheaudio","createaudiogroup","createplaylist","masteraudio","playlist","removeaudiogroup","removeplaylist","waitforaudio","setplaylist","stopallaudio"],{skipArgs:!0,handler:function(){Config.debug&&this.debugView.modes({hidden:!0})}});Macro.add("goto",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var e=void 0;if(e="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],!Story.has(e))return this.error('passage "'+e+'" does not exist');setTimeout(function(){return Engine.play(e)},Engine.minDomActionDelay)}}),Macro.add("repeat",{isAsync:!0,tags:null,timers:new Set,handler:function(){var e=this;if(0===this.args.length)return this.error("no time value specified");var t=void 0;try{t=Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0]))}catch(e){return this.error(e.message)}Config.debug&&this.debugView.modes({block:!0});var r=this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]),n=jQuery(document.createElement("span")).addClass("macro-"+this.name).appendTo(this.output);this.self.registerInterval(this.createShadowWrapper(function(){var t=document.createDocumentFragment();new Wikifier(t,e.payload[0].contents);var a=n;r&&(a=jQuery(document.createElement("span")).addClass("macro-repeat-insert macro-repeat-in").appendTo(a)),a.append(t),r&&setTimeout(function(){return a.removeClass("macro-repeat-in")},Engine.minDomActionDelay)}),t)},registerInterval:function(e,t){var r=this;if("function"!=typeof e)throw new TypeError("callback parameter must be a function");var n=State.turns,a=this.timers,i=null;i=setInterval(function(){if(n!==State.turns)return clearInterval(i),void a.delete(i);var t=void 0;try{TempState.break=null,TempState.hasOwnProperty("repeatTimerId")&&(t=TempState.repeatTimerId),TempState.repeatTimerId=i,e.call(r)}finally{void 0!==t?TempState.repeatTimerId=t:delete TempState.repeatTimerId,TempState.break=null}},t),a.add(i),prehistory.hasOwnProperty("#repeat-timers-cleanup")||(prehistory["#repeat-timers-cleanup"]=function(e){delete prehistory[e],a.forEach(function(e){return clearInterval(e)}),a.clear()})}}),Macro.add("stop",{skipArgs:!0,handler:function(){if(!TempState.hasOwnProperty("repeatTimerId"))return this.error("must only be used in conjunction with its parent macro <<repeat>>");var e=Macro.get("repeat").timers,t=TempState.repeatTimerId;clearInterval(t),e.delete(t),TempState.break=2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("timed",{isAsync:!0,tags:["next"],timers:new Set,handler:function(){if(0===this.args.length)return this.error("no time value specified in <<timed>>");var e=[];try{e.push({name:this.name,source:this.source,delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0])),content:this.payload[0].contents})}catch(e){return this.error(e.message+" in <<timed>>")}if(this.payload.length>1){var t=void 0;try{var r=void 0;for(t=1,r=this.payload.length;t<r;++t)e.push({name:this.payload[t].name,source:this.payload[t].source,delay:0===this.payload[t].args.length?e[e.length-1].delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.payload[t].args[0])),content:this.payload[t].contents})}catch(e){return this.error(e.message+" in <<next>> (#"+t+")")}}Config.debug&&this.debugView.modes({block:!0});var n=this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]),a=jQuery(document.createElement("span")).addClass("macro-"+this.name).appendTo(this.output);this.self.registerTimeout(this.createShadowWrapper(function(e){var t=document.createDocumentFragment();new Wikifier(t,e.content);var r=a;Config.debug&&"next"===e.name&&(r=jQuery(new DebugView(r[0],"macro",e.name,e.source).output)),
n&&(r=jQuery(document.createElement("span")).addClass("macro-timed-insert macro-timed-in").appendTo(r)),r.append(t),n&&setTimeout(function(){return r.removeClass("macro-timed-in")},Engine.minDomActionDelay)}),e)},registerTimeout:function(e,t){if("function"!=typeof e)throw new TypeError("callback parameter must be a function");var r=State.turns,n=this.timers,a=null,i=t.shift(),o=function o(){if(n.delete(a),r===State.turns){var s=i;null!=(i=t.shift())&&(a=setTimeout(o,i.delay),n.add(a)),e.call(this,s)}};a=setTimeout(o,i.delay),n.add(a),prehistory.hasOwnProperty("#timed-timers-cleanup")||(prehistory["#timed-timers-cleanup"]=function(e){delete prehistory[e],n.forEach(function(e){return clearTimeout(e)}),n.clear()})}}),Macro.add("widget",{tags:null,handler:function(){if(0===this.args.length)return this.error("no widget name specified");var e=this.args[0];if(Macro.has(e)){if(!Macro.get(e).isWidget)return this.error('cannot clobber existing macro "'+e+'"');Macro.delete(e)}try{Macro.add(e,{isWidget:!0,handler:function(e){return function(){var t=void 0;try{State.variables.hasOwnProperty("args")&&(t=State.variables.args),State.variables.args=[].concat(_toConsumableArray(this.args)),State.variables.args.raw=this.args.raw,State.variables.args.full=this.args.full,this.addShadow("$args");var r=document.createDocumentFragment(),n=[];if(new Wikifier(r,e),Array.from(r.querySelectorAll(".error")).forEach(function(e){n.push(e.textContent)}),0!==n.length)return this.error("error"+(n.length>1?"s":"")+" within widget contents ("+n.join("; ")+")");this.output.appendChild(r)}catch(e){return this.error("cannot execute widget: "+e.message)}finally{void 0!==t?State.variables.args=t:delete State.variables.args}}}(this.payload[0].contents)}),Config.debug&&this.debugView.modes({hidden:!0})}catch(t){return this.error('cannot create widget macro "'+e+'": '+t.message)}}})}();var Dialog=function(){function e(e,t,r,n,a){return jQuery(e).ariaClick(function(e){e.preventDefault(),"function"==typeof r&&r(e),o(t,a),"function"==typeof n&&n(e)})}function t(){var e;return(e=g).append.apply(e,arguments),Dialog}function r(){return g.get(0)}function n(e){return g.trigger(":dialogclosing"),jQuery(document).off(".dialog-close"),y?(y.disconnect(),y=null):g.off(".dialog-resize"),jQuery(window).off(".dialog-resize"),p.removeClass("open").css({left:"",right:"",top:"",bottom:""}),jQuery("#ui-bar,#story").find("[tabindex=-2]").removeAttr("aria-hidden").attr("tabindex",0),jQuery("body>[tabindex=-3]").removeAttr("aria-hidden").removeAttr("tabindex"),f.removeClass("open"),jQuery(document.documentElement).removeAttr("data-dialog"),h.empty(),g.empty().removeClass(),null!==m&&(jQuery(m).focus(),m=null),e&&e.data&&"function"==typeof e.data.closeFn&&e.data.closeFn(e),g.trigger(":dialogclose"),g.trigger(":dialogclosed"),Dialog}function a(){if(!document.getElementById("ui-dialog")){v=function(){var e=void 0;try{var t=document.createElement("p"),r=document.createElement("div");t.style.width="100%",t.style.height="200px",r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style.width="100px",r.style.height="100px",r.style.visibility="hidden",r.style.overflow="hidden",r.appendChild(t),document.body.appendChild(r);var n=t.offsetWidth;r.style.overflow="auto";var a=t.offsetWidth;n===a&&(a=r.clientWidth),document.body.removeChild(r),e=n-a}catch(e){}return e||17}();var e=jQuery(document.createDocumentFragment()).append('<div id="ui-overlay" class="ui-close"></div><div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title"><div id="ui-dialog-titlebar"><h1 id="ui-dialog-title"></h1><button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label="'+L10n.get("close")+'"></button></div><div id="ui-dialog-body"></div></div>');f=jQuery(e.find("#ui-overlay").get(0)),p=jQuery(e.find("#ui-dialog").get(0)),h=jQuery(e.find("#ui-dialog-title").get(0)),g=jQuery(e.find("#ui-dialog-body").get(0)),e.insertBefore("body>script#script-sugarcube")}}function i(e){return p.hasClass("open")&&(!e||e.splitOrEmpty(/\s+/).every(function(e){return g.hasClass(e)}))}function o(e,t){g.trigger(":dialogopening");var r=jQuery.extend({top:50},e),a=r.top;return i()||(m=safeActiveElement()),jQuery(document.documentElement).attr("data-dialog","open"),f.addClass("open"),null!==g[0].querySelector("img")&&g.imagesLoaded().always(function(){return d({data:{top:a}})}),jQuery("body>:not(script,#store-area,tw-storydata,#ui-bar,#ui-overlay,#ui-dialog)").attr("tabindex",-3).attr("aria-hidden",!0),jQuery("#ui-bar,#story").find("[tabindex]:not([tabindex^=-])").attr("tabindex",-2).attr("aria-hidden",!0),p.css(c(a)).addClass("open").focus(),jQuery(window).on("resize.dialog-resize",null,{top:a},jQuery.throttle(40,d)),Has.mutationObserver?(y=new MutationObserver(function(e){for(var t=0;t<e.length;++t)if("childList"===e[t].type){d({data:{top:a}});break}}),y.observe(g[0],{childList:!0,subtree:!0})):g.on("DOMNodeInserted.dialog-resize DOMNodeRemoved.dialog-resize",null,{top:a},jQuery.throttle(40,d)),jQuery(document).on("click.dialog-close",".ui-close",{closeFn:t},n).on("keypress.dialog-close",".ui-close",function(e){13!==e.which&&32!==e.which||jQuery(this).trigger("click")}),g.trigger(":dialogopen"),g.trigger(":dialogopened"),Dialog}function s(e){return d("object"===(void 0===e?"undefined":_typeof(e))?{data:e}:undefined)}function u(e,t){return g.empty().removeClass(),null!=t&&g.addClass(t),h.empty().append((null!=e?String(e):"")||" "),g.get(0)}function l(){var e;return(e=g).wiki.apply(e,arguments),Dialog}function c(e){var t=null!=e?e:50,r=jQuery(window),n={left:"",right:"",top:"",bottom:""};p.css(n);var a=r.width()-p.outerWidth(!0)-1,i=r.height()-p.outerHeight(!0)-1;return a<=32+v&&(i-=v),i<=32+v&&(a-=v),n.left=n.right=a<=32?16:a/2>>0,n.top=i<=32?n.bottom=16:i/2>t?t:n.bottom=i/2>>0,Object.keys(n).forEach(function(e){""!==n[e]&&(n[e]+="px")}),n}function d(e){var t=e&&e.data&&void 0!==e.data.top?e.data.top:50;"block"===p.css("display")&&(p.css({display:"none"}),p.css(jQuery.extend({display:""},c(t))))}var f=null,p=null,h=null,g=null,m=null,v=0,y=null;return Object.freeze(Object.defineProperties({},{append:{value:t},body:{value:r},close:{value:n},init:{value:a},isOpen:{value:i},open:{value:o},resize:{value:s},setup:{value:u},wiki:{value:l},addClickHandler:{value:e}}))}(),Engine=function(){function e(){jQuery("#init-no-js,#init-lacking").remove(),function(){var e=jQuery(document.createDocumentFragment()),t=Story.has("StoryInterface")&&Story.get("StoryInterface").text.trim();if(t){if(UIBar.destroy(),jQuery(document.head).find("#style-core-display").remove(),e.append(t),0===e.find("#passages").length)throw new Error('no element with ID "passages" found within "StoryInterface" special passage');var r=[];e.find("[data-passage]").each(function(e,t){if("passages"===t.id)throw new Error('"StoryInterface" element <'+t.nodeName.toLowerCase()+' id="passages"> must not contain a "data-passage" content attribute');var n=t.getAttribute("data-passage").trim();if(null!==t.firstElementChild)throw new Error('"StoryInterface" element <'+t.nodeName.toLowerCase()+' data-passage="'+n+'"> contains child elements');Story.has(n)&&r.push({passage:n,element:t})}),r.length>0&&(E=r),Config.ui.updateStoryElements=!1}else e.append('<div id="story" role="main"><div id="passages"></div></div>');e.insertBefore("body>script#script-sugarcube")}(),S=new StyleWrapper(function(){return jQuery(document.createElement("style")).attr({id:"style-aria-outlines",type:"text/css"}).appendTo(document.head).get(0)}()),jQuery(document).on("mousedown.aria-outlines keydown.aria-outlines",function(e){return"keydown"===e.type?m():g()})}function t(){if(Story.has("StoryInit"))try{var e=Wikifier.wikifyEval(Story.get("StoryInit").text);if(Config.debug){var t=new DebugView(document.createDocumentFragment(),"special","StoryInit","StoryInit");t.modes({hidden:!0}),t.append(e),k=t.output}}catch(e){console.error(e),Alert.error("StoryInit",e.message)}if(null==Config.passages.start)throw new Error("starting passage not selected");if(!Story.has(Config.passages.start))throw new Error('starting passage ("'+Config.passages.start+'") not found');if(jQuery(document.documentElement).focus(),State.restore())f();else{var r=!0;switch(_typeof(Config.saves.autoload)){case"boolean":Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(r=!Save.autosave.load());break;case"string":"prompt"===Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(r=!1,UI.buildAutoload(),Dialog.open());break;case"function":Save.autosave.ok()&&Save.autosave.has()&&Config.saves.autoload()&&(r=!Save.autosave.load())}r&&p(Config.passages.start)}}function r(){LoadScreen.show(),window.scroll(0,0),State.reset(),jQuery.event.trigger(":enginerestart"),window.location.reload()}function n(){return b}function a(){return b===v.Idle}function i(){return b!==v.Idle}function o(){return b===v.Rendering}function s(){return w}function u(e){var t=State.goTo(e);return t&&f(),t}function l(e){var t=State.go(e);return t&&f(),t}function c(){return l(-1)}function d(){return l(1)}function f(){return p(State.passage,!0)}function p(e,t){var r=e;b=v.Playing,TempState={},State.clearTemporary();var n=void 0,a=void 0;if("function"==typeof Config.navigation.override)try{var i=Config.navigation.override(r);i&&(r=i)}catch(e){}var o=Story.get(r);if(jQuery.event.trigger({type:":passageinit",passage:o}),Object.keys(prehistory).forEach(function(e){"function"==typeof prehistory[e]&&prehistory[e].call(this,e)},o),t||State.create(o.title),w=Util.now(),document.body.className&&(document.body.className=""),Object.keys(predisplay).forEach(function(e){"function"==typeof predisplay[e]&&predisplay[e].call(this,e)},o),Story.has("PassageReady"))try{n=Wikifier.wikifyEval(Story.get("PassageReady").text)}catch(e){console.error(e),Alert.error("PassageReady",e.message)}b=v.Rendering;var s=jQuery(o.render()),u=document.getElementById("passages");if(u.hasChildNodes()&&("number"==typeof Config.passages.transitionOut||"string"==typeof Config.passages.transitionOut&&""!==Config.passages.transitionOut&&Has.transitionEndEvent?[].concat(_toConsumableArray(u.childNodes)).forEach(function(e){var t=jQuery(e);if(e.nodeType===Node.ELEMENT_NODE&&t.hasClass("passage")){if(t.hasClass("passage-out"))return;t.attr("id","out-"+t.attr("id")).addClass("passage-out"),"string"==typeof Config.passages.transitionOut?t.on(Has.transitionEndEvent,function(e){e.originalEvent.propertyName===Config.passages.transitionOut&&t.remove()}):setTimeout(function(){return t.remove()},Math.max(y,Config.passages.transitionOut))}else t.remove()}):jQuery(u).empty()),s.addClass("passage-in").appendTo(u),setTimeout(function(){return s.removeClass("passage-in")},y),Config.passages.displayTitles&&o.title!==Config.passages.start&&(document.title=o.title+" | "+Story.title),window.scroll(0,0),b=v.Playing,Story.has("PassageDone"))try{a=Wikifier.wikifyEval(Story.get("PassageDone").text)}catch(e){console.error(e),Alert.error("PassageDone",e.message)}if(jQuery.event.trigger({type:":passagedisplay",passage:o}),Object.keys(postdisplay).forEach(function(e){"function"==typeof postdisplay[e]&&postdisplay[e].call(this,e)},o),null!==E?E.forEach(function(e){jQuery(e.element).empty(),new Wikifier(e.element,Story.get(e.passage).processText().trim())}):Config.ui.updateStoryElements&&UIBar.update(),Config.debug){var l=void 0;null!=n&&(l=new DebugView(document.createDocumentFragment(),"special","PassageReady","PassageReady"),l.modes({hidden:!0}),l.append(n),s.prepend(l.output)),null!=a&&(l=new DebugView(document.createDocumentFragment(),"special","PassageDone","PassageDone"),l.modes({hidden:!0}),l.append(a),s.append(l.output)),1===State.turns&&null!=k&&s.prepend(k)}switch(g(),jQuery("#story").find("a[href]:not(.link-external)").addClass("link-external").end().find("a,link,button,input,select,textarea").not("[tabindex]").attr("tabindex",0),_typeof(Config.saves.autosave)){case"boolean":Config.saves.autosave&&Save.autosave.save();break;case"object":o.tags.some(function(e){return Config.saves.autosave.includes(e)})&&Save.autosave.save();break;case"function":Config.saves.autosave()&&Save.autosave.save()}return jQuery.event.trigger({type:":passageend",passage:o}),b=v.Idle,w=Util.now(),s[0]}function h(e,t,r){var n=!1;switch(r){case undefined:break;case"replace":case"back":n=!0;break;default:throw new Error('Engine.display option parameter called with obsolete value "'+r+'"; please notify the developer')}p(e,n)}function g(){S.set("*:focus{outline:none}")}function m(){S.clear()}var v=Util.toEnum({Idle:"idle",Playing:"playing",Rendering:"rendering"}),y=40,b=v.Idle,w=null,k=null,S=null,E=null;return Object.freeze(Object.defineProperties({},{States:{value:v},minDomActionDelay:{value:y},init:{value:e},start:{value:t},restart:{value:r},state:{get:n},isIdle:{value:a},isPlaying:{value:i},isRendering:{value:o},lastPlay:{get:s},goTo:{value:u},go:{value:l},backward:{value:c},forward:{value:d},show:{value:f},play:{value:p},display:{value:h}}))}(),Passage=function(){var e=void 0;e=/^(?:debug|nobr|passage|widget|twine\..*)$/i;return function(){function t(r,n){var a=this;_classCallCheck(this,t),Object.defineProperties(this,{title:{value:Util.unescape(r)},element:{value:n||null},tags:{value:Object.freeze(n&&n.hasAttribute("tags")?n.getAttribute("tags").trim().splitOrEmpty(/\s+/).sort().filter(function(e,t,r){return 0===t||r[t-1]!==e}):[])},_excerpt:{writable:!0,value:null}}),Object.defineProperties(this,{domId:{value:"passage-"+Util.slugify(this.title)},classes:{value:Object.freeze(0===this.tags.length?[]:function(){return a.tags.filter(function(t){return!e.test(t)}).map(function(e){return Util.slugify(e)})}())}})}return _createClass(t,[{key:"description",value:function(){var e=Config.passages.descriptions;if(null!=e)switch(void 0===e?"undefined":_typeof(e)){case"boolean":if(e)return this.title;break;case"object":if(e instanceof Map&&e.has(this.title))return e.get(this.title);if(e.hasOwnProperty(this.title))return e[this.title];break;case"function":var r=e.call(this);if(r)return r;break;default:throw new TypeError("Config.passages.descriptions must be a boolean, object, or function")}return null===this._excerpt&&(this._excerpt=t.getExcerptFromText(this.text)),this._excerpt}},{key:"processText",value:function(){if(null==this.element)return this.text;if(this.tags.includes("Twine.image"))return"[img["+this.text+"]]";var e=this.text;return Config.passages.onProcess&&(e=Config.passages.onProcess.call(null,{title:this.title,tags:this.tags,text:e})),(Config.passages.nobr||this.tags.includes("nobr"))&&(e=e.replace(/^\n+|\n+$/g,"").replace(/\n+/g," ")),e}},{key:"render",value:function(){var e=this,r=this.tags.length>0?this.tags.join(" "):null,n=document.createElement("div");return jQuery(n).attr({id:this.domId,"data-passage":this.title,"data-tags":r}).addClass("passage "+this.className),jQuery(document.body).attr("data-tags",r).addClass(this.className),jQuery(document.documentElement).attr("data-tags",r),jQuery.event.trigger({type:":passagestart",content:n,passage:this}),Object.keys(prerender).forEach(function(t){"function"==typeof prerender[t]&&prerender[t].call(e,n,t)}),Story.has("PassageHeader")&&new Wikifier(n,Story.get("PassageHeader").processText()),new Wikifier(n,this.processText()),Story.has("PassageFooter")&&new Wikifier(n,Story.get("PassageFooter").processText()),jQuery.event.trigger({type:":passagerender",content:n,passage:this}),Object.keys(postrender).forEach(function(t){"function"==typeof postrender[t]&&postrender[t].call(e,n,t)}),this._excerpt=t.getExcerptFromNode(n),n}},{key:"className",get:function(){return this.classes.join(" ")}},{key:"text",get:function(){if(null==this.element){var e=Util.escape(this.title);return'<div class="error-view"><span class="error">'+(L10n.get("errorTitle")+": "+L10n.get("errorNonexistentPassage",{passage:e}))+"</span></div>"}return this.element.textContent.replace(/\r/g,"")}}],[{key:"getExcerptFromNode",value:function(e,t){if(!e.hasChildNodes())return"";var r=e.textContent.trim();if(""!==r){var n=new RegExp("(\\S+(?:\\s+\\S+){0,"+(t>0?t-1:7)+"})");r=r.replace(/\s+/g," ").match(n)}return r?r[1]+"…":"…"}},{key:"getExcerptFromText",value:function(e,t){if(""===e)return"";var r=new RegExp("(\\S+(?:\\s+\\S+){0,"+(t>0?t-1:7)+"})"),n=e.replace(/<<.*?>>/g," ").replace(/<.*?>/g," ").trim().replace(/^\s*\|.*\|.*?$/gm,"").replace(/\[[<>]?img\[[^\]]*\]\]/g,"").replace(/\[\[([^|\]]*?)(?:(?:\||->|<-)[^\]]*)?\]\]/g,"$1").replace(/^\s*!+(.*?)$/gm,"$1").replace(/'{2}|\/{2}|_{2}|@{2}/g,"").trim().replace(/\s+/g," ").match(r);return n?n[1]+"…":"…"}}]),t}()}(),Save=function(){function e(){if("cookie"===storage.name)return n(),Config.saves.autoload=undefined,Config.saves.autosave=undefined,Config.saves.isAllowed=undefined,Config.saves.onLoad=undefined,Config.saves.onSave=undefined,Config.saves.slots=0,!1;var e=r(),t=!1;Array.isArray(e)&&(e={autosave:null,slots:e},t=!0),Config.saves.slots!==e.slots.length&&(Config.saves.slots<e.slots.length?(e.slots.reverse(),e.slots=e.slots.filter(function(e){return!(null===e&&this.count>0)||(--this.count,!1)},{count:e.slots.length-Config.saves.slots}),e.slots.reverse()):Config.saves.slots>e.slots.length&&j(e.slots,Config.saves.slots-e.slots.length),t=!0),T(e.autosave)&&(t=!0);for(var a=0;a<e.slots.length;++a)T(e.slots[a])&&(t=!0);return x(e)&&(storage.delete("saves"),t=!1),t&&O(e),P=e.slots.length-1,!0}function t(){return{autosave:null,slots:j([],Config.saves.slots)}}function r(){var e=storage.get("saves");return null===e?t():e}function n(){return storage.delete("saves"),!0}function a(){return i()||d()}function i(){return"cookie"!==storage.name&&void 0!==Config.saves.autosave}function o(){return null!==r().autosave}function s(){return r().autosave}function u(){var e=r();return null!==e.autosave&&A(e.autosave)}function l(e,t){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return!1;var n=r(),a={title:e||Story.get(State.passage).description(),date:Date.now()};return null!=t&&(a.metadata=t),n.autosave=C(a),O(n)}function c(){var e=r();return e.autosave=null,O(e)}function d(){return"cookie"!==storage.name&&-1!==P}function f(){return P+1}function p(){if(!d())return 0;for(var e=r(),t=0,n=0,a=e.slots.length;n<a;++n)null!==e.slots[n]&&++t;return t}function h(){return 0===p()}function g(e){if(e<0||e>P)return!1;var t=r();return!(e>=t.slots.length||null===t.slots[e])}function m(e){if(e<0||e>P)return null;var t=r();return e>=t.slots.length?null:t.slots[e]}function v(e){if(e<0||e>P)return!1;var t=r();return!(e>=t.slots.length||null===t.slots[e])&&A(t.slots[e])}function y(e,t,n){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",function(){return UI.alert(L10n.get("savesDisallowed"))}):UI.alert(L10n.get("savesDisallowed")),!1;if(e<0||e>P)return!1;var a=r();if(e>=a.slots.length)return!1;var i={title:t||Story.get(State.passage).description(),date:Date.now()};return null!=n&&(i.metadata=n),a.slots[e]=C(i),O(a)}function b(e){if(e<0||e>P)return!1;var t=r();return!(e>=t.slots.length)&&(t.slots[e]=null,O(t))}function w(e,t){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return void(Dialog.isOpen()?$(document).one(":dialogclosed",function(){return UI.alert(L10n.get("savesDisallowed"))}):UI.alert(L10n.get("savesDisallowed")));var r=null==e?Story.domId:Util.slugify(e),n=r+"-"+function(){var e=new Date,t=e.getMonth()+1,r=e.getDate(),n=e.getHours(),a=e.getMinutes(),i=e.getSeconds();return t<10&&(t="0"+t),r<10&&(r="0"+r),n<10&&(n="0"+n),a<10&&(a="0"+a),i<10&&(i="0"+i),""+e.getFullYear()+t+r+"-"+n+a+i}()+".save",a=null==t?{}:{metadata:t},i=LZString.compressToBase64(JSON.stringify(C(a)));saveAs(new Blob([i],{type:"text/plain;charset=UTF-8"}),n)}function k(e){var t=e.target.files[0],r=new FileReader;jQuery(r).on("load",function(e){var r=e.currentTarget;if(r.result){var n=void 0;try{n=JSON.parse(/\.json$/i.test(t.name)||/^\{/.test(r.result)?r.result:LZString.decompressFromBase64(r.result))}catch(e){}A(n)}}),r.readAsText(t)}function S(e){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",function(){return UI.alert(L10n.get("savesDisallowed"))}):UI.alert(L10n.get("savesDisallowed")),null;var t=null==e?{}:{metadata:e};return LZString.compressToBase64(JSON.stringify(C(t)))}function E(e){var t=void 0;try{t=JSON.parse(LZString.decompressFromBase64(e))}catch(e){}return A(t)?t.metadata:null}function j(e,t){for(var r=0;r<t;++r)e.push(null);return e}function x(e){for(var t=e.slots,r=!0,n=0,a=t.length;n<a;++n)if(null!==t[n]){r=!1;break}return null===e.autosave&&r}function O(e){return x(e)?(storage.delete("saves"),!0):storage.set("saves",e)}function T(e){if(null==e||"object"!==(void 0===e?"undefined":_typeof(e)))return!1;var t=!1;return e.hasOwnProperty("state")&&e.state.hasOwnProperty("delta")&&e.state.hasOwnProperty("index")||(e.hasOwnProperty("data")?(delete e.mode,e.state={delta:State.deltaEncode(e.data)},delete e.data):e.state.hasOwnProperty("delta")?e.state.hasOwnProperty("index")||delete e.state.mode:(delete e.state.mode,e.state.delta=State.deltaEncode(e.state.history),delete e.state.history),e.state.index=e.state.delta.length-1,t=!0),e.state.hasOwnProperty("rseed")&&(e.state.seed=e.state.rseed,delete e.state.rseed,e.state.delta.forEach(function(e,t,r){r[t].hasOwnProperty("rcount")&&(r[t].pull=r[t].rcount,delete r[t].rcount)}),t=!0),(e.state.hasOwnProperty("expired")&&"number"==typeof e.state.expired||e.state.hasOwnProperty("unique")||e.state.hasOwnProperty("last"))&&(e.state.hasOwnProperty("expired")&&"number"==typeof e.state.expired&&delete e.state.expired,(e.state.hasOwnProperty("unique")||e.state.hasOwnProperty("last"))&&(e.state.expired=[],e.state.hasOwnProperty("unique")&&(e.state.expired.push(e.state.unique),delete e.state.unique),e.state.hasOwnProperty("last")&&(e.state.expired.push(e.state.last),delete e.state.last)),t=!0),t}function C(e){if(null!=e&&"object"!==(void 0===e?"undefined":_typeof(e)))throw new Error("supplemental parameter must be an object");var t=Object.assign({},e,{id:Config.saves.id,state:State.marshalForSave()});return Config.saves.version&&(t.version=Config.saves.version),"function"==typeof Config.saves.onSave&&Config.saves.onSave(t),t.state.delta=State.deltaEncode(t.state.history),delete t.state.history,t}function A(e){try{if(T(e),!e||!e.hasOwnProperty("id")||!e.hasOwnProperty("state"))throw new Error(L10n.get("errorSaveMissingData"));if(e.state.history=State.deltaDecode(e.state.delta),delete e.state.delta,"function"==typeof Config.saves.onLoad&&Config.saves.onLoad(e),e.id!==Config.saves.id)throw new Error(L10n.get("errorSaveIdMismatch"));State.unmarshalForSave(e.state),Engine.show()}catch(e){return UI.alert(e.message.toUpperFirst()+".</p><p>"+L10n.get("aborting")+"."),!1}return!0}var P=-1;return Object.freeze(Object.defineProperties({},{init:{value:e},get:{value:r},clear:{value:n},ok:{value:a},autosave:{value:Object.freeze(Object.defineProperties({},{ok:{value:i},has:{value:o},get:{value:s},load:{value:u},save:{value:l},delete:{value:c}}))},slots:{value:Object.freeze(Object.defineProperties({},{ok:{value:d},length:{get:f},isEmpty:{value:h},count:{value:p},has:{value:g},get:{value:m},load:{value:v},save:{value:y},delete:{value:b}}))},export:{value:w},import:{value:k},serialize:{value:S},deserialize:{value:E}}))}(),Setting=function(){function e(){if(storage.has("options")){var e=storage.get("options");null!==e&&(window.SugarCube.settings=settings=Object.assign(t(),e)),r(),storage.delete("options")}n(),m.forEach(function(e){if(e.hasOwnProperty("onInit")){var t={name:e.name,value:settings[e.name],default:e.default};e.hasOwnProperty("list")&&(t.list=e.list),e.onInit.call(t)}})}function t(){return Object.create(null)}function r(){var e=t();return Object.keys(settings).length>0&&m.filter(function(e){return e.type!==v.Header&&settings[e.name]!==e.default}).forEach(function(t){return e[t.name]=settings[t.name]}),0===Object.keys(e).length?(storage.delete("settings"),!0):storage.set("settings",e)}function n(){var e=t(),r=storage.get("settings")||t();m.filter(function(e){return e.type!==v.Header}).forEach(function(t){return e[t.name]=t.default}),window.SugarCube.settings=settings=Object.assign(e,r)}function a(){return window.SugarCube.settings=settings=t(),storage.delete("settings"),!0}function i(e){if(0===arguments.length)a(),n();else{if(null==e||!p(e))throw new Error('nonexistent setting "'+e+'"');var t=h(e);t.type!==v.Header&&(settings[e]=t.default)}return r()}function o(e,t){m.forEach(e,t)}function s(e,t,r){if(arguments.length<3){var n=[];throw arguments.length<1&&n.push("type"),arguments.length<2&&n.push("name"),arguments.length<3&&n.push("definition"),new Error("missing parameters, no "+n.join(" or ")+" specified")}if("object"!==(void 0===r?"undefined":_typeof(r)))throw new TypeError("definition parameter must be an object");if(p(t))throw new Error('cannot clobber existing setting "'+t+'"');var a={type:e,name:t,label:"string"==typeof r.label?r.label.trim():""};if("string"==typeof r.desc){var i=r.desc.trim();""!==i&&(a.desc=i)}switch(e){case v.Header:break;case v.Toggle:a.default=!!r.default;break;case v.List:if(!r.hasOwnProperty("list"))throw new Error("no list specified");if(!Array.isArray(r.list))throw new TypeError("list must be an array");if(0===r.list.length)throw new Error("list must not be empty");if(a.list=Object.freeze(r.list),null==r.default)a.default=r.list[0];else{var o=r.list.indexOf(r.default);if(-1===o)throw new Error("list does not contain default");a.default=r.list[o]}break;case v.Range:if(!r.hasOwnProperty("min"))throw new Error("no min specified");if("number"!=typeof r.min||Number.isNaN(r.min)||!Number.isFinite(r.min))throw new TypeError("min must be a finite number");if(!r.hasOwnProperty("max"))throw new Error("no max specified");if("number"!=typeof r.max||Number.isNaN(r.max)||!Number.isFinite(r.max))throw new TypeError("max must be a finite number");if(!r.hasOwnProperty("step"))throw new Error("no step specified");if("number"!=typeof r.step||Number.isNaN(r.step)||!Number.isFinite(r.step)||r.step<=0)throw new TypeError("step must be a finite number greater than zero");var s=function(){var e=String(r.step),t=e.lastIndexOf(".");return-1===t?0:e.length-t-1}();if(function(e){if(s>0){var t=Number(r.min+"e"+s),n=Number(r.step+"e"+s),a=Number(e+"e"+s)-t;return Number(a-a%n+t+"e-"+s)}var i=e-r.min;return i-i%r.step+r.min}(r.max)!==r.max)throw new RangeError("max ("+r.max+") is not a multiple of the step ("+r.step+") plus the min ("+r.min+")");if(a.max=r.max,a.min=r.min,a.step=r.step,null==r.default)a.default=r.max;else{if("number"!=typeof r.default||Number.isNaN(r.default)||!Number.isFinite(r.default))throw new TypeError("default must be a finite number");if(r.default<r.min)throw new RangeError("default ("+r.default+") is less than min ("+r.min+")");if(r.default>r.max)throw new RangeError("default ("+r.default+") is greater than max ("+r.max+")");a.default=r.default}break;default:throw new Error("unknown Setting type: "+e)}"function"==typeof r.onInit&&(a.onInit=Object.freeze(r.onInit)),"function"==typeof r.onChange&&(a.onChange=Object.freeze(r.onChange)),m.push(Object.freeze(a))}function u(e,t){s(v.Header,e,{desc:t})}function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];s.apply(undefined,[v.Toggle].concat(t))}function c(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];s.apply(undefined,[v.List].concat(t))}function d(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];s.apply(undefined,[v.Range].concat(t))}function f(){return 0===m.length}function p(e){return m.some(function(t){return t.name===e})}function h(e){return m.find(function(t){return t.name===e})}function g(e){p(e)&&delete settings[e];for(var t=0;t<m.length;++t)if(m[t].name===e){m.splice(t,1),g(e);break}}var m=[],v=Util.toEnum({Header:0,Toggle:1,List:2,Range:3});return Object.freeze(Object.defineProperties({},{Types:{value:v},init:{value:e},create:{value:t},save:{value:r},load:{value:n},clear:{value:a},reset:{value:i},forEach:{value:o},add:{value:s},addHeader:{value:u},addToggle:{value:l},addList:{value:c},addRange:{value:d},isEmpty:{value:f},has:{value:p},get:{value:h},delete:{value:g}}))}(),Story=function(){function e(){function e(e){if(e.tags.includesAny(n))throw new Error('starting passage "'+e.title+'" contains illegal tags; invalid: "'+e.tags.filter(function(e){return n.includes(e)}).sort().join('", "')+'"')}function t(e){if(a.includes(e.title)&&e.tags.includesAny(n))throw new Error('special passage "'+e.title+'" contains illegal tags; invalid: "'+e.tags.filter(function(e){return n.includes(e)}).sort().join('", "')+'"')}var n=["widget"],a=["PassageDone","PassageFooter","PassageHeader","PassageReady","StoryAuthor","StoryBanner","StoryCaption","StoryInit","StoryMenu","StoryShare","StorySubtitle"],i=jQuery("tw-storydata"),o=i.attr("startnode")||"";Config.passages.start=null,Config.debug=/\bdebug\b/.test(i.attr("options")),i.children("style").each(function(e){d.push(new Passage("tw-user-style-"+e,this))}),i.children("script").each(function(e){f.push(new Passage("tw-user-script-"+e,this))}),i.children('tw-passagedata:not([tags~="Twine.private"],[tags~="annotation"])').each(function(){var r=jQuery(this),n=r.attr("pid")||"",a=new Passage(r.attr("name"),this);n===o&&""!==o?(Config.passages.start=a.title,e(a),c[a.title]=a):a.tags.includes("widget")?p.push(a):(t(a),c[a.title]=a)}),g=i.attr("ifid"),r("The Claim"),Config.saves.id=Story.domId}function t(){!function(){var e=document.createElement("style");new StyleWrapper(e).add(d.map(function(e){return e.text.trim()}).join("\n")),jQuery(e).appendTo(document.head).attr({id:"style-story",type:"text/css"})}();for(var e=0;e<f.length;++e)try{Scripting.evalJavaScript(f[e].text)}catch(t){console.error(t),Alert.error(f[e].title,"object"===(void 0===t?"undefined":_typeof(t))?t.message:t)}for(var t=0;t<p.length;++t)try{Wikifier.wikifyEval(p[t].processText())}catch(e){console.error(e),Alert.error(p[t].title,"object"===(void 0===e?"undefined":_typeof(e))?e.message:e)}}function r(e){if(null==e||""===e)throw new Error("story title cannot be null or empty");if(document.title=h=Util.unescape(e),""===(m=Util.slugify(h)))if(""!==g)m=g;else for(var t=0,r=h.length;t<r;++t){var n=Util.charAndPosAt(h,t),a=n.char,i=n.start,o=n.end;m+=a.codePointAt(0).toString(16),t+=o-i}}function n(){return h}function a(){return m}function i(){return g}function o(e){var t=void 0===e?"undefined":_typeof(e);switch(t){case"number":case"string":return c.hasOwnProperty(String(e));case"boolean":case"function":t="a "+t;break;case"undefined":break;default:t=null===e?"null":"an "+t}throw new TypeError("Story.has title parameter cannot be "+t)}function s(e){var t=void 0===e?"undefined":_typeof(e);switch(t){case"number":case"string":var r=String(e);return c.hasOwnProperty(r)?c[r]:new Passage(r||"(unknown)");case"boolean":case"function":t="a "+t;break;case"undefined":break;default:t=null===e?"null":"an "+t}throw new TypeError("Story.get title parameter cannot be "+t)}function u(e,t){for(var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"title",n=Object.keys(c),a=[],i=0;i<n.length;++i){var o=c[n[i]];if(o.hasOwnProperty(e))switch(_typeof(o[e])){case"undefined":break;case"object":o[e]instanceof Array&&o[e].some(function(e){return e==t})&&a.push(o);break;default:o[e]==t&&a.push(o)}}return a.sort(function(e,t){return e[r]==t[r]?0:e[r]<t[r]?-1:1}),a}function l(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"title";if("function"!=typeof e)throw new Error("Story.lookupWith filter parameter must be a function");for(var r=Object.keys(c),n=[],a=0;a<r.length;++a){var i=c[r[a]];e(i)&&n.push(i)}return n.sort(function(e,r){return e[t]==r[t]?0:e[t]<r[t]?-1:1}),n}var c={},d=[],f=[],p=[],h="",g="",m="";return Object.freeze(Object.defineProperties({},{passages:{value:c},styles:{value:d},scripts:{value:f},
widgets:{value:p},load:{value:e},init:{value:t},title:{get:n},domId:{get:a},ifId:{get:i},has:{value:o},get:{value:s},lookup:{value:u},lookupWith:{value:l}}))}(),UI=function(){function e(e,t){var r=t,n=Config.debug,a=Config.cleanupWikifierOutput;Config.debug=!1,Config.cleanupWikifierOutput=!1;try{null==r&&(r=document.createElement("ul"));var i=document.createDocumentFragment();new Wikifier(i,Story.get(e).processText().trim());var o=[].concat(_toConsumableArray(i.querySelectorAll(".error"))).map(function(e){return e.textContent.replace(errorPrologRegExp,"")});if(o.length>0)throw new Error(o.join("; "));for(;i.hasChildNodes();){var s=i.firstChild;if(s.nodeType===Node.ELEMENT_NODE&&"A"===s.nodeName.toUpperCase()){var u=document.createElement("li");r.appendChild(u),u.appendChild(s)}else i.removeChild(s)}}finally{Config.cleanupWikifierOutput=a,Config.debug=n}return r}function t(e){jQuery(Dialog.setup("Alert","alert")).append("<p>"+e+'</p><ul class="buttons"><li><button id="alert-ok" class="ui-close">'+L10n.get(["alertOk","ok"])+"</button></li></ul>");for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Dialog.open.apply(Dialog,r)}function r(){u(),Dialog.open.apply(Dialog,arguments)}function n(){l(),Dialog.open.apply(Dialog,arguments)}function a(){c(),Dialog.open.apply(Dialog,arguments)}function i(){d(),Dialog.open.apply(Dialog,arguments)}function o(){f(),Dialog.open.apply(Dialog,arguments)}function s(){return jQuery(Dialog.setup(L10n.get("autoloadTitle"),"autoload")).append("<p>"+L10n.get("autoloadPrompt")+'</p><ul class="buttons"><li><button id="autoload-ok" class="ui-close">'+L10n.get(["autoloadOk","ok"])+'</button></li><li><button id="autoload-cancel" class="ui-close">'+L10n.get(["autoloadCancel","cancel"])+"</button></li></ul>"),jQuery(document).one("click.autoload",".ui-close",function(e){var t="autoload-ok"===e.target.id;jQuery(document).one(":dialogclosed",function(){t&&Save.autosave.load()||Engine.play(Config.passages.start)})}),!0}function u(){var e=document.createElement("ul");jQuery(Dialog.setup(L10n.get("jumptoTitle"),"jumpto list")).append(e);for(var t=State.expired.length,r=State.size-1;r>=0;--r)if(r!==State.activeIndex){var n=Story.get(State.history[r].title);n&&n.tags.includes("bookmark")&&jQuery(document.createElement("li")).append(jQuery(document.createElement("a")).ariaClick({one:!0},function(e){return function(){return jQuery(document).one(":dialogclosed",function(){return Engine.goTo(e)})}}(r)).addClass("ui-close").text(L10n.get("jumptoTurn")+" "+(t+r+1)+": "+n.description())).appendTo(e)}e.hasChildNodes()||jQuery(e).append("<li><a><em>"+L10n.get("jumptoUnavailable")+"</em></a></li>")}function l(){return jQuery(Dialog.setup(L10n.get("restartTitle"),"restart")).append("<p>"+L10n.get("restartPrompt")+'</p><ul class="buttons"><li><button id="restart-ok">'+L10n.get(["restartOk","ok"])+'</button></li><li><button id="restart-cancel" class="ui-close">'+L10n.get(["restartCancel","cancel"])+"</button></li></ul>").find("#restart-ok").ariaClick({one:!0},function(){jQuery(document).one(":dialogclosed",function(){return Engine.restart()}),Dialog.close()}),!0}function c(){function e(e,t,r,n){var a=jQuery(document.createElement("button")).attr("id","saves-"+e).html(r);return t&&a.addClass(t),n?a.ariaClick(n):a.ariaDisabled(!0),jQuery(document.createElement("li")).append(a)}var r=jQuery(Dialog.setup(L10n.get("savesTitle"),"saves")),n=Save.ok();if(n&&r.append(function(){function e(e,t,r,n,a){var i=jQuery(document.createElement("button")).attr("id","saves-"+e+"-"+n).addClass(e).html(r);return t&&i.addClass(t),a?"auto"===n?i.ariaClick({label:r+" "+L10n.get("savesLabelAuto")},function(){return a()}):i.ariaClick({label:r+" "+L10n.get("savesLabelSlot")+" "+(n+1)},function(){return a(n)}):i.ariaDisabled(!0),i}var t=Save.get(),r=jQuery(document.createElement("tbody"));if(Save.autosave.ok()){var n=jQuery(document.createElement("td")),a=jQuery(document.createElement("td")),i=jQuery(document.createElement("td")),o=jQuery(document.createElement("td"));jQuery(document.createElement("b")).attr({title:L10n.get("savesLabelAuto"),"aria-label":L10n.get("savesLabelAuto")}).text("A").appendTo(n),t.autosave?(a.append(e("load","ui-close",L10n.get("savesLabelLoad"),"auto",function(){jQuery(document).one(":dialogclosed",function(){return Save.autosave.load()})})),jQuery(document.createElement("div")).text(t.autosave.title).appendTo(i),jQuery(document.createElement("div")).addClass("datestamp").html(t.autosave.date?""+new Date(t.autosave.date).toLocaleString():"<em>"+L10n.get("savesUnknownDate")+"</em>").appendTo(i),o.append(e("delete",null,L10n.get("savesLabelDelete"),"auto",function(){Save.autosave.delete(),c()}))):(a.append(e("load",null,L10n.get("savesLabelLoad"),"auto")),i.addClass("empty").text("•  •  •"),o.append(e("delete",null,L10n.get("savesLabelDelete"),"auto"))),jQuery(document.createElement("tr")).append(n).append(a).append(i).append(o).appendTo(r)}for(var s=0,u=t.slots.length;s<u;++s){var l=jQuery(document.createElement("td")),d=jQuery(document.createElement("td")),f=jQuery(document.createElement("td")),p=jQuery(document.createElement("td"));l.append(document.createTextNode(s+1)),t.slots[s]?(d.append(e("load","ui-close",L10n.get("savesLabelLoad"),s,function(e){jQuery(document).one(":dialogclosed",function(){return Save.slots.load(e)})})),jQuery(document.createElement("div")).text(t.slots[s].title).appendTo(f),jQuery(document.createElement("div")).addClass("datestamp").html(t.slots[s].date?""+new Date(t.slots[s].date).toLocaleString():"<em>"+L10n.get("savesUnknownDate")+"</em>").appendTo(f),p.append(e("delete",null,L10n.get("savesLabelDelete"),s,function(e){Save.slots.delete(e),c()}))):(d.append(e("save","ui-close",L10n.get("savesLabelSave"),s,Save.slots.save)),f.addClass("empty").text("•  •  •"),p.append(e("delete",null,L10n.get("savesLabelDelete"),s))),jQuery(document.createElement("tr")).append(l).append(d).append(f).append(p).appendTo(r)}return jQuery(document.createElement("table")).attr("id","saves-list").append(r)}()),n||Has.fileAPI){var a=jQuery(document.createElement("ul")).addClass("buttons").appendTo(r);return Has.fileAPI&&(a.append(e("export","ui-close",L10n.get("savesLabelExport"),function(){return Save.export()})),a.append(e("import",null,L10n.get("savesLabelImport"),function(){return r.find("#saves-import-file").trigger("click")})),jQuery(document.createElement("input")).css({display:"block",visibility:"hidden",position:"fixed",left:"-9999px",top:"-9999px",width:"1px",height:"1px"}).attr({type:"file",id:"saves-import-file",tabindex:-1,"aria-hidden":!0}).on("change",function(e){jQuery(document).one(":dialogclosed",function(){return Save.import(e)}),Dialog.close()}).appendTo(r)),n&&a.append(e("clear",null,L10n.get("savesLabelClear"),Save.autosave.has()||!Save.slots.isEmpty()?function(){Save.clear(),c()}:null)),!0}return t(L10n.get("savesIncapable")),!1}function d(){var e=jQuery(Dialog.setup(L10n.get("settingsTitle"),"settings"));return Setting.forEach(function(t){if(t.type===Setting.Types.Header){var r=t.name,n=Util.slugify(r),a=jQuery(document.createElement("div")),i=jQuery(document.createElement("h2"));return a.attr("id","header-body-"+n).append(i).appendTo(e),i.attr("id","header-heading-"+n).wiki(r),void(t.desc&&jQuery(document.createElement("p")).attr("id","header-desc-"+n).wiki(t.desc).appendTo(a))}var o=t.name,s=Util.slugify(o),u=jQuery(document.createElement("div")),l=jQuery(document.createElement("label")),c=jQuery(document.createElement("div")),d=void 0;switch(jQuery(document.createElement("div")).append(l).append(c).appendTo(u),t.desc&&jQuery(document.createElement("p")).attr("id","setting-desc-"+s).wiki(t.desc).appendTo(u),l.attr({id:"setting-label-"+s,for:"setting-control-"+s}).wiki(t.label),null==settings[o]&&(settings[o]=t.default),t.type){case Setting.Types.Toggle:d=jQuery(document.createElement("button")),settings[o]?d.addClass("enabled").text(L10n.get("settingsOn")):d.text(L10n.get("settingsOff")),d.ariaClick(function(){settings[o]?(jQuery(this).removeClass("enabled").text(L10n.get("settingsOff")),settings[o]=!1):(jQuery(this).addClass("enabled").text(L10n.get("settingsOn")),settings[o]=!0),Setting.save(),t.hasOwnProperty("onChange")&&t.onChange.call({name:o,value:settings[o],default:t.default})});break;case Setting.Types.List:d=jQuery(document.createElement("select"));for(var f=0,p=t.list.length;f<p;++f)jQuery(document.createElement("option")).val(f).text(t.list[f]).appendTo(d);d.val(t.list.indexOf(settings[o])).attr("tabindex",0).on("change",function(){settings[o]=t.list[Number(this.value)],Setting.save(),t.hasOwnProperty("onChange")&&t.onChange.call({name:o,value:settings[o],default:t.default,list:t.list})});break;case Setting.Types.Range:d=jQuery(document.createElement("input")),d.attr({type:"range",min:t.min,max:t.max,step:t.step,value:settings[o],tabindex:0}).on("change input",function(){settings[o]=Number(this.value),Setting.save(),t.hasOwnProperty("onChange")&&t.onChange.call({name:o,value:settings[o],default:t.default,min:t.min,max:t.max,step:t.step})}).on("keypress",function(e){13===e.which&&(e.preventDefault(),d.trigger("change"))})}d.attr("id","setting-control-"+s).appendTo(c),u.attr("id","setting-body-"+s).appendTo(e)}),e.append('<ul class="buttons"><li><button id="settings-ok" class="ui-close">'+L10n.get(["settingsOk","ok"])+'</button></li><li><button id="settings-reset">'+L10n.get("settingsReset")+"</button></li></ul>").find("#settings-reset").ariaClick({one:!0},function(){jQuery(document).one(":dialogclosed",function(){Setting.reset(),window.location.reload()}),Dialog.close()}),!0}function f(){try{jQuery(Dialog.setup(L10n.get("shareTitle"),"share list")).append(e("StoryShare"))}catch(e){return console.error(e),Alert.error("StoryShare",e.message),!1}return!0}return Object.freeze(Object.defineProperties({},{assembleLinkList:{value:e},alert:{value:t},jumpto:{value:r},restart:{value:n},saves:{value:a},settings:{value:i},share:{value:o},buildAutoload:{value:s},buildJumpto:{value:u},buildRestart:{value:l},buildSaves:{value:c},buildSettings:{value:d},buildShare:{value:f},stow:{value:function(){return UIBar.stow()}},unstow:{value:function(){return UIBar.unstow()}},setStoryElements:{value:function(){return UIBar.update()}},isOpen:{value:function(){return Dialog.isOpen.apply(Dialog,arguments)}},body:{value:function(){return Dialog.body()}},setup:{value:function(){return Dialog.setup.apply(Dialog,arguments)}},addClickHandler:{value:function(){return Dialog.addClickHandler.apply(Dialog,arguments)}},open:{value:function(){return Dialog.open.apply(Dialog,arguments)}},close:{value:function(){return Dialog.close.apply(Dialog,arguments)}},resize:{value:function(){return Dialog.resize()}},buildDialogAutoload:{value:s},buildDialogJumpto:{value:u},buildDialogRestart:{value:l},buildDialogSaves:{value:c},buildDialogSettings:{value:d},buildDialogShare:{value:f},buildLinkListFromPassage:{value:e}}))}(),UIBar=function(){function e(){c&&(c.hide(),jQuery(document).off(".ui-bar"),jQuery(document.head).find("#style-ui-bar").remove(),c.remove(),c=null)}function t(){return c&&c.hide(),this}function r(){if(!document.getElementById("ui-bar")){var e=function(){var e=L10n.get("uiBarToggle"),t=L10n.get("uiBarBackward"),r=L10n.get("uiBarJumpto"),n=L10n.get("uiBarForward");return jQuery(document.createDocumentFragment()).append('<div id="ui-bar"><div id="ui-bar-tray"><button id="ui-bar-toggle" tabindex="0" title="'+e+'" aria-label="'+e+'"></button><div id="ui-bar-history"><button id="history-backward" tabindex="0" title="'+t+'" aria-label="'+t+'"></button><button id="history-jumpto" tabindex="0" title="'+r+'" aria-label="'+r+'"></button><button id="history-forward" tabindex="0" title="'+n+'" aria-label="'+n+'"></button></div></div><div id="ui-bar-body"><header id="title" role="banner"><div id="story-banner"></div><h1 id="story-title"></h1><div id="story-subtitle"></div><div id="story-title-separator"></div><p id="story-author"></p></header><div id="story-caption"></div><nav id="menu" role="navigation"><ul id="menu-story"></ul><ul id="menu-core"><li id="menu-item-saves"><a tabindex="0">'+L10n.get("savesTitle")+'</a></li><li id="menu-item-settings"><a tabindex="0">'+L10n.get("settingsTitle")+'</a></li><li id="menu-item-restart"><a tabindex="0">'+L10n.get("restartTitle")+'</a></li><li id="menu-item-share"><a tabindex="0">'+L10n.get("shareTitle")+"</a></li></ul></nav></div></div>")}();c=jQuery(e.find("#ui-bar").get(0)),e.insertBefore("body>script#script-sugarcube"),jQuery(document).on(":historyupdate.ui-bar",function(e,t){return function(){e.ariaDisabled(State.length<2),t.ariaDisabled(State.length===State.size)}}(jQuery("#history-backward"),jQuery("#history-forward")))}}function n(){return c&&"none"===c.css("display")}function a(){return c&&c.hasClass("stowed")}function i(){return c&&c.show(),this}function o(){c&&(("boolean"==typeof Config.ui.stowBarInitially?Config.ui.stowBarInitially:jQuery(window).width()<=Config.ui.stowBarInitially)&&function(){var e=jQuery(c).add("#story");e.addClass("no-transition"),c.addClass("stowed"),setTimeout(function(){return e.removeClass("no-transition")},Engine.minDomActionDelay)}(),jQuery("#ui-bar-toggle").ariaClick({label:L10n.get("uiBarToggle")},function(){return c.toggleClass("stowed")}),Config.history.controls?(jQuery("#history-backward").ariaDisabled(State.length<2).ariaClick({label:L10n.get("uiBarBackward")},function(){return Engine.backward()}),Story.lookup("tags","bookmark").length>0?jQuery("#history-jumpto").ariaClick({label:L10n.get("uiBarJumpto")},function(){return UI.jumpto()}):jQuery("#history-jumpto").remove(),jQuery("#history-forward").ariaDisabled(State.length===State.size).ariaClick({label:L10n.get("uiBarForward")},function(){return Engine.forward()})):jQuery("#ui-bar-history").remove(),jQuery("#story-title").text(Story.title),Story.has("StoryCaption")||jQuery("#story-caption").remove(),Story.has("StoryMenu")||jQuery("#menu-story").remove(),Config.ui.updateStoryElements||l(),jQuery("#menu-item-saves a").ariaClick(function(e){e.preventDefault(),UI.buildSaves(),Dialog.open()}).text(L10n.get("savesTitle")),Setting.isEmpty()?jQuery("#menu-item-settings").remove():jQuery("#menu-item-settings a").ariaClick(function(e){e.preventDefault(),UI.buildSettings(),Dialog.open()}).text(L10n.get("settingsTitle")),jQuery("#menu-item-restart a").ariaClick(function(e){e.preventDefault(),UI.buildRestart(),Dialog.open()}).text(L10n.get("restartTitle")),Story.has("StoryShare")?jQuery("#menu-item-share a").ariaClick(function(e){e.preventDefault(),UI.buildShare(),Dialog.open()}).text(L10n.get("shareTitle")):jQuery("#menu-item-share").remove())}function s(e){if(c&&!c.hasClass("stowed")){var t=void 0;e&&(t=jQuery("#story"),t.addClass("no-transition"),c.addClass("no-transition")),c.addClass("stowed"),e&&setTimeout(function(){t.removeClass("no-transition"),c.removeClass("no-transition")},Engine.minDomActionDelay)}return this}function u(e){if(c&&c.hasClass("stowed")){var t=void 0;e&&(t=jQuery("#story"),t.addClass("no-transition"),c.addClass("no-transition")),c.removeClass("stowed"),e&&setTimeout(function(){t.removeClass("no-transition"),c.removeClass("no-transition")},Engine.minDomActionDelay)}return this}function l(){if(c){setPageElement("story-banner","StoryBanner"),setPageElement("story-subtitle","StorySubtitle"),setPageElement("story-author","StoryAuthor"),setPageElement("story-caption","StoryCaption");var e=document.getElementById("menu-story");if(null!==e&&(jQuery(e).empty(),Story.has("StoryMenu")))try{UI.assembleLinkList("StoryMenu",e)}catch(e){console.error(e),Alert.error("StoryMenu",e.message)}}}var c=null;return Object.freeze(Object.defineProperties({},{destroy:{value:e},hide:{value:t},init:{value:r},isHidden:{value:n},isStowed:{value:a},show:{value:i},start:{value:o},stow:{value:s},unstow:{value:u},update:{value:l},setStoryElements:{value:l}}))}(),DebugBar=function(){function e(){var e=L10n.get("debugBarToggle"),t=L10n.get("debugBarAddWatch"),o=L10n.get("debugBarWatchAll"),u=L10n.get("debugBarWatchNone"),c=L10n.get("debugBarWatchToggle"),h=L10n.get("debugBarViewsToggle");jQuery(document.createDocumentFragment()).append('<div id="debug-bar"><div id="debug-bar-watch" aria-hidden="true" hidden="hidden"><div>'+L10n.get("debugBarNoWatches")+'</div>></div><div><button id="debug-bar-watch-toggle" tabindex="0" title="'+c+'" aria-label="'+c+'">'+L10n.get("debugBarLabelWatch")+'</button><label id="debug-bar-watch-label" for="debug-bar-watch-input">'+L10n.get("debugBarLabelAdd")+'</label><input id="debug-bar-watch-input" name="debug-bar-watch-input" type="text" list="debug-bar-watch-list" tabindex="0"><datalist id="debug-bar-watch-list" aria-hidden="true" hidden="hidden"></datalist><button id="debug-bar-watch-add" tabindex="0" title="'+t+'" aria-label="'+t+'"></button><button id="debug-bar-watch-all" tabindex="0" title="'+o+'" aria-label="'+o+'"></button><button id="debug-bar-watch-none" tabindex="0" title="'+u+'" aria-label="'+u+'"></button></div><div><button id="debug-bar-views-toggle" tabindex="0" title="'+h+'" aria-label="'+h+'">'+L10n.get("debugBarLabelViews")+'</button><label id="debug-bar-turn-label" for="debug-bar-turn-select">'+L10n.get("debugBarLabelTurn")+'</label><select id="debug-bar-turn-select" tabindex="0"></select></div><button id="debug-bar-toggle" tabindex="0" title="'+e+'" aria-label="'+e+'"></button></div><div id="debug-bar-hint"></div>').appendTo("body"),y=jQuery("#debug-bar"),b=jQuery(y.find("#debug-bar-watch").get(0)),w=jQuery(y.find("#debug-bar-watch-list").get(0)),k=jQuery(y.find("#debug-bar-turn-select").get(0));var g=jQuery(y.find("#debug-bar-toggle").get(0)),m=jQuery(y.find("#debug-bar-watch-toggle").get(0)),v=jQuery(y.find("#debug-bar-watch-input").get(0)),E=jQuery(y.find("#debug-bar-watch-add").get(0)),j=jQuery(y.find("#debug-bar-watch-all").get(0)),x=jQuery(y.find("#debug-bar-watch-none").get(0)),O=jQuery(y.find("#debug-bar-views-toggle").get(0));g.ariaClick(function(){S?n():r(),S=!S,l()}),m.ariaClick(function(){b.attr("hidden")?b.removeAttr("aria-hidden hidden"):b.attr({"aria-hidden":!0,hidden:"hidden"}),l()}),v.on(":addwatch",function(){a(this.value.trim()),this.value=""}).on("keypress",function(e){13===e.which&&(e.preventDefault(),v.trigger(":addwatch"))}),E.ariaClick(function(){return v.trigger(":addwatch")}),j.ariaClick(i),x.ariaClick(s),k.on("change",function(){Engine.goTo(Number(this.value))}),O.ariaClick(function(){DebugView.toggle(),l()}),jQuery(document).on(":historyupdate.debug-bar",p).on(":passageend.debug-bar",function(){d(),f()}).on(":enginerestart.debug-bar",function(){session.delete("debugState")})}function t(){u(),c(),p(),d(),f()}function r(){y.css("right","-"+y.outerWidth()+"px"),l()}function n(){y.css("right",0),l()}function a(e){g.test(e)&&(v.pushUnique(e),v.sort(),d(),f(),l())}function i(){Object.keys(State.variables).map(function(e){return v.pushUnique("$"+e)}),Object.keys(State.temporary).map(function(e){return v.pushUnique("_"+e)}),v.sort(),d(),f(),l()}function o(e){v.delete(e),d(),f(),l()}function s(){for(var e=v.length-1;e>=0;--e)v.pop();d(),f(),l()}function u(){if(session.has("debugState")){var e=session.get("debugState");S=e.stowed,v.push.apply(v,_toConsumableArray(e.watchList)),e.watchEnabled?b.removeAttr("aria-hidden hidden"):b.attr({"aria-hidden":!0,hidden:"hidden"}),e.viewsEnabled?DebugView.enable():DebugView.disable()}}function l(){session.set("debugState",{stowed:S,watchList:v,watchEnabled:!b.attr("hidden"),viewsEnabled:DebugView.isEnabled()})}function c(){S?r():n()}function d(){if(0===v.length)return void b.empty().append("<div>"+L10n.get("debugBarNoWatches")+"</div>");for(var e=L10n.get("debugBarDeleteWatch"),t=jQuery(document.createElement("table")),r=jQuery(document.createElement("tbody")),n=0,a=v.length;n<a;++n)!function(t,n){var a=v[t],i=a.slice(1),s="$"===a[0]?State.variables:State.temporary,u=jQuery(document.createElement("tr")),l=jQuery(document.createElement("button")),c=jQuery(document.createElement("code"));l.addClass("watch-delete").attr("data-name",a).ariaClick({one:!0,label:e},function(){return o(a)}),c.text(h(s[i])),jQuery(document.createElement("td")).append(l).appendTo(u),jQuery(document.createElement("td")).text(a).appendTo(u),jQuery(document.createElement("td")).append(c).appendTo(u),u.appendTo(r)}(n);t.append(r),b.empty().append(t)}function f(){var e=Object.keys(State.variables),t=Object.keys(State.temporary);if(0===e.length&&0===t.length)return void w.empty();var r=[].concat(_toConsumableArray(e.map(function(e){return"$"+e})),_toConsumableArray(t.map(function(e){return"_"+e}))).sort(),n=document.createDocumentFragment();r.delete(v);for(var a=0,i=r.length;a<i;++a)jQuery(document.createElement("option")).val(r[a]).appendTo(n);w.empty().append(n)}function p(){for(var e=State.size,t=State.expired.length,r=document.createDocumentFragment(),n=0;n<e;++n)jQuery(document.createElement("option")).val(n).text(t+n+1+". "+Util.escape(State.history[n].title)).appendTo(r);k.empty().ariaDisabled(e<2).append(r).val(State.activeIndex)}function h(e){if(null===e)return"null";switch(void 0===e?"undefined":_typeof(e)){case"number":if(Number.isNaN(e))return"NaN";if(!Number.isFinite(e))return"Infinity";case"boolean":case"symbol":case"undefined":return String(e);case"string":return JSON.stringify(e);case"function":return"Function"}var t=Util.toStringTag(e);if("Date"===t)return"Date {"+e.toLocaleString()+"}";if("RegExp"===t)return"RegExp "+e.toString();var r=[];if(e instanceof Array||e instanceof Set){for(var n=e instanceof Array?e:Array.from(e),a=0,i=n.length;a<i;++a)r.push(n.hasOwnProperty(a)?h(n[a]):"<empty>");return Object.keys(n).filter(function(e){return!m.test(e)}).forEach(function(e){return r.push(h(e)+": "+h(n[e]))}),t+"("+n.length+") ["+r.join(", ")+"]"}return e instanceof Map?(e.forEach(function(e,t){return r.push(h(t)+" → "+h(e))}),t+"("+e.size+") {"+r.join(", ")+"}"):(Object.keys(e).forEach(function(t){return r.push(h(t)+": "+h(e[t]))}),t+" {"+r.join(", ")+"}")}var g=new RegExp("^"+Patterns.variable+"$"),m=/^\d+$/,v=[],y=null,b=null,w=null,k=null,S=!0;return Object.freeze(Object.defineProperties({},{init:{value:e},start:{value:t},stow:{value:r},unstow:{value:n},watch:{value:a},watchAll:{value:i},unwatch:{value:o},unwatchAll:{value:s}}))}(),LoadScreen=function(){function e(){jQuery(document).on("readystatechange.SugarCube",function(){o.size>0||("complete"===document.readyState?"loading"===jQuery(document.documentElement).attr("data-init")&&(Config.loadDelay>0?setTimeout(function(){0===o.size&&r()},Math.max(Engine.minDomActionDelay,Config.loadDelay)):r()):n())})}function t(){jQuery(document).off("readystatechange.SugarCube"),o.clear(),r()}function r(){jQuery(document.documentElement).removeAttr("data-init")}function n(){jQuery(document.documentElement).attr("data-init","loading")}function a(){return++s,o.add(s),n(),s}function i(e){if(null==e)throw new Error("LoadScreen.unlock called with a null or undefined ID");o.has(e)&&o.delete(e),0===o.size&&jQuery(document).trigger("readystatechange")}var o=new Set,s=0;return Object.freeze(Object.defineProperties({},{init:{value:e},clear:{value:t},hide:{value:r},show:{value:n},lock:{value:a},unlock:{value:i}}))}(),version=Object.freeze({title:"SugarCube",major:2,minor:30,patch:0,prerelease:null,build:9082,date:new Date("2019-09-26T20:43:20.257Z"),extensions:{},toString:function(){var e=this.prerelease?"-"+this.prerelease:"";return this.major+"."+this.minor+"."+this.patch+e+"+"+this.build},short:function(){var e=this.prerelease?"-"+this.prerelease:"";return this.title+" (v"+this.major+"."+this.minor+"."+this.patch+e+")"},long:function(){return this.title+" v"+this.toString()+" ("+this.date.toUTCString()+")"}}),TempState={},macros={},postdisplay={},postrender={},predisplay={},prehistory={},prerender={},session=null,settings={},setup={},storage=null,browser=Browser,config=Config,has=Has,History=State,state=State,tale=Story,TempVariables=State.temporary;window.SugarCube={},jQuery(function(){try{var e=LoadScreen.lock();LoadScreen.init(),document.normalize&&document.normalize(),Story.load(),storage=SimpleStore.create(Story.domId,!0),session=SimpleStore.create(Story.domId,!1),Dialog.init(),UIBar.init(),Engine.init(),Story.init(),L10n.init(),session.has("rcWarn")||"cookie"!==storage.name||(session.set("rcWarn",1),window.alert(L10n.get("warningNoWebStorage"))),Save.init(),Setting.init(),Macro.init(),Engine.start(),Config.debug&&DebugBar.init();var t=$(window),r=setInterval(function(){t.width()&&(clearInterval(r),setTimeout(function(){UIBar.start(),Config.debug&&DebugBar.start(),LoadScreen.unlock(e)},Engine.minDomActionDelay))},Engine.minDomActionDelay);window.SugarCube={Browser:Browser,Config:Config,Dialog:Dialog,Engine:Engine,Has:Has,L10n:L10n,Macro:Macro,Passage:Passage,Save:Save,Scripting:Scripting,Setting:Setting,SimpleAudio:SimpleAudio,State:State,Story:Story,UI:UI,UIBar:UIBar,DebugBar:DebugBar,Util:Util,Visibility:Visibility,Wikifier:Wikifier,session:session,settings:settings,setup:setup,storage:storage,version:version}}catch(e){return console.error(e),LoadScreen.clear(),Alert.fatal(null,e.message,e)}})}(window,window.document,jQuery);}
	</script>
</body>
</html>
